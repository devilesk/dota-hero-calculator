{"version":3,"sources":["node_modules/browser-pack/_prelude.js","../dota-hero-calculator-library/src/herocalc/hero/UnitOption.js","../dota-hero-calculator-library/src/herocalc/illusion/illusionOptionsArray.js","../dota-hero-calculator-library/src/herocalc/main.js","../dota-hero-calculator-library/src/herocalc/AbilityModel.js","../dota-hero-calculator-library/src/herocalc/BuffViewModel.js","../dota-hero-calculator-library/src/herocalc/buffs/BuffModel.js","../dota-hero-calculator-library/src/herocalc/buffs/buffOptionsArray.js","../dota-hero-calculator-library/src/herocalc/buffs/debuffOptionsArray.js","../dota-hero-calculator-library/src/herocalc/data/HeroCalcData.js","../dota-hero-calculator-library/src/herocalc/data/main.js","../dota-hero-calculator-library/src/herocalc/hero/CloneModel.js","../dota-hero-calculator-library/src/herocalc/hero/DamageTypeColor.js","../dota-hero-calculator-library/src/herocalc/hero/HeroDamageMixin.js","../dota-hero-calculator-library/src/herocalc/hero/HeroModel.js","../dota-hero-calculator-library/src/herocalc/hero/HeroOption.js","../dota-hero-calculator-library/src/herocalc/hero/IllusionModel.js","../dota-hero-calculator-library/src/herocalc/hero/TalentController.js","../dota-hero-calculator-library/src/herocalc/hero/UnitModel.js","../dota-hero-calculator-library/src/herocalc/hero/diffProperties.js","../dota-hero-calculator-library/src/herocalc/hero/heroOptionsArray.js","../dota-hero-calculator-library/src/herocalc/hero/nextLevelExp.js","../dota-hero-calculator-library/src/herocalc/hero/totalExp.js","../dota-hero-calculator-library/src/herocalc/herocalc_abilitydata.js","../dota-hero-calculator-library/src/herocalc/herocalc_knockout.js","../dota-hero-calculator-library/src/herocalc/illusion/IllusionOption.js","../dota-hero-calculator-library/src/herocalc/illusion/illusionData.js","../dota-hero-calculator-library/src/herocalc/inventory/BasicInventoryViewModel.js","../dota-hero-calculator-library/src/herocalc/inventory/InventoryViewModel.js","../dota-hero-calculator-library/src/herocalc/inventory/ItemInput.js","../dota-hero-calculator-library/src/herocalc/inventory/itemBuffOptions.js","../dota-hero-calculator-library/src/herocalc/inventory/itemDebuffOptions.js","../dota-hero-calculator-library/src/herocalc/inventory/itemOptionsArray.js","../dota-hero-calculator-library/src/herocalc/inventory/itemsWithActive.js","../dota-hero-calculator-library/src/herocalc/inventory/levelItems.js","../dota-hero-calculator-library/src/herocalc/inventory/stackableItems.js","../dota-hero-calculator-library/src/herocalc/inventory/validItems.js","../dota-hero-calculator-library/src/herocalc/util/extend.js","../dota-hero-calculator-library/src/herocalc/util/findWhere.js","../dota-hero-calculator-library/src/herocalc/util/getJSON.js","../dota-hero-calculator-library/src/herocalc/util/isEmpty.js","../dota-hero-calculator-library/src/herocalc/util/isString.js","../dota-hero-calculator-library/src/herocalc/util/main.js","../dota-hero-calculator-library/src/herocalc/util/union.js","../dota-hero-calculator-library/src/herocalc/util/uniqueId.js","../dota-hero-calculator-library/src/herocalc/util/uniques.js","../dota-hero-calculator-library/src/lib/knockout.mapping.js","../dota-hero-calculator-library/src/lib/knockout.wrap.js","node_modules/chart.js/Chart.js","node_modules/jquery-ui/ui/data.js","node_modules/jquery-ui/ui/disable-selection.js","node_modules/jquery-ui/ui/focusable.js","node_modules/jquery-ui/ui/ie.js","node_modules/jquery-ui/ui/keycode.js","node_modules/jquery-ui/ui/plugin.js","node_modules/jquery-ui/ui/position.js","node_modules/jquery-ui/ui/safe-active-element.js","node_modules/jquery-ui/ui/safe-blur.js","node_modules/jquery-ui/ui/scroll-parent.js","node_modules/jquery-ui/ui/tabbable.js","node_modules/jquery-ui/ui/unique-id.js","node_modules/jquery-ui/ui/version.js","node_modules/jquery-ui/ui/widget.js","node_modules/jquery-ui/ui/widgets/autocomplete.js","node_modules/jquery-ui/ui/widgets/button.js","node_modules/jquery-ui/ui/widgets/dialog.js","node_modules/jquery-ui/ui/widgets/draggable.js","node_modules/jquery-ui/ui/widgets/menu.js","node_modules/jquery-ui/ui/widgets/mouse.js","node_modules/jquery-ui/ui/widgets/resizable.js","node_modules/jquery-ui/ui/widgets/spinner.js","node_modules/rollbar-browser/dist/rollbar.umd.nojson.min.js","src/js/app/BuildExplorerViewModel.js","src/js/app/CloneViewModel.js","src/js/app/DamageAmpViewModel.js","src/js/app/HeroCalculatorViewModel.js","src/js/app/HeroDamageAmpMixin.js","src/js/app/HeroViewModel.js","src/js/app/IllusionViewModel.js","src/js/app/UnitViewModel.js","src/js/app/getParameterByName.js","src/js/app/herocalc_knockout.js","src/js/app/herocalc_tooltips_item.js","src/js/app/jquery-ui.custom.js","src/js/app/polyfill.js","src/js/components/ability-detail.js","src/js/components/shop.js","src/js/lib/Chart.scatter.js","src/js/main.js"],"names":["ko","require","abilityData","AbilityModel","a","h","self","this","hero","hasScepter","observable","isShapeShiftActive","abilities","_abilities","i","length","level","isActive","isDetail","baseDamage","baseDamageReductionPct","baseDamageMultiplier","bash","bashBonusDamage","bonusDamage","bonusDamageOrb","bonusDamagePct","bonusDamagePrecisionAura","bonusDamageReduction","bonusHealth","bonusStrength","bonusStrength2","bonusAgility","bonusAgility2","bonusInt","bonusAllStatsReduction","damageAmplification","damageReduction","evasion","magicResist","manaregen","manaregenreduction","missChance","movementSpeedFlat","movementSpeedPct","movementSpeedPctReduction","turnRateReduction","attackrange","attackspeed","attackspeedreduction","armor","armorReduction","healthregen","lifesteal","visionnight","visionday","abilityControlData","abilitySettingsData","data","parent","index","undefined","processAbility","args","result","v","v_list","controlType","extend","numeric","controlValueType","push","labelName","label","toUpperCase","controlVal","display","controlOptions","value","controls","noLevel","attributeValue","attributeName","fn","computed","_ability","find","b","name","getAbilityAttributeValue","attributes","g","r","getComputedFunction","returnProperty","ignoreTooltip","tooltip","getAbilityAttributeTooltip","clean","abilityModel","abilityName","pureComputed","inputValue","parseFloat","returnVal","call","getAbilityLevelByAbilityName","getAbilityByName","getAbilityPropertyValue","ability","property","utils","unwrapObservable","getAttributeBonusLevel","getAllStatsReduction","totalAttribute","behavior","indexOf","j","getStrengthReduction","getStrength","getAgility","attribute","getIntelligence","getArmor","getArmorBaseReduction","getArmorReduction","getHealth","isTrueFormActive","getHealthRegen","getMana","getManaRegen","getManaRegenArcaneAura","getManaRegenReduction","getAttackRange","getAttackSpeed","getAttackSpeedReduction","getBash","getBaseDamage","totalMultiplier","sources","damage","damageType","displayname","total","multiplier","getSelfBaseDamageReductionPct","getBaseDamageReductionPct","getBAT","getBonusDamage","getBonusDamagePercent","heroId","getBonusDamageBackstab","totalAttribute1","totalAttribute2","getBonusDamagePrecisionAura","getBonusDamageReduction","getBonusDamageReductionPct","getDamageAmplification","getDamageReduction","getCritSource","chance","count","getCleaveSource","radius","magnitude","getCritChance","getEvasion","getEvasionBacktrack","getMissChance","getLifesteal","getSpellAmp","getCooldownReductionFlat","getCooldownReductionPercent","getCooldownIncreaseFlat","getCooldownIncreasePercent","getMagicResist","getMagicResistReduction","getMovementSpeedFlat","getMovementSpeedPercent","getMovementSpeedPercentReduction","getTurnRateReduction","getVisionRangeNight","getVisionRangePctReduction","setEvasion","setMovementSpeed","MAX_MOVESPEED","MIN_MOVESPEED","getBashSource","attacktype","getOrbSource","totalInt","toggleAbility","event","bind","toggleAbilityDetail","getAbility","prototype","levelUpAbility","getAbilityLevelMax","availableSkillPoints","abilitytype","parseInt","selectedHeroLevel","skillPointHistory","levelDownAbility","splice","lastIndexOf","hasOwnProperty","d","replace","module","exports","InventoryViewModel","findWhere","buffOptionsArray","debuffOptionsArray","BuffViewModel","itemData","observableArray","availableBuffs","items","availableDebuffs","selectedBuff","buffs","itemBuffs","addBuff","buffName","JSON","parse","stringify","removeBuff","remove","dispose","toggleBuff","toggleBuffDetail","Object","create","constructor","BuffModel","heroData","unitData","buffDisplayName","init","HeroCalcData","getJSON","isEmpty","isString","out","arguments","key","resourceCounter","onResourceLoaded","callback","fixHeroData","modifyItemData","HERODATA_PATH","ITEMDATA_PATH","UNITDATA_PATH","HeroModel","CloneModel","p","DamageTypeColor","physical","pure","magic","default","HeroDamageMixin","critInfo","compareByMultiplier","critSources","inventory","critSourcesArray","prop","el","sort","critTotal","k","total2","totalChance","cleaveInfo","compareByRadius","cleaveSources","cleaveSourcesArray","cleaveSourcesByRadius","bashInfo","bashSources","bashSourcesArray","bashTotal","totalMovementSpeed","orbProcInfo","compareByDamage","priority","damageSources","getOrbProcSource","damageSourcesArray","damageTotal","getReducedDamage","type","enemy","totalArmorPhysical","Math","abs","totalMagicResistance","debuffs","damageTotalInfo","bonusDamageArray","bonusDamagePctArray","itemBonusDamage","itemBonusDamagePct","abilityOrbSources","itemOrbSources","itemProcOrbSources","attackSources","cooldown","cd","item","o","enabled","item_echo_sabre","attacks","map","totalDamage","totalCritableDamage","totalCrit","geminateAttack","damageReduced","active","crits","s","totalAgi","attacksPerSecond","max","dps","dpsReduced","pow","orb","keys","toFixed","totalReduced","totalCritReduced","base","crit","reduced","forEach","totalCritChance","reduce","memo","t1Crit","c","t2Crit","t3Crit","filter","t4Crit","t1","t2","t3","t4","totalCritRow","totalRow","visible","sourcesCrit","totalGeminateAttack","totalGeminateAttackReduced","sumTotal","sumTotalReduced","getDamageTypeColor","diffProperties","TalentController","totalExp","nextLevelExp","selectedInventory","heroCompare","unit","clone","talents","selectedTalents","arr","removeAll","talent","primaryAttribute","attributeprimary","startingArmor","attributebaseagility","armorphysical","respawnTime","reduction","getRespawnReduction","totalStr","attributeagilitygain","getAttributes","intStolen","attributebaseintelligence","attributeintelligencegain","attributebasestrength","attributestrengthgain","health","statushealth","floor","healthRegenAura","getHealthRegenAura","obj","excludeList","statushealthregen","mana","statusmana","statusmanaregen","getManaRegenPercent","getManaRegenBloodstone","armorAura","getArmorAura","totalArmorPhysicalReduction","totalArmor","spellAmp","cooldownReductionFlat","cooldownReductionProduct","cooldownReductionPercent","ms","movementSpeedPercent","movementSpeedPercentReduction","isSheeped","movementspeed","totalTurnRate","movementturnrate","abilityBaseDamage","minDamage","attackdamagemin","maxDamage","attackdamagemax","baseDamageAvg","baseDamageMin","baseDamageMax","damageAvg","damageMin","damageMax","totalMagicResistanceProduct","magicalresistance","getMagicResistReductionSelf","bat","abilityBAT","attackrate","ias","attackSpeed","attackSpeedReduction","val","attackTime","e","ehpPhysical","ehp","activeItems","some","ehpMagical","critChance","missDebuff","totalattackrange","visionrangeday","visionrangenight","visionnighttimerange","lifestealAura","getLifestealAura","diff","getDiffFunction","deferEvaluation","toggleTalent","talentTier","talentIndex","HeroOption","heroName","heroDisplayName","illusionData","IllusionModel","abilityLevel","illusionAbilityLevel","abilityObj","getIncomingDamageMultiplier","illusionType","attackType","incoming_damage_melee","incoming_damage_ranged","incoming_damage","getOutgoingDamageMultiplier","outgoing_damage_melee","outgoing_damage_ranged","outgoing_damage","startsWith","UnitModel","unitId","unitLevel","subscribe","newValue","heroOptionsArray","alchemist_acid_spray","alchemist_unstable_concoction","ancient_apparition_cold_feet","ancient_apparition_ice_blast","antimage_mana_void","axe_battle_hunger","bane_nightmare","bane_fiends_grip","batrider_sticky_napalm","batrider_firefly","bloodseeker_rupture","bristleback_viscous_nasal_goo","bristleback_quill_spray","damage_cap","bristleback_bristleback","text","bristleback_warpath","centaur_return","centaur_stampede","clinkz_death_pact","crystal_maiden_frostbite","dark_seer_ion_shell","dazzle_shadow_wave","dazzle_weave","death_prophet_exorcism","disruptor_static_storm","damagevalue","mult","doom_bringer_scorched_earth","doom_bringer_doom","dragon_knight_elder_dragon_form","drow_ranger_trueshot","earth_spirit_rolling_boulder","earthshaker_enchant_totem","earthshaker_echo_slam","elder_titan_ancestral_spirit","elder_titan_earth_splitter","enchantress_natures_attendants","enigma_malefice","enigma_midnight_pulse","enigma_black_hole","faceless_void_time_lock","gyrocopter_rocket_barrage","huskar_burning_spear","huskar_berserkers_blood","min","hp_threshold_max","huskar_life_break","invoker_quas","invoker_wex","invoker_exort","invoker_ghost_walk","invoker_alacrity","invoker_ice_wall","jakiro_dual_breath","jakiro_liquid_fire","jakiro_macropyre","juggernaut_blade_fury","juggernaut_healing_ward","juggernaut_omni_slash","keeper_of_the_light_illuminate","keeper_of_the_light_mana_leak","legion_commander_duel","leshrac_pulse_nova","lich_chain_frost","life_stealer_feast","life_stealer_open_wounds","lina_fiery_soul","lion_mana_drain","luna_moon_glaive","join","luna_eclipse","lucentBeamAbility","medusa_mystic_snake","snake_jumps","snake_scale","slice","medusa_mana_shield","meepo_poof","meepo_geostrike","mirana_arrow","arrow_min_stun","arrow_max_stunrange","scale","bonus_damage","morphling_morph_agi","morphling_morph_str","furion_wrath_of_nature","necrolyte_heartstopper_aura","necrolyte_sadist","hero_multiplier","night_stalker_crippling_fear","night_stalker_hunter_in_the_night","obsidian_destroyer_arcane_orb","ogre_magi_ignite","pudge_rot","pudge_flesh_heap","pudge_dismember","pugna_nether_ward","pugna_life_drain","queenofpain_shadow_strike","duration_damage","ticks","razor_plasma_field","max_radius","damage_min","damage_max","razor_static_link","tick_duration","drain_rate","razor_eye_of_the_storm","rubick_fade_bolt","sandking_sand_storm","sandking_epicenter","shadow_demon_shadow_poison","stackmult","nevermore_necromastery","nevermore_requiem","shadow_shaman_shackles","silencer_curse_of_the_silent","skywrath_mage_mystic_flare","slark_essence_shift","slark_shadow_dance","sniper_shrapnel","spectre_desolate","spectre_dispersion","storm_spirit_ball_lightning","distance_intervals","travel_cost_base","travel_cost_percent","templar_assassin_psionic_trap","max_slow","slow_per_tick","shredder_reactive_armor","shredder_chakram","interval","spirit_breaker_greater_bash","techies_land_mines","phys_reduction","magic_reduction","techies_suicide","techies_remote_mines","tinker_march_of_the_machines","treant_leech_seed","troll_warlord_fervor","undying_decay","str_steal_scepter","undying_soul_rip","undying_flesh_golem","min_speed_slow","full_power_radius","distance","min_damage_amp","ursa_fury_swipes","enrageAbility","enrage_multiplier","ursa_enrage","venomancer_venomous_gale","venomancer_poison_sting","venomancer_poison_nova","viper_poison_attack","viper_corrosive_skin","viper_viper_strike","visage_soul_assumption","soul_base_damage","stack_limit","visage_gravekeepers_cloak","warlock_shadow_word","warlock_upheaval","weaver_the_swarm","windrunner_powershot","winter_wyvern_cold_embrace","base_heal","wisp_spirits","wisp_overcharge","witch_doctor_paralyzing_cask","bounces","witch_doctor_voodoo_restoration","heal_per_tick","mana_per_tick","witch_doctor_maledict","duration","witch_doctor_death_ward","zuus_static_field","window","global","mapping","wrap","extenders","target","opts","read","write","current","roundingMultiplier","precision","newValueAsNum","isNaN","defaultValue","valueToWrite","round","notifySubscribers","notify","IllusionOption","baseHero","illusionName","illusionDisplayName","chaos_knight_phantasm","displayName","use_selected_hero","max_level","naga_siren_mirror_image","dark_seer_wall_of_replica","outgoing_damage_scepter","morphling_replicate","phantom_lancer_doppelwalk","phantom_lancer_juxtapose","phantom_lancer_spirit_lance","shadow_demon_disruption","spectre_haunt","terrorblade_conjure_image","terrorblade_reflection","item_manta","is_item","stackableItems","levelItems","itemsWithActive","BasicInventoryViewModel","addItem","selectedItem","new_item","split","state","size","itemInputValue","toggleItem","removeItem","toggleMuteItem","getItemImage","getItemSizeLabel","getActiveBorder","getItemAttributeValue","itemOptionsArray","itemBuffOptions","itemDebuffOptions","hasInventory","isEthereal","totalCost","itemcost","addItemBuff","selectedItemBuff","addItemDebuff","selectedItemDebuff","debuff","attributetype","aList","attributeList","selfExcludeList","hasBoots","hasEuls","hasWindLace","bootItems","hasYasha","hasDrums","hasDrumsActive","hasPhaseActive","hasShadowBladeActive","hasButterflyActive","hasMoMActive","yashaItems","hasPowerTreads","itemOptions","ItemInput","ItemAliases","Array","itemAlias","id","itemDebuffs","validItems","arrLoop","url","successCallback","errorCallback","request","XMLHttpRequest","open","onload","status","responseText","onerror","send","myVar","String","util","union","uniqueId","uniques","concat","idCounter","prefix","l","factory","define","unionArrays","x","y","res","extendObject","destination","source","destType","getType","bothArrays","merge","obj1","obj2","merged","fillOptions","rawOptions","otherOptions","options","recognizedRootProperties","ignore","mergeArrays","include","copy","observe","defaultOptions","mappedProperties","copiedProperties","arrayGetDistinctValues","withProxyDependentObservable","dependentObservables","localDO","dependentObservable","owner","realDeferEvaluation","isRemoved","DO","tmp","realKoDependentObservable","isWriteable","isWriteableObservable","wrapped","arrayRemoveItem","apply","DEBUG","_wrapper","__DO","realDependentObservable","updateViewModel","mappedRootObject","rootObject","parentName","parentPropertyName","mappedParent","isArray","isMapped","previousMapping","mappingProperty","callbackParams","hasCreateCallback","Function","createCallback","skip","emptyReturn","hasUpdateCallback","update","updateCallback","params","alreadyMapped","visitedObjects","get","changes","hasKeyCallback","keyCallback","isObservable","mappedRemove","valueOrPredicate","predicate","mappedRemoveAll","arrayOfValues","arrayOfKeys","filterArrayByKey","arrayIndexOf","mappedDestroy","destroy","mappedDestroyAll","mappedIndexOf","mappedGet","mappedCreate","Error","currentArrayKeys","newArrayKeys","editScript","compareArrays","ignoreIndexOf","unwrappedRootObject","itemsByKey","optimizedKeys","newContents","passedOver","mappedItem","fullPropertyName","getItemByKey","ignorableIndexOf","arrayChanged","arrayForEach","change","canHaveProperties","save","visitPropertiesOrArrayEntries","indexer","prevMappedProperty","retval","hasCreateOrUpdateCallback","array","ignoreIndices","mapKey","arrayMap","visitorCallback","propertyName","object","getPropertyName","simpleObjectLookup","values","existingIndex","objectLookup","buckets","findBucket","bucketKey","bucket","mappingNesting","_defaultOptions","viewModel","unwrapped","fromJS","jsObject","pop","fromJSON","jsonString","parsed","parseJson","updateFromJS","updateFromJSON","toJS","resetDefaultOptions","visitModel","toJSON","plainJavaScriptObject","stringifyJson","Date","propertyValue","previouslyMappedValue","typeOf","toString","unwrapObject","t","isComputed","unwrap","unwrapArray","reset","parents","lvl","wrapObject","computedFunctions","currentLvl","hasES5Plugin","track","wrapArray","root","previous","Chart","context","canvas","ctx","computeDimension","element","dimension","document","defaultView","getComputedStyle","getPropertyValue","width","height","aspectRatio","helpers","retinaScale","defaults","animation","animationSteps","animationEasing","showScale","scaleOverride","scaleSteps","scaleStepWidth","scaleStartValue","scaleLineColor","scaleLineWidth","scaleShowLabels","scaleLabel","scaleIntegersOnly","scaleBeginAtZero","scaleFontFamily","scaleFontSize","scaleFontStyle","scaleFontColor","responsive","maintainAspectRatio","showTooltips","customTooltips","tooltipEvents","tooltipFillColor","tooltipFontFamily","tooltipFontSize","tooltipFontStyle","tooltipFontColor","tooltipTitleFontFamily","tooltipTitleFontSize","tooltipTitleFontStyle","tooltipTitleFontColor","tooltipTitleTemplate","tooltipYPadding","tooltipXPadding","tooltipCaretSize","tooltipCornerRadius","tooltipXOffset","tooltipTemplate","multiTooltipTemplate","multiTooltipKeyBackground","segmentColorDefault","segmentHighlightColorDefaults","onAnimationProgress","onAnimationComplete","types","each","loopable","additionalArgs","objClone","extensionObject","master","unshift","arrayToSearch","inherits","where","collection","filterCallback","filtered","findNextWhere","startIndex","currentItem","findPreviousWhere","extensions","ChartElement","Surrogate","__super__","noop","uid","warn","str","console","amd","isNumber","n","isFinite","getDecimalPlaces","cap","valueToCap","maxValue","minValue","num","parts","toRadians","radians","degrees","PI","aliasPixel","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","pixelWidth","calculateOrderOfMagnitude","splineCurve","FirstPoint","MiddlePoint","AfterPoint","d01","d12","fa","fb","inner","outer","log","LN10","template","calculateScaleRange","valuesArray","drawingSize","textSize","startFromZero","integersOnly","minSteps","maxSteps","skipFitting","valueRange","rangeOrderOfMagnitude","graphMax","ceil","graphMin","graphRange","stepValue","numberOfSteps","steps","templateString","valuesObject","tmpl","test","cache","easingEffects","generateLabels","labelsArray","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","addEvent","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","animationLoop","totalSteps","easingString","onProgress","onComplete","chartInstance","currentStep","easingFunction","animationFrame","stepDecimal","easeDecimal","getRelativePosition","evt","mouseX","mouseY","originalEvent","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","left","clientY","top","node","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","unbindEvents","bindEvents","arrayOfEvents","events","eventName","chart","getMaximumWidth","domNode","container","parentNode","padding","getStyle","clientWidth","getMaximumHeight","clientHeight","currentStyle","getMaximumSize","devicePixelRatio","style","clear","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfStrings","longest","string","textWidth","measureText","drawRoundedRectangle","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","instances","Type","resize","initialize","stop","animationService","cancelAnimation","newWidth","newHeight","reflow","render","Animation","numSteps","easing","animationObject","draw","addAnimation","generateLegend","legendTemplate","removeProperty","removeAttribute","showTooltip","ChartElements","forceRedraw","activeElements","isChanged","Elements","changed","datasets","dataArray","dataIndex","points","bars","segments","tooltipLabels","tooltipColors","medianPosition","dataCollection","xMax","yMax","xMin","yMin","xPositions","yPositions","dataset","hasValue","fill","_saved","fillColor","stroke","strokeColor","MultiTooltip","xPadding","yPadding","xOffset","textColor","fontSize","titleTextColor","titleFontFamily","titleFontStyle","titleFontSize","cornerRadius","labels","legendColors","legendColorBackground","title","custom","Element","tooltipPosition","Tooltip","caretHeight","toBase64Image","toDataURL","ChartType","chartName","baseDefaults","config","configuration","restore","props","newProps","transition","ease","Point","inRange","chartX","chartY","hitDetectionRange","hitDetectionRadius","arc","strokeStyle","lineWidth","strokeWidth","fillStyle","Arc","pointRelativePosition","pointRelativeAngle","startAngle","endAngle","betweenAngles","withinRadius","innerRadius","outerRadius","centreAngle","rangeFromCentre","animationPercent","lineJoin","showStroke","Rectangle","halfWidth","leftX","rightX","halfStroke","xAlign","yAlign","caretPadding","tooltipWidth","tooltipRectHeight","tooltipHeight","tooltipX","tooltipY","textAlign","textBaseline","fillText","titleFont","titleHeight","titleWidth","labelWidth","longestTextWidth","halfHeight","getLineHeight","baseLineHeight","afterTitleIndex","fillRect","Scale","fit","buildYLabels","yLabels","stepDecimalPlaces","yLabelWidth","showLabels","addXLabel","xLabels","valuesCount","removeXLabel","shift","startPoint","endPoint","cachedYLabelWidth","cachedEndPoint","cachedHeight","calculateYRange","calculateXLabelRotation","firstRotated","lastRotated","firstWidth","lastWidth","xScalePaddingRight","xScalePaddingLeft","xLabelRotation","cosRotation","originalLabelWidth","xLabelWidth","xGridWidth","calculateX","drawingArea","calculateY","scalingFactor","innerWidth","valueWidth","valueOffset","offsetGridLines","yLabelGap","xStart","labelString","yLabelCenter","linePositionY","drawHorizontalLine","showHorizontalLines","gridLineWidth","gridLineColor","lineColor","xPos","linePos","isRotated","drawVerticalLine","showVerticalLines","translate","rotate","RadialScale","backdropPaddingY","calculateCenterOffset","lineArc","setScaleSize","getCircumference","pointPosition","halfTextWidth","furthestRightIndex","furthestRightAngle","furthestLeftIndex","furthestLeftAngle","xProtrusionLeft","xProtrusionRight","radiusReductionRight","radiusReductionLeft","largestPossibleRadius","pointLabelFontSize","furthestRight","furthestLeft","pointLabelFontStyle","pointLabelFontFamily","getPointPosition","getIndexAngle","setCenterPoint","leftMovement","rightMovement","maxRight","maxLeft","xCenter","yCenter","angleMultiplier","distanceFromCenter","thisAngle","yCenterOffset","yHeight","showLabelBackdrop","backdropColor","backdropPaddingX","fontColor","angleLineWidth","angleLineColor","centerOffset","outerPosition","angleLineInterval","backgroundColors","previousOuterPosition","nextOuterPosition","previousOuterHalfway","nextOuterHalfway","pointLabelPosition","pointLabelFontColor","labelsCount","halfLabelsCount","quarterLabelsCount","upperHalf","exactQuarter","frameDuration","animations","dropFrames","digestWrapper","animationWrapper","startDigest","startTime","now","framesToDrop","endTime","delay","frameDelay","timeout","instance","noConflict","defaultConfig","scaleShowGridLines","scaleGridLineColor","scaleGridLineWidth","scaleShowHorizontalLines","scaleShowVerticalLines","barShowStroke","barStrokeWidth","barValueSpacing","barDatasetSpacing","ScaleClass","calculateBarX","datasetCount","datasetIndex","barIndex","xWidth","calculateBaseWidth","xAbsolute","barWidth","calculateBarWidth","baseWidth","activeBars","getBarsAtEvent","eachBars","bar","activeBar","highlightFill","highlightStroke","BarClass","datasetObject","dataPoint","datasetLabel","buildScale","activeElement","barsArray","eventPosition","datasetIterator","dataTotal","scaleOptions","beginAtZero","currentHeight","updatedRanges","addData","removeData","newScaleProps","easingDecimal","segmentShowStroke","segmentStrokeColor","segmentStrokeWidth","percentageInnerCutout","animateRotate","animateScale","SegmentArc","activeSegments","getSegmentsAtEvent","segment","activeSegment","highlightColor","calculateTotal","datapoint","color","segmentsArray","location","atIndex","silent","highlight","circumference","calculateCircumference","indexToDelete","animDecimal","Doughnut","bezierCurve","bezierCurveTension","pointDot","pointDotRadius","pointDotStrokeWidth","pointHitDetectionRadius","datasetStroke","datasetStrokeWidth","datasetFill","PointClass","activePoints","getPointsAtEvent","eachPoints","point","activePoint","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","pointsArray","nextPoint","previousPoint","pointsWithValues","tension","controlPoints","bezierCurveTo","scaleShowLabelBackdrop","scaleBackdropColor","scaleBackdropPaddingY","scaleBackdropPaddingX","scaleShowLine","updateScaleRange","datapoints","scaleSizes","angleShowLineOut","activePointsCollection","mousePosition","fromCenter","anglePerIndex","pointIndex","scaleBackgroundColors","totalDataArray","jQuery","$","expr","createPseudo","dataName","elem","match","disableSelection","createElement","on","preventDefault","enableSelection","off","visibility","css","ui","focusable","hasTabindex","mapName","img","focusableIfVisible","fieldset","nodeName","toLowerCase","href","is","disabled","closest","attr","ie","exec","navigator","userAgent","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","plugin","add","option","set","proto","plugins","allowDisconnected","nodeType","getOffsets","offsets","rpercent","parseCss","getDimensions","raw","offset","isWindow","scrollTop","scrollLeft","pageY","pageX","outerWidth","outerHeight","cachedScrollbarWidth","rhorizontal","rvertical","roffset","rposition","_position","position","scrollbarWidth","w1","w2","div","innerDiv","children","append","offsetWidth","getScrollInfo","within","overflowX","isDocument","overflowY","hasOverflowX","scrollWidth","hasOverflowY","scrollHeight","getWithinInfo","withinElement","hasOffset","of","atOffset","targetWidth","targetHeight","targetOffset","basePosition","dimensions","scrollInfo","collision","at","horizontalOffset","verticalOffset","pos","collisionPosition","using","elemWidth","elemHeight","marginLeft","marginTop","collisionWidth","collisionHeight","myOffset","my","dir","right","bottom","feedback","horizontal","vertical","important","newOverRight","withinOffset","collisionPosLeft","overLeft","overRight","newOverBottom","collisionPosTop","overTop","overBottom","flip","newOverLeft","offsetLeft","newOverTop","offsetTop","flipfit","safeActiveElement","error","body","safeBlur","trigger","scrollParent","includeHidden","excludeStaticParent","overflowRegex","eq","ownerDocument","tabbable","tabIndex","uuid","removeUniqueId","removeAttr","version","widgetUuid","widgetSlice","cleanData","orig","elems","_data","triggerHandler","widget","existingConstructor","basePrototype","proxiedPrototype","namespace","fullName","Widget","_createWidget","_proto","_childConstructors","isFunction","_super","_superApply","returnValue","__super","__superApply","widgetEventPrefix","widgetName","widgetFullName","child","childPrototype","bridge","input","inputIndex","inputLength","isPlainObject","isMethodCall","methodValue","charAt","jquery","pushStack","_init","defaultElement","classes","eventNamespace","bindings","hoverable","classesElementLookup","_on","parentWindow","_getCreateOptions","_create","_setOptionDisabled","_trigger","_getCreateEventData","that","_destroy","_removeClass","curOption","_setOptions","_setOption","_setOptionClasses","classKey","elements","currentElements","addClass","_classes","_toggleClass","enable","disable","processClassString","checkOption","unique","not","full","extra","_untrackClassesElement","inArray","_addClass","toggleClass","suppressDisabledCheck","handlers","delegateElement","handlerProxy","hasClass","guid","selector","_off","_delay","_hoverable","mouseenter","mouseleave","_focusable","focusin","focusout","Event","isDefaultPrevented","show","hide","defaultEffect","effect","hasOptions","effectName","isEmptyObject","complete","effects","queue","next","appendTo","autoFocus","minLength","close","focus","response","search","select","requestIndex","pending","suppressKeyPress","suppressKeyPressRepeat","suppressInput","isTextarea","isInput","isMultiLine","_isContentEditable","valueMethod","isNewMenu","keydown","_move","_keyEvent","menu","_value","term","_searchTimeout","keypress","blur","cancelBlur","searching","_change","_initSource","_appendTo","role","mousedown","menufocus","one","trim","liveRegion","menuselect","aria-live","aria-relevant","beforeunload","xhr","abort","_isEventTargetInWidget","menuElement","contains","_closeOnClickOutside","autocomplete","ajax","dataType","success","equalValues","menuVisible","modifierKey","altKey","ctrlKey","metaKey","shiftKey","_search","cancelSearch","_response","proxy","content","__response","_normalize","_suggest","_close","ul","empty","_renderMenu","refresh","_resizeMenu","_renderItemData","_renderItem","direction","isFirstItem","isLastItem","keyEvent","editable","escapeRegex","matcher","RegExp","grep","messages","noResults","results","amount","message","ui-button","icon","iconPosition","showLabel","originalLabel","html","hasTitle","_enhance","keyup","click","_updateIcon","_updateTooltip","displayBlock","_attachIcon","iconSpace","_attachIconSpace","newShowLabel","newIcon","isDisabled","uiBackCompat","button","icons","primary","secondary","tagName","checkboxradio","buttonset","controlgroup","autoOpen","buttons","ui-dialog","ui-dialog-titlebar","closeOnEscape","closeText","draggable","maxHeight","maxWidth","minHeight","minWidth","modal","topOffset","resizable","beforeClose","drag","dragStart","dragStop","resizeStart","resizeStop","sizeRelatedOptions","resizableRelatedOptions","originalCss","originalPosition","originalTitle","_createWrapper","uiDialog","_createTitlebar","_createButtonPane","_makeDraggable","_makeResizable","_isOpen","_trackFocus","_untrackInstance","_destroyOverlay","detach","before","_focusedElement","opener","_hide","isOpen","moveToTop","_moveToTop","moved","zIndices","siblings","zIndexMax","_focusTabbable","_size","_createOverlay","overlay","_show","_makeFocusTarget","hasFocus","uiDialogButtonPane","uiDialogTitlebarClose","_keepFocus","checkFocus","tabbables","first","last","aria-describedby","uiDialogTitle","uiDialogTitlebar","prependTo","_title","aria-labelledby","uiButtonSet","_createButtons","buttonOptions","filteredUi","cancel","handle","containment","start","_blockFrames","_unblockFrames","originalSize","handles","resizeHandles","alsoResize","_minHeight","_trackingInstances","exists","isVisible","resizableOptions","isDraggable","isResizable","nonContentHeight","minContentHeight","maxContentHeight","iframeBlocks","iframe","_allowInteraction","isOpening","overlays","dialog","dialogClass","removeClass","mouse","addClasses","axis","connectToSortable","cursor","cursorAt","grid","helper","iframeFix","opacity","refreshPositions","revert","revertDuration","scope","scroll","scrollSensitivity","scrollSpeed","snap","snapMode","snapTolerance","stack","zIndex","_setPositionRelative","_setHandleClassName","_mouseInit","_removeHandleClassName","destroyOnClear","_mouseDestroy","_mouseCapture","_getHandle","_blurActiveElement","_mouseStart","_createHelper","_cacheHelperProportions","ddmanager","_cacheMargins","cssPosition","offsetParent","hasFixedAncestor","positionAbs","_refreshOffsets","_generatePosition","originalPageX","originalPageY","_adjustOffsetFromHelper","_setContainment","_clear","dropBehaviour","prepareOffsets","_mouseDrag","margins","_getParentOffset","relative","_getRelativeOffset","noPropagation","_convertPositionTo","_uiHash","_mouseUp","_mouseStop","dropped","drop","animate","handleElement","helperIsFunction","helperProportions","_isRootNode","po","scrollIsRootNode","isUserScrollable","ce","relativeContainer","offsetHeight","mod","constrainPosition","co","cancelHelperRemoval","uiSortable","sortables","sortable","isOver","_storedCSS","placeholder","_helper","innermostIntersecting","_intersectsWith","containerCache","_parent","fromOutside","_revert","_cursor","_opacity","scrollParentNotHidden","overflowOffset","scrolled","snapElements","$t","$o","inst","ts","bs","ls","rs","x1","x2","y1","y2","snapping","release","snapItem","group","makeArray","_zIndex","submenu","menus","activeMenu","mouseHandled","mousedown .ui-menu-item","click .ui-menu-item","isPropagationStopped","has","expand","timer","mouseenter .ui-menu-item","previousFilter","actualTarget","mouseleave .ui-menu","keepActiveItem","notContained","collapseAll","_closeOnDocumentClick","submenus","addBack","_keydown","prev","character","previousPage","nextPage","collapse","_activate","fromCharCode","filterTimer","_filterMenuItems","nextAll","newSubmenus","newItems","newWrappers","aria-hidden","aria-expanded","submenuCaret","prepend","_isDivider","_itemRole","listbox","nested","focused","activeParent","_scrollIntoView","_startOpening","borderTop","paddingTop","elementHeight","itemHeight","_hasScroll","fromFocus","_open","all","currentMenu","startMenu","newItem","prevAll","escapedCharacter","regex","_mouseDown","stopImmediatePropagation","started","_mouseMoveDelegate","_mouseUpDelegate","_mouseMoved","_mouseStarted","_mouseDownEvent","btnIsLeft","which","elIsCancel","mouseDelayMet","_mouseDelayTimer","_mouseDistanceMet","_mouseDelayMet","_mouseMove","documentMode","ignoreMissingWhich","animateDuration","animateEasing","autoHide","ui-resizable-se","ghost","_num","_isNumber","_aspectRatio","originalElement","_proportionallyResizeElements","elementIsWrapper","marginRight","marginBottom","originalResizeStyle","zoom","_proportionallyResize","_setupHandles","_handles","resizing","wrapper","exp","insertAfter","_removeHandles","hname","w","se","sw","ne","nw","_renderAxis","padPos","padWrapper","className","capture","curleft","curtop","_renderProxy","sizeDiff","originalMousePosition","_propagate","smp","dx","dy","_updatePrevProperties","_updateVirtualBoundaries","_updateRatio","_respectSize","_updateCache","_applyChanges","pr","ista","soffseth","soffsetw","prevPosition","prevSize","forceAspectRatio","pMinWidth","pMaxWidth","pMinHeight","pMaxHeight","Infinity","_vBoundaries","cpos","csize","ismaxw","ismaxh","isminw","isminh","dw","dh","cw","ch","_getPaddingPlusBorderDimensions","widths","borders","paddings","prel","outerDimensions","elementOffset","cs","sp","step","oc","containerElement","containerOffset","containerPosition","parentData","containerSize","innerHeight","woset","hoset","isParent","isOffsetRelative","cp","pRatio","cop","continueResize","ho","os","op","delta","sum","margin","removeChild","gridX","gridY","ox","oy","isMaxWidth","isMaxHeight","isMinWidth","isMinHeight","spinnerModifer","_refresh","ui-spinner","ui-spinner-down","ui-spinner-up","culture","down","up","incremental","numberFormat","page","spin","_draw","_events","_start","_stop","mousewheel","spinning","_spin","mousewheelTimer","mousedown .ui-spinner-button","_repeat","mouseup .ui-spinner-button","mouseenter .ui-spinner-button","mouseleave .ui-spinner-button","uiSpinner","counter","_adjustValue","_increment","_precision","_precisionOf","decimal","aboveMin","prevValue","_parse","_format","Globalize","format","aria-valuemin","aria-valuemax","aria-valuenow","isValid","allowAny","replaceWith","stepUp","_stepUp","stepDown","_stepDown","pageUp","pages","pageDown","newVal","spinner","_uiSpinnerHtml","_buttonHtml","loaded","m","setupJSON","_rollbarConfig","globalAlias","u","shimId","Rollbar","RollbarNotifier","Notifier","_rollbarWrappedError","uncaughtError","_wrapped","configure","captureUncaught","isType","_rollbarOldOnError","belongsToShim","captureUnhandledRejections","_unhandledRejectionHandler","reason","promise","detail","unhandledRejection","processPayloads","E","f","_","DEFAULT_ENDPOINT","endpoint","environment","scrubFields","DEFAULT_SCRUB_FIELDS","checkIgnore","logLevel","DEFAULT_LOG_LEVEL","reportLevel","DEFAULT_REPORT_LEVEL","uncaughtErrorLevel","DEFAULT_UNCAUGHT_ERROR_LEVEL","payload","lastError","parentNotifier","notifier","_rollbarPayloadQueue","_getLogArgs","_log","err","guessErrorClass","exception","class","description","frames","filename","sanitizeUrl","lineno","line","func","colno","column","code","pre","post","reverse","trace","endpointUrl","accessToken","getTime","L","R","_globalRollbarOptions","maxItems","itemsPerMinute","ignoreRateLimit","T","RETRY_DELAY","XHR","ConnectionError","NOTIFIER_VERSION","DEFAULT_ITEMS_PER_MIN","DEFAULT_MAX_ITEMS","LEVELS","debug","info","warning","critical","typeName","DOMException","extraArgs","_route","substring","_processShimQueue","shim","parentShim","_buildPayload","uuid4","platform","framework","language","_buildBody","query_string","user_ip","client","runtime_ms","timestamp","javascript","browser","cookie_enabled","cookieEnabled","screen","_getBrowserPlugins","server","access_token","_scrub","_browserPlugins","redact","_getScrubFieldRegexs","_getScrubQueryParamRegexs","traverse","_urlIsWhitelisted","hostWhiteList","_messageIsIgnored","ignoredMessages","_enqueuePayload","_internalCheckIgnore","verbose","logFunction","transform","ignoreAjaxErrors","isAjax","_savedStackTrace","guessFunctionName","gatherContext","mode","useragent","_rollbarContext","_isWrap","_wrappedSource","loadFull","topLevelNotifier","_stackFrame","fileName","lineNumber","functionName","columnNumber","Stack","Frame","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","parseOpera9","parseOpera11","parseOpera10","setFunctionName","setArgs","setFileName","setLineNumber","setColumnNumber","setSource","getFunctionName","getArgs","TypeError","getFileName","getLineNumber","Number","getColumnNumber","getSource","parser","strictMode","q","anchor","query","random","strict","loose","parseUri","parseUriOptions","XMLHttpFactories","ActiveXObject","createXMLHTTPObject","readyState","setRequestHeader","onreadystatechange","XDomainRequest","onprogress","ontimeout","inventoryClipBoard","GraphPropertyOption","isQWER","BuildExplorerViewModel","itemBuild","skillBuild","graphDataItemRows","carryOver","toggleItemBuildCarryOver","abilityMapData","abilityMapHero","selectedHero","abilityMap","newMap","abilityValue","abilityIndex","availableSkillBuildPoints","getSkillBuildAbilityLevel","toggleAbilitySkillBuild","skillBuildSlice","IsValidAbilityLevel","heroLevel","resetItemBuild","resetAllItemBuilds","resetSkillBuild","graphData","graphDataHeader","graphDataDescription","graphProperties","graph","savedAbilityLevels","savedLevel","savedItems","savedActiveItems","carryOverItems","carryOverActiveItems","skillBuildSubset","dataObj","header","cumulativeSkillBuild","skillBuildAtLevel","removeGraphDataSet","selectedGraphProperty","graphChartOptions","graphChartData","graphDistinctColor","alpha","rgba","hslToRgb","getDistinctColor","hue2rgb","showGraphItemBuildRows","showGraphSkillBuildColumns","graphRowHasItems","selectInventory","getSelectedInventory","copyInventory","copyInventoryToClipBoard","pasteInventoryFromClipBoard","loadGraphData","sectionDisplay","graphChartContext","exportImage","HeroCalc","DamageAmpViewModel","HeroDamageAmpMixin","CloneViewModel","bound","buff","damageamp","illusion","skillbuild","skillbuild-skills","skillbuild-items","sectionDisplayToggle","section","showUnitTab","showDiff","showCriticalStrikeDetails","showDamageDetails","showStatDetails","showDamageAmpCalcDetails","getAbilityDamageAmpValue","getDamageMultiplierSources","components","register","abilityDetail","getItemTooltipData","HeroViewModel","UnitViewModel","PlayerColors","Tab","TabGroup","illusions","HeroCalculatorViewModel","tooltipURL","heroes","abilityTooltipData","enemies","otherHeroes","selectedCompare","availableCompare","selectedEnemy","availableEnemies","selectedUnit","availableUnits","tabs","vm","tabsArr","tabGroup","layout","displayShop","displayShopItemTooltip","allItems","selectedItems","moveUp","end","moveDown","selectedTabId","getSelectedTab","tabId","indices","tab","selectedTab","selectedTabs","boundSettings","clickTab","buildExplorer","valueHasMutated","isSecondTab","showSideTabId","sideView","removeTab","shopPopout","$window","windowWidth","windowHeight","shopDock","shopDockTrigger","dblclick","changeSelectedItem","getItemInputLabel","saveLink","getAppState","getSaveData","enemyIndex","heroCompareIndex","serialized","protocol","host","pathname","file","failure","errMsg","alert","load","availableHeroes","sendReport","email","done","getProperty","properties","getDiffTextWrapper","getDiffText","getDiffMagnitude","highlightedTabInternal","highlightedTab","throttle","highlightTab","unhighlightTab","DamageInstance","damageBrackets","getDamageAfterBracket","initialDamage","bracket","processDamageAmpReducBracket","getDamageAmpReducInstance","getDamageAmpReduc","sourcesAmp","sourcesReduc","b4","damageInputValue","damageInputModified","illusionOptionsArray","IllusionViewModel","HeroOption2","HeroOptions","availableIllusions","selectedIllusion","illusionAbilityMaxLevel","addIllusion","playerColorCss","heroOption","setHeroOptionStyling","applyBindingsToNode","UnitOption","selectedUnitLevel","getParameterByName","decodeURIComponent","bindingHandlers","stopBinding","controlsDescendantBindings","virtualElements","allowedBindings","lazyBinding","valueAccessor","allBindingsAccessor","bindingContext","domData","isBound","applyBindingsToDescendants","itemBuildTable","pressedKeys","keyDownHandler","keyUpHandler","$hoveredRows","fadeOut","fadeIn","domNodeDisposal","addDisposeCallback","unbind","preventBubble","registerEventHandler","cancelBubble","stopPropagation","toggle","shopDockStyle","$data","overflow-y","logger","allBindings","$element","isToolTipVisible","origAnimation","popover","popoverBindingValues","popoverData","popoverEl","$tip","buttonPosition","buttonDimensions","popoverDimensions","placement","newCanvas","getContext","chartType","chartOptions","chartContext","myChart","$root","spinnerOptions","secondTab","second-tab","hoverTab","hoverPaneStyle","diffStyle","diffPos","diffNeg","diffCss","stat","diffCssStat","jqAuto","writeValueToModel","modelValue","jqAutoValue","jqAutoSource","valueProp","jqAutoSourceValue","inputValueProp","jqAutoSourceInputValue","labelProp","jqAutoSourceLabel","actualValue","currentValue","matchingItem","arrayFirst","mappedSource","mapped","jqAutoCombo","autoEl","itemtooltipdata","ability_vars","$health","$mana","$armor","$damage","$str","$int","$agi","$all","$attack","$hp_regen","$mana_regen","$move_speed","$evasion","$spell_resist","$selected_attribute","$selected_attrib","$cast_range","$attack_range","getTooltipItemDescription","regexp","getTooltipItemAttributes","attributeTooltip","getTooltipItemCooldown","getTooltipItemManaCost","manacost","attributedata","cdmanacost","lore","initSource","list","thisArg","searchString","substr","AttributeTooltip","sep","suffix","ViewModel","getTooltipAbilityDescription","abilityDamageTypes","abilityunitdamagetype","getTooltipAbilityManaCost","getTooltipAbilityCooldown","getTooltipAbilityAttributes","DAMAGE_TYPE_MAGICAL","DAMAGE_TYPE_PURE","DAMAGE_TYPE_PHYSICAL","DAMAGE_TYPE_COMPOSITE","DAMAGE_TYPE_HP_REMOVAL","every","Line","App","appConfig","addUserAction","userActions","actionTrackWrapper","src","textContent","getAttribute","callbackWrap","argumentIndex","wrapperFactory","eventFilter","original","abilityTooltipPath","deferUpdates","applyBindings","saveId","lastUpdate","rollbarConfig","source_map_enabled","code_version","guess_uncaught_frames","rollbar","old","logEl","querySelector","msg","classList","closeBtn","innerHTML","onclick","appendChild","reportEl","clientLogCreated","heroCalcState","appState"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var UnitOption=function(t,i,e,o,n){this.heroName=ko.computed(function(){return e>0?t+(n()<=e?n():1):t}),this.heroDisplayName=i,this.image=o,this.levels=e};module.exports=UnitOption;","var IllusionOption=require(\"./IllusionOption\"),illusionData=require(\"./illusionData\"),illusionOptionsArray=[];for(var h in illusionData)illusionOptionsArray.push(new IllusionOption(h,illusionData[h].displayName,illusionData[h].hero));module.exports=illusionOptionsArray;","\"use strict\";var core={};core.InventoryViewModel=require(\"./inventory/InventoryViewModel\"),core.AbilityModel=require(\"./AbilityModel\"),core.BuffViewModel=require(\"./BuffViewModel\"),core.HeroModel=require(\"./hero/HeroModel\"),core.CloneModel=require(\"./hero/CloneModel\"),core.UnitModel=require(\"./hero/UnitModel\"),core.IllusionModel=require(\"./hero/IllusionModel\"),core.Data=require(\"./data/main\"),core.Util=require(\"./util/main\"),core.init=function(e,r,o,i){core.Data.init(e,r,o,function(){core.HeroOptions=require(\"./hero/heroOptionsArray\").init(core.Data.heroData),core.BuffOptions=require(\"./buffs/buffOptionsArray\").init(core.Data.heroData,core.Data.unitData),core.DebuffOptions=require(\"./buffs/debuffOptionsArray\").init(core.Data.heroData,core.Data.unitData),core.ItemOptions=require(\"./inventory/itemOptionsArray\").init(core.Data.itemData),core.ItemBuffOptions=require(\"./inventory/itemBuffOptions\").init(core.Data.itemData),core.ItemDebuffOptions=require(\"./inventory/itemDebuffOptions\").init(core.Data.itemData),i()})},module.exports=core;","'use strict';\nvar ko = require('./herocalc_knockout');\nvar abilityData = require(\"./herocalc_abilitydata\");\n\nvar AbilityModel = function (a, h) {\n    var self = this;\n    self.hero = h;\n    self.abilityData = abilityData;\n    self.hasScepter = ko.observable(false);\n    self.isShapeShiftActive = ko.observable(false);\n    self.abilities = a;\n    self._abilities = self.abilities();\n    for (var i = 0; i < self.abilities().length; i++) {\n        self._abilities[i].level = ko.observable(0);\n        self._abilities[i].isActive = ko.observable(false);\n        self._abilities[i].isDetail = ko.observable(false);\n        self._abilities[i].baseDamage = ko.observable(0);\n        self._abilities[i].baseDamageReductionPct = ko.observable(0);\n        self._abilities[i].baseDamageMultiplier = ko.observable(0);\n        self._abilities[i].bash = ko.observable(0);\n        self._abilities[i].bashBonusDamage = ko.observable(0);\n        self._abilities[i].bonusDamage = ko.observable(0);\n        self._abilities[i].bonusDamageOrb = ko.observable(0);\n        self._abilities[i].bonusDamagePct = ko.observable(0);\n        self._abilities[i].bonusDamagePrecisionAura = ko.observable(0);\n        self._abilities[i].bonusDamageReduction = ko.observable(0);\n        self._abilities[i].bonusHealth = ko.observable(0);\n        self._abilities[i].bonusStrength = ko.observable(0);\n        self._abilities[i].bonusStrength2 = ko.observable(0);\n        self._abilities[i].bonusAgility = ko.observable(0);\n        self._abilities[i].bonusAgility2 = ko.observable(0);\n        self._abilities[i].bonusInt = ko.observable(0);\n        self._abilities[i].bonusAllStatsReduction = ko.observable(0);\n        self._abilities[i].damageAmplification = ko.observable(0);\n        self._abilities[i].damageReduction = ko.observable(0);\n        self._abilities[i].evasion = ko.observable(0);\n        self._abilities[i].magicResist = ko.observable(0);\n        self._abilities[i].manaregen = ko.observable(0);\n        self._abilities[i].manaregenreduction = ko.observable(0);\n        self._abilities[i].missChance = ko.observable(0);\n        self._abilities[i].movementSpeedFlat = ko.observable(0);\n        self._abilities[i].movementSpeedPct = ko.observable(0);\n        self._abilities[i].movementSpeedPctReduction = ko.observable(0);\n        self._abilities[i].turnRateReduction = ko.observable(0);\n        self._abilities[i].attackrange = ko.observable(0);\n        self._abilities[i].attackspeed = ko.observable(0);\n        self._abilities[i].attackspeedreduction = ko.observable(0);\n        self._abilities[i].armor = ko.observable(0);\n        self._abilities[i].armorReduction = ko.observable(0);\n        self._abilities[i].healthregen = ko.observable(0);\n        self._abilities[i].lifesteal = ko.observable(0);\n        self._abilities[i].visionnight = ko.observable(0);\n        self._abilities[i].visionday = ko.observable(0);\n    }\n    self.abilityControlData = {};\n    self.abilitySettingsData = function (data, parent, index) {\n        if (self.abilityControlData[data] == undefined) {\n            return self.processAbility(data, parent, index, self.abilityData[data]);\n        }\n        else {\n            return self.abilityControlData[data];\n        }\n    }\n    \n    self.processAbility = function (data, parent, index, args) {\n        var result = {};\n        result.data = [];\n        var v;\n        var v_list = [];\n        for (var i=0; i < args.length; i++) {\n            switch (args[i].controlType) {\n                case 'input':\n                    v = ko.observable(0).extend({ numeric: 2 });\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + ':', controlVal: v, controlType: args[i].controlType, display: args[i].display });\n                break;\n                case 'checkbox':\n                    v = ko.observable(false);\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + '?', controlVal: v, controlType: args[i].controlType, display: args[i].display });\n                break;\n                case 'radio':\n                    v = ko.observable(args[i].controlOptions[0].value);\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + '?', controlVal: v, controlType: args[i].controlType, display: args[i].display, controlOptions: args[i].controlOptions });\n                break;\n                case 'method':\n                case 'text':\n                    // single input abilities\n                    if (args[i].controls == undefined) {\n                        if (args[i].noLevel) {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    var _ability = self.abilities().find(function(b) {\n                                        return b.name == data;\n                                    });\n                                    return self.getAbilityAttributeValue(_ability.attributes, attributeName, 0);\n                                })};\n                            };\n                        }\n                        else {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    var _ability = self.abilities().find(function(b) {\n                                        return b.name == data;\n                                    });\n                                    return self.getAbilityAttributeValue(_ability.attributes, attributeName, _ability.level());\n                                })};\n                            };\n                        }\n                        var g = attributeValue(args[i].attributeName)\n                        var r = self.getComputedFunction(v, g.fn, args[i].fn, parent, index, self, args[i].returnProperty, undefined, data);\n                        if (args[i].ignoreTooltip) {\n                            var tooltip = args[i].label || args[i].attributeName;\n                        }\n                        else {\n                            var tooltip = self.getAbilityAttributeTooltip(self.abilities()[index].attributes, args[i].attributeName) || args[i].label || args[i].attributeName;\n                        }\n                        result.data.push({ labelName: tooltip.toUpperCase(), controlVal: r, controlType: args[i].controlType, display: args[i].display, clean: g.fn });\n                    }\n                    // multi input abilities\n                    else {\n                        if (args[i].noLevel) {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    return self.getAbilityAttributeValue(self.abilities()[index].attributes, attributeName, 0);\n                                })};\n                            };\n                        }\n                        else {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    return self.getAbilityAttributeValue(self.abilities()[index].attributes, attributeName, self.abilities()[index].level());\n                                })};\n                            };\n                        }\n                        var g = attributeValue(args[i].attributeName)\n                        var r = self.getComputedFunction(v_list, g.fn, args[i].fn, parent, index, self, args[i].returnProperty, args[i].controls, data);\n                        if (args[i].ignoreTooltip) {\n                            var tooltip = args[i].label || args[i].attributeName;\n                        }\n                        else {\n                            var tooltip = self.getAbilityAttributeTooltip(self.abilities()[index].attributes, args[i].attributeName) || args[i].label || args[i].attributeName;\n                        }\n                        result.data.push({ labelName: tooltip.toUpperCase(), controlVal: r, controlType: args[i].controlType, display: args[i].display, clean: g.fn });\n                    }\n                    \n                    if (args[i].controlType == 'method') {\n                        v_list.push(r);\n                    }\n                break;\n            }\n        }\n        self.abilityControlData[data] = result;\n        return result;\n    }\n\n    self.getComputedFunction = function (v, attributeValue, fn, parent, index, abilityModel, returnProperty, controls, abilityName) {\n        var _ability = abilityModel.abilities().find(function(b) {\n            return b.name == abilityName;\n        });\n        return ko.pureComputed(function () {                \n            var inputValue;\n            if (controls == undefined) {\n                if (v == undefined) {\n                    inputValue = v;\n                }\n                else if (typeof v() == 'boolean') {\n                    inputValue = v();\n                }\n                else if (v.controlValueType == undefined) {\n                    inputValue = parseFloat(v());\n                }\n                else if (v.controlValueType == 'string') {\n                    inputValue = v();\n                }\n                else {\n                    inputValue = parseFloat(v());\n                }\n            }\n            else {\n                var v_list = [];\n                for (var i=0;i<controls.length;i++) {\n                    switch (typeof v[controls[i]]()) {\n                        case 'boolean':\n                        case 'object':\n                            v_list.push(v[controls[i]]());\n                        break;\n                        default:\n                            v_list.push(parseFloat(v[controls[i]]()));\n                        break;\n                    }\n                }\n                inputValue = v_list;\n            }\n            \n            var returnVal = fn.call(this, inputValue, attributeValue(), parent, index, abilityModel, _ability);\n            if (returnProperty != undefined) {\n                _ability[returnProperty](returnVal);\n            }\n            return returnVal;\n        }, this);\n    }\n    \n    self.getAbilityLevelByAbilityName = function (abilityName) {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == abilityName) {\n                return self._abilities[i].level();\n            }\n        }\n        return -1;\n    }\n\n    self.getAbilityByName = function (abilityName) {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == abilityName) {\n                return self._abilities[i];\n            }\n        }\n        return undefined;\n    }\n\n    self.getAbilityPropertyValue = function (ability, property) {\n        return parseFloat(ko.utils.unwrapObservable(ability[property])[ability.level()-1]);\n    }\n    \n    self.getAttributeBonusLevel = function () {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == 'attribute_bonus') {\n                return self._abilities[i].level();\n            }\n        }\n        return 0;        \n    }\n    \n    self.getAllStatsReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {                    \n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        /*switch(attribute.name) {\n                            // invoker_quas\n                            case 'bonus_strength':\n                                totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                            break;\n                        }*/\n                    }\n                }\n                else if (ability.bonusAllStatsReduction != undefined) {\n                    // slark_essence_shift\n                    totalAttribute+=ability.bonusAllStatsReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getStrengthReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {                    \n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        /*switch(attribute.name) {\n                            // invoker_quas\n                            case 'bonus_strength':\n                                totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                            break;\n                        }*/\n                    }\n                }\n                else if (ability.bonusStrength != undefined && ability.name == 'undying_decay') {\n                    // undying_decay\n                    totalAttribute-=ability.bonusStrength();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getStrength = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            /*switch(attribute.name) {\n                                // invoker_quas\n                                case 'bonus_strength':\n                                    totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                                break;\n                            }*/\n                        }\n                    }\n                }\n                else {\n                    if (ability.bonusStrength != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // pudge_flesh_heap,morphling_morph_str,morphling_morph_agi,undying_decay\n                            totalAttribute+=ability.bonusStrength();\n                        }\n                    }\n                    if (ability.bonusStrength2 != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_str\n                            totalAttribute+=ability.bonusStrength2();\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAgility = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // drow_ranger_marksmanship\n                                case 'marksmanship_agility_bonus':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (ability.bonusAgility != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_agi,morphling_morph_str\n                            totalAttribute+=ability.bonusAgility();\n                        }\n                    }\n                    if (ability.bonusAgility2 != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_agi,morphling_morph_str\n                            totalAttribute+=ability.bonusAgility2();\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getIntelligence = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // invoker_exort\n                            /*    case 'bonus_intelligence':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;*/\n                            }\n                        }\n                    }\n                }\n                /*else if (ability.bonusInt != undefined) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1) || ability.name == 'invoker_exort') {\n                        // invoker_exort\n                        totalAttribute+=ability.bonusInt();\n                    }\n                }*/\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getArmor = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // axe_berserkers_call,dragon_knight_dragon_blood,troll_warlord_berserkers_rage,lycan_shapeshift,enraged_wildkin_toughness_aura\n                            case 'bonus_armor':\n                                if (ability.name != 'templar_assassin_meld') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // sven_warcry\n                            case 'warcry_armor':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // lich_frost_armor,ogre_magi_frost_armor\n                            case 'armor_bonus':\n                                if (ability.name == 'lich_frost_armor' || ability.name == 'ogre_magi_frost_armor') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.armor != undefined) {\n                    // shredder_reactive_armor,visage_gravekeepers_cloak\n                    totalAttribute+=ability.armor();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getArmorBaseReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        //elder_titan_natural_order\n                        case 'elder_titan_natural_order':\n                            totalAttribute *= (1-self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_reduction_pct', ability.level())/100);\n                        break;\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getArmorReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        //templar_assassin_meld\n                        case 'templar_assassin_meld':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_armor', ability.level());\n                        break;\n                        // tidehunter_gush\n                        case 'tidehunter_gush':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_bonus', ability.level());\n                        break;\n                        // naga_siren_rip_tide\n                        case 'naga_siren_rip_tide':\n                        // slardar_amplify_damage\n                        case 'slardar_amplify_damage':\n                        // vengefulspirit_wave_of_terror\n                        case 'vengefulspirit_wave_of_terror':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_reduction', ability.level());\n                        break;\n                        // nevermore_dark_lord\n                        case 'nevermore_dark_lord':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'presence_armor_reduction', ability.level());\n                        break;\n                    }\n                }\n                else if (ability.armorReduction != undefined) {\n                    // alchemist_acid_spray\n                    totalAttribute+=ability.armorReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getHealth = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // lone_druid_true_form,lycan_shapeshift,troll_warlord_berserkers_rage\n                            case 'bonus_hp':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // lone_druid_synergy\n                            case 'true_form_hp_bonus':\n                                if (self.isTrueFormActive()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusHealth != undefined) {\n                    // clinkz_death_pact\n                    totalAttribute+=ability.bonusHealth();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.isTrueFormActive = function () {\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.isActive() && ability.name == 'lone_druid_true_form') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    self.getHealthRegen = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage, dragon_knight_dragon_blood\n                            case 'bonus_health_regen':\n                            // broodmother_spin_web\n                            case 'heath_regen':\n                            // omniknight_guardian_angel,treant_living_armor,satyr_hellcaller_unholy_aura\n                            case 'health_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // legion_commander_press_the_attack\n                            case 'hp_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.healthregen != undefined) {\n                    // shredder_reactive_armor,invoker_quas,necrolyte_sadist\n                    totalAttribute+=ability.healthregen();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMana = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // obsidian_destroyer_essence_aura\n                            case 'bonus_mana':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getManaRegen = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage\n                            case 'bonus_mana_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.manaregen != undefined) {\n                    // necrolyte_sadist\n                    totalAttribute+=ability.manaregen();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getManaRegenArcaneAura = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // crystal_maiden_brilliance_aura\n                            case 'mana_regen':\n                                if (ability.name == 'crystal_maiden_brilliance_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getManaRegenReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                /*if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        //switch(attribute.name) {\n                        //    // \n                        //    case '':\n                        //        totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                        //    break;\n                        //}\n                    }\n                }\n                else*/ if (ability.manaregenreduction != undefined) {\n                    // pugna_nether_ward\n                    totalAttribute+=ability.manaregenreduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackRange = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // winter_wyvern_arctic_burn\n                                case 'attack_range_bonus':\n                                // templar_assassin_psi_blades,sniper_take_aim\n                                case 'bonus_attack_range':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                                // terrorblade_metamorphosis,troll_warlord_berserkers_rage\n                                case 'bonus_range':\n                                    if (ability.name == 'terrorblade_metamorphosis') {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                    if (ability.name == 'troll_warlord_berserkers_rage') {\n                                        totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                                // tiny_grow\n                                case 'bonus_range_scepter':\n                                    if (ability.name == 'tiny_grow' && self.hasScepter()) {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                                // enchantress_impetus\n                                case 'bonus_attack_range_scepter':\n                                    if (ability.name == 'enchantress_impetus' && self.hasScepter()) {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                            }\n                        }\n                        // lone_druid_true_form\n                        if (ability.name == 'lone_druid_true_form') {\n                            totalAttribute -= 422;\n                        }\n                    }\n                    else if (ability.name == 'enchantress_impetus' && self.hasScepter()) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                              case 'bonus_attack_range_scepter':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                              break;\n                            }\n                        }\n                    }\n                }\n                else if (ability.attackrange != undefined) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        // dragon_knight_elder_dragon_form\n                        totalAttribute+=ability.attackrange();\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackSpeed = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // abaddon_frostmourne,troll_warlord_battle_trance\n                            case 'attack_speed':\n                            // visage_grave_chill\n                            case 'attackspeed_bonus':\n                            // mirana_leap\n                            case 'leap_speedbonus_as':\n                            // life_stealer\n                            case 'attack_speed_bonus':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // clinkz_strafe,ursa_overpower\n                            case 'attack_speed_bonus_pct':\n                                if (ability.name == 'clinkz_strafe' || ability.name == 'ursa_overpower') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // axe_culling_blade,necronomicon_archer_aoe\n                            case 'speed_bonus':\n                                if (ability.name == 'axe_culling_blade' || ability.name == 'necronomicon_archer_aoe') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // ancient_apparition_chilling_touch\n                            case 'attack_speed_pct':\n                                if (ability.name == 'ancient_apparition_chilling_touch') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // beastmaster_inner_beast,lycan_feral_impulse,lone_druid_rabid,tiny_grow,phantom_assassin_phantom_strike,windrunner_focusfire,ogre_magi_bloodlust,centaur_khan_endurance_aura\n                            case 'bonus_attack_speed':\n                                if (ability.name == 'beastmaster_inner_beast' \n                                 || ability.name == 'lycan_feral_impulse' \n                                 || ability.name == 'lone_druid_rabid' \n                                 || ability.name == 'tiny_grow' \n                                 || ability.name == 'phantom_assassin_phantom_strike' \n                                 || ability.name == 'windrunner_focusfire' \n                                 || ability.name == 'ogre_magi_bloodlust'\n                                 || ability.name == 'centaur_khan_endurance_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.attackspeed != undefined) {\n                    // troll_warlord_fervor,wisp_overcharge,lina_fiery_soul,invoker_alacrity,invoker_wex,huskar_berserkers_blood\n                    totalAttribute+=ability.attackspeed();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getAttackSpeedReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // night_stalker_void,crystal_maiden_crystal_nova,ghost_frost_attack,ogre_magi_frost_armor,polar_furbolg_ursa_warrior_thunder_clap\n                            case 'attackspeed_slow':\n                            // lich_frost_armor,lich_frost_nova,enchantress_untouchable\n                            case 'slow_attack_speed':\n                            // beastmaster_primal_roar\n                            case 'slow_attack_speed_pct':\n                            // storm_spirit_overload\n                            case 'overload_attack_slow':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // omniknight_degen_aura\n                            case 'speed_bonus':\n                                if (ability.name == 'omniknight_degen_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // tusk_frozen_sigil,crystal_maiden_freezing_field\n                            case 'attack_slow':\n                                if (ability.name == 'crystal_maiden_freezing_field' && !self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                                else if (ability.name == 'tusk_frozen_sigil') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            case 'attack_slow_scepter':\n                                if (ability.name == 'crystal_maiden_freezing_field' && self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // faceless_void_time_walk\n                            case 'attack_speed_pct':\n                                if (ability.name == 'faceless_void_time_walk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // bounty_hunter_jinada\n                            case 'bonus_attackspeed':\n                                if (ability.name == 'bounty_hunter_jinada') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // brewmaster_thunder_clap\n                            case 'attack_speed_slow':\n                                if (ability.name == 'brewmaster_thunder_clap') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // medusa_stone_gaze\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // visage_grave_chill\n                            case 'attackspeed_bonus':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // abaddon_frostmourne\n                            case 'attack_slow_tooltip':\n                                if (ability.name == 'abaddon_frostmourne') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'enraged_wildkin_tornado') {\n                        totalAttribute -= 15;\n                    }\n                }\n                else if (ability.attackspeedreduction != undefined) {\n                    // viper_viper_strike,viper_corrosive_skin,jakiro_liquid_fire,lich_chain_frost,sandking_epicenter,earth_spirit_rolling_boulder\n                    totalAttribute+=ability.attackspeedreduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getBash = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // slardar_bash\n                            case 'chance':\n                            // sniper_headshot\n                            case 'proc_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bash != undefined) {\n                    // spirit_breaker_greater_bash,faceless_void_time_lock\n                    totalAttribute *= (1 - ability.bash()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });    \n    self.getBaseDamage = ko.computed(function () {\n        var totalAttribute = 0;\n        var totalMultiplier = 1;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // tiny_grow,terrorblade_metamorphosis\n                            case 'bonus_damage':\n                                if (ability.name == 'tiny_grow' || ability.name == 'terrorblade_metamorphosis') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (ability.baseDamageMultiplier != undefined) {\n                        // earthshaker_enchant_totem\n                        totalMultiplier += ability.baseDamageMultiplier()/100;\n                        /*totalAttribute += ability.baseDamage();\n                        sources[ability.name] = {\n                            'damage': ability.baseDamage(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        }*/\n                    }\n                    if (ability.baseDamage != undefined) {\n                        // clinkz_death_pact\n                        totalAttribute += ability.baseDamage();\n                        sources[ability.name] = {\n                            'damage': ability.baseDamage(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute, multiplier: totalMultiplier };\n    });\n    \n    self.getSelfBaseDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_split_shot\n                            case 'damage_modifier':\n                                totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // windrunner_focusfire\n                            case 'focusfire_damage_reduction':\n                                if (!self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            case 'focusfire_damage_reduction_scepter':\n                                if (self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBaseDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // vengefulspirit_command_aura\n                            case 'bonus_damage_pct':\n                                if (ability.name == 'vengefulspirit_command_aura') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.baseDamageReductionPct != undefined) {\n                    // nevermore_requiem\n                    totalAttribute *= (1 + ability.baseDamageReductionPct()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBAT = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // troll_warlord_berserkers_rage,alchemist_chemical_rage,lone_druid_true_form,lycan_shapeshift\n                            case 'base_attack_time':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getBonusDamage = ko.computed(function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // broodmother_insatiable_hunger,luna_lunar_blessing,templar_assassin_refraction,templar_assassin_meld,troll_warlord_berserkers_rage,lone_druid_true_form_battle_cry\n                            case 'bonus_damage':\n                                if (ability.name == 'broodmother_insatiable_hunger' || ability.name == 'luna_lunar_blessing'\n                                 || ability.name == 'templar_assassin_refraction' || ability.name == 'templar_assassin_meld'\n                                 || ability.name == 'troll_warlord_berserkers_rage' || ability.name == 'lone_druid_true_form_battle_cry') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // lycan_howl\n                            case 'hero_bonus_damage':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                sources[ability.name] = {\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'storm_spirit_overload') {\n                        totalAttribute += self.getAbilityPropertyValue(ability, 'damage');\n                        sources[ability.name] = {\n                            'damage': self.getAbilityPropertyValue(ability, 'damage'),\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }                        \n                    }\n                }\n                else if (ability.bonusDamage != undefined && ability.bonusDamage() != 0) {\n                    // nevermore_necromastery,ursa_fury_swipes,ursa_enrage,invoker_alacrity,invoker_exort,elder_titan_ancestral_spirit,spectre_desolate,razor_static_link\n                    totalAttribute+=ability.bonusDamage();\n                    sources[ability.name] = {\n                        'damage': ability.bonusDamage(),\n                        'damageType': ability.name == 'spectre_desolate' ? 'pure' : 'physical',\n                        'displayname': ability.displayname\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    });\n\n    self.getBonusDamagePercent = ko.computed(function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bloodseeker_bloodrage\n                            case 'damage_increase_pct':\n                                if (ability.name == 'bloodseeker_bloodrage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // magnataur_empower,vengefulspirit_command_aura,alpha_wolf_command_aura\n                            case 'bonus_damage_pct':\n                                if (ability.name == 'magnataur_empower' || ability.name == 'vengefulspirit_command_aura' || ability.name == 'alpha_wolf_command_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // sven_gods_strength\n                            case 'gods_strength_damage':\n                                if (ability.name == 'sven_gods_strength' && self.hero != undefined && self.hero.heroId() == 'sven') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            case 'gods_strength_damage_scepter':\n                                if (ability.name == 'sven_gods_strength' && self.hero == undefined) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                /*else if (ability.bonusDamagePct != undefined && ability.bonusDamagePct() != 0) {\n                    // bloodseeker_bloodrage\n                    // totalAttribute+=ability.bonusDamagePct()/100;\n                    // sources[ability.name] = {\n                        // 'damage': ability.bonusDamagePct()/100,\n                        // 'damageType': 'physical',\n                        // 'displayname': ability.displayname\n                    // }\n                }*/\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    });\n\n    self.getBonusDamageBackstab = ko.computed(function () {\n        var totalAttribute1 = 0;\n        var totalAttribute2 = 0;\n        var sources = [];\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.name == 'riki_backstab') {\n                if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // riki_backstab\n                            case 'damage_multiplier':\n                                totalAttribute1 += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                sources.push({\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                });\n                            break;\n                        }\n                    }/*\n                    if (ability.bonusDamageBackstab != undefined) {\n                        // damage_multiplier\n                        totalAttribute2+=ability.bonusDamageBackstab();\n                        sources.push({\n                            'damage': ability.bonusDamageBackstab(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        });\n                    }\n                    */\n                }\n            }\n        }\n        return { sources: sources, total: [totalAttribute1,totalAttribute2] };\n    });\n    \n    self.getBonusDamagePrecisionAura = ko.computed(function () {\n        var totalAttribute1 = 0;\n        var totalAttribute2 = 0;\n        var sources = [];\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.name == 'drow_ranger_trueshot') {\n                if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // drow_ranger_trueshot\n                            case 'trueshot_ranged_damage':\n                                totalAttribute1 += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                sources.push({\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                });\n                            break;\n                        }\n                    }\n                    if (ability.bonusDamagePrecisionAura != undefined) {\n                        // drow_ranger_trueshot\n                        totalAttribute2+=ability.bonusDamagePrecisionAura();\n                        sources.push({\n                            'damage': ability.bonusDamagePrecisionAura(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        });\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: [totalAttribute1,totalAttribute2] };\n    });\n    \n    self.getBonusDamageReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bane_enfeeble\n                            case 'enfeeble_attack_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusDamageReduction != undefined) {\n                    // rubick_fade_bolt,razor_static_link\n                    totalAttribute+=ability.bonusDamageReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBonusDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_split_shot\n                            case 'damage_modifier':\n                                totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // windrunner_focusfire\n                            case 'focusfire_damage_reduction':\n                                if (!self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            case 'focusfire_damage_reduction_scepter':\n                                if (self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getDamageAmplification = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                /*if (!(ability.name in self.abilityData)) {\n                    if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // bane_enfeeble\n                                case 'enfeeble_attack_reduction':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                            }\n                        }\n                    }\n                }\n                else*/ if (ability.damageAmplification != undefined) {\n                        // undying_flesh_golem\n                        totalAttribute *= (1 + ability.damageAmplification()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getDamageReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bloodseeker_bloodrage\n                            case 'damage_increase_pct':\n                                if (ability.name == 'bloodseeker_bloodrage') {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                    // kunkka_ghostship\n                    if (ability.name == 'kunkka_ghostship') {\n                        totalAttribute *= (1 - 50/100);\n                    }\n                }\n                else if (ability.damageReduction != undefined) {\n                    // wisp_overcharge,bristleback_bristleback,spectre_dispersion,medusa_mana_shield,ursa_enrage\n                    totalAttribute *= (1 + ability.damageReduction()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCritSource = ko.computed(function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        // phantom_assassin_coup_de_grace,brewmaster_drunken_brawler,chaos_knight_chaos_strike,lycan_shapeshift,skeleton_king_mortal_strike,juggernaut_blade_dance,alpha_wolf_critical_strike,giant_wolf_critical_strike\n                        case 'phantom_assassin_coup_de_grace':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_bonus', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'brewmaster_drunken_brawler':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_multiplier', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'chaos_knight_chaos_strike':\n                        case 'lycan_shapeshift':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_multiplier', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'skeleton_king_mortal_strike':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'juggernaut_blade_dance':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'blade_dance_crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'blade_dance_crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'alpha_wolf_critical_strike':\n                        case 'giant_wolf_critical_strike':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                    }\n                }\n            }\n        }\n        return sources;\n    });    \n\n    self.getCleaveSource = ko.computed(function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        // magnataur_empower\n                        case 'magnataur_empower':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'cleave_radius', ability.level()),\n                                    'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'cleave_damage_pct', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // sven_great_cleave\n                        case 'sven_great_cleave':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'great_cleave_radius', ability.level()),\n                                    'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'great_cleave_damage', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // kunkka_tidebringer\n                        case 'kunkka_tidebringer':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'radius', ability.level()),\n                                    'magnitude': 1,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // tiny_grow\n                        case 'tiny_grow':\n                            if (self.hasScepter()) {\n                                if (sources[ability.name] == undefined) {\n                                    sources[ability.name] = {\n                                        'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_cleave_radius_scepter', ability.level()),\n                                        'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_cleave_damage_scepter', ability.level())/100,\n                                        'count': 1,\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                                else {\n                                    sources[ability.name].count += 1;\n                                }\n                            }\n                        break;\n                    }\n                }\n            }\n        }\n        return sources;\n    });    \n    \n    self.getCritChance = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // phantom_assassin_coup_de_grace,brewmaster_drunken_brawler,chaos_knight_chaos_strike,lycan_shapeshift,skeleton_king_mortal_strike\n                            case 'crit_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });            \n    \n    self.getEvasion = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // phantom_assassin_blur\n                            case 'bonus_evasion':\n                            // brewmaster_drunken_brawler\n                            case 'dodge_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getEvasionBacktrack = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // faceless_void_backtrack\n                            case 'dodge_chance_pct':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMissChance = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // broodmother_incapacitating_bite,brewmaster_drunken_haze\n                            case 'miss_chance':\n                            // riki_smoke_screen,keeper_of_the_light_blinding_light,tinker_laser\n                            case 'miss_rate':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n                else if (ability.missChance != undefined) {\n                    // night_stalker_crippling_fear\n                    totalAttribute*=(1-ability.missChance()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getLifesteal = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // skeleton_king_vampiric_aura\n                            case 'vampiric_aura':\n                            // broodmother_insatiable_hunger\n                            case 'lifesteal_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.lifesteal != undefined) {\n                    // life_stealer_open_wounds\n                    totalAttribute+=ability.lifesteal();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getSpellAmp = ko.computed(function () {\n        var totalAttribute = 0;\n        /*for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // keeper_of_the_light_chakra_magic\n                            case 'cooldown_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }*/\n        return totalAttribute;\n    });\n    \n    self.getCooldownReductionFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // keeper_of_the_light_chakra_magic\n                            case 'cooldown_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCooldownReductionPercent = ko.computed(function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    });\n\n    self.getCooldownIncreaseFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // faceless_void_time_dilation\n                            case 'duration':\n                                if (ability.name == 'faceless_void_time_dilation') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCooldownIncreasePercent = ko.computed(function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    });\n    \n    self.getMagicResist = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // antimage_spell_shield\n                            case 'spell_shield_resistance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // phantom_lancer_phantom_edge\n                            case 'magic_resistance_pct':\n                                if (ability.name == 'phantom_lancer_phantom_edge') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            // rubick_null_field\n                            case 'magic_damage_reduction_pct':\n                                if (ability.name == 'rubick_null_field') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.magicResist != undefined) {\n                    // huskar_berserkers_blood,viper_corrosive_skin,visage_gravekeepers_cloak\n                    totalAttribute *= (1 - ability.magicResist()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMagicResistReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // ancient_apparition_ice_vortex\n                            case 'spell_resist_pct':\n                            // pugna_decrepify\n                            case 'bonus_spell_damage_pct':\n                            // skywrath_mage_ancient_seal\n                            case 'resist_debuff':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // elder_titan_natural_order\n                            case 'magic_resistance_pct':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMovementSpeedFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage\n                            case 'bonus_movespeed':\n                                if (ability.name == 'alchemist_chemical_rage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // tiny_grow\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'tiny_grow') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // troll_warlord_berserkers_rage\n                            case 'bonus_move_speed':\n                                if (ability.name == 'troll_warlord_berserkers_rage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }                                \n                            break;\n                            // lone_druid_true_form\n                            case 'speed_loss':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.movementSpeedFlat != undefined) {\n                // dragon_knight_elder_dragon_form\n                    totalAttribute+=ability.movementSpeedFlat();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMovementSpeedPercent = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // abaddon_frostmourne \n                            case 'move_speed_pct':\n                            // bounty_hunter_track \n                            case 'bonus_move_speed_pct':\n                            // mirana_leap \n                            case 'leap_speedbonus':\n                            // sven_warcry \n                            case 'warcry_movespeed':\n                            // clinkz_wind_walk\n                            case 'move_speed_bonus_pct':\n                            // windrunner_windrun\n                            case 'movespeed_bonus_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // broodmother_spin_web,spectre_spectral_dagger\n                            case 'bonus_movespeed':\n                                if (ability.name == 'broodmother_spin_web' || ability.name == 'spectre_spectral_dagger') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // axe_culling_blade,necronomicon_archer_aoe\n                            case 'speed_bonus':\n                                if (ability.name == 'axe_culling_blade' || ability.name == 'necronomicon_archer_aoe') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // nyx_assassin_vendetta \n                            case 'movement_speed':\n                                if (ability.name == 'nyx_assassin_vendetta') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // spirit_breaker_empowering_haste\n                            case 'bonus_movespeed_pct':\n                                if (ability.name == 'spirit_breaker_empowering_haste') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // ogre_magi_bloodlust,death_prophet_witchcraft,kobold_taskmaster_speed_aura\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'ogre_magi_bloodlust' || ability.name == 'death_prophet_witchcraft' || ability.name == 'kobold_taskmaster_speed_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // razor_unstable_current,phantom_lancer_doppelwalk\n                            case 'movement_speed_pct':\n                                if (ability.name == 'razor_unstable_current' || ability.name == 'phantom_lancer_doppelwalk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // treant_natures_guise,lone_druid_rabid\n                            case 'bonus_move_speed':\n                                if (ability.name == 'treant_natures_guise' || ability.name == 'lone_druid_rabid') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // wisp_tether\n                            case 'movespeed':\n                                if (ability.name == 'wisp_tether') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // kunkka_ghostship,visage_grave_chill\n                            case 'movespeed_bonus':\n                                if (ability.name == 'kunkka_ghostship' || ability.name == 'visage_grave_chill') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }                                \n                            break;\n                        }\n                    }\n                }\n                else if (ability.movementSpeedPct != undefined) {\n                // axe_battle_hunger,bristleback_warpath,spirit_breaker_greater_bash,lina_fiery_soul,invoker_ghost_walk,invoker_wex,elder_titan_ancestral_spirit\n                    totalAttribute+=ability.movementSpeedPct()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMovementSpeedPercentReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // crystal_maiden_freezing_field\n                            case 'movespeed_slow':\n                                if (ability.name == 'crystal_maiden_freezing_field' && !self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            case 'movespeed_slow_scepter':\n                                if (ability.name == 'crystal_maiden_freezing_field' && self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // elder_titan_earth_splitter,magnataur_skewer,abaddon_frostmourne \n                            case 'slow_pct':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // night_stalker_void,crystal_maiden_crystal_nova,ghost_frost_attack,ogre_magi_frost_armor,polar_furbolg_ursa_warrior_thunder_clap\n                            case 'movespeed_slow':\n                                if (ability.name != 'crystal_maiden_freezing_field') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // lich_frost_armor,lich_frost_nova,enchantress_enchant\n                            case 'slow_movement_speed':\n                            // beastmaster_primal_roar\n                            case 'slow_movement_speed_pct':\n                            // drow_ranger_frost_arrows\n                            case 'frost_arrows_movement_speed':\n                            // skeleton_king_hellfire_blast\n                            case 'blast_slow':\n                            // slardar_slithereen_crush\n                            case 'crush_extra_slow':\n                            // storm_spirit_overload:\n                            case 'overload_move_slow':\n                            // windrunner_windrun\n                            case 'enemy_movespeed_bonus_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // phantom_assassin_stifling_dagger,tusk_frozen_sigil\n                            case 'move_slow':\n                                if (ability.name == 'phantom_assassin_stifling_dagger') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'tusk_frozen_sigil') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // invoker_ice_wall,medusa_stone_gaze,wisp_tether\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // broodmother_incapacitating_bite,bounty_hunter_jinada,spectre_spectral_dagger,winter_wyvern_arctic_burn\n                            case 'bonus_movespeed':\n                                if (ability.name == 'broodmother_incapacitating_bite' || ability.name == 'bounty_hunter_jinada' || ability.name == 'winter_wyvern_arctic_burn' || ability.name == 'winter_wyvern_splinter_blast') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'spectre_spectral_dagger') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // omniknight_degen_aura\n                            case 'speed_bonus':\n                                if (ability.name == 'omniknight_degen_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // tidehunter_gush\n                            case 'movement_speed':\n                                if (ability.name == 'tidehunter_gush') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // pugna_decrepify,chen_penitence\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'pugna_decrepify' || ability.name == 'chen_penitence') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // ancient_apparition_ice_vortex,phantom_lancer_spirit_lance,skywrath_mage_concussive_shot,faceless_void_time_walk\n                            case 'movement_speed_pct':\n                                if (ability.name == 'ancient_apparition_ice_vortex' || ability.name == 'phantom_lancer_spirit_lance' || ability.name == 'faceless_void_time_walk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'skywrath_mage_concussive_shot') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // razor_unstable_current\n                            case 'slow_amount':\n                                if (ability.name == 'razor_unstable_current') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // brewmaster_drunken_haze,brewmaster_thunder_clap,treant_leech_seed\n                            case 'movement_slow':\n                                if (ability.name == 'brewmaster_drunken_haze' || ability.name == 'brewmaster_thunder_clap') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'ursa_earthshock' || ability.name == 'treant_leech_seed') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // skeleton_king_reincarnation\n                            case 'movespeed':\n                                if (ability.name == 'skeleton_king_reincarnation') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // kunkka_torrent,visage_grave_chill\n                            case 'movespeed_bonus':\n                                if (ability.name == 'kunkka_torrent') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'visage_grave_chill') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'satyr_trickster_purge') {\n                        totalAttribute -= 80/100;\n                    }\n                    else if (ability.name == 'enraged_wildkin_tornado') {\n                        totalAttribute -= 15/100;\n                    }\n                }\n                else if (ability.movementSpeedPctReduction != undefined) {\n                    // axe_battle_hunger,batrider_sticky_napalm,shredder_chakram,meepo_geostrike,life_stealer_open_wounds,\n                    // venomancer_poison_sting,viper_viper_strike,viper_corrosive_skin,viper_poison_attack,venomancer_venomous_gale,treant_leech_seed\n                    // lich_chain_frost,sniper_shrapnel,centaur_stampede,huskar_life_break,jakiro_dual_breath,meepo_geostrike,sandking_epicenter\n                    // earth_spirit_rolling_boulder,invoker_ghost_walk,invoker_ice_wall,elder_titan_earth_splitter\n                    // undying_flesh_golem,templar_assassin_psionic_trap,nevermore_requiem,queenofpain_shadow_strike\n                    totalAttribute+=ability.movementSpeedPctReduction()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getTurnRateReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_stone_gaze\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.turnRateReduction != undefined) {\n                    // batrider_sticky_napalm\n                    totalAttribute+=ability.turnRateReduction()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getVisionRangeNight = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // winter_wyvern_arctic_burn\n                            case 'night_vision_bonus':\n                            // lycan_shapeshift,luna_lunar_blessing\n                            case 'bonus_night_vision':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.visionnight != undefined) {\n                    // \n                    totalAttribute+=ability.visionnight();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getVisionRangePctReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // night_stalker_darkness\n                            case 'blind_percentage':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.setEvasion = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (ability.name == 'windrunner_windrun') {\n                    return 1;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.setMovementSpeed = ko.computed(function () {\n        var MAX_MOVESPEED = 522;\n        var MIN_MOVESPEED = 100;\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (ability.name == 'spirit_breaker_charge_of_darkness') {\n                    return self.getAbilityAttributeValue(ability.attributes, 'movement_speed', ability.level());\n                }\n                if (ability.name == 'dark_seer_surge') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'centaur_stampede') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'lycan_shapeshift') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'lion_voodoo' || ability.name == 'shadow_shaman_voodoo') {\n                    return MIN_MOVESPEED;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getBashSource = function (attacktype) {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // sniper_headshot\n                            case 'proc_chance':\n                                if (sources[ability.name] == undefined && ability.name == 'sniper_headshot') {\n                                    sources[ability.name] = {\n                                        'chance': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100,\n                                        'damage': self.getAbilityPropertyValue(ability, 'damage'),\n                                        'count': 1,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // slardar_bash\n                            case 'chance':\n                                if (sources[ability.name] == undefined && ability.name == 'slardar_bash') {\n                                    sources[ability.name] = {\n                                        'chance': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100,\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage', ability.level()),\n                                        'count': 1,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bashBonusDamage != undefined) {\n                    // faceless_void_time_lock\n                    if (sources[ability.name] == undefined && ability.name == 'faceless_void_time_lock') {\n                        sources[ability.name] = {\n                            'chance': ability.bash()/100,\n                            'damage': ability.bashBonusDamage(),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }\n                    }\n                    // spirit_breaker_greater_bash\n                    if (sources[ability.name] == undefined && ability.name == 'spirit_breaker_greater_bash') {\n                        sources[ability.name] = {\n                            'chance': ability.bash()/100,\n                            'damage': ability.bashBonusDamage()/100,\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n\n        return sources;\n    };\n    \n    self.getOrbSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // antimage_mana_break\n                            case 'mana_per_hit':\n                                if (sources[ability.name] == undefined && ability.name == 'antimage_mana_break') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level()) \n                                                * self.getAbilityAttributeValue(ability.attributes, 'damage_per_burn', ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // clinkz_searing_arrows\n                            case 'damage_bonus':\n                                if (sources[ability.name] == undefined && ability.name == 'clinkz_searing_arrows') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            // silencer_glaives_of_wisdom\n                            case 'intellect_damage_pct':\n                                if (sources[ability.name] == undefined && ability.name == 'silencer_glaives_of_wisdom') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100 * self.hero.totalInt(),\n                                        'damageType': 'pure',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusDamageOrb != undefined) {\n                    // obsidian_destroyer_arcane_orb\n                    if (sources[ability.name] == undefined && ability.name == 'obsidian_destroyer_arcane_orb') {\n                        sources[ability.name] = {\n                            'damage': ability.bonusDamageOrb(),\n                            'damageType': 'pure',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n        \n        return sources;\n    };\n    \n    self.toggleAbility = function (index, data, event) {\n        if (self.abilities()[index()].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') < 0) {\n            if (self.abilities()[index()].isActive()) {\n                self.abilities()[index()].isActive(false);\n            }\n            else {\n                self.abilities()[index()].isActive(true);\n            }\n            \n            if (self.abilities()[index()].name == 'lycan_shapeshift') {\n                self.isShapeShiftActive(self.abilities()[index()].isActive());\n            }\n        }\n    }.bind(this);\n\n    self.toggleAbilityDetail = function (index, data, event) {\n        if (self.abilities()[index()].isDetail()) {\n            self.abilities()[index()].isDetail(false);\n        }\n        else {\n            self.abilities()[index()].isDetail(true);\n        }\n    }.bind(this);\n    \n    self.getAbility = function (abilityName) {\n        return self.abilities().find(function(b) {\n            return b.name == abilityName;\n        });\n    }\n}\n\nAbilityModel.prototype.levelUpAbility = function (index, data, event, hero) {\n    var self = this;\n    if (self.abilities()[index()].level() < hero.getAbilityLevelMax(data) && hero.availableSkillPoints() > 0 ) {\n        switch(self.abilities()[index()].abilitytype) {\n            case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                if (hero.heroId() == 'invoker') {\n                    if (\n                        (self.abilities()[index()].level() == 0) && (parseInt(hero.selectedHeroLevel()) >= 2) ||\n                        (self.abilities()[index()].level() == 1) && (parseInt(hero.selectedHeroLevel()) >= 7) ||\n                        (self.abilities()[index()].level() == 2) && (parseInt(hero.selectedHeroLevel()) >= 11) ||\n                        (self.abilities()[index()].level() == 3) && (parseInt(hero.selectedHeroLevel()) >= 17)\n                    ) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n                else if (hero.heroId() == 'meepo') {\n                    if (self.abilities()[index()].level() * 7 + 3 <= parseInt(hero.selectedHeroLevel())) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n                else {\n                    if ((self.abilities()[index()].level()+1) * 5 + 1 <= parseInt(hero.selectedHeroLevel())) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n            break;\n            default:\n                if (self.abilities()[index()].level() * 2 + 1 <= parseInt(hero.selectedHeroLevel())) {\n                    self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                    hero.skillPointHistory.push(index());\n                }\n            break;\n        }\n        switch (self.abilities()[index()].name) {\n            case 'beastmaster_call_of_the_wild':\n            case 'chen_test_of_faith':\n            case 'morphling_morph_agi':\n            case 'shadow_demon_shadow_poison':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n            case 'morphling_morph_str':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'keeper_of_the_light_spirit_form':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() - 2].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze1':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                self.abilities()[index() + 2].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze2':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze3':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() - 2].level(self.abilities()[index()].level());\n            break;\n            case 'ember_spirit_fire_remnant':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'lone_druid_true_form':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'monkey_king_tree_dance':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n        }\n    }\n};\nAbilityModel.prototype.levelDownAbility = function (index, data, event, hero) {\n    var i = ko.utils.unwrapObservable(index);\n    var self = this;\n    if (self.abilities()[i].level() > 0) {\n        self.abilities()[i].level(self.abilities()[i].level() - 1);\n        hero.skillPointHistory.splice(hero.skillPointHistory().lastIndexOf(i), 1);\n        switch (self.abilities()[i].name) {\n            case 'beastmaster_call_of_the_wild':\n            case 'chen_test_of_faith':\n            case 'morphling_morph_agi':\n            case 'shadow_demon_shadow_poison':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n            case 'morphling_morph_str':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'keeper_of_the_light_spirit_form':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i - 2].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze1':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n                self.abilities()[i + 2].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze2':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze3':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i - 2].level(self.abilities()[i].level());\n            break;\n            case 'ember_spirit_fire_remnant':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'lone_druid_true_form':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'monkey_king_tree_dance':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n        }\n    }\n};\nAbilityModel.prototype.getAbilityAttributeValue = function (attributes, attributeName, level) {\n    for (var i=0; i < attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (level == 0) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else if (level > attributes[i].value.length) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else {\n                return parseFloat(attributes[i].value[level-1]);\n            }\n        }\n    }\n}\nAbilityModel.prototype.getAbilityAttributeTooltip = function (attributes, attributeName) {\n    for (var i=0; i<attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (attributes[i].hasOwnProperty('tooltip')) {\n                var d = attributes[i].tooltip.replace(/\\\\n/g, '');\n                return d;\n            }\n            else {\n                return '';\n            }\n        }\n    }\n    return '';\n}\n\nmodule.exports = AbilityModel;","'use strict';\nvar ko = require('./herocalc_knockout');\n\nvar AbilityModel = require(\"./AbilityModel\");\nvar InventoryViewModel = require(\"./inventory/InventoryViewModel\");\nvar findWhere = require(\"./util/findWhere\");\nvar buffOptionsArray = require(\"./buffs/buffOptionsArray\");\nvar debuffOptionsArray = require(\"./buffs/debuffOptionsArray\");\n\nvar BuffViewModel = function (itemData, a) {\n    var self = this;\n    AbilityModel.call(this, ko.observableArray([]));\n    self.availableBuffs = ko.observableArray(buffOptionsArray.items);\n    self.availableDebuffs = ko.observableArray(debuffOptionsArray.items);\n    self.selectedBuff = ko.observable(self.availableBuffs()[0]);\n    \n    self.buffs = ko.observableArray([]);\n    self.itemBuffs = new InventoryViewModel(itemData);\n    \n    self.addBuff = function (data, event) {\n        if (findWhere(self.buffs(), { name: self.selectedBuff().buffName }) == undefined) {\n            var a = JSON.parse(JSON.stringify(self.selectedBuff().abilityData));\n            a.level = ko.observable(0);\n            a.isActive = ko.observable(false);\n            a.isDetail = ko.observable(false);\n            a.baseDamage = ko.observable(0);\n            a.bash = ko.observable(0);\n            a.bashBonusDamage = ko.observable(0);\n            a.bonusDamage = ko.observable(0);\n            a.bonusDamageOrb = ko.observable(0);\n            a.bonusDamagePct = ko.observable(0);\n            a.bonusDamagePrecisionAura = ko.observable(0);\n            a.bonusDamageReduction = ko.observable(0);\n            a.bonusHealth = ko.observable(0);\n            a.bonusStrength = ko.observable(0);\n            a.bonusStrength2 = ko.observable(0);\n            a.bonusAgility = ko.observable(0);\n            a.bonusAgility2 = ko.observable(0);\n            a.bonusInt = ko.observable(0);\n            a.bonusAllStatsReduction = ko.observable(0);\n            a.damageAmplification = ko.observable(0);\n            a.damageReduction = ko.observable(0);\n            a.evasion = ko.observable(0);\n            a.magicResist = ko.observable(0);\n            a.manaregen = ko.observable(0);\n            a.manaregenreduction = ko.observable(0);\n            a.missChance = ko.observable(0);\n            a.movementSpeedFlat = ko.observable(0);\n            a.movementSpeedPct = ko.observable(0);\n            a.movementSpeedPctReduction = ko.observable(0);\n            a.turnRateReduction = ko.observable(0);\n            a.attackrange = ko.observable(0);\n            a.attackspeed = ko.observable(0);\n            a.attackspeedreduction = ko.observable(0);\n            a.armor = ko.observable(0);\n            a.armorReduction = ko.observable(0);\n            a.healthregen = ko.observable(0);\n            a.lifesteal = ko.observable(0);\n            a.visionnight = ko.observable(0);\n            a.visionday = ko.observable(0);\n            switch (a.name) {\n                case 'invoker_cold_snap':\n                case 'invoker_ghost_walk':\n                case 'invoker_tornado':\n                case 'invoker_emp':\n                case 'invoker_alacrity':\n                case 'invoker_chaos_meteor':\n                case 'invoker_sun_strike':\n                case 'invoker_forge_spirit':\n                case 'invoker_ice_wall':\n                case 'invoker_deafening_blast':\n                    a.level(1);\n                break;\n            }\n            self.abilities.push(a);\n            self.buffs.push({ name: self.selectedBuff().buffName, hero: self.selectedBuff().hero, data: a });\n        }\n    };\n    \n    self.removeBuff = function (data, event, abilityName) {\n        if (findWhere(self.buffs(), { name: abilityName })  != undefined) {\n                self.buffs.remove(findWhere(self.buffs(), { name: abilityName }));\n                if (self.abilityControlData[abilityName] != undefined) {\n                    for (var i = 0; i < self.abilityControlData[abilityName].data.length; i++) {\n                        if (self.abilityControlData[abilityName].data[i].controlVal.dispose != undefined) {\n                            self.abilityControlData[abilityName].data[i].controlVal.dispose();\n                        }\n                        if (self.abilityControlData[abilityName].data[i].clean != undefined) {\n                            self.abilityControlData[abilityName].data[i].clean.dispose();\n                        }\n                    }\n                    self.abilityControlData[abilityName] = undefined;\n                }\n                for (var i = 0; i < self.abilities().length; i++) {\n                    if (self.abilities()[i].name == abilityName) {\n                        self.abilities()[i].level(0);\n                        self.abilities.remove(self.abilities()[i]);\n                        break;\n                    }\n                }\n        }\n    };\n    self.toggleBuff = function (index, data, event) {\n        if (self.buffs()[index()].data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') < 0) {\n            if (self.buffs()[index()].data.isActive()) {\n                self.buffs()[index()].data.isActive(false);\n                self.abilities()[index()].isActive(false);\n            }\n            else {\n                self.buffs()[index()].data.isActive(true);\n                self.abilities()[index()].isActive(true);\n            }\n        }\n    }.bind(this);\n\n    self.toggleBuffDetail = function (index, data, event) {\n        if (self.buffs()[index()].data.isDetail()) {\n            self.buffs()[index()].data.isDetail(false);\n        }\n        else {\n            self.buffs()[index()].data.isDetail(true);\n        }\n    }.bind(this);\n\n    // Overrides the ability module function to remove available skill point check\n    self.levelUpAbility = function (index, data, event, hero) {\n        if (self.abilities()[index()].level() < hero.getAbilityLevelMax(data)) {\n            switch(self.abilities()[index()].abilitytype) {\n                case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                    self.abilities()[index()].level(self.abilities()[index()].level() + 1);\n                break;\n                default:\n                    self.abilities()[index()].level(self.abilities()[index()].level() + 1);\n                break;\n            }\n            switch (self.abilities()[index()].name) {\n                case 'beastmaster_call_of_the_wild':\n                case 'chen_test_of_faith':\n                case 'morphling_morph_agi':\n                case 'shadow_demon_shadow_poison':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'morphling_morph_str':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'keeper_of_the_light_spirit_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                case 'nevermore_shadowraze1':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 2].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze2':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze3':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                break;\n            }\n        }\n    };\n    self.levelDownAbility = function (index, data, event, hero) {\n        if (self.abilities()[index()].level() > 0) {\n            self.abilities()[index()].level(self.abilities()[index()].level() - 1);\n            switch (self.abilities()[index()].name) {\n                case 'beastmaster_call_of_the_wild':\n                case 'chen_test_of_faith':\n                case 'morphling_morph_agi':\n                case 'shadow_demon_shadow_poison':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'morphling_morph_str':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'keeper_of_the_light_spirit_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                case 'nevermore_shadowraze1':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 2].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze2':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze3':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                break;\n                case 'ember_spirit_fire_remnant':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'lone_druid_true_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n            }\n        }\n    };\n    \n    return self;\n}\nBuffViewModel.prototype = Object.create(AbilityModel.prototype);\nBuffViewModel.prototype.constructor = BuffViewModel;\n\nmodule.exports = BuffViewModel;","var findWhere = require(\"../util/findWhere\");\n\nvar BuffModel = function (heroData, unitData, hero, ability) {\n    this.buffName = ability;\n    if (heroData['npc_dota_hero_' + hero] == undefined) {\n        this.hero = hero;\n        this.abilityData = findWhere(unitData[hero].abilities, {name: ability})\n        this.buffDisplayName = unitData[hero].displayname + ' - ' + this.abilityData.displayname;\n    }\n    else {\n        this.hero = 'npc_dota_hero_' + hero;\n        this.abilityData = findWhere(heroData['npc_dota_hero_' + hero].abilities, {name: ability})\n        this.buffDisplayName = heroData['npc_dota_hero_' + hero].displayname + ' - ' + this.abilityData.displayname;        \n        if (ability == 'sven_gods_strength') {\n            this.buffDisplayName += ' (Aura for allies)';\n        }\n    }\n\n};\n\nmodule.exports = BuffModel;","var BuffModel = require(\"./BuffModel\");\n\nvar buffOptionsArray = {};\n\nvar init = function (heroData, unitData) {\n    buffOptionsArray.items = [\n        new BuffModel(heroData, unitData, 'abaddon', 'abaddon_frostmourne'),\n        new BuffModel(heroData, unitData, 'axe', 'axe_culling_blade'),\n        new BuffModel(heroData, unitData, 'beastmaster', 'beastmaster_inner_beast'),\n        new BuffModel(heroData, unitData, 'bloodseeker', 'bloodseeker_bloodrage'),\n        new BuffModel(heroData, unitData, 'bounty_hunter', 'bounty_hunter_track'),\n        new BuffModel(heroData, unitData, 'centaur', 'centaur_stampede'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_brilliance_aura'),\n        new BuffModel(heroData, unitData, 'dark_seer', 'dark_seer_surge'),\n        new BuffModel(heroData, unitData, 'dazzle', 'dazzle_weave'),\n        new BuffModel(heroData, unitData, 'drow_ranger', 'drow_ranger_trueshot'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_alacrity'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_tether'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_overcharge'),\n        new BuffModel(heroData, unitData, 'kunkka', 'kunkka_ghostship'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_armor'),\n        new BuffModel(heroData, unitData, 'life_stealer', 'life_stealer_open_wounds'),\n        new BuffModel(heroData, unitData, 'luna', 'luna_lunar_blessing'),\n        new BuffModel(heroData, unitData, 'lycan', 'lycan_howl'),\n        new BuffModel(heroData, unitData, 'magnataur', 'magnataur_empower'),\n        new BuffModel(heroData, unitData, 'mirana', 'mirana_leap'),\n        new BuffModel(heroData, unitData, 'ogre_magi', 'ogre_magi_bloodlust'),\n        new BuffModel(heroData, unitData, 'omniknight', 'omniknight_guardian_angel'),\n        new BuffModel(heroData, unitData, 'rubick', 'rubick_null_field'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_vampiric_aura'),\n        new BuffModel(heroData, unitData, 'spirit_breaker', 'spirit_breaker_empowering_haste'),\n        new BuffModel(heroData, unitData, 'sven', 'sven_warcry'),\n        new BuffModel(heroData, unitData, 'sven', 'sven_gods_strength'),\n        new BuffModel(heroData, unitData, 'treant', 'treant_living_armor'),\n        new BuffModel(heroData, unitData, 'troll_warlord', 'troll_warlord_battle_trance'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_command_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_alpha_wolf', 'alpha_wolf_critical_strike'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_alpha_wolf', 'alpha_wolf_command_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_polar_furbolg_ursa_warrior', 'centaur_khan_endurance_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_giant_wolf', 'giant_wolf_critical_strike'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_kobold_taskmaster', 'kobold_taskmaster_speed_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ogre_magi', 'ogre_magi_frost_armor'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_satyr_hellcaller', 'satyr_hellcaller_unholy_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_enraged_wildkin', 'enraged_wildkin_toughness_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_necronomicon_archer_1', 'necronomicon_archer_aoe')\n    ];\n    return buffOptionsArray.items;\n}\n\nbuffOptionsArray.init = init;\n\nmodule.exports = buffOptionsArray;","var BuffModel = require(\"./BuffModel\");\n\nvar debuffOptionsArray = {};\n\nvar init = function (heroData, unitData) {\n    debuffOptionsArray.items = [\n        new BuffModel(heroData, unitData, 'abaddon', 'abaddon_frostmourne'),\n        new BuffModel(heroData, unitData, 'alchemist', 'alchemist_acid_spray'),\n        new BuffModel(heroData, unitData, 'ancient_apparition', 'ancient_apparition_ice_vortex'),\n        new BuffModel(heroData, unitData, 'axe', 'axe_battle_hunger'),\n        new BuffModel(heroData, unitData, 'bane', 'bane_enfeeble'),\n        new BuffModel(heroData, unitData, 'batrider', 'batrider_sticky_napalm'),\n        new BuffModel(heroData, unitData, 'beastmaster', 'beastmaster_primal_roar'),\n        new BuffModel(heroData, unitData, 'bounty_hunter', 'bounty_hunter_jinada'),\n        new BuffModel(heroData, unitData, 'brewmaster', 'brewmaster_thunder_clap'),\n        new BuffModel(heroData, unitData, 'brewmaster', 'brewmaster_drunken_haze'),\n        new BuffModel(heroData, unitData, 'bristleback', 'bristleback_viscous_nasal_goo'),\n        new BuffModel(heroData, unitData, 'broodmother', 'broodmother_incapacitating_bite'),\n        new BuffModel(heroData, unitData, 'centaur', 'centaur_stampede'),\n        new BuffModel(heroData, unitData, 'chen', 'chen_penitence'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_crystal_nova'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_freezing_field'),\n        new BuffModel(heroData, unitData, 'dazzle', 'dazzle_weave'),\n        new BuffModel(heroData, unitData, 'drow_ranger', 'drow_ranger_frost_arrows'),\n        new BuffModel(heroData, unitData, 'earth_spirit', 'earth_spirit_rolling_boulder'),\n        new BuffModel(heroData, unitData, 'elder_titan', 'elder_titan_natural_order'),\n        new BuffModel(heroData, unitData, 'elder_titan', 'elder_titan_earth_splitter'),\n        new BuffModel(heroData, unitData, 'enchantress', 'enchantress_untouchable'),\n        new BuffModel(heroData, unitData, 'enchantress', 'enchantress_enchant'),\n        new BuffModel(heroData, unitData, 'faceless_void', 'faceless_void_time_walk'),\n        new BuffModel(heroData, unitData, 'huskar', 'huskar_life_break'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_ghost_walk'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_ice_wall'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_tether'),\n        new BuffModel(heroData, unitData, 'jakiro', 'jakiro_dual_breath'),\n        new BuffModel(heroData, unitData, 'jakiro', 'jakiro_liquid_fire'),\n        new BuffModel(heroData, unitData, 'keeper_of_the_light', 'keeper_of_the_light_blinding_light'),\n        new BuffModel(heroData, unitData, 'kunkka', 'kunkka_torrent'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_nova'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_armor'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_chain_frost'),\n        new BuffModel(heroData, unitData, 'life_stealer', 'life_stealer_open_wounds'),\n        new BuffModel(heroData, unitData, 'lion', 'lion_voodoo'),\n        new BuffModel(heroData, unitData, 'magnataur', 'magnataur_skewer'),\n        new BuffModel(heroData, unitData, 'medusa', 'medusa_stone_gaze'),\n        new BuffModel(heroData, unitData, 'meepo', 'meepo_geostrike'),\n        new BuffModel(heroData, unitData, 'naga_siren', 'naga_siren_rip_tide'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_void'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_crippling_fear'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_darkness'),\n        new BuffModel(heroData, unitData, 'ogre_magi', 'ogre_magi_ignite'),\n        new BuffModel(heroData, unitData, 'omniknight', 'omniknight_degen_aura'),\n        new BuffModel(heroData, unitData, 'phantom_assassin', 'phantom_assassin_stifling_dagger'),\n        new BuffModel(heroData, unitData, 'phantom_lancer', 'phantom_lancer_spirit_lance'),\n        new BuffModel(heroData, unitData, 'pudge', 'pudge_rot'),\n        new BuffModel(heroData, unitData, 'pugna', 'pugna_decrepify'),\n        new BuffModel(heroData, unitData, 'queenofpain', 'queenofpain_shadow_strike'),\n        new BuffModel(heroData, unitData, 'riki', 'riki_smoke_screen'),\n        new BuffModel(heroData, unitData, 'rubick', 'rubick_fade_bolt'),\n        new BuffModel(heroData, unitData, 'sand_king', 'sandking_epicenter'),\n        new BuffModel(heroData, unitData, 'nevermore', 'nevermore_dark_lord'),\n        new BuffModel(heroData, unitData, 'shadow_shaman', 'shadow_shaman_voodoo'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_hellfire_blast'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_reincarnation'),\n        new BuffModel(heroData, unitData, 'skywrath_mage', 'skywrath_mage_concussive_shot'),\n        new BuffModel(heroData, unitData, 'skywrath_mage', 'skywrath_mage_ancient_seal'),\n        new BuffModel(heroData, unitData, 'slardar', 'slardar_slithereen_crush'),\n        new BuffModel(heroData, unitData, 'slardar', 'slardar_amplify_damage'),\n        new BuffModel(heroData, unitData, 'slark', 'slark_essence_shift'),\n        new BuffModel(heroData, unitData, 'sniper', 'sniper_shrapnel'),\n        new BuffModel(heroData, unitData, 'spectre', 'spectre_spectral_dagger'),\n        new BuffModel(heroData, unitData, 'storm_spirit', 'storm_spirit_overload'),\n        new BuffModel(heroData, unitData, 'templar_assassin', 'templar_assassin_meld'),\n        new BuffModel(heroData, unitData, 'tidehunter', 'tidehunter_gush'),\n        new BuffModel(heroData, unitData, 'tinker', 'tinker_laser'),\n        new BuffModel(heroData, unitData, 'treant', 'treant_leech_seed'),\n        new BuffModel(heroData, unitData, 'tusk', 'tusk_frozen_sigil'),\n        new BuffModel(heroData, unitData, 'undying', 'undying_flesh_golem'),\n        new BuffModel(heroData, unitData, 'ursa', 'ursa_earthshock'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_wave_of_terror'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_command_aura'),\n        new BuffModel(heroData, unitData, 'venomancer', 'venomancer_venomous_gale'),\n        new BuffModel(heroData, unitData, 'venomancer', 'venomancer_poison_sting'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_poison_attack'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_corrosive_skin'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_viper_strike'),\n        new BuffModel(heroData, unitData, 'visage', 'visage_grave_chill'),\n        new BuffModel(heroData, unitData, 'warlock', 'warlock_upheaval'),\n        new BuffModel(heroData, unitData, 'weaver', 'weaver_the_swarm'),\n        new BuffModel(heroData, unitData, 'windrunner', 'windrunner_windrun'),\n        new BuffModel(heroData, unitData, 'winter_wyvern', 'winter_wyvern_arctic_burn'),\n        new BuffModel(heroData, unitData, 'winter_wyvern', 'winter_wyvern_splinter_blast'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ghost', 'ghost_frost_attack'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_polar_furbolg_ursa_warrior', 'polar_furbolg_ursa_warrior_thunder_clap'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ogre_magi', 'ogre_magi_frost_armor'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_satyr_trickster', 'satyr_trickster_purge'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_enraged_wildkin', 'enraged_wildkin_tornado')\n    ];\n    return debuffOptionsArray.items;\n}\n\ndebuffOptionsArray.init = init;\n\nmodule.exports = debuffOptionsArray;","var HeroCalcData = {\n    heroData: {},\n    itemData: {},\n    unitData: {}\n};\n\nmodule.exports = HeroCalcData;","var HeroCalcData = require('./HeroCalcData') || {};\nvar getJSON = require(\"../util/getJSON\");\nvar isEmpty = require(\"../util/isEmpty\");\nvar isString = require(\"../util/isString\");\nvar extend = function(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n      continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n        out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\nvar resourceCounter = 0;\n\nvar onResourceLoaded = function (callback) {\n    resourceCounter--;\n    if (resourceCounter === 0) {\n        fixHeroData(HeroCalcData.heroData);\n        modifyItemData(HeroCalcData.itemData);\n        if (callback) callback();\n    }\n}\n\nvar modifyItemData = function (itemData) {\n    itemData[\"item_bottle_doubledamage\"] = {\n        displayname: \"Double Damage\",\n        name: \"item_bottle_doubledamage\",\n        attributes: [{\n            \"name\": \"bottle_doubledamage\", \n            \"tooltip\": \"%BONUS ATTACK DAMAGE:\", \n            \"value\": [\n                100\n            ]\n        }]\n    }\n}\n\nvar fixHeroData = function (heroData) {\n    heroData['npc_dota_hero_invoker'].abilities[5].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_chen'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_nevermore'].abilities[1].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_nevermore'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_morphling'].abilities[3].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_ogre_magi'].abilities[3].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_techies'].abilities[4].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_beastmaster'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n\n    var index = heroData['npc_dota_hero_lone_druid'].abilities[3].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN');\n    heroData['npc_dota_hero_lone_druid'].abilities[3].behavior.splice(index, 1);\n\n    index = heroData['npc_dota_hero_abaddon'].abilities[2].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE');\n    heroData['npc_dota_hero_abaddon'].abilities[2].behavior.splice(index, 1);\n\n    index = heroData['npc_dota_hero_riki'].abilities[2].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE');\n    heroData['npc_dota_hero_riki'].abilities[2].behavior.splice(index, 1);\n}\n\nvar init = function (HERODATA_PATH, ITEMDATA_PATH, UNITDATA_PATH, callback) {\n    resourceCounter = 3;\n    \n    if (!HeroCalcData.heroData || isEmpty(HeroCalcData.heroData)) {\n        if (isString(HERODATA_PATH)) {\n            getJSON(HERODATA_PATH, function (data) {\n                HeroCalcData.heroData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(HERODATA_PATH)) {\n            HeroCalcData.heroData = HERODATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n    \n    if (!HeroCalcData.itemData || isEmpty(HeroCalcData.itemData)) {\n        if (isString(ITEMDATA_PATH)) {\n            getJSON(ITEMDATA_PATH, function (data) {\n                HeroCalcData.itemData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(ITEMDATA_PATH)) {\n            HeroCalcData.itemData = ITEMDATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n    \n    if (!HeroCalcData.unitData || isEmpty(HeroCalcData.unitData)) {\n        if (isString(UNITDATA_PATH)) {\n            getJSON(UNITDATA_PATH, function (data) {\n                HeroCalcData.unitData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(UNITDATA_PATH)) {\n            HeroCalcData.unitData = UNITDATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n}\n    \nHeroCalcData.init = init;\n\nmodule.exports = HeroCalcData;","'use strict';\nvar HeroModel = require(\"./HeroModel\");\n\nvar CloneModel = function (heroData, itemData, h,p) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, h);\n    self.parent = p;\n    return self;\n}\nCloneModel.prototype = Object.create(HeroModel.prototype);\nCloneModel.prototype.constructor = CloneModel;\n\nmodule.exports = CloneModel;","var DamageTypeColor = {\n    'physical': '#979aa2',\n    'pure': 'goldenrod',\n    'magic': '#428bca',\n    'default': '#979aa2'\n}\n\nmodule.exports = DamageTypeColor;","'use strict';\nvar ko = require('../herocalc_knockout');\n    \nvar DamageTypeColor = require(\"./DamageTypeColor\");\nvar extend = require(\"../util/extend\");\n\nvar HeroDamageMixin = function (self, itemData) {\n    self.critInfo = ko.pureComputed(function () {\n        var critSources = self.inventory.getCritSource();\n        extend(critSources, self.ability().getCritSource());\n        extend(critSources, self.buffs.getCritSource());\n        var critSourcesArray = [];\n        for (var prop in critSources) {\n            var el = critSources[prop];\n            el.name = prop\n            critSourcesArray.push(el);\n        }\n        function compareByMultiplier(a,b) {\n            if (a.multiplier < b.multiplier)\n                return 1;\n            if (a.multiplier > b.multiplier)\n                return -1;\n            return 0;\n        }\n\n        critSourcesArray.sort(compareByMultiplier);\n        \n        var result = [];\n        var critTotal = 0;\n        for (var i = 0; i < critSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k <critSourcesArray[j].count; k++) {\n                    total *= (1 - critSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < critSourcesArray[i].count; k++) {\n                total2 *= (1 - critSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            critTotal += total;\n            if (critSourcesArray[i].count > 1) {\n                result.push({\n                    'name':critSourcesArray[i].displayname + ' x' + critSourcesArray[i].count,\n                    'chance':critSourcesArray[i].chance,\n                    'multiplier':critSourcesArray[i].multiplier,\n                    'count':critSourcesArray[i].count,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':critSourcesArray[i].displayname,\n                    'chance':critSourcesArray[i].chance,\n                    'multiplier':critSourcesArray[i].multiplier,\n                    'count':critSourcesArray[i].count,\n                    'totalChance':total\n                });\n            }\n        }\n        return { sources: result, total: critTotal };\n    });\n\n    self.cleaveInfo = ko.pureComputed(function () {\n        var cleaveSources = self.inventory.getCleaveSource();\n        extend(cleaveSources, self.ability().getCleaveSource());\n        extend(cleaveSources, self.buffs.getCleaveSource());\n        var cleaveSourcesArray = [];\n        for (var prop in cleaveSources) {\n            var el = cleaveSources[prop];\n            el.name = prop\n            cleaveSourcesArray.push(el);\n        }\n        function compareByRadius(a,b) {\n            if (a.radius < b.radius)\n                return 1;\n            if (a.radius > b.radius)\n                return -1;\n            return 0;\n        }\n\n        cleaveSourcesArray.sort(compareByRadius);\n        var cleaveSourcesByRadius = {};\n        for (var i = 0; i < cleaveSourcesArray.length; i++) {\n            var total = 0;\n            for (var j = 0; j <cleaveSourcesArray.length; j++) {\n                if (cleaveSourcesArray[j].radius >= cleaveSourcesArray[i].radius) {\n                    total += cleaveSourcesArray[j].magnitude * cleaveSourcesArray[j].count;\n                }\n            }\n            cleaveSourcesByRadius[cleaveSourcesArray[i].radius] = total;\n        }\n        var result = [];\n        for (var prop in cleaveSourcesByRadius) {\n            result.push({\n                'radius':prop,\n                'magnitude':cleaveSourcesByRadius[prop]\n            });\n        }\n        return result;\n    });\n    \n    self.bashInfo = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        var bashSources = self.inventory.getBashSource(attacktype);\n        extend(bashSources, self.ability().getBashSource());\n        var bashSourcesArray = [];\n        for (var prop in bashSources) {\n            var el = bashSources[prop];\n            el.name = prop\n            bashSourcesArray.push(el);\n        }\n        function compareByDuration(a, b) {\n            if (a.duration < b.duration)\n                return 1;\n            if (a.duration > b.duration)\n                return -1;\n            return 0;\n        }\n\n        //bashSourcesArray.sort(compareByDuration);\n        \n        var result = [];\n        var bashTotal = 0;\n        for (var i = 0;i < bashSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k < bashSourcesArray[j].count; k++) {\n                    total *= (1 - bashSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < bashSourcesArray[i].count; k++) {\n                total2 *= (1 - bashSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            bashTotal += total;\n            if (bashSourcesArray[i].name === 'spirit_breaker_greater_bash') {\n                var d = bashSourcesArray[i].damage * self.totalMovementSpeed();\n            }\n            else {\n                var d = bashSourcesArray[i].damage;\n            }\n            if (bashSourcesArray[i].count > 1) {\n                result.push({\n                    'name':bashSourcesArray[i].displayname, // + ' x' + bashSourcesArray[i].count,\n                    'chance':bashSourcesArray[i].chance,\n                    'damage':d,\n                    'count':bashSourcesArray[i].count,\n                    'damageType':bashSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':bashSourcesArray[i].displayname,\n                    'chance':bashSourcesArray[i].chance,\n                    'damage':d,\n                    'count':bashSourcesArray[i].count,\n                    'damageType':bashSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n\n        }\n        return { sources: result, total: bashTotal };\n    });\n    \n    self.orbProcInfo = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        var damageSources = self.inventory.getOrbProcSource();\n        var damageSourcesArray = [];\n        for (var prop in damageSources) {\n            var el = damageSources[prop];\n            el.name = prop\n            damageSourcesArray.push(el);\n        }\n        function compareByDamage(a, b) {\n            if (a.priority > b.priority) {\n                return 1;\n            }\n            if (a.priority < b.priority) {\n                return -1;\n            }\n            if (a.damage < b.damage)\n                return 1;\n            if (a.damage > b.damage)\n                return -1;\n            return 0;\n        }\n\n        damageSourcesArray.sort(compareByDamage);\n        \n        var result = [];\n        var damageTotal = 0;\n        for (var i=0 ; i < damageSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k < damageSourcesArray[j].count; k++) {\n                    total *= (1 - damageSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < damageSourcesArray[i].count; k++) {\n                total2 *= (1 - damageSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            damageTotal += total;\n            if (damageSourcesArray[i].count > 1) {\n                result.push({\n                    'name':damageSourcesArray[i].displayname + ' x' + damageSourcesArray[i].count,\n                    'chance':damageSourcesArray[i].chance,\n                    'damage':damageSourcesArray[i].damage,\n                    'count':damageSourcesArray[i].count,\n                    'damageType':damageSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':damageSourcesArray[i].displayname,\n                    'chance':damageSourcesArray[i].chance,\n                    'damage':damageSourcesArray[i].damage,\n                    'count':damageSourcesArray[i].count,\n                    'damageType':damageSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n        }\n        return { sources: result, total: damageTotal };\n    });\n    \n    self.getReducedDamage = function (value, type) {\n        var result = value;\n        switch (type) {\n            case 'physical':\n                result = value * (1 - (0.06 * self.enemy().totalArmorPhysical()) / (1 + 0.06 * Math.abs(self.enemy().totalArmorPhysical())));\n            break;\n            case 'magic':\n                result = value * (1 - self.enemy().totalMagicResistance() / 100);\n            break;\n            case 'pure':\n                result = value;\n            break;\n            case 'composite':\n                result = value * (1 - (0.06 * self.enemy().totalArmorPhysical()) / (1 + 0.06 * Math.abs(self.enemy().totalArmorPhysical())));\n                result *= (1 - self.enemy().totalMagicResistance() / 100);\n            break;\n        }\n        result *= self.ability().getDamageAmplification() * self.debuffs.getDamageAmplification();\n        result *= self.enemy().ability().getDamageReduction() * self.enemy().buffs.getDamageReduction();\n        return result;\n    }\n    \n    self.damageTotalInfo = ko.pureComputed(function () {\n        var bonusDamageArray = [\n            self.ability().getBonusDamage().sources,\n            self.buffs.getBonusDamage().sources\n        ],\n        bonusDamagePctArray = [\n            self.ability().getBonusDamagePercent().sources,\n            self.buffs.getBonusDamagePercent().sources\n        ],\n        itemBonusDamage = self.inventory.getBonusDamage().sources,\n        itemBonusDamagePct = self.buffs.itemBuffs.getBonusDamagePercent(self.inventory.getBonusDamagePercent()).sources,\n        critSources = self.critInfo(),\n        abilityOrbSources = self.ability().getOrbSource(),\n        itemOrbSources = self.inventory.getOrbSource(),\n        itemProcOrbSources = self.orbProcInfo(),\n        bashSources = self.bashInfo(),\n        \n        attackSources = [];\n        \n        attackSources.push({\n            name: 'Base Attack',\n            cooldown: 1\n        });\n        \n        // weaver_geminate_attack\n        if (self.heroId() === 'weaver') {\n            var a = self.ability().abilities().find(function (ability) {\n                return ability.name === 'weaver_geminate_attack';\n            });\n            if (a) {\n                if (a.level() > 0) {\n                    var cd = a.cooldown[a.level() - 1];\n                    attackSources.push({\n                        name: a.displayname,\n                        cooldown: (1/cd)\n                    });\n                }\n            }\n        }\n        \n        // echo_sabre\n        var item = self.inventory.items().find(function (o) { return o.item === \"echo_sabre\" && o.enabled(); });\n        if (item && self.heroData().attacktype === 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n            var item_echo_sabre = itemData['item_echo_sabre'];\n            attackSources.push({\n                name: item_echo_sabre.displayname,\n                cooldown: (1/item_echo_sabre.cooldown)\n            });\n        }\n\n        var attacks = attackSources.map(function (a) {\n            var baseDamage = (self.baseDamage()[0] + self.baseDamage()[1]) / 2,\n            totalDamage = 0,\n            totalCritableDamage = 0,\n            totalCrit = 0,\n            geminateAttack = { damage: 0, damageReduced: 0, cooldown: 6, active: false },\n            echoSabreAttack = { damage: 0, damageReduced: 0, cooldown: itemData['item_echo_sabre'].cooldown[0], active: false },\n            damage = {\n                pure: 0,\n                physical: 0,\n                magic: 0\n            },\n            result = [],\n            crits = [];\n            \n            // base damage\n            result.push({\n                name: 'Base Damage',\n                damage: baseDamage,\n                damageType: 'physical',\n                damageReduced: self.getReducedDamage(baseDamage, 'physical'),\n                enabled: ko.observable(true)\n            });\n            totalDamage += baseDamage;\n            totalCritableDamage += baseDamage;\n            damage.physical += baseDamage;\n            \n            // bonus damage from items\n            for (i in itemBonusDamage) {\n                var d = itemBonusDamage[i].damage*itemBonusDamage[i].count * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct();\n                result.push({\n                    name: itemBonusDamage[i].displayname + (itemBonusDamage[i].count > 1 ? ' x' + itemBonusDamage[i].count : ''),\n                    damage: d,\n                    damageType: itemBonusDamage[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemBonusDamage[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                totalCritableDamage += d;\n                damage[itemBonusDamage[i].damageType] += d;\n            }\n\n            // bonus damage percent from items\n            for (i in itemBonusDamagePct) {\n                var d = baseDamage * itemBonusDamagePct[i].damage;\n                result.push({\n                    name: itemBonusDamagePct[i].displayname,\n                    damage: d,\n                    damageType: itemBonusDamagePct[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemBonusDamagePct[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                totalCritableDamage += d;\n                damage[itemBonusDamagePct[i].damageType] += d;\n            }\n            \n            // bonus damage from abilities and buffs\n            for (var i = 0; i < bonusDamageArray.length; i++) {\n                for (j in bonusDamageArray[i]) {\n                    var d = bonusDamageArray[i][j].damage;\n                    result.push({\n                        name: bonusDamageArray[i][j].displayname,\n                        damage: d,\n                        damageType: bonusDamageArray[i][j].damageType,\n                        damageReduced: self.getReducedDamage(d, bonusDamageArray[i][j].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage[bonusDamageArray[i][j].damageType] += d;\n                }\n            }\n            \n            // bonus damage percent from abilities and buffs\n            for (var i = 0; i < bonusDamagePctArray.length; i++) {\n                for (j in bonusDamagePctArray[i]) {\n                    var d = baseDamage * bonusDamagePctArray[i][j].damage;\n                    result.push({\n                        name: bonusDamagePctArray[i][j].displayname,\n                        damage: d,\n                        damageType: bonusDamagePctArray[i][j].damageType,\n                        damageReduced: self.getReducedDamage(d, bonusDamagePctArray[i][j].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage[bonusDamagePctArray[i][j].damageType] += d;\n                }\n            }\n            // drow_ranger_trueshot\n            if (self.heroData().attacktype === 'DOTA_UNIT_CAP_RANGED_ATTACK') {\n                if (self.heroId() === 'drow_ranger') {\n                    var s = self.ability().getBonusDamagePrecisionAura().sources;\n                    var index = 0;\n                }\n                else {\n                    var s = self.buffs.getBonusDamagePrecisionAura().sources;\n                    var index = 1;\n                }\n                if (s[index] != undefined) {\n                    if (self.heroId() === 'drow_ranger') {\n                        var d = s[index].damage * self.totalAgi();\n                    }\n                    else {\n                        var d = s[index].damage;\n                    }\n                    result.push({\n                        name: s[index].displayname,\n                        damage: d,\n                        damageType: 'physical',\n                        damageReduced: self.getReducedDamage(d, 'physical'),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage.physical += d;                    \n                }\n            }\n            \n            // riki_backstab\n            if (self.heroId() === 'riki') {\n                var s = self.ability().getBonusDamageBackstab().sources;\n                var index = 0;\n            }\n            else {\n                var s = self.buffs.getBonusDamageBackstab().sources;\n                var index = 1;\n            }\n            if (s[index] != undefined) {\n                if (self.heroId() === 'riki') {\n                    var d = s[index].damage * self.totalAgi();\n                }\n                else {\n                    var d = s[index].damage;\n                }\n                result.push({\n                    name: s[index].displayname,\n                    damage: d,\n                    damageType: 'physical',\n                    damageReduced: self.getReducedDamage(d, 'physical'),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                //totalCritableDamage += d;\n                damage.physical += d;                    \n            }\n\n            // bash damage\n            for (var i = 0; i < bashSources.sources.length; i++) {\n                var o = bashSources.sources[i];\n                var d = bashSources.sources[i].damage;\n                var cd = self.attacksPerSecond();\n                if (o.cooldown) {\n                    cd = Math.max(1/o.cooldown, cd);\n                }\n                for (var j = 0; j < bashSources.sources[i].count; j++) {\n                    result.push({\n                        name: bashSources.sources[i].name,\n                        damage: d,\n                        damageType: bashSources.sources[i].damageType,\n                        damageReduced: self.getReducedDamage(d, bashSources.sources[i].damageType),\n                        dps: d * cd * bashSources.sources[i].chance,\n                        dpsReduced: self.getReducedDamage(d, bashSources.sources[i].damageType) * cd * bashSources.sources[i].chance,\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    damage[bashSources.sources[i].damageType] += d;\n                }\n\n            }\n            \n            // %-based orbs\n            for (var i = 0; i < itemProcOrbSources.sources.length; i++) {\n                var d = itemProcOrbSources.sources[i].damage * (1 - Math.pow(1 - itemProcOrbSources.sources[i].chance, itemProcOrbSources.sources[i].count));\n                result.push({\n                    name: itemProcOrbSources.sources[i].name,\n                    damage: d,\n                    damageType: itemProcOrbSources.sources[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemProcOrbSources.sources[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                damage[itemProcOrbSources.sources[i].damageType] += d;\n            }\n            \n            // ability orbs\n            for (var orb in abilityOrbSources) {\n                var d = abilityOrbSources[orb].damage * (1 - itemProcOrbSources.total);\n                result.push({\n                    name: abilityOrbSources[orb].displayname,\n                    damage: d,\n                    damageType: abilityOrbSources[orb].damageType,\n                    damageReduced: self.getReducedDamage(d, abilityOrbSources[orb].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                damage[abilityOrbSources[orb].damageType] += d;\n            }\n            \n            // item orbs\n            if (Object.keys(abilityOrbSources).length === 0) {\n                for (var orb in itemOrbSources) {\n                    var d = itemOrbSources[orb].damage * (1 - itemProcOrbSources.total);\n                    result.push({\n                        name: itemOrbSources[orb].displayname,\n                        damage: d,\n                        damageType: itemOrbSources[orb].damageType,\n                        damageReduced: self.getReducedDamage(d, itemOrbSources[orb].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    damage[itemOrbSources[orb].damageType] += d;\n                }            \n            }\n            \n            // crit damage\n            for (var i = 0; i < critSources.sources.length; i++) {\n                var d = totalCritableDamage * (critSources.sources[i].multiplier - 1);// * critSources.sources[i].totalChance;\n                crits.push({\n                    name: critSources.sources[i].name + ', ' + critSources.sources[i].multiplier + 'x, ' + (critSources.sources[i].totalChance * 100).toFixed(1) + '%',\n                    damage: d,\n                    damageType: 'physical',\n                    damageReduced: self.getReducedDamage(d, 'physical'),\n                    enabled: ko.observable(true),\n                    chance: critSources.sources[i].totalChance\n                });\n                totalCrit += d;\n            }\n\n            var totalReduced = self.getReducedDamage(damage.pure, 'pure') \n                    + self.getReducedDamage(damage.physical, 'physical')\n                    + self.getReducedDamage(damage.magic, 'magic'),\n                totalCritReduced = self.getReducedDamage(totalCrit, 'physical'),\n                dps = {\n                    base: totalDamage * self.attacksPerSecond(),\n                    crit: totalCrit * self.attacksPerSecond(),\n                    geminateAttack: geminateAttack.active ? geminateAttack.damage / geminateAttack.cooldown : 0,\n                    reduced: {\n                        base: totalReduced * self.attacksPerSecond(),\n                        crit: totalCritReduced * self.attacksPerSecond(),\n                        geminateAttack: geminateAttack.active ? self.getReducedDamage(geminateAttack.damage, 'physical') / geminateAttack.cooldown : 0,\n                    }\n                }\n                \n            crits.forEach(function (o) {\n                if (!o.dps) {\n                    o.dps = o.damage * (o.cooldown || self.attacksPerSecond()) * o.chance;\n                }\n                if (!o.dpsReduced) {\n                    o.dpsReduced = o.damageReduced * (o.cooldown || self.attacksPerSecond()) * o.chance;\n                }\n            });\n                \n            result.forEach(function (o) {\n                if (!o.dps) {\n                    o.dps = o.damage * (o.cooldown || self.attacksPerSecond());\n                }\n                if (!o.dpsReduced) {\n                    o.dpsReduced = o.damageReduced * (o.cooldown || self.attacksPerSecond());\n                }\n            });\n            \n            var totalCritChance = crits.reduce(function (memo, o) { return memo + o.chance }, 0);\n                \n            var t1Crit = ko.computed(function () {\n                var c = crits.find(function (o) { return o.enabled(); });\n                return c ? c.damage : 0;\n            });\n            var t2Crit = ko.computed(function () {\n                var c = crits.find(function (o) { return o.enabled(); });\n                return c ? c.damageReduced : 0;\n            });\n            var t3Crit = ko.computed(function () {\n                return crits.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dps }, 0);\n            });\n            var t4Crit = ko.computed(function () {\n                return crits.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dpsReduced }, 0);\n            });\n                \n            var t1 = ko.computed(function () {\n                return result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.damage }, 0) + t1Crit();\n            });\n            var t2 = ko.computed(function () {\n                return result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.damageReduced }, 0) + t2Crit();\n            });\n            var t3 = ko.computed(function () {\n                return (result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dps }, 0) + t3Crit()) * a.cooldown;\n            });\n            var t4 = ko.computed(function () {\n                return (result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dpsReduced }, 0) + t4Crit()) * a.cooldown;\n            });\n            \n            var totalCritRow = [t1Crit, t2Crit, t3Crit, t4Crit];\n            \n            var totalRow = [t1, t2, t3, t4];\n\n            return {\n                name: a.name + ' Subtotal',\n                cooldown: a.cooldown,\n                enabled: ko.observable(true),\n                visible: ko.observable(true),\n                totalCritChance: totalCritChance,\n                totalCritRow: totalCritRow,\n                totalRow: totalRow,\n                sources: result,\n                sourcesCrit: crits,\n                total: totalDamage,\n                totalCrit: totalCrit,\n                totalGeminateAttack: totalDamage + geminateAttack.damage,\n                totalGeminateAttackReduced: totalReduced + geminateAttack.damageReduced,\n                geminateAttack: geminateAttack,\n                totalCritReduced: totalCritReduced,\n                totalReduced: totalReduced,\n                sumTotal: totalDamage + totalCrit,\n                sumTotalReduced: totalReduced + totalCritReduced,\n                dps: {\n                    base: dps.base,\n                    crit: dps.base + dps.crit,\n                    geminateAttack: dps.base + dps.geminateAttack,\n                    total: dps.base + dps.crit + dps.geminateAttack,\n                    reduced: {\n                        base: dps.reduced.base,\n                        crit: dps.reduced.base + dps.reduced.crit,\n                        geminateAttack: dps.reduced.base + dps.reduced.geminateAttack,\n                        total: dps.reduced.base + dps.reduced.crit + dps.reduced.geminateAttack\n                    }\n                }\n            };\n        });\n        \n        var t1 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[0]() }, 0);\n        });\n        var t2 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[1]() }, 0);\n        });\n        var t3 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[2]() }, 0);\n        });\n        var t4 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[3]() }, 0);\n        });\n            \n        return {\n            attacks: attacks,\n            totalRow: [t1, t2, t3, t4]\n        }\n    });\n    \n    self.getDamageTypeColor = function (damageType) {\n        return DamageTypeColor[damageType] || DamageTypeColor['default'];\n    }\n    \n}\n\nmodule.exports = HeroDamageMixin;","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar AbilityModel = require(\"../AbilityModel\");\nvar BuffViewModel = require(\"../BuffViewModel\");\nvar InventoryViewModel = require(\"../inventory/InventoryViewModel\");\nvar diffProperties = require(\"./diffProperties\");\nvar HeroDamageMixin = require(\"./HeroDamageMixin\");\nvar TalentController = require(\"./TalentController\");\nvar totalExp = require(\"./totalExp\");\nvar nextLevelExp = require(\"./nextLevelExp\");\n\nvar HeroModel = function (heroData, itemData, h) {\n    var self = this;\n    self.heroId = ko.observable(h);\n    self.selectedHeroLevel = ko.observable(1);\n    self.inventory = new InventoryViewModel(itemData, self);\n    self.selectedInventory = ko.observable(-1);\n    self.buffs = new BuffViewModel(itemData);\n    self.buffs.hasScepter = self.inventory.hasScepter;\n    self.debuffs = new BuffViewModel(itemData);\n    self.heroData = ko.computed(function () {\n      return heroData['npc_dota_hero_' + self.heroId()];\n    });\n    self.heroCompare = ko.observable(self);\n    self.enemy = ko.observable(self);\n    self.unit = ko.observable(self);\n    self.clone = ko.observable(self);\n    \n    self.talents = [\n        ko.observable(-1),\n        ko.observable(-1),\n        ko.observable(-1),\n        ko.observable(-1)\n    ];\n    \n    self.selectedTalents = ko.computed(function () {\n        var arr = [];\n        for (var i = 0; i < 4; i++) {\n            if (self.talents[i]() !== -1) {\n                arr.push(self.heroData().talents[i][self.talents[i]()]);\n            }\n        }\n        return arr;\n    });\n    \n    self.skillPointHistory = ko.observableArray();\n    \n    self.ability = ko.computed(function () {\n        var a = new AbilityModel(ko.observableArray(JSON.parse(JSON.stringify(self.heroData().abilities))), self);\n        switch (self.heroId()) {\n            case 'earth_spirit':\n            case 'ogre_magi':\n                a._abilities[3].level(1);\n            break;\n            case 'monkey_king':\n                a._abilities[5].level(1);\n            break;\n            case 'invoker':\n                for (var i = 5; i < 16; i++) {\n                    a._abilities[i].level(1);\n                }\n            break;\n        }\n        self.skillPointHistory.removeAll();\n        a.hasScepter = self.inventory.hasScepter\n        return a;\n    });\n\n    self.availableSkillPoints = ko.computed(function () {\n        var c = self.selectedHeroLevel();\n        for (var i = 0; i < 4; i++) {\n            if (self.selectedHeroLevel() < i * 5 + 10) self.talents[i](-1);\n        }\n        c -= self.talents.filter(function (talent) { return talent() !== -1 }).length;\n        for (var i = 0; i < self.ability().abilities().length; i++) {\n            switch(self.ability().abilities()[i].abilitytype) {\n                case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                    if (self.heroId() === 'invoker') {\n                        /*while (\n                            ((self.ability().abilities()[i].level() == 1) && (parseInt(self.selectedHeroLevel()) < 2)) ||\n                            ((self.ability().abilities()[i].level() == 2) && (parseInt(self.selectedHeroLevel()) < 7)) ||\n                            ((self.ability().abilities()[i].level() == 3) && (parseInt(self.selectedHeroLevel()) < 11)) ||\n                            ((self.ability().abilities()[i].level() == 4) && (parseInt(self.selectedHeroLevel()) < 17))\n                        ) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }*/\n                    }\n                    else if (self.heroId() === 'meepo') {\n                        while ((self.ability().abilities()[i].level()-1) * 7 + 3 > parseInt(self.selectedHeroLevel())) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }\n                    }\n                    else {\n                        while (self.ability().abilities()[i].level() * 5 + 1 > parseInt(self.selectedHeroLevel())) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }\n                    }\n                break;\n                default:\n                    while (self.ability().abilities()[i].level() * 2 - 1 > parseInt(self.selectedHeroLevel())) {\n                        self.ability().levelDownAbility(i, null, null, self);\n                    }\n                break;\n            }\n        }\n        while (self.skillPointHistory().length > c) {\n            self.ability().levelDownAbility(self.skillPointHistory()[self.skillPointHistory().length-1], null, null, self);\n        }\n        return c-self.skillPointHistory().length;\n    }, this);\n    self.primaryAttribute = ko.pureComputed(function () {\n        var v = self.heroData().attributeprimary;\n        if (v === 'DOTA_ATTRIBUTE_AGILITY') return 'agi';\n        if (v === 'DOTA_ATTRIBUTE_INTELLECT') return 'int';\n        if (v === 'DOTA_ATTRIBUTE_STRENGTH') return 'str';\n        return '';\n    });\n    self.totalExp = ko.pureComputed(function () {\n        return totalExp[self.selectedHeroLevel() - 1];\n    });\n    self.nextLevelExp = ko.pureComputed(function () {\n        return nextLevelExp[self.selectedHeroLevel() - 1];\n    });\n    self.startingArmor = ko.pureComputed(function () {\n        return (self.heroData().attributebaseagility * .14 + self.heroData().armorphysical).toFixed(2);\n    });\n    self.respawnTime = ko.pureComputed(function () {\n        var level = self.selectedHeroLevel();\n        var reduction = TalentController.getRespawnReduction(self.selectedTalents());\n        if (level >= 1 && level <= 5) {\n            return (level - 1) * 2 + 8 - reduction;\n        }\n        else if (level >= 6 && level <= 11) {\n            return (level - 6) * 2 + 26 - reduction;\n        }\n        else if (level >= 12 && level <= 17) {\n            return (level - 12) * 2 + 46 - reduction;\n        }\n        else if (level >= 18 && level <= 24) {\n            return (level - 18) * 4 + 66 - reduction;\n        }\n        else if (level == 25) {\n            return 100 - reduction;\n        }\n    });\n    self.totalAttribute = function (a) {\n        if (a === 'agi') return parseFloat(self.totalAgi());\n        if (a === 'int') return parseFloat(self.totalInt());\n        if (a === 'str') return parseFloat(self.totalStr());\n        return 0;\n    };\n    self.totalAgi = ko.pureComputed(function () {\n        return (self.heroData().attributebaseagility\n                + self.heroData().attributeagilitygain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getAgility()\n                + TalentController.getAgility(self.selectedTalents())\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.intStolen = ko.observable(0).extend({ numeric: 0 });\n    self.totalInt = ko.pureComputed(function () {\n        return (self.heroData().attributebaseintelligence \n                + self.heroData().attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getIntelligence()\n                + TalentController.getIntelligence(self.selectedTalents())\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction() + self.intStolen()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.pureComputed(function () {\n        return (self.heroData().attributebasestrength \n                + self.heroData().attributestrengthgain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getStrength()\n                + TalentController.getStrength(self.selectedTalents())\n                + self.enemy().ability().getStrengthReduction()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.health = ko.pureComputed(function () {\n        return (self.heroData().statushealth + Math.floor(self.totalStr()) * 20 \n                + self.inventory.getHealth()\n                + self.ability().getHealth()\n                + TalentController.getHealth(self.selectedTalents())\n                ).toFixed(2);\n    });\n    self.healthregen = ko.pureComputed(function () {\n        var healthRegenAura = [self.inventory.getHealthRegenAura, self.buffs.itemBuffs.getHealthRegenAura].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value: 0, excludeList: []});\n        return (self.heroData().statushealthregen + self.totalStr() * .03 \n                + self.inventory.getHealthRegen() \n                + self.ability().getHealthRegen()\n                + TalentController.getHealthRegen(self.selectedTalents())\n                + self.buffs.getHealthRegen()\n                + healthRegenAura.value\n                ).toFixed(2);\n    });\n    self.mana = ko.pureComputed(function () {\n        return (self.heroData().statusmana\n                + self.totalInt() * 12\n                + self.inventory.getMana()\n                + TalentController.getMana(self.selectedTalents())\n                + self.ability().getMana()).toFixed(2);\n    });\n    self.manaregen = ko.pureComputed(function () {\n        return ((self.heroData().statusmanaregen \n                + self.totalInt() * .04 \n                + self.ability().getManaRegen()\n                + TalentController.getManaRegen(self.selectedTalents())\n                ) \n                * (1 + self.inventory.getManaRegenPercent()) \n                + (self.heroId() === 'crystal_maiden' ? self.ability().getManaRegenArcaneAura() * 2 : self.buffs.getManaRegenArcaneAura())\n                + self.inventory.getManaRegenBloodstone()\n                + self.inventory.getManaRegen()\n                - self.enemy().ability().getManaRegenReduction()).toFixed(2);\n    });\n    self.totalArmorPhysical = ko.pureComputed(function () {\n        var armorAura = [self.inventory.getArmorAura, self.buffs.itemBuffs.getArmorAura].reduce(function (memo, fn) {\n            var obj = fn(memo.attributes);\n            return obj;\n        }, {value:0, attributes:[]});\n        var armorReduction = [self.enemy().inventory.getArmorReduction, self.debuffs.itemBuffs.getArmorReduction].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value: 0, excludeList: []});\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (self.heroData().armorphysical + self.totalAgi() * .14)\n                + self.inventory.getArmor()\n                //+ self.inventory.getArmorAura().value\n                //+ self.enemy().inventory.getArmorReduction()\n                + self.ability().getArmor()\n                + TalentController.getArmor(self.selectedTalents())\n                + self.enemy().ability().getArmorReduction()\n                + self.buffs.getArmor()\n                + self.buffs.itemBuffs.getArmor()\n                + self.debuffs.getArmorReduction()\n                //+ self.buffs.itemBuffs.getArmorAura().value\n                + armorAura.value\n                + armorReduction.value\n                //+ self.debuffs.getArmorReduction()\n                ).toFixed(2);\n    });\n    self.totalArmorPhysicalReduction = ko.pureComputed(function () {\n        var totalArmor = self.totalArmorPhysical();\n        if (totalArmor >= 0) {\n            return ((0.06 * self.totalArmorPhysical()) / (1 + 0.06 * self.totalArmorPhysical()) * 100).toFixed(2);\n        }\n        else {\n            return -((0.06 * -self.totalArmorPhysical()) / (1 + 0.06 * -self.totalArmorPhysical()) * 100).toFixed(2);\n        }\n    });\n    self.spellAmp = ko.pureComputed(function () {\n        return (self.totalInt() / 16\n                + self.inventory.getSpellAmp()\n                + self.ability().getSpellAmp()\n                + TalentController.getSpellAmp(self.selectedTalents())\n                + self.buffs.getSpellAmp()\n                ).toFixed(2);\n    });\n    self.cooldownReductionFlat = ko.pureComputed(function () {\n        return self.inventory.getCooldownReductionFlat()\n                + self.ability().getCooldownReductionFlat()\n                + TalentController.getCooldownReductionFlat(self.selectedTalents())\n                + self.buffs.getCooldownReductionFlat()\n                - self.enemy().inventory.getCooldownIncreaseFlat()\n                - self.enemy().ability().getCooldownIncreaseFlat()\n                - self.debuffs.getCooldownIncreaseFlat()\n                - self.debuffs.itemBuffs.getCooldownIncreaseFlat();\n    });\n    self.cooldownReductionProduct = ko.pureComputed(function () {\n        return self.inventory.getCooldownReductionPercent().value\n                * self.ability().getCooldownReductionPercent()\n                * TalentController.getCooldownReductionPercent(self.selectedTalents())\n                * self.buffs.getCooldownReductionPercent()\n                * self.enemy().inventory.getCooldownIncreasePercent()\n                * self.enemy().ability().getCooldownIncreasePercent()\n                * self.debuffs.getCooldownIncreasePercent()\n                * self.debuffs.itemBuffs.getCooldownIncreasePercent();\n    });\n    self.cooldownReductionPercent = ko.pureComputed(function () {\n        return ((1 - self.cooldownReductionProduct()) * 100).toFixed(2);\n    });\n    self.totalMovementSpeed = ko.pureComputed(function () {\n        var MIN_MOVESPEED = 100;\n        var ms = (self.ability().setMovementSpeed() > 0 ? self.ability().setMovementSpeed() : self.buffs.setMovementSpeed());\n        if (ms > 0) {\n            return ms;\n        }\n        else {\n            var movementSpeedPercent = [self.inventory.getMovementSpeedPercent, self.buffs.itemBuffs.getMovementSpeedPercent].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value:0, excludeList:[]});\n            var movementSpeedPercentReduction = [self.enemy().inventory.getMovementSpeedPercentReduction, self.debuffs.itemBuffs.getMovementSpeedPercentReduction].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value:0, excludeList:[]});\n            return Math.max(\n                self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped() ? 140 :\n                (self.heroData().movementspeed + self.inventory.getMovementSpeedFlat() + self.ability().getMovementSpeedFlat() + TalentController.getMovementSpeedFlat(self.selectedTalents())) * \n                (1 //+ self.inventory.getMovementSpeedPercent() \n                   + movementSpeedPercent.value\n                   + movementSpeedPercentReduction.value\n                   + self.ability().getMovementSpeedPercent() \n                   //+ self.enemy().inventory.getMovementSpeedPercentReduction() \n                   + self.enemy().ability().getMovementSpeedPercentReduction() \n                   + self.buffs.getMovementSpeedPercent() \n                   + self.debuffs.getMovementSpeedPercentReduction()\n                   + self.unit().ability().getMovementSpeedPercent() \n                )\n            , MIN_MOVESPEED).toFixed(2);\n        }\n    });\n    self.totalTurnRate = ko.pureComputed(function () {\n        return (self.heroData().movementturnrate \n                * (1 + self.enemy().ability().getTurnRateReduction()\n                     + self.debuffs.getTurnRateReduction())).toFixed(2);\n    });\n    self.baseDamage = ko.pureComputed(function () {\n        var totalAttribute = self.totalAttribute(self.primaryAttribute()),\n            abilityBaseDamage = self.ability().getBaseDamage(),\n            minDamage = self.heroData().attackdamagemin,\n            maxDamage = self.heroData().attackdamagemax;\n        return [Math.floor((minDamage + totalAttribute + abilityBaseDamage.total) * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct() * abilityBaseDamage.multiplier),\n                Math.floor((maxDamage + totalAttribute + abilityBaseDamage.total) * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct() * abilityBaseDamage.multiplier)];\n    });\n    self.baseDamageAvg = ko.pureComputed(function () {\n        return (self.baseDamage()[0] + self.baseDamage()[1]) / 2;\n    });\n    self.baseDamageMin = ko.pureComputed(function () {\n        return self.baseDamage()[0];\n    });\n    self.baseDamageMax = ko.pureComputed(function () {\n        return self.baseDamage()[1];\n    });\n    self.bonusDamage = ko.pureComputed(function () {\n        return ((self.inventory.getBonusDamage().total\n                + self.ability().getBonusDamage().total\n                + TalentController.getBonusDamage(self.selectedTalents()).total\n                + self.buffs.getBonusDamage().total\n                + Math.floor((self.baseDamage()[0] + self.baseDamage()[1]) / 2 \n                              * (self.buffs.itemBuffs.getBonusDamagePercent(self.inventory.getBonusDamagePercent()).total\n                                 + self.ability().getBonusDamagePercent().total\n                                 + self.buffs.getBonusDamagePercent().total\n                                )\n                            )\n                + Math.floor(\n                    (self.heroData().attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK' \n                        ? ((self.heroId() == 'drow_ranger') ? self.ability().getBonusDamagePrecisionAura().total[0] * self.totalAgi() : self.buffs.getBonusDamagePrecisionAura().total[1])\n                        : 0)\n                  )\n                + Math.floor(\n                    ((self.heroId() == 'riki') ? self.ability().getBonusDamageBackstab().total[0] * self.totalAgi() : 0)\n                  )\n                ) * self.ability().getSelfBaseDamageReductionPct()\n                  * self.enemy().ability().getBaseDamageReductionPct()\n                  * self.debuffs.itemBuffs.getBaseDamageReductionPct());\n    });\n    self.bonusDamageReduction = ko.pureComputed(function () {\n        return Math.abs(self.enemy().ability().getBonusDamageReduction() + self.debuffs.getBonusDamageReduction());\n    });\n    self.damageAvg = ko.pureComputed(function () {\n        return (self.baseDamage()[0] + self.baseDamage()[1]) / 2 + self.bonusDamage();\n    });\n    self.damageMin = ko.pureComputed(function () {\n        return self.baseDamage()[0] + self.bonusDamage();\n    });\n    self.damageMax = ko.pureComputed(function () {\n        return self.baseDamage()[1] + self.bonusDamage();\n    });\n    self.damage = ko.pureComputed(function () {\n        return [self.baseDamage()[0] + self.bonusDamage(),\n                self.baseDamage()[1] + self.bonusDamage()];\n    });\n    self.totalMagicResistanceProduct = ko.pureComputed(function () {\n        return (1 - self.heroData().magicalresistance / 100) \n                * self.inventory.getMagicResist()\n                * self.ability().getMagicResist()\n                * TalentController.getMagicResist(self.selectedTalents())\n                * self.buffs.getMagicResist()\n                * self.inventory.getMagicResistReductionSelf()\n                * self.enemy().inventory.getMagicResistReduction()\n                * self.enemy().ability().getMagicResistReduction()\n                * self.debuffs.getMagicResistReduction()\n                * self.debuffs.itemBuffs.getMagicResistReduction();\n    });\n    self.totalMagicResistance = ko.pureComputed(function () {\n        return ((1 - self.totalMagicResistanceProduct()) * 100).toFixed(2);\n    });\n    self.bat = ko.pureComputed(function () {\n        var abilityBAT = self.ability().getBAT();\n        if (abilityBAT > 0) {\n            return abilityBAT;\n        }\n        return self.heroData().attackrate;\n    });\n    self.ias = ko.pureComputed(function () {\n        var attackSpeed = [self.inventory.getAttackSpeed, self.buffs.itemBuffs.getAttackSpeed].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value:0, excludeList:[]});\n        var attackSpeedReduction = [self.enemy().inventory.getAttackSpeedReduction, self.debuffs.itemBuffs.getAttackSpeedReduction].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value:0, excludeList: []});\n        var val = parseFloat(self.totalAgi()) \n                //+ self.inventory.getAttackSpeed() \n                + attackSpeed.value\n                + attackSpeedReduction.value\n                //+ self.enemy().inventory.getAttackSpeedReduction() \n                + self.ability().getAttackSpeed() \n                + TalentController.getAttackSpeed(self.selectedTalents()) \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction()\n                + self.unit().ability().getAttackSpeed(); \n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 500) {\n            return 500;\n        }\n        return val.toFixed(2);\n    });\n    self.attackTime = ko.pureComputed(function () {\n        return (self.bat() / (1 + self.ias() / 100)).toFixed(2);\n    });\n    self.attacksPerSecond = ko.pureComputed(function () {\n        return ((1 + self.ias() / 100) / self.bat()).toFixed(2);\n    });\n    self.evasion = ko.pureComputed(function () {\n        if (self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped()) return 0;\n        var e = self.ability().setEvasion();\n        if (e) {\n            return (e * 100).toFixed(2);\n        }\n        else {\n            return (\n                (\n                    1 - (\n                        self.inventory.getEvasion()\n                        * self.ability().getEvasion()\n                        * self.ability().getEvasionBacktrack()\n                        * TalentController.getEvasion(self.selectedTalents())\n                        * self.buffs.itemBuffs.getEvasion()\n                    )\n                ) * 100\n            ).toFixed(2);\n        }\n    });\n    self.ehpPhysical = ko.pureComputed(function () {\n        var evasion = self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped() ? 1 : self.inventory.getEvasion() * self.ability().getEvasion() * self.buffs.itemBuffs.getEvasion();\n        if (self.totalArmorPhysical() >= 0) {\n            var ehp = self.health() * (1 + .06 * self.totalArmorPhysical());\n        }\n        else {\n            var ehp = self.health() * (1 - .06 * self.totalArmorPhysical()) / (1 - .12 * self.totalArmorPhysical());\n        }\n        ehp /= (1 - (1 - (evasion * self.ability().getEvasionBacktrack())));\n        ehp /= (1 - parseFloat(self.enemy().missChance()) / 100);\n        ehp *= (self.inventory.activeItems().some(function (item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.ability().getDamageReduction());\n        ehp *= (1 / self.buffs.getDamageReduction());\n        ehp *= (1 / self.enemy().ability().getDamageAmplification());\n        ehp *= (1 / self.debuffs.getDamageAmplification());\n        return ehp.toFixed(2);\n    });\n    self.ehpMagical = ko.pureComputed(function () {\n        var ehp = self.health() / self.totalMagicResistanceProduct();\n        ehp *= (self.inventory.activeItems().some(function (item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.ability().getDamageReduction());\n        ehp *= (1 / self.buffs.getDamageReduction());\n        ehp *= (1 / self.ability().getEvasionBacktrack());\n        ehp *= (1 / self.enemy().ability().getDamageAmplification());\n        ehp *= (1 / self.debuffs.getDamageAmplification());\n        return ehp.toFixed(2);\n    });\n    self.bash = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        return ((1 - (self.inventory.getBash(attacktype) * self.ability().getBash())) * 100).toFixed(2);\n    });\n    \n    self.critChance = ko.pureComputed(function () {\n        return ((1 - (self.inventory.getCritChance() * self.ability().getCritChance())) * 100).toFixed(2);\n    });\n\n    HeroDamageMixin(self, itemData);\n    \n    /*self.critDamage = ko.computed(function () {\n        self.critInfo();\n        return 0;\n    });*/\n    self.missChance = ko.pureComputed(function () {\n        var missDebuff = [self.enemy().inventory.getMissChance, self.debuffs.itemBuffs.getMissChance].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value *= memo.value;\n            return obj;\n        }, {value:1, excludeList:[]});\n        return ((1 - (self.enemy().ability().getMissChance() * self.debuffs.getMissChance() * missDebuff.value)) * 100).toFixed(2);\n    });\n    self.totalattackrange = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        return self.heroData().attackrange\n             + self.ability().getAttackRange()\n             + TalentController.getAttackRange(self.selectedTalents())\n             + self.inventory.getAttackRange(attacktype).value;\n    });\n    self.visionrangeday = ko.pureComputed(function () {\n        return (self.heroData().visiondaytimerange) * (1 + self.enemy().ability().getVisionRangePctReduction() + self.debuffs.getVisionRangePctReduction());\n    });\n    self.visionrangenight = ko.pureComputed(function () {\n        return (self.heroData().visionnighttimerange + self.inventory.getVisionRangeNight() + self.ability().getVisionRangeNight()) * (1 + self.enemy().ability().getVisionRangePctReduction() + self.debuffs.getVisionRangePctReduction());\n    });\n    self.lifesteal = ko.pureComputed(function () {\n        var total = self.inventory.getLifesteal()\n                  + self.ability().getLifesteal()\n                  + TalentController.getLifesteal(self.selectedTalents())\n                  + self.buffs.getLifesteal();\n        if (self.heroData().attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n            var lifestealAura = [self.inventory.getLifestealAura, self.buffs.itemBuffs.getLifestealAura].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value: 0, excludeList: []});\n            total += lifestealAura.value;\n        }\n        return (total).toFixed(2);\n    });\n    \n    self.diffProperties = diffProperties;\n    self.diff = {};\n\n    for (var i = 0; i < self.diffProperties.length; i++) {\n        var index = i;\n        self.diff[self.diffProperties[index]] = self.getDiffFunction(self.diffProperties[index]);\n    }\n};\n\nHeroModel.prototype.getDiffFunction = function (prop) {\n    var self = this;\n    return ko.computed(function () {\n        if (prop == 'baseDamage') {\n            return [self[prop]()[0] - self.heroCompare()[prop]()[0], self[prop]()[1] - self.heroCompare()[prop]()[1]];\n        }\n        else {\n            return self[prop]() - self.heroCompare()[prop]();\n        }\n    }, this, { deferEvaluation: true });\n}\n\nHeroModel.prototype.getAbilityLevelMax = function (data) {\n    if (data.abilitytype === 'DOTA_ABILITY_TYPE_ATTRIBUTES') {\n        return 1;\n    }\n    else if (data.name === 'invoker_quas' || data.name === 'invoker_wex' || data.name === 'invoker_exort') {\n        return 7;\n    }\n    else if (data.name === 'invoker_invoke') {\n        return 1;\n    }\n    else if (data.name === 'earth_spirit_stone_caller' || data.name === 'ogre_magi_unrefined_fireblast' || data.name === 'monkey_king_mischief') {\n        return 1;\n    }\n    else if (data.abilitytype === 'DOTA_ABILITY_TYPE_ULTIMATE' || data.name === 'keeper_of_the_light_recall' ||\n             data.name === 'keeper_of_the_light_blinding_light' || data.name === 'ember_spirit_activate_fire_remnant' ||\n             data.name === 'lone_druid_true_form_battle_cry') {\n        return 3;\n    }\n    else if (data.name === 'puck_ethereal_jaunt'  || data.name === 'shadow_demon_shadow_poison_release' ||\n             data.name === 'templar_assassin_trap' || data.name === 'spectre_reality') {\n        return 0;\n    }\n    else if (data.name === 'invoker_cold_snap'  || data.name === 'invoker_ghost_walk' || data.name === 'invoker_tornado' || \n             data.name === 'invoker_emp' || data.name === 'invoker_alacrity' || data.name === 'invoker_chaos_meteor' || \n             data.name === 'invoker_sun_strike' || data.name === 'invoker_forge_spirit' || data.name === 'invoker_ice_wall' || \n             data.name === 'invoker_deafening_blast') {\n        return 0;\n    }\n    else if (data.name === 'techies_minefield_sign' || data.name === 'techies_focused_detonate') {\n        return 0;\n    }\n    else {\n        return 4;\n    }\n};\n\nHeroModel.prototype.toggleTalent = function (talentTier, talentIndex) {\n    if (this.talents[talentTier]() === talentIndex) {\n        this.talents[talentTier](-1);\n    }\n    else if (this.availableSkillPoints() > 0 || this.talents[talentTier]() == 1 - talentIndex) {\n        if (parseInt(this.selectedHeroLevel()) >= talentTier * 5 + 10) {\n            this.talents[talentTier](talentIndex);\n        }\n    }\n}\n\nmodule.exports = HeroModel;","var HeroOption = function (name, displayname, hero) {\n    this.heroName = name;\n    this.heroDisplayName = displayname;\n    this.hero = hero;\n};\n\nmodule.exports = HeroOption;","'use strict';\nvar HeroModel = require(\"./HeroModel\");\nvar illusionData = require(\"../illusion/illusionData\");\nvar findWhere = require(\"../util/findWhere\");\n\nvar IllusionModel = function (heroData, itemData, h,p, abilityLevel) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, h);\n    self.illusionAbilityLevel = ko.observable(abilityLevel);\n    self.parent = p;\n    \n    self.totalAgi = ko.computed(function () {\n        return (self.heroData().attributebaseagility\n                + self.heroData().attributeagilitygain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getAgility()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.intStolen = ko.observable(0).extend({ numeric: 0 });\n    self.totalInt = ko.computed(function () {\n        return (self.heroData().attributebaseintelligence \n                + self.heroData().attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getIntelligence()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction() + self.intStolen()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.computed(function () {\n        return (self.heroData().attributebasestrength \n                + self.heroData().attributestrengthgain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getStrength()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    \n    self.getAbilityAttributeValue = function(hero, ability, attributeName, level) {\n        if (ability == 'item_manta') {\n            var abilityObj = itemData[ability];\n        }\n        else {\n            var abilityObj = findWhere(heroData['npc_dota_hero_' + hero].abilities, {name: ability});\n        }\n        var attribute = findWhere(abilityObj.attributes, {name: attributeName});\n        if (level == 0) {\n            return parseFloat(attribute.value[0]);\n        }\n        else if (level > attribute.length) {\n            return parseFloat(attribute.value[0]);\n        }\n        else {\n            return parseFloat(attribute.value[level - 1]);\n        }\n    }\n    \n    self.getIncomingDamageMultiplier = function(illusionType, hasScepter, attackType) {\n        if (illusionType == 'item_manta') {\n            if (attackType == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage_melee, self.illusionAbilityLevel())/100)\n            }\n            else {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage_ranged, self.illusionAbilityLevel())/100)\n            }\n        }\n        else {\n            return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage, self.illusionAbilityLevel())/100)\n        }\n    }\n    self.getOutgoingDamageMultiplier = function(illusionType, hasScepter, attackType) {\n        if (illusionType == 'item_manta') {\n            if (attackType == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage_melee, self.illusionAbilityLevel())/100);\n            }\n            else {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage_ranged, self.illusionAbilityLevel())/100);\n            }\n        }\n        else {\n            return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage, self.illusionAbilityLevel())/100);\n        }\n    }\n\n    self.baseDamage = ko.computed(function() {\n        return [Math.floor(heroData['npc_dota_hero_' + self.heroId()].attackdamagemin + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)\n                * self.getOutgoingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype),\n                Math.floor(heroData['npc_dota_hero_' + self.heroId()].attackdamagemax + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)\n                * self.getOutgoingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype)];\n    });\n    \n    self.damage = ko.computed(function() {\n        return [self.baseDamage()[0],\n                self.baseDamage()[1]];\n    });\n    \n    self.ehpPhysical = ko.computed(function() {\n        var ehp = (self.health() * (1 + .06 * self.totalArmorPhysical())) / (1 - (1 - (self.inventory.getEvasion() * self.ability().getEvasion())))\n        ehp *= (self.inventory.activeItems().some(function(item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.getIncomingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype));\n        return ehp.toFixed(2);\n    });\n    self.ehpMagical = ko.computed(function() {\n        var ehp = self.health() / self.totalMagicResistanceProduct();\n        ehp *= (1 / self.getIncomingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype));\n        return ehp.toFixed(2);\n    });\n    \n    self.totalArmorPhysical = ko.computed(function() {\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (heroData['npc_dota_hero_' + self.heroId()].armorphysical + self.totalAgi() * .14)\n                + self.ability().getArmor() + self.enemy().ability().getArmorReduction() + self.buffs.getArmor() + self.debuffs.getArmorReduction()).toFixed(2);\n    });\n    \n    self.ias = ko.computed(function() {\n        var val = parseFloat(self.totalAgi()) \n                + self.ability().getAttackSpeed() \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction()\n                + self.unit().ability().getAttackSpeed(); \n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 400) {\n            return 400;\n        }\n        return val.toFixed(2);\n    });\n    \n    return self;\n}\nIllusionModel.prototype = Object.create(HeroModel.prototype);\nIllusionModel.prototype.constructor = IllusionModel;\n\nmodule.exports = IllusionModel;","module.exports = {\n    getBonusDamage: function (talents) {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_damage_')) {\n                totalAttribute += ability.attributes[0].value[0];\n                sources[ability.name] = {\n                    'damage': ability.attributes[0].value[0],\n                    'damageType': 'physical',\n                    'displayname': ability.displayname\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    },\n    getHealth: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_hp_') && !ability.name.startsWith('special_bonus_hp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getHealthRegen: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_hp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getMana: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_mp_') && !ability.name.startsWith('special_bonus_mp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getManaRegen: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_mp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getArmor: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_armor_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getSpellAmp: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_spell_amplify_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getCooldownReductionFlat: function (talents) {\n        var totalAttribute = 0;\n        return totalAttribute;\n    },\n    getCooldownReductionPercent: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_cooldown_reduction_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getCooldownIncreaseFlat: function (talents) {\n        var totalAttribute = 0;\n        return totalAttribute;\n    },\n    getCooldownIncreasePercent: function (talents) {\n        var totalAttribute = 1;\n        return totalAttribute;\n    },\n    getMovementSpeedFlat: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_movement_speed_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAttackRange: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_range_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAttackSpeed: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_speed_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getLifesteal: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_lifesteal_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getEvasion: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_evasion_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getMagicResist: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_magic_resistance_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getRespawnReduction: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_respawn_reduction_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getStrength: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_strength_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAgility: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_agility_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getIntelligence: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_intelligence_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    }\n}","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar AbilityModel = require(\"../AbilityModel\");\nvar HeroModel = require(\"./HeroModel\");\n\nvar UnitModel = function (heroData, itemData, unitData, h, p) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, 'abaddon');\n    self.parent = p;\n    self.unitId = ko.observable(h);\n    self.unitLevel = ko.observable(1);\n\n    self.heroData = ko.computed(function() {\n        return unitData[self.unitId()];\n    });\n    self.getAbilityLevelMax = function(data) {\n        if (data.abilitytype == 'DOTA_ABILITY_TYPE_ATTRIBUTES') {\n            return 10;\n        }\n        else if (data.name == 'necronomicon_archer_mana_burn' || data.name == 'necronomicon_archer_aoe'\n            || data.name == 'necronomicon_warrior_mana_burn' || data.name == 'necronomicon_warrior_last_will') {\n            return 3;\n        }\n        else if (data.name == 'necronomicon_warrior_sight') {\n            return 1;\n        }\n        else {\n            return 4;\n        }\n    };\n    self.availableSkillPoints.dispose();\n    self.ability = ko.computed(function() {\n        var a = new AbilityModel(ko.observableArray(JSON.parse(JSON.stringify(self.heroData().abilities))), self);\n        a.hasScepter = self.inventory.hasScepter\n        switch (self.unitId()) {\n            case 'npc_dota_necronomicon_archer_1':\n            case 'npc_dota_necronomicon_warrior_1':\n                a.abilities()[0].level(1);\n                a.abilities()[1].level(1);\n            break;\n            case 'npc_dota_necronomicon_archer_2':\n            case 'npc_dota_necronomicon_warrior_2':\n                a.abilities()[0].level(2);\n                a.abilities()[1].level(2);\n            break;\n            case 'npc_dota_necronomicon_archer_3':\n                a.abilities()[0].level(3);\n                a.abilities()[1].level(3);\n            break;\n            case 'npc_dota_necronomicon_warrior_3':\n                a.abilities()[0].level(3);\n                a.abilities()[1].level(3);\n                a.abilities()[2].level(1);\n            break;\n        }\n        a.levelUpAbility = function(index, data, event, hero) {\n            var i = ko.utils.unwrapObservable(index);\n            switch (a.abilities()[i].name) {\n                case 'necronomicon_archer_mana_burn':\n                case 'necronomicon_archer_aoe':\n                case 'necronomicon_warrior_mana_burn':\n                case 'necronomicon_warrior_last_will':\n                case 'necronomicon_warrior_sight':\n                break;\n                default:\n                    if (a.abilities()[i].level() < hero.getAbilityLevelMax(data)) {\n                        a.abilities()[i].level(a.abilities()[i].level()+1);\n                    }                    \n                break;\n            }\n\n        };\n        a.levelDownAbility = function(index, data, event, hero) {            \n            var i = ko.utils.unwrapObservable(index);\n            switch (a.abilities()[i].name) {\n                case 'necronomicon_archer_mana_burn':\n                case 'necronomicon_archer_aoe':\n                case 'necronomicon_warrior_mana_burn':\n                case 'necronomicon_warrior_last_will':\n                case 'necronomicon_warrior_sight':\n                break;\n                default:\n                    if (a.abilities()[i].level()>0) {\n                        a.abilities()[i].level(a.abilities()[i].level()-1);\n                    }\n                break;\n            }\n        };\n        return a;\n    });        \n    self.primaryAttribute = ko.computed(function() {\n        //var v = unitData[self.unitId()].attributeprimary;\n        var v = 0;\n        if (v == 'DOTA_ATTRIBUTE_AGILITY') {\n            return 'agi'\n        }\n        else if (v == 'DOTA_ATTRIBUTE_INTELLECT') {\n            return 'int'\n        }\n        else if (v == 'DOTA_ATTRIBUTE_STRENGTH') {\n            return 'str'\n        }\n        else {\n            return ''\n        }\n    });\n    self.totalAttribute = function(a) {\n        if (a == 'agi') {\n            return parseFloat(self.totalAgi());\n        }\n        if (a == 'int') {\n            return parseFloat(self.totalInt());\n        }\n        if (a == 'str') {\n            return parseFloat(self.totalStr());\n        }\n        return 0;\n    };\n    self.totalAgi = ko.computed(function() {\n        return (unitData[self.unitId()].attributebaseagility\n                + unitData[self.unitId()].attributeagilitygain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getAgility()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.totalInt = ko.computed(function() {\n        return (unitData[self.unitId()].attributebaseintelligence \n                + unitData[self.unitId()].attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getIntelligence()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.computed(function() {\n        return (unitData[self.unitId()].attributebasestrength \n                + unitData[self.unitId()].attributestrengthgain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getStrength()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    /*self.health = ko.computed(function() {\n        return (unitData[self.unitId()].statushealth + self.totalStr()*19 \n                + self.inventory.getHealth()\n                + self.ability().getHealth()).toFixed(2);\n    });\n    self.healthregen = ko.computed(function() {\n        return (unitData[self.unitId()].statushealthregen + self.totalStr()*.03 \n                + self.inventory.getHealthRegen() \n                + self.ability().getHealthRegen()\n                + self.buffs.getHealthRegen()).toFixed(2);\n    });\n    self.mana = ko.computed(function() {\n        return (unitData[self.unitId()].statusmana + self.totalInt()*13 + self.inventory.getMana()).toFixed(2);\n    });\n    self.manaregen = ko.computed(function() {\n        return ((unitData[self.unitId()].statusmanaregen \n                + self.totalInt()*.04 \n                + self.ability().getManaRegen()) \n                * (1 + self.inventory.getManaRegenPercent()) \n                + (self.selectedHero().heroName == 'crystal_maiden' ? self.ability().getManaRegenArcaneAura() * 2 : self.buffs.getManaRegenArcaneAura())\n                + self.inventory.getManaRegenBloodstone()\n                - self.enemy().ability().getManaRegenReduction()).toFixed(2);\n    });\n    self.totalArmorPhysical = ko.computed(function() {\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (unitData[self.unitId()].armorphysical + self.totalAgi()*.14)\n                + self.inventory.getArmor() + self.ability().getArmor() + self.enemy().ability().getArmorReduction() + self.buffs.getArmor() + self.debuffs.getArmorReduction()).toFixed(2);\n    });\n    self.totalArmorPhysicalReduction = ko.computed(function() {\n        return ((0.06 * self.totalArmorPhysical()) / (1 + 0.06 * self.totalArmorPhysical()) * 100).toFixed(2);\n    });\n    self.totalMovementSpeed = ko.computed(function() {\n        if (self.parent.ability().isShapeShiftActive()) {\n            return 522;\n        }\n        var ms = (self.ability().setMovementSpeed() > 0 ? self.ability().setMovementSpeed() : self.buffs.setMovementSpeed());\n        if (ms > 0) {\n            return ms;\n        }\n        else {\n            return ((unitData[self.unitId()].movementspeed + self.inventory.getMovementSpeedFlat()+ self.ability().getMovementSpeedFlat()) * \n                    (1 + self.inventory.getMovementSpeedPercent() \n                       + self.ability().getMovementSpeedPercent() \n                       + self.enemy().inventory.getMovementSpeedPercentReduction() \n                       + self.enemy().ability().getMovementSpeedPercentReduction() \n                       + self.buffs.getMovementSpeedPercent() \n                       + self.debuffs.getMovementSpeedPercentReduction()\n                    )).toFixed(2);\n        }\n    });\n    self.totalTurnRate = ko.computed(function() {\n        return (unitData[self.unitId()].movementturnrate \n                * (1 + self.enemy().ability().getTurnRateReduction()\n                     + self.debuffs.getTurnRateReduction())).toFixed(2);\n    });\n    */\n    self.baseDamage = ko.computed(function() {\n        return [Math.floor(unitData[self.unitId()].attackdamagemin + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total),\n                Math.floor(unitData[self.unitId()].attackdamagemax + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)];\n    });\n    /*self.bonusDamage = ko.computed(function() {\n        return self.inventory.getBonusDamage().total\n                + self.ability().getBonusDamage().total\n                + self.buffs.getBonusDamage().total\n                + Math.floor((self.baseDamage()[0] + self.baseDamage()[1])/2 \n                              * (self.inventory.getBonusDamagePercent().total\n                                 + self.ability().getBonusDamagePercent().total\n                                 + self.buffs.getBonusDamagePercent().total\n                                )\n                            )\n                + Math.floor(\n                    (self.hero().attacktype() == 'DOTA_UNIT_CAP_RANGED_ATTACK' \n                        ? ((self.selectedHero().heroName == 'drow_ranger') ? self.ability().getBonusDamagePrecisionAura().total[0] * self.totalAgi() : self.buffs.getBonusDamagePrecisionAura().total[1])\n                        : 0)\n                  );\n    });*/\n    /*self.bonusDamageReduction = ko.computed(function() {\n        return Math.abs(self.enemy().ability().getBonusDamageReduction() + self.debuffs.getBonusDamageReduction());\n    });\n    self.damage = ko.computed(function() {\n        return [self.baseDamage()[0] + self.bonusDamage()[0],\n                self.baseDamage()[1] + self.bonusDamage()[1]];\n    });*/\n    self.totalMagicResistanceProduct = ko.computed(function() {\n        return (1 - unitData[self.unitId()].magicalresistance / 100) \n                   * (1 - self.inventory.getMagicResist() / 100) \n                   * (1 - self.ability().getMagicResist() / 100) \n                   * (1 - self.buffs.getMagicResist() / 100) \n                   * self.enemy().inventory.getMagicResistReduction()\n                   * self.enemy().ability().getMagicResistReduction() \n                   * self.debuffs.getMagicResistReduction();\n    });\n    self.totalMagicResistance = ko.computed(function() {\n        return (1 - self.totalMagicResistanceProduct());\n    });\n    self.bat = ko.computed(function() {\n        var abilityBAT = self.ability().getBAT();\n        if (abilityBAT > 0) {\n            return abilityBAT;\n        }\n        return unitData[self.unitId()].attackrate;\n    });\n    /*\n    self.ias = ko.computed(function() {\n        var val = parseFloat(self.totalAgi()) \n                + self.inventory.getAttackSpeed() \n                + self.ability().getAttackSpeed() \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction();\n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 400) {\n            return 400;\n        }\n        return (val).toFixed(2);\n    });*/\n    self.attackTime = ko.computed(function() {\n        return (self.bat() / (1 + self.ias() / 100)).toFixed(2);\n    });\n    self.attacksPerSecond = ko.computed(function() {\n        return (1 + self.ias() / 100) / self.bat();\n    });\n    self.evasion = ko.computed(function() {\n        var e = self.ability().setEvasion();\n        if (e) {\n            return (e * 100).toFixed(2) + '%';\n        }\n        else {\n            return ((1-(self.inventory.getEvasion() * self.ability().getEvasion())) * 100).toFixed(2) + '%';\n        }\n    });\n    self.ehpPhysical = ko.computed(function() {\n        return ((self.health() * (1 + .06 * self.totalArmorPhysical())) / (1-(1-(self.inventory.getEvasion() * self.ability().getEvasion())))).toFixed(2);\n    });\n    self.ehpMagical = ko.computed(function() {\n        return (self.health() / self.totalMagicResistanceProduct()).toFixed(2);\n    });\n    self.heroId(h);\n    self.unitId.subscribe(function (newValue) {\n        self.heroId(newValue);\n    });\n    return self;\n}\nUnitModel.prototype = Object.create(HeroModel.prototype);\nUnitModel.prototype.constructor = UnitModel;\n\nmodule.exports = UnitModel;","var diffProperties = [\n    'totalAgi',\n    'totalInt',\n    'totalStr',\n    'health',\n    'healthregen',\n    'mana',\n    'manaregen',\n    'totalArmorPhysical',\n    'totalArmorPhysicalReduction',\n    'totalMovementSpeed',\n    'totalTurnRate',\n    'spellAmp',\n    'cooldownReductionPercent',\n    'baseDamage',\n    'bonusDamage',\n    'bonusDamageReduction',\n    'damage',\n    'totalMagicResistanceProduct',\n    'totalMagicResistance',\n    'bat',\n    'ias',\n    'attackTime',\n    'attacksPerSecond',\n    'evasion',\n    'ehpPhysical',\n    'ehpMagical',\n    'bash',\n    'critChance',\n    //'critDamage',\n    'missChance',\n    'totalattackrange',\n    'visionrangeday',\n    'visionrangenight',\n    'lifesteal'\n];\n\nmodule.exports = diffProperties;","var HeroOption = require(\"./HeroOption\");\n\nvar heroOptionsArray = {};\n\nvar init = function (heroData) {\n    heroOptionsArray.items = [];\n    for (var h in heroData) {\n        heroOptionsArray.items.push(new HeroOption(h.replace('npc_dota_hero_', ''), heroData[h].displayname));\n    }\n    return heroOptionsArray.items;\n}\n\nheroOptionsArray.init = init;\n\nmodule.exports = heroOptionsArray;","var nextLevelExp = [200, 300, 400, 500, 600, 615, 630, 645, 660, 675, 775, 1175, 1200, 1225, 1250, 1275, 1375, 1400, 1425, 1600, 1900, 2200, 2500, 2975, '&mdash;'];\n\nmodule.exports = nextLevelExp;","var totalExp = [0, 200, 500, 900, 1400, 2000, 2615, 3425, 3890, 4550, 5225, 6000, 7175, 8375, 9600, 10850, 12125, 13500, 14900, 16325, 17925, 19825, 22025, 24525, 27500];\n\nmodule.exports = totalExp;","var abilityData = {\n    'alchemist_acid_spray': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'armor_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'alchemist_unstable_concoction': [\n        {\n            label: 'Brew Time',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'max_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/5;\n            }\n        },\n        {\n            attributeName: 'max_stun',\n            label: 'Total Stun',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/5;\n            }\n        }\n    ],\n    'ancient_apparition_cold_feet': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'stun_duration',\n            label: 'Total Stun',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        }\n    ],\n    'ancient_apparition_ice_blast': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'dot_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')+v*a;\n            }\n        }\n    ],\n    'antimage_mana_void': [\n        {\n            label: 'Enemy Missing Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_void_damage_per_mana',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'axe_battle_hunger': [\n        {\n            label: 'Battle Hungered Enemies',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'speed_bonus',\n            label: 'Movement Speed Bonus',\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'slow',\n            label: 'Movement Speed Bonus',\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'bane_nightmare': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'bane_fiends_grip': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'fiend_grip_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'fiend_grip_damage_scepter',ability.level());\n                }\n                else {\n                    return v[0]*a;\n                }\n            }\n        },\n        {\n            attributeName: 'fiend_grip_mana_drain',\n            label: 'Total Mana Drain',\n            controlType: 'text',\n            controls: [0,1],\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v[0]*v[1]*abilityModel.getAbilityAttributeValue(ability.attributes, 'fiend_grip_mana_drain_scepter',ability.level())/100;\n                }\n                else {\n                    return v[0]*v[1]*a/100;\n                }\n            }\n        }\n    ],\n    'batrider_sticky_napalm': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Bonus Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'movement_speed_pct',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'turn_rate_pct',\n            label: 'Enemy Turn Rate Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'turnRateReduction'\n        }\n    ],\n    'batrider_firefly': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'bloodseeker_rupture': [\n        {\n            label: 'Enemy Distance Traveled',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_damage_pct',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage') + v*a/100;\n            }\n        }\n    ],\n    'bristleback_viscous_nasal_goo': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'armor_per_stack',\n            label: 'Enemy Armor Reduction',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        },\n        {\n            attributeName: 'move_slow_per_stack',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -(abilityModel.getAbilityAttributeValue(ability.attributes, 'base_move_slow',0)+v*a);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'bristleback_quill_spray': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'quill_stack_damage',\n            label: 'DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'quill_base_damage',ability.level())+v*a,\n                damage_cap = abilityModel.getAbilityAttributeValue(ability.attributes, 'max_damage',0);\n                if (total > damage_cap) {\n                    total = damage_cap;\n                }\n                return total;\n            }\n        }\n    ],\n    'bristleback_bristleback': [\n        {\n            label: 'Damage From',\n            controlType: 'radio',\n            controlValueType: 'string',\n            controlOptions: [\n                {text: 'Back', value: 'back'},\n                {text: 'Side', value: 'side'}\n            ]\n        },\n        {\n            attributeName: 'back_damage_reduction',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ability = abilityModel.abilities().find(function(b) {\n                    return b.name == 'bristleback_bristleback';\n                });\n                if (v == 'back') {\n                    var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'back_damage_reduction', ability.level());\n                }\n                else {\n                    var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'side_damage_reduction', ability.level());\n                }\n                return -total;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'bristleback_warpath': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_stack',\n            label: 'BONUS DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v < 1) {\n                    return 0;\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'base_damage',ability.level())+(v-1)*a;\n                }\n            }\n        },\n        {\n            attributeName: 'move_speed_per_stack',\n            label: '%MOVEMENT:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v < 1) {\n                    return 0;\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'base_move_speed',ability.level())+(v-1)*a;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'centaur_return': [\n        {\n            label: 'Strength',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'strength_pct',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'return_damage',ability.level()) + v*a/100;\n            }\n        }\n    ],\n    'centaur_stampede': [\n        {\n            label: 'Strength',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'strength_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'clinkz_death_pact': [\n        {\n            label: 'Consumed Unit HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_gain_pct',\n            label: 'BASE DAMAGE GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'baseDamage'\n        },\n        {\n            attributeName: 'health_gain_pct',\n            label: 'HEALTH GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusHealth'\n        }\n    ],\n    'crystal_maiden_frostbite': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'dark_seer_ion_shell': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'dazzle_shadow_wave': [\n        {\n            label: 'Targets',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'dazzle_weave': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'armor_per_second',\n            label: 'ARMOR',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'armor_per_second',\n            label: 'ARMOR REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'death_prophet_exorcism': [\n        {\n            label: 'Damage Dealt',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percent',\n            label: 'Total Armor',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ],\n    'disruptor_static_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damagevalue = 0.25 * (130 + 40 * ability.level()) * (1/20),\n                mult = (v*4)*((v*4)+1)/2;\n                return damagevalue * mult;\n            }\n        }\n    ],\n    'doom_bringer_scorched_earth': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'HP REGEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'doom_bringer_doom': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v*abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_scepter',ability.level());\n                }\n                else {\n                    return v*a;\n                }\n            }\n        }\n    ],\n    'dragon_knight_elder_dragon_form': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_attack_range',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackrange'\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedFlat'\n        }\n    ],\n    'drow_ranger_trueshot': [\n        {\n            label: 'Drow\\'s Agility',\n            controlType: 'input',\n            display: 'buff'\n        },\n        {\n            attributeName: 'trueshot_ranged_damage',\n            label: 'DAMAGE BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'buff',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamagePrecisionAura'\n        }\n    ],\n    'earth_spirit_rolling_boulder': [\n        {\n            label: 'Using Stone',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'move_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return -a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'earthshaker_enchant_totem': [\n        {\n            label: 'Activated',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'totem_damage_percentage',\n            label: 'DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'baseDamageMultiplier'\n        }\n    ],\n    'earthshaker_echo_slam': [\n        {\n            label: 'Enemies in Range',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'echo_slam_echo_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'elder_titan_ancestral_spirit': [\n        {\n            label: 'HEROES PASSED THROUGH',\n            controlType: 'input'\n        },\n        {\n            label: 'CREEPS PASSED THROUGH',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_creeps',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_heroes',ability.level()) + v[1]*a;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'move_pct_creeps',\n            label: '%BONUS SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'move_pct_heroes',ability.level()) + v[1]*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'elder_titan_earth_splitter': [\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        },\n        {\n            attributeName: 'slow_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'enchantress_natures_attendants': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal',\n            label: 'HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'wisp_count',ability.level())*v*a;\n            }\n        }\n    ],\n    'enigma_malefice': [\n        {\n            label: 'Hits',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'stun_duration',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'enigma_midnight_pulse': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_percent',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'enigma_black_hole': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'far_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'near_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'faceless_void_time_lock': [\n        {\n            label: 'In Chronosphere',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: '%MOVESPEED AS DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a*2;\n                }\n                else {\n                    return a;\n                }\n            },\n            returnProperty: 'bashBonusDamage'\n        },\n        {\n            attributeName: 'duration',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            attributeName: 'chance_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bash'\n        }\n    ],\n    'gyrocopter_rocket_barrage': [\n        {\n            label: 'Rockets',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'rockets_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n/*        'gyrocopter_homing_missile': [\n        {\n            label: 'Distance Traveled',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'gyrocopter_flak_cannon': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],*/\n    'huskar_burning_spear': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_cost',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'huskar_berserkers_blood': [\n        {\n            label: '%HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hp_threshold_max',\n            label: 'Health at given %HP:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return parent.health()*v/100;\n            }\n        },\n        {\n            attributeName: 'hp_threshold_max',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            attributeName: 'maximum_resistance',\n            label: 'MAGIC RESISTANCE BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var v = Math.min(v, 100);\n                v = Math.max(v, 10);\n                var hp_threshold_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'hp_threshold_max',0);\n                var d = 100 - hp_threshold_max;\n                var c = (v - hp_threshold_max) / d;\n                c = 1 - c;\n                return c*a;\n            },\n            returnProperty: 'magicResist'\n        },\n        {\n            attributeName: 'maximum_attack_speed',\n            label: 'ATTACK SPEED BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var v = Math.min(v, 100);\n                v = Math.max(v, 10);\n                var hp_threshold_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'hp_threshold_max',0);\n                var d = 100 - hp_threshold_max;\n                var c = (v - hp_threshold_max) / d;\n                c = 1 - c;\n                return c*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'huskar_life_break': [\n        {\n            label: 'Enemy Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'Huskar Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_cost_percent',\n            label: 'DAMAGE TAKEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movespeed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'invoker_quas': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_strength',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusStrength'\n        },*/\n        {\n            attributeName: 'health_regen_per_instance',\n            label: 'HP REGEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'invoker_wex': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_agility',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusAgility'\n        },*/\n        {\n            attributeName: 'move_speed_per_instance',\n            label: '%MOVE SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'attack_speed_per_instance',\n            label: '%ATTACK SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'invoker_exort': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_intelligence',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusInt'\n        },*/\n        {\n            attributeName: 'bonus_damage_per_instance',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'invoker_ghost_walk': [\n        {\n            label: 'Quas Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'enemy_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'enemy_slow',v);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            label: 'Wex Level',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            attributeName: 'self_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            display: 'ability',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'self_slow',v);\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'invoker_alacrity': [\n        {\n            label: 'Wex Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'bonus_attack_speed',v);\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            label: 'Exort Level',\n            controlType: 'input',\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'bonus_damage',v);\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'invoker_ice_wall': [\n        {\n            label: 'Quas Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow',v);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            label: 'Exort Level',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            label: 'Duration',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'ability',\n            controls: [1,2],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v[0] == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_per_second',v[0])*v[1];\n            }\n        }\n    ],\n    'jakiro_dual_breath': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*2 + \n                abilityModel.getAbilityAttributeValue(ability.attributes, 'burn_damage',ability.level())*v;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'slow_attack_speed_pct',\n            label: '%ATTACK SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'jakiro_liquid_fire': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_attack_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'jakiro_macropyre': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'juggernaut_blade_fury': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'juggernaut_healing_ward': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'healing_ward_heal_amount',\n            label: 'HEAL OVER TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'juggernaut_omni_slash': [\n        {\n            label: 'Jumps',\n            controlType: 'input'\n        },\n        {\n            label: 'MIN DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'omni_slash_damage',1)*v;\n            }\n        },\n        {\n            label: 'MAX DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'omni_slash_damage',2)*v;\n            }\n        }\n    ],\n    'keeper_of_the_light_illuminate': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'keeper_of_the_light_mana_leak': [\n        {\n            label: 'Distance Moved',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_leak_pct',\n            label: 'MANA LEAKED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]/100*v[1]*a/100;\n            }\n        }\n    ],\n    'legion_commander_duel': [\n        {\n            label: 'Duel Wins',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'reward_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'leshrac_pulse_nova': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'lich_chain_frost': [\n        {\n            label: 'Bounce Hits',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'slow_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'life_stealer_feast': [\n        {\n            label: 'Enemy Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hp_leech_percent',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'life_stealer_open_wounds': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percent',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'lifesteal'\n        },\n        {\n            attributeName: 'slow_steps',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow_steps',v+1);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'lina_fiery_soul': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'fiery_soul_move_speed_bonus',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'fiery_soul_attack_speed_bonus',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'lion_mana_drain': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA DRAINED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'luna_moon_glaive': [\n        {\n            label: 'Damage',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_reduction_percent',\n            label: 'BOUNCE DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var result = [];\n                for (var i = 1; i < 6; i++) {\n                    result.push((v*Math.pow(a/100,i)).toFixed(2))\n                }\n                return result.join('<br>');\n            }\n        }\n    ],\n    'luna_eclipse': [\n        {\n            label: 'Beam Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'beams',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var lucentBeamAbility = abilityModel.abilities().find(function(b) {\n                    return b.name == 'luna_lucent_beam';\n                });\n                if (lucentBeamAbility.level() == 0) return 0;\n                var damage = abilityModel.getAbilityPropertyValue(lucentBeamAbility, 'damage');\n                return v*damage;\n            }\n        }\n    ],\n    'medusa_mystic_snake': [\n        {\n            label: 'Jump Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Damage Per Jump:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            display: 'none',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var snake_jumps = abilityModel.getAbilityAttributeValue(ability.attributes, 'snake_jumps',ability.level());\n                var snake_scale = abilityModel.getAbilityAttributeValue(ability.attributes, 'snake_scale',0);\n                var damage = [];\n                for (var i = 0; i < snake_jumps; i++) {\n                    damage.push(a + a * i * snake_scale/100);\n                }\n                return damage;\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Damage Per Jump:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].join(' / ');\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].slice(0, v[0]).reduce(function (memo, o) { return memo + o }, 0);\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Max Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].reduce(function (memo, o) { return memo + o }, 0);\n            }\n        }\n    ],\n    'medusa_mana_shield': [\n        {\n            label: 'Damage',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_mana',\n            label: 'MANA USED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return (v/a).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'absorption_tooltip',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'meepo_poof': [\n        {\n            label: 'Meepo Count',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'meepo_geostrike': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            attributeName: 'slow',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow',ability.level())*v;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'mirana_arrow': [\n        {\n            label: 'Arrow Travel Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'arrow_max_stun',\n            label: 'STUN DURATION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var arrow_min_stun = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_min_stun',0);\n                var arrow_max_stunrange = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_max_stunrange',0);\n                var scale = Math.min(v, arrow_max_stunrange) / arrow_max_stunrange;\n                return Math.max(arrow_min_stun, Math.floor(a * scale / 0.1) * 0.1);\n            }\n        },\n        {\n            attributeName: 'arrow_bonus_damage',\n            label: 'TOTAL DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ability = ability;\n                var damage = ko.utils.unwrapObservable(ability.damage)[ability.level()-1];\n                var arrow_max_stunrange = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_max_stunrange',0);\n                var scale = Math.min(v, arrow_max_stunrange) / arrow_max_stunrange;\n                var bonus_damage = Math.floor(a * scale / 2.8) * 2.8;\n                return damage + ' + ' + bonus_damage + ' = ' + (damage + bonus_damage);\n            }\n        }\n    ],\n    'morphling_morph_agi': [\n        {\n            label: 'Shifts',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'AGI SHIFT GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'STR SHIFT LOSS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'bonus_attributes',\n            label: 'SHIFT TIME:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusAgility2'\n        },\n        {\n            attributeName: 'morph_cooldown',\n            label: 'SHIFT TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost',\n            label: 'SHIFT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a*abilityModel.getAbilityAttributeValue(ability.attributes, 'morph_cooldown',ability.level());\n            }\n        }\n    ],\n    'morphling_morph_str': [\n        {\n            label: 'Shifts',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'STR SHIFT GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'AGI SHIFT LOSS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'bonus_attributes',\n            label: 'SHIFT TIME:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusStrength2'\n        },\n        {\n            attributeName: 'morph_cooldown',\n            label: 'SHIFT TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost',\n            label: 'SHIFT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a*abilityModel.getAbilityAttributeValue(ability.attributes, 'morph_cooldown',ability.level());\n            }\n        }\n    ],\n    'furion_wrath_of_nature': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'necrolyte_heartstopper_aura': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'aura_damage',\n            label: 'HEALTH LOST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'necrolyte_sadist': [\n        {\n            label: 'Unit Kills',\n            controlType: 'input'\n        },\n        {\n            label: 'Hero Kills',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var hero_multiplier = abilityModel.getAbilityAttributeValue(ability.attributes, 'hero_multiplier',0)\n                return (v[0]+v[1]*hero_multiplier)*a;\n            },\n            returnProperty: 'healthregen'\n        },\n        {\n            attributeName: 'mana_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var hero_multiplier = abilityModel.getAbilityAttributeValue(ability.attributes, 'hero_multiplier',0)\n                return (v[0]+v[1]*hero_multiplier)*a;\n            },\n            returnProperty: 'manaregen'\n        }\n    ],\n    'night_stalker_crippling_fear': [\n        {\n            label: 'Is Night',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'miss_rate_night',\n            label: '%CHANCE TO MISS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'miss_rate_night',ability.level());\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'miss_rate_day',ability.level());\n                }\n            },\n            returnProperty: 'missChance'\n        }\n    ],    \n    'night_stalker_hunter_in_the_night': [\n        {\n            label: 'Is Night',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_attack_speed_night',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            attributeName: 'bonus_movement_speed_pct_night',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],    \n    'obsidian_destroyer_arcane_orb': [\n        {\n            label: 'Current Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_pool_damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamageOrb'\n        }\n    ],\n    'ogre_magi_ignite': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'burn_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'pudge_rot': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            attributeName: 'rot_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'pudge_flesh_heap': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'flesh_heap_strength_buff_amount',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'flesh_heap_magic_resist',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'pudge_dismember': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'dismember_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'pugna_nether_ward': [\n        {\n            label: 'Enemy Mana Spent',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_multiplier',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'manaregenreduction'\n        }\n    ],\n    'pugna_life_drain': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_drain',\n            label: 'HEALTH DRAINED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'queenofpain_shadow_strike': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'strike_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration_damage = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_damage',ability.level());\n                var ticks = Math.floor(v/3);\n                return a + duration_damage * ticks;\n            }\n        }\n    ],\n    'razor_plasma_field': [\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'radius',\n            label: 'MIN DISTANCE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return 200;\n            }\n        },\n        {\n            attributeName: 'radius',\n            label: 'MAX DISTANCE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return 200 + a;\n            }\n        },\n        {\n            attributeName: 'radius',\n            label: 'Instance Damage',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_radius = a + 200;\n                var scale = (Math.min(Math.max(v, 200), max_radius) - 200) / (max_radius - 200);\n                var damage_min = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_min',ability.level());\n                var damage_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_max',ability.level());\n                return damage_min + (damage_max - damage_min) * scale;\n            }\n        }\n    ],\n    'razor_static_link': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_length',\n            label: 'Damage Drained:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var tick_duration = Math.floor(v * 4) + 1;\n                var ticks = Math.min(a * 4 + 1, tick_duration);\n                var drain_rate = abilityModel.getAbilityAttributeValue(ability.attributes, 'drain_rate',ability.level());\n                return ticks * drain_rate/4;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'drain_length',\n            label: 'Enemy Damage Lost:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'hidden',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var tick_duration = Math.floor(v * 4) + 1;\n                var ticks = Math.min(a * 4 + 1, tick_duration);\n                var drain_rate = abilityModel.getAbilityAttributeValue(ability.attributes, 'drain_rate',ability.level());\n                return ticks * drain_rate/4;\n            },\n            returnProperty: 'bonusDamageReduction'\n        }\n    ],\n    'razor_eye_of_the_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'rubick_fade_bolt': [\n        {\n            label: 'Jumps',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a * (1 - v*abilityModel.getAbilityAttributeValue(ability.attributes, 'jump_damage_reduction_pct',ability.level())/100);\n            }\n        },\n        {\n            attributeName: 'hero_attack_damage_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusDamageReduction'\n        }\n    ],\n    'sandking_sand_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'sandking_epicenter': [\n        {\n            label: 'Pulses',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'epicenter_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'epicenter_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'epicenter_slow_as',\n            label: '%ATTACK SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'shadow_demon_shadow_poison': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'stack_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var stackmult = [1,2,4,8];\n                if (v > 4) {\n                    return a * stackmult[3] + 50 * (v - 4);\n                }\n                else if (v <= 0) {\n                    return 0\n                }\n                else {\n                    return a * stackmult[v-1]\n                }\n            }\n        }\n    ],\n    'nevermore_necromastery': [\n        {\n            label: 'Souls',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'necromastery_damage_per_soul',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'nevermore_requiem': [\n        {\n            label: 'Line Hit Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'requiem_reduction_damage',\n            label: 'Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            label: 'Return Line Hit Count (Scepter)',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'requiem_damage_pct_scepter',\n            label: 'Damage/Heal:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v*a/100;\n            }\n        },\n        {\n            attributeName: 'requiem_damage_pct_scepter',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return damage*v[0] + damage*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'requiem_reduction_damage',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'baseDamageReductionPct'\n        },\n        {\n            attributeName: 'requiem_reduction_ms',\n            label: '%DAMAGE REDUCTION:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'shadow_shaman_shackles': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'silencer_curse_of_the_silent': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return Math.floor(v)*a;\n            }\n        },\n        {\n            attributeName: 'movespeed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n/*        'silencer_glaives_of_wisdom': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],*/\n    'skywrath_mage_mystic_flare': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'slark_essence_shift': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'agi_gain',\n            label: 'Total Damage',\n            controlType: 'text',\n            display: 'ability',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'stat_loss',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusAllStatsReduction'\n        }\n    ],\n    'slark_shadow_dance': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_regen_pct',\n            label: 'TOTAL HEALTH REGENERATED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*parent.health()*a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_regen_pct',\n            label: 'HEALTH GAINED PER SECOND:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return parent.health()*a/100;\n            },\n            returnProperty: 'healthregen'\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: '%MOVE SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'sniper_shrapnel': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'shrapnel_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'spectre_desolate': [\n        {\n            label: 'Enemy Alone',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'spectre_dispersion': [\n        {\n            label: 'Damage Taken',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_reflection_pct',\n            label: 'DAMAGE REFLECTED:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        },\n        {\n            attributeName: 'damage_reflection_pct',\n            label: 'DAMAGE REFLECTED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ],\n    'storm_spirit_ball_lightning': [\n        {\n            label: 'MAX MANA',\n            controlType: 'input'\n        },\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')/100*v[1];\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'FLAT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var distance_intervals = Math.floor(v[1]/100);\n                var travel_cost_base = abilityModel.getAbilityAttributeValue(ability.attributes, 'ball_lightning_travel_cost_base',0);\n                return a + distance_intervals * travel_cost_base;\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_percentage',\n            label: '%MAX MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var distance_intervals = Math.floor(v[1]/100);\n                var travel_cost_percent = abilityModel.getAbilityAttributeValue(ability.attributes, 'ball_lightning_travel_cost_percent',0);\n                return a + distance_intervals * travel_cost_percent;\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'TOTAL MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0, 1, 2, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[2] + ' + ' + (v[3]/100 * v[0]) + ' (' + v[3] + '% of max) = ' + (v[2] + v[3]/100 * v[0]);\n            }\n        }\n    ],\n    'templar_assassin_psionic_trap': [\n        {\n            label: 'Charge Time',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_speed_min_tooltip',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'movement_speed_max_tooltip',0);\n                var slow_per_tick = (max_slow - a)/40;\n                return -(a + slow_per_tick * Math.min(Math.max(0, v), 4) * 10);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'shredder_reactive_armor': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_armor',\n            label: 'Total Armor Bonus',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'bonus_hp_regen',\n            label: 'Total HP Regen Bonus',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'shredder_chakram': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_interval',0);\n                var ticks = Math.floor(v / interval);\n                return a*interval*ticks;\n            }\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_interval',0);\n                var ticks = Math.floor(v / interval);\n                return a*interval*ticks;\n            }\n        },\n        {\n            label: 'ENEMY %HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow',\n            label: 'MANA COST:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ticks = 20 - Math.floor(Math.min(Math.max(v-1, 0), 99) / 5);\n                return -a*ticks;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'spirit_breaker_greater_bash': [\n        {\n            label: 'Bash Proc',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'damage',\n            label: '%MOVESPEED AS DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'bashBonusDamage'\n        },\n        {\n            attributeName: 'bonus_movespeed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'chance_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a\n            },\n            returnProperty: 'bash'\n        }\n    ],\n    'techies_land_mines': [\n        {\n            label: 'Number of Mines',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (v * a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        }\n    ],\n    'techies_suicide': [\n        {\n            attributeName: 'damage',\n            label: 'FULL DAMAGE AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'partial_damage',\n            label: 'PARTIAL DAMAGE AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'RESPAWN TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return (parent.respawnTime() / 2).toFixed(0) + ' seconds';\n            }\n        }\n    ],\n    'techies_remote_mines': [\n        {\n            label: 'Number of Mines',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var magic_reduction = parent.enemy().totalMagicResistance();\n                return (v * a * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        }\n    ],\n    'tinker_march_of_the_machines': [\n        {\n            label: 'Robot Explosions',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'machines_per_sec',\n            label: 'TOTAL DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'treant_leech_seed': [\n        {\n            label: 'Pulses',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'leech_damage',\n            label: 'DAMAGE/HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'troll_warlord_fervor': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'attack_speed',\n            label: 'ATTACK SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'undying_decay': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'str_steal',\n            label: 'STRENGTH STOLEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    var str_steal_scepter = abilityModel.getAbilityAttributeValue(ability.attributes, 'str_steal_scepter',0);\n                    return v*str_steal_scepter;\n                }\n                else {\n                    return v*a;\n                }\n            },\n            returnProperty: 'bonusStrength'\n        },\n    ],\n    'undying_soul_rip': [\n        {\n            label: 'Units',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_unit',\n            label: 'DAMAGE/HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'undying_flesh_golem': [\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'max_speed_slow',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var min_speed_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'min_speed_slow', 0);\n                var radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'radius', 0);\n                var full_power_radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'full_power_radius', 0);\n                var distance = Math.min(Math.max(v, full_power_radius), radius);\n                var scale = 1 - (distance - full_power_radius) / (radius - full_power_radius);\n                return -Math.max(scale * a, min_speed_slow);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'max_damage_amp',\n            label: '%DAMAGE AMP:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var min_damage_amp = abilityModel.getAbilityAttributeValue(ability.attributes, 'min_damage_amp', 0);\n                var radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'radius', 0);\n                var full_power_radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'full_power_radius', 0);\n                var distance = Math.min(Math.max(v, full_power_radius), radius);\n                var scale = 1 - (distance - full_power_radius) / (radius - full_power_radius);\n                return Math.max(scale * a, min_damage_amp);\n            },\n            returnProperty: 'damageAmplification'\n        },\n        {\n            label: 'MAX HP',\n            controlType: 'input'\n        },\n        {\n            label: 'Hero Death Count',\n            controlType: 'input'\n        },\n        {\n            label: 'Creep Death Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'death_heal',\n            label: 'DEATH HEAL (HEROES):',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [1, 2],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'death_heal_creep',\n            label: 'DEATH HEAL (CREEPS):',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [1, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'death_heal_creep',\n            label: 'TOTAL DEATH HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [4, 5],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]+v[1];\n            }\n        }\n    ],\n    'ursa_fury_swipes': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_stack',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var enrageAbility = abilityModel.abilities().find(function(b) {\n                    return b.name == 'ursa_enrage';\n                });\n                if (enrageAbility.isActive() && enrageAbility.level() > 0) {\n                    var enrage_multiplier = abilityModel.getAbilityAttributeValue(enrageAbility.attributes, 'enrage_multiplier', enrageAbility.level());\n                    return v*a*enrage_multiplier;\n                }\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'ursa_enrage': [\n        {\n            attributeName: 'damage_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'venomancer_venomous_gale': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'tick_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'strike_damage',ability.level()) + Math.floor(v/3)*a;\n            }\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'venomancer_poison_sting': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'venomancer_poison_nova': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'viper_poison_attack': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'viper_corrosive_skin': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        },\n        {\n            attributeName: 'bonus_magic_resistance',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'viper_viper_strike': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'visage_soul_assumption': [\n        {\n            label: 'Charges',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'soul_charge_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var soul_base_damage = abilityModel.getAbilityAttributeValue(ability.attributes, 'soul_base_damage',0);\n                var stack_limit = abilityModel.getAbilityAttributeValue(ability.attributes, 'stack_limit', ability.level());\n                stack_limit = Math.max(Math.min(v, stack_limit), 0);\n                return soul_base_damage + stack_limit*a;\n            }\n        }\n    ],\n    'visage_gravekeepers_cloak': [\n        {\n            label: 'Layers',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_armor',\n            label: 'ARMOR:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'bonus_resist',\n            label: '%RESIST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'warlock_shadow_word': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'warlock_upheaval': [\n        {\n            label: 'Channel Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow_rate_duration',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'max_slow',0);\n                var slow_per_tick = max_slow / (a - 0.5) / 2;\n                var ticks = Math.max(Math.floor(v * 2) - 1, 0);\n                return -Math.min(ticks * slow_per_tick, max_slow);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'weaver_the_swarm': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'armor_reduction',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'windrunner_powershot': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'winter_wyvern_cold_embrace': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Ally Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percentage',\n            label: 'TOTAL HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var base_heal = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_additive',ability.level());\n                return (base_heal + v[1] * a/100) * v[0];\n            }\n        }\n    ],\n    'wisp_spirits': [\n        {\n            label: 'Collision Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'creep_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'wisp_overcharge': [\n        {\n            label: 'Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_pct',\n            label: 'HP DRAINED:',\n            ignoreTooltip: true, \n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'Current MP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_pct',\n            label: 'MP DRAINED:',\n            ignoreTooltip: true, \n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            attributeName: 'bonus_damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'witch_doctor_paralyzing_cask': [\n        {\n            label: 'Hero Bounce Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var bounces = abilityModel.getAbilityAttributeValue(ability.attributes, 'bounces',ability.level());\n                return Math.min(Math.max(v, 0), bounces)*a;\n            }\n        },\n        {\n            label: 'Creep Bounce Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'CREEP DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var bounces = abilityModel.getAbilityAttributeValue(ability.attributes, 'bounces',ability.level());\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return Math.min(Math.max(v, 0), bounces)*damage;\n            }\n        }\n    ],\n    'witch_doctor_voodoo_restoration': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_interval',ability.level());\n                var heal_per_tick = a * interval;\n                var ticks = Math.max(Math.floor(v / interval) - 1, 0);\n                return heal_per_tick * ticks;\n            }\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_interval',ability.level());\n                var mana_per_tick = a * interval;\n                var ticks = Math.max(Math.floor(v / interval) - 1, 0);\n                return mana_per_tick * ticks;\n            }\n        }\n    ],\n    'witch_doctor_maledict': [\n        {\n            label: 'damage 0-4s',\n            controlType: 'input'\n        },\n        {\n            label: 'damage 4-8s',\n            controlType: 'input'\n        },\n        {\n            label: 'damage 8-12s',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 3s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 3*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 4s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 7s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 7*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 8s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1, 4, 5],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 11s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 11*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 12s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1, 2, 4, 6, 7],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Burst Damage:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [4, 6, 8],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v.reduce(function (memo, o) { return memo + o }, 0);\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Maledict Damage:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [9],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_tooltip',0);\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return damage * duration + v[0];\n            }\n        },\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'DOT Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_tooltip',0);\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*Math.min(Math.max(v, 0), duration);\n            }\n        }\n    ],\n    'witch_doctor_death_ward': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'zuus_static_field': [\n        {\n            label: 'Enemy HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_health_pct',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ]\n}\n\nmodule.exports = abilityData;","'use strict';\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\n\nko.mapping = require('../lib/knockout.mapping');\nko.wrap = require('../lib/knockout.wrap');\n\nko.extenders.numeric = function(target, opts) {\n    //create a writable computed observable to intercept writes to our observable\n    var result = ko.pureComputed({\n        read: target,  //always return the original observables value\n        write: function(newValue) {\n            var current = target(),\n                roundingMultiplier = Math.pow(10, (opts === Object(opts) ? opts.precision : opts) || 0),\n                newValueAsNum = isNaN(newValue) ? (opts.defaultValue || 0) : +newValue,\n                valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;\n \n            //only write if it changed\n            if (valueToWrite !== current) {\n                target(valueToWrite);\n            } else {\n                //if the rounded value is the same, but a different value was written, force a notification for the current field\n                if (newValue !== current) {\n                    target.notifySubscribers(valueToWrite);\n                }\n            }\n        }\n    }).extend({ notify: 'always' });\n \n    //initialize with current value to make sure it is rounded appropriately\n    result(target());\n \n    //return the new computed observable\n    return result;\n};\n\nmodule.exports = ko;","var IllusionOption = function (name, displayname, baseHero) {\n    this.illusionName = name;\n    this.illusionDisplayName = displayname;\n    this.baseHero = baseHero;\n};\n\nmodule.exports = IllusionOption;","var illusionData = {\n    chaos_knight_phantasm: {\n        hero: 'chaos_knight',\n        displayName: 'Chaos Knight Phantasm',\n        use_selected_hero: false,\n        max_level: 3,\n        outgoing_damage: 'outgoing_damage',\n        incoming_damage: 'incoming_damage'\n    },\n    naga_siren_mirror_image: {\n        hero: 'naga_siren',\n        displayName: 'Naga Siren Mirror Image',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'outgoing_damage',\n        incoming_damage: 'incoming_damage'\n    },\n    dark_seer_wall_of_replica: {\n        hero: 'dark_seer',\n        displayName: 'Dark Seer Wall of Replica',\n        use_selected_hero: true,\n        max_level: 3,\n        outgoing_damage: 'replica_damage_outgoing',\n        incoming_damage: 'replica_damage_incoming',\n        outgoing_damage_scepter: 'replica_damage_outgoing_scepter'\n    },\n    morphling_replicate: {\n        hero: 'morphling',\n        displayName: 'Morphling Replicate',\n        use_selected_hero: true,\n        max_level: 3,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'\n    },\n    phantom_lancer_doppelwalk: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Doppelwalk',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    phantom_lancer_juxtapose: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Juxtapose',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    phantom_lancer_spirit_lance: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Spirit Lance',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    shadow_demon_disruption: {\n        hero: 'shadow_demon',\n        displayName: 'Shadow Demon Disruption',\n        use_selected_hero: true,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage',\n        incoming_damage: 'illusion_incoming_damage'        \n    },\n    spectre_haunt: {\n        hero: 'spectre',\n        displayName: 'Spectre Haunt',\n        use_selected_hero: false,\n        max_level: 3,\n        outgoing_damage: 'illusion_damage_outgoing',\n        incoming_damage: 'illusion_damage_incoming'        \n    },\n    terrorblade_conjure_image: {\n        hero: 'terrorblade',\n        displayName: 'Terrorblade Conjure Image',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage',\n        incoming_damage: 'illusion_incoming_damage'        \n    },\n    terrorblade_reflection: {\n        hero: 'terrorblade',\n        displayName: 'Terrorblade Reflection',\n        use_selected_hero: true,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage'     \n    },\n    item_manta: {\n        hero: '',\n        is_item: true,\n        displayName: 'Manta Style Illusion',\n        use_selected_hero: true,\n        max_level: 1,\n        outgoing_damage_melee: 'images_do_damage_percent_melee',\n        incoming_damage_melee: 'images_take_damage_percent_melee',\n        outgoing_damage_ranged: 'images_do_damage_percent_ranged',\n        incoming_damage_ranged: 'images_take_damage_percent_ranged'\n    }\n}\n\nmodule.exports = illusionData;","var ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar stackableItems = require(\"./stackableItems\");\nvar levelItems = require(\"./levelItems\");\nvar itemsWithActive = require(\"./itemsWithActive\");\n\nvar BasicInventoryViewModel = function (h) {\n    var self = this;\n    self.items = ko.observableArray([]);\n    self.activeItems = ko.observableArray([]);\n    self.addItem = function (data, event) {\n        if (data.selectedItem() != undefined) {\n            var new_item = {\n                item: data.selectedItem().split('|')[0],\n                state: ko.observable(0),\n                size: data.itemInputValue(),\n                enabled: ko.observable(true)\n            }\n            switch (new_item.item) {\n                case 'dagon':\n                    new_item.size = Math.min(new_item.size, 5);\n                break;\n                break;\n                case 'travel_boots':\n                case 'diffusal_blade':\n                    new_item.size = Math.min(new_item.size, 2);\n                break;\n                case 'necronomicon':\n                    new_item.size = Math.min(new_item.size, 3);\n                break;\n            }\n            this.items.push(new_item);\n            if (data.selectedItem() === 'ring_of_aquila' || data.selectedItem() === 'ring_of_basilius' || data.selectedItem() === 'heart') {\n                this.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    }.bind(this);\n    self.toggleItem = function (index, data, event) {\n        if (itemsWithActive.indexOf(data.item) >= 0) {\n            if (this.activeItems.indexOf(data) < 0) {\n                this.activeItems.push(data);\n            }\n            else {\n                this.activeItems.remove(data);\n            }\n            switch (data.item) {\n                case 'power_treads':\n                    if (data.state() < 2) {\n                        data.state(data.state() + 1);\n                    }\n                    else {\n                        data.state(0);\n                    }                \n                break;\n                default:\n                    if (data.state() == 0) {\n                        data.state(1);\n                    }\n                    else {\n                        data.state(0);\n                    }                \n                break;\n            }\n        }\n    }.bind(this);\n    self.removeItem = function (item) {\n        this.activeItems.remove(item);\n        this.items.remove(item);\n    }.bind(this);\n    self.toggleMuteItem = function (item) {\n        item.enabled(!item.enabled());\n    }.bind(this);\n    self.removeAll = function () {\n        this.activeItems.removeAll();\n        this.items.removeAll();\n    }.bind(this);\n}\nBasicInventoryViewModel.prototype.getItemImage = function (data) {\n    var state = ko.utils.unwrapObservable(data.state);\n    switch (data.item) {\n        case 'power_treads':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '_str.png';\n            }\n            else if (state == 1) {\n                return '/media/images/items/' + data.item + '_int.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_agi.png';\n            }\n        break;\n        case 'tranquil_boots':\n        case 'ring_of_basilius':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n        break;\n        case 'armlet':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n        break;\n        case 'ring_of_aquila':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '.png';\n            }\n        break;\n        case 'dagon':\n        case 'diffusal_blade':\n        case 'travel_boots':\n        case 'necronomicon':\n            if (data.size > 1) {\n                return '/media/images/items/' + data.item + '_' + data.size + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '.png';\n            }\n        break;\n        default:\n            return '/media/images/items/' + data.item + '.png';            \n        break;\n    }\n};\nBasicInventoryViewModel.prototype.getItemSizeLabel = function (data) {\n    if (stackableItems.indexOf(data.item) != -1) {\n        return '<span style=\"font-size:10px\">Qty: </span>' + data.size;\n    }\n    else if (levelItems.indexOf(data.item) != -1) {\n        return '<span style=\"font-size:10px\">Lvl: </span>' + data.size;\n    }\n    else if (data.item == 'bloodstone') {\n        return '<span style=\"font-size:10px\">Charges: </span>' + data.size;\n    }\n    else {\n        return '';\n    }\n};\nBasicInventoryViewModel.prototype.getActiveBorder = function (data) {\n    switch (data.item) {\n        case 'power_treads':\n        case 'tranquil_boots':\n        case 'ring_of_basilius':\n        case 'ring_of_aquila':\n        case 'armlet':\n            return 0;\n        break;\n        default:\n            return ko.utils.unwrapObservable(data.state);    \n        break;\n    }\n}\nBasicInventoryViewModel.prototype.getItemAttributeValue = function (attributes, attributeName, level) {\n    for (var i = 0; i < attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (level == 0) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else if (level > attributes[i].value.length) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else {\n                return parseFloat(attributes[i].value[level - 1]);\n            }\n        }\n    }\n}\n\nmodule.exports = BasicInventoryViewModel;","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar stackableItems = require(\"./stackableItems\");\nvar levelItems = require(\"./levelItems\");\nvar BasicInventoryViewModel = require(\"./BasicInventoryViewModel\");\nvar itemOptionsArray = require(\"./itemOptionsArray\");\nvar itemBuffOptions = require(\"./itemBuffOptions\");\nvar itemDebuffOptions = require(\"./itemDebuffOptions\");\n\nvar InventoryViewModel = function (itemData, h) {\n    var self = this;\n    BasicInventoryViewModel.call(this, h);\n    self.hero = h;\n    self.hasInventory = ko.observable(true);\n    self.items = ko.observableArray([]);\n    self.activeItems = ko.observableArray([]);\n    self.hasScepter = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (item === 'ultimate_scepter' && self.items()[i].enabled()) {\n                return true;\n            }\n            \n        }\n        return false;\n    }, this);\n    self.isEthereal = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if ((item === 'ghost' || item === 'ethereal_blade') && self.items()[i].enabled() && isActive) {\n                return true;\n            }\n        }\n        return false;\n    }, this);\n    self.isSheeped = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (item === 'sheepstick' && self.items()[i].enabled() && isActive) {\n                return true;\n            }\n        }\n        return false;\n    }, this);\n    self.totalCost = ko.computed(function () {\n        var c = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            if (stackableItems.indexOf(item) != -1) {\n                c += itemData['item_' + item].itemcost * self.items()[i].size;\n            }\n            else if (levelItems.indexOf(item) != -1) {\n                switch(item) {\n                    case 'diffusal_blade':\n                        c += itemData['item_' + item].itemcost + (self.items()[i].size - 1) * 700;\n                    break;\n                    case 'necronomicon':\n                    case 'dagon':\n                        c += itemData['item_' + item].itemcost + (self.items()[i].size - 1) * 1250;\n                    break;\n                    default:\n                        c += itemData['item_' + item].itemcost;\n                    break;\n                }\n            }\n            else {\n                c += itemData['item_' + item].itemcost;\n            }\n            \n        }\n        return c;\n    }, this);\n    self.addItemBuff = function (data, event) {\n        if (self.hasInventory() && self.selectedItemBuff() != undefined) {\n            var new_item = {\n                item: self.selectedItemBuff(),\n                state: ko.observable(0),\n                size: 1,\n                enabled: ko.observable(true)\n            }\n            self.items.push(new_item);\n            if (self.selectedItemBuff() === 'ring_of_aquila' || self.selectedItemBuff() === 'ring_of_basilius') {\n                self.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    };\n    self.addItemDebuff = function (data, event) {\n        if (self.hasInventory() && self.selectedItemDebuff() != undefined) {\n            var new_item = {\n                item: self.selectedItemDebuff().split('|')[0],\n                state: ko.observable(0),\n                size: 1,\n                enabled: ko.observable(true)\n            }\n            if (self.selectedItemDebuff().split('|').length == 2) {\n                new_item.debuff = self.selectedItemDebuff().split('|')[1]\n            }\n            self.items.push(new_item);\n            if (self.selectedItemDebuff() === 'ring_of_aquila' || self.selectedItemDebuff() === 'ring_of_basilius') {\n                self.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    };\n    \n    self.getAttributes = function (attributetype) {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            var size = self.items()[i].size;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_all_stats':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'bonus_stats':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n                switch(attributetype) {\n                    case 'agi':\n                        if (attribute.name == 'bonus_agility') {\n                            if (item == 'diffusal_blade') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 2) {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_agi') {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                    case 'int':\n                        if (attribute.name == 'bonus_intellect') {\n                            if (item == 'necronomicon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else if (item == 'diffusal_blade') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else if (item == 'dagon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_intelligence') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_int') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 1) {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                    case 'str':\n                        if (attribute.name == 'bonus_strength') {\n                            if (item == 'necronomicon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 0) {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_str') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'unholy_bonus_strength' && isActive) {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getBash = function (attacktype) {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bash_chance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'bash_chance_melee':\n                        if (attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); };\n                    break;\n                    case 'bash_chance_ranged':\n                        if (attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK') { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getCritChance = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'crit_chance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getCritSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'lesser_crit':\n                case 'greater_crit':\n                case 'bloodthorn':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'crit_chance', 0) / 100,\n                            'multiplier': self.getItemAttributeValue(itemData['item_' + item].attributes, 'crit_multiplier', 0) / 100,\n                            'count': 1,\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n            if (item === 'bloodthorn' && isActive) {\n                if (sources['soul_rend'] == undefined) {\n                    sources['soul_rend'] = {\n                        'chance': 1,\n                        'multiplier': self.getItemAttributeValue(itemData['item_' + item].attributes, 'target_crit_multiplier', 0) / 100,\n                        'count': 1,\n                        'displayname': 'Soul Rend'\n                    }\n                }\n                else {\n                    sources['soul_rend'].count += 1;\n                }\n            }\n        }\n        return sources;\n    };\n\n    self.getCleaveSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'bfury':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'radius': self.getItemAttributeValue(itemData['item_' + item].attributes, 'cleave_radius', 0),\n                            'magnitude': self.getItemAttributeValue(itemData['item_' + item].attributes, 'cleave_damage_percent', 0) / 100,\n                            'count': 1,\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getBashSource = function (attacktype) {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'javelin':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance_damage', 1),\n                            'damageType': 'magic',\n                            'count': 1,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance', 1) / 100,\n                            'displayname': itemData['item_' + item].displayname + ' Pierce'\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n                case 'monkey_king_bar':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'item': item,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_chance', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_damage', 0),\n                            'duration': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_stun', 0),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': 'Mini-Bash' //itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n                case 'abyssal_blade':\n                case 'basher':\n                    if (!sources.hasOwnProperty('bash')) {\n                        sources['bash'] = {\n                            'item': item,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, (attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') ?'bash_chance_melee' : 'bash_chance_ranged', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance_damage', 0),\n                            'duration': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_duration', 0),\n                            'count': 1,\n                            'damageType': 'physical',\n                            'displayname': 'Bash' //itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        //sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getOrbProcSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'maelstrom':\n                case 'mjollnir':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'chain_chance', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'chain_damage', 0),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n\n    self.getOrbSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'diffusal_blade':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': 1,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'feedback_mana_burn', self.items()[i].size),\n                            'count': 1,\n                            'damageType': 'physical',\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getHealth = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_health':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getHealthRegen = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'health_regen':\n                    case 'bonus_regen':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'bonus_health_regen':\n                        if (item == 'tranquil_boots' && !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                        else if (item != 'tranquil_boots') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'hp_regen':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'health_regen_rate':\n                        if (item == 'heart' && isActive) {\n                            totalAttribute += (parseInt(attribute.value[0]) / 100) * self.hero.health();\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getHealthRegenAura = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(item + attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'aura_health_regen':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(item + attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getMana = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_mana':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getManaRegen = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'aura_mana_regen':\n                    case 'mana_regen_aura':\n                        totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                    case 'mana_regen':\n                        if (item == 'infused_raindrop') totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;    \n    };\n    self.getManaRegenPercent = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_mana_regen':\n                    case 'mana_regen':\n                    case 'bonus_mana_regen_pct':\n                        if (item != 'infused_raindrop') totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute / 100;    \n    };\n    self.getManaRegenBloodstone = function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            if (item.indexOf('bloodstone') != -1) {\n                return parseInt(self.items()[i].size);\n            }\n        }\n        return 0;\n    };\n    \n    self.getArmor = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_armor':\n                        if (!isActive || (item != 'medallion_of_courage' && item != 'solar_crest')) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                    case 'unholy_bonus_armor':\n                        if (isActive && item == 'armlet') { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getArmorAura = function (aList) {\n        var totalAttribute = 0,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // buckler\n                    case 'bonus_aoe_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                    // assault\n                    case 'aura_positive_armor':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                    // ring_of_aquila,ring_of_basilius\n                    case 'aura_bonus_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                    // vladmir\n                    case 'armor_aura':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                    // mekansm\n                    case 'heal_bonus_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                }\n            }\n        }\n        // remove buckler if there is a mekansm\n        if (attributeList.find(function (attribute) { return attribute.name == 'heal_bonus_armor'; })) {\n            attributeList = attributeList.filter(function (attribute) {\n                return attribute.name !== 'bonus_aoe_armor';\n            });\n        }\n        // remove ring_of_aquila,ring_of_basilius if there is a vladmir\n        if (attributeList.find(function (attribute) { return attribute.name == 'armor_aura'; })) {\n            attributeList = attributeList.filter(function (attribute) {\n                return attribute.name !== 'aura_bonus_armor';\n            });\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo += attribute.value;\n        }, 0);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    self.getArmorReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [],\n            selfExcludeList = [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1 || excludeList.indexOf(item + '_' + attribute.name) > -1) continue;\n                // self exclusion check only for hero items, not buff items\n                if (self.hero && (selfExcludeList.indexOf(attribute.name) > -1 || selfExcludeList.indexOf(item + '_' + attribute.name) > -1)) continue;\n                switch(attribute.name) {\n                    case 'armor_reduction':\n                        if (isActive || (item != 'medallion_of_courage' && item != 'solar_crest')) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(item + '_' + attribute.name);\n                        }\n                    break;\n                    case 'aura_negative_armor':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                    case 'corruption_armor':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        // allow blight_stone and desolator corruption_armor stacking from different sources, but not from same source\n                        excludeList.push(item + '_' + attribute.name);\n                        selfExcludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getEvasion = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_evasion':\n                        if (!isActive || (item != 'butterfly' && item != 'solar_crest')) { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getMovementSpeedFlat = function () {\n        var totalAttribute = 0,\n        hasBoots = false,\n        hasEuls = false,\n        hasWindLace = false,\n        bootItems = ['boots','phase_boots','arcane_boots','travel_boots','power_treads','tranquil_boots','guardian_greaves'];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_movement_speed':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            if (item != 'tranquil_boots' || (item == 'tranquil_boots' && !isActive)) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasBoots = true;\n                            }\n                        }\n                        //else if (!hasEuls && item == 'cyclone') {\n                        else if (item == 'cyclone') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasEuls = true;\n                        }\n                    break;\n                    case 'broken_movement_speed':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            if (item == 'tranquil_boots' && isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasBoots = true;\n                            }\n                        }\n                    break;\n                    case 'bonus_movement':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasBoots = true;\n                        }\n                    break;\n                    case 'movement_speed':\n                        if (!hasWindLace && item == 'wind_lace') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasWindLace = true;\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getMovementSpeedPercent = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [],\n            hasYasha = false,\n            hasDrums = false,\n            hasDrumsActive = false,\n            hasPhaseActive = false,\n            hasShadowBladeActive = false,\n            hasButterflyActive = false,\n            hasMoMActive = false,\n            yashaItems = ['manta','yasha','sange_and_yasha'];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'movement_speed_percent_bonus':\n                        if (!hasYasha && yashaItems.indexOf(item) >= 0) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasYasha = true;\n                        }\n                    break;\n                    case 'bonus_aura_movement_speed_pct':\n                        if (!hasDrums && item == 'ancient_janggo') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasDrums = true;\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'phase_movement_speed':\n                        if (isActive && !hasPhaseActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasPhaseActive = true;\n                        }\n                    break;\n                    case 'bonus_movement_speed_pct':\n                        if (isActive && !hasDrumsActive && item == 'ancient_janggo') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasDrumsActive = true;\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'windwalk_movement_speed':\n                        if (isActive && !hasShadowBladeActive && (item == 'invis_sword' || item == 'silver_edge')) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasShadowBladeActive = true;\n                        }\n                    break;\n                    case 'berserk_bonus_movement_speed':\n                        if (isActive && !hasMoMActive && item == 'mask_of_madness') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasMoMActive = true;\n                        }\n                    break;\n                    case 'bonus_movement_speed': //manta\n                        if (!hasYasha && item == 'manta') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasYasha = true;\n                        }\n                        else if (item == 'smoke_of_deceit' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'bonus_move_speed':\n                        if (isActive && !hasButterflyActive && item == 'butterfly') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasButterflyActive = true;\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute/100, excludeList: excludeList};\n    };\n    \n    self.getMovementSpeedPercentReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'movespeed':\n                        if (item == 'dust' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    case 'blast_movement_speed':\n                        if (item == 'shivas_guard' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    case 'cold_movement_speed':\n                        if (item == 'skadi') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'maim_movement_speed':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'maim') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute/100, excludeList: excludeList};\n    };\n    \n    self.getBonusDamage = function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_damage':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        if (sources[item] == undefined) {\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]),\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }                            \n                        }\n                        else {\n                            sources[item].count += 1;\n                        }\n                    break;\n                    case 'unholy_bonus_damage':\n                        if (isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            if (sources[item + '_active'] == undefined) {\n                                sources[item + '_active'] = {\n                                    'damage': parseInt(attribute.value[0]),\n                                    'damageType': 'physical',\n                                    'count':1,\n                                    'displayname': itemData['item_' + item].displayname + ' Unholy Strength'\n                                }                            \n                            }\n                            else {\n                                sources[item].count += 1;\n                            }\n                        }\n                    break;\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    };\n    self.getBonusDamagePercent = function (s) {\n        s = s || {sources:{},total:0};\n        var totalAttribute = s.total || 0;\n        var sources = s.sources || {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'damage_aura':\n                        if (sources[item] == undefined) {\n                            totalAttribute += parseInt(attribute.value[0]) / 100;\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]) / 100,\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }\n                        }\n                        // else {\n                            // sources[item].count += 1;\n                        // }\n                    break;\n                    case 'bottle_doubledamage':\n                        if (sources[item] == undefined) {\n                            totalAttribute += parseInt(attribute.value[0]) / 100;\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]) / 100,\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }\n                        }\n                    break;\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    };\n    self.getAttackSpeed = function (e) {\n        var totalAttribute = 0,\n            hasPowerTreads = false,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'bonus_attack_speed':\n                        if (item == 'power_treads') {\n                            if (!hasPowerTreads) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasPowerTreads = true;\n                            }\n                        }\n                        else if (item == 'moon_shard') {\n                            if (!isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        else if (item == 'hurricane_pike') {\n                            if (isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        else {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'consumed_bonus':\n                        if (item == 'moon_shard' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    break;\n                    case 'bonus_speed':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'aura_attack_speed':\n                        if (item != 'shivas_guard') { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                    // ancient_janggo\n                    case 'bonus_aura_attack_speed_pct':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                    // ancient_janggo\n                    case 'bonus_attack_speed_pct':\n                        if (isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'unholy_bonus_attack_speed':\n                        if (isActive) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                    case 'berserk_bonus_attack_speed':\n                        if (isActive) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getAttackSpeedReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'aura_attack_speed':\n                        if (item == 'shivas_guard') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'cold_attack_speed':\n                        if (item == 'skadi') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'maim_attack_speed':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'maim') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getLifesteal = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'lifesteal_percent':\n                        if (item == 'satanic') {\n                            if (!isActive) { return parseInt(attribute.value[0]); };\n                        }\n                        else {\n                            return parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'unholy_lifesteal_percent':\n                        if (isActive) { return parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getLifestealAura = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'vampiric_aura':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getSpellAmp = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'spell_amp':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getCooldownReductionFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        /*for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_night_vision':\n                        if (item != 'moon_shard' || !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                }\n            }\n        }*/\n        return totalAttribute;\n    });\n    self.getCooldownReductionPercent = function (aList) {        \n        var totalAttribute = 1,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // octarine_core\n                    case 'bonus_cooldown':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                }\n            }\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo *= (1 - attribute.value / 100);\n        }, 1);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    self.getCooldownIncreaseFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        return totalAttribute;\n    });\n    self.getCooldownIncreasePercent = function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    };\n    self.getMagicResist = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_magical_armor':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'bonus_spell_resist':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'magic_resistance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getMagicResistReductionSelf = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            if (isActive) {\n                for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                    var attribute = itemData['item_' + item].attributes[j];\n                    switch(attribute.name) {\n                        case 'extra_spell_damage_percent':\n                        case 'ethereal_damage_bonus':\n                            return (1 - parseInt(attribute.value[0]) / 100);\n                        break;\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    };   \n    self.getMagicResistReduction = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            if (isActive) {\n                for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                    var attribute = itemData['item_' + item].attributes[j];\n                    switch(attribute.name) {\n                        case 'ethereal_damage_bonus':\n                            if (!self.isEthereal()) totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        case 'resist_debuff':\n                            totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        break;\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    };        \n\n    self.getVisionRangeNight = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_night_vision':\n                        if (item != 'moon_shard' || !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackRange = function (attacktype, aList) {\n        var totalAttribute = 0,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // dragon_lance\n                    case 'base_attack_range':\n                        if (attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK') attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                }\n            }\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo += attribute.value;\n        }, 0);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    \n    self.getMissChance = function (e) {\n        var totalAttribute = 1,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'miss_chance':\n                        if (item === 'solar_crest' && isActive) {\n                            totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'blind_pct':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        excludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getBaseDamageReductionPct = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'backstab_reduction':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'shadow_walk') {\n                            totalAttribute *= (1 + parseInt(attribute.value[0]) / 100);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };    \n    self.getBonusDamageReductionPct = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'backstab_reduction':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'shadow_walk') {\n                            totalAttribute *= (1 + parseInt(attribute.value[0]) / 100);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.itemOptions = ko.observableArray(itemOptionsArray.items);\n    \n    self.itemBuffOptions = ko.observableArray(itemBuffOptions.items);\n    self.selectedItemBuff = ko.observable('assault');\n\n    self.itemDebuffOptions = ko.observableArray(itemDebuffOptions.items);\n    self.selectedItemDebuff = ko.observable('assault');\n    \n    return self;\n};\nInventoryViewModel.prototype = Object.create(BasicInventoryViewModel.prototype);\nInventoryViewModel.prototype.constructor = InventoryViewModel;\n\nmodule.exports = InventoryViewModel;","var ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\n\nvar ItemInput = function (itemData, value, name, debuff) {\n    if (itemData['item_' + value].ItemAliases instanceof Array) {\n        var itemAlias = itemData['item_' + value].ItemAliases.join(' ');\n    }\n    else {\n        var itemAlias = itemData['item_' + value].ItemAliases;\n    }\n    this.value = ko.observable(value);\n    this.debuff = ko.observable(debuff);\n    if (this.debuff()) {\n        this.value = ko.observable(value + '|' + debuff.id);\n        this.name = ko.observable(name + ' (' + debuff.name + ')');\n        this.displayname = ko.observable(name + ' (' + debuff.name + ') <span style=\"display:none\">' + ';' + itemAlias + '</span>');\n    }\n    else {\n        this.value = ko.observable(value);\n        this.name = ko.observable(name);\n        this.displayname = ko.observable(name + ' <span style=\"display:none\">' + ';' + itemAlias + '</span>');\n    }\n};\n\nmodule.exports = ItemInput;","var ItemInput = require(\"./ItemInput\");\nvar itemBuffs = ['assault', 'ancient_janggo', 'headdress', 'mekansm', 'pipe', 'ring_of_aquila', 'vladmir', 'ring_of_basilius', 'buckler', 'solar_crest', 'bottle_doubledamage'];\nvar itemBuffOptions = {};\n\nvar init = function (itemData) {\n    itemBuffOptions.items = itemBuffs.map(function(item) {\n        return new ItemInput(itemData, item, itemData['item_' + item].displayname);\n    }).sort(function (a, b) {\n        if (a.displayname() < b.displayname()) return -1;\n        if (a.displayname() > b.displayname()) return 1;\n        return 0;\n    });\n    return itemBuffOptions.items;\n}\n\nitemBuffOptions.init = init;\n\nmodule.exports = itemBuffOptions;","var ItemInput = require(\"./ItemInput\");\nvar itemDebuffs = [\n    {item: 'assault', debuff: null},\n    {item: 'shivas_guard', debuff: null},\n    {item: 'desolator', debuff: null},\n    {item: 'blight_stone', debuff: null},\n    {item: 'medallion_of_courage', debuff: null},\n    {item: 'radiance', debuff: null},\n    {item: 'sheepstick', debuff: null},\n    {item: 'veil_of_discord', debuff: null},\n    {item: 'solar_crest', debuff: null},\n    {item: 'silver_edge', debuff: {id: 'shadow_walk', name: 'Shadow Walk'}},\n    {item: 'silver_edge', debuff: {id: 'maim', name: 'Lesser Maim'}}\n]\nvar itemDebuffOptions = {};\n\nvar init = function (itemData) {\n    itemDebuffOptions.items = itemDebuffs.map(function(item) {\n        return new ItemInput(itemData, item.item, itemData['item_' + item.item].displayname, item.debuff);\n    }).sort(function (a, b) {\n        if (a.displayname() < b.displayname()) return -1;\n        if (a.displayname() > b.displayname()) return 1;\n        return 0;\n    });\n    return itemDebuffOptions.items;\n}\n\nitemDebuffOptions.init = init;\n\nmodule.exports = itemDebuffOptions;","var validItems = require(\"./validItems\");\nvar ItemInput = require(\"./ItemInput\");\n\nvar itemOptionsArray = {};\n\nvar init = function (itemData) {\n    itemOptionsArray.items = [];\n    for (var i = 0; i < validItems.length; i++) {\n        itemOptionsArray.items.push(new ItemInput(itemData, validItems[i], itemData['item_' + validItems[i]].displayname));\n    }\n    return itemOptionsArray.items;\n}\n\nitemOptionsArray.init = init;\n\nmodule.exports = itemOptionsArray;","module.exports = ['solar_crest', 'heart','smoke_of_deceit','dust','ghost','tranquil_boots','phase_boots','power_treads','buckler','medallion_of_courage','ancient_janggo','mekansm','pipe','veil_of_discord','rod_of_atos','orchid','sheepstick','armlet','invis_sword','ethereal_blade','shivas_guard','manta','mask_of_madness','diffusal_blade','mjollnir','satanic','ring_of_basilius','ring_of_aquila', 'butterfly', 'moon_shard', 'silver_edge','bloodthorn','hurricane_pike'];","module.exports = ['necronomicon','dagon','diffusal_blade','travel_boots'];","module.exports = ['clarity','flask','dust','ward_observer','ward_sentry','tango','tpscroll','smoke_of_deceit'];","module.exports = [\"abyssal_blade\",\"ultimate_scepter\",\"courier\",\"arcane_boots\",\"armlet\",\"assault\",\"boots_of_elves\",\"bfury\",\"belt_of_strength\",\"black_king_bar\",\"blade_mail\",\"blade_of_alacrity\",\"blades_of_attack\",\"blink\",\"bloodstone\",\"boots\",\"travel_boots\",\"bottle\",\"bracer\",\"broadsword\",\"buckler\",\"butterfly\",\"chainmail\",\"circlet\",\"clarity\",\"claymore\",\"cloak\",\"lesser_crit\",\"greater_crit\",\"dagon\",\"demon_edge\",\"desolator\",\"diffusal_blade\",\"rapier\",\"ancient_janggo\",\"dust\",\"eagle\",\"energy_booster\",\"ethereal_blade\",\"cyclone\",\"skadi\",\"flying_courier\",\"force_staff\",\"gauntlets\",\"gem\",\"ghost\",\"gloves\",\"hand_of_midas\",\"headdress\",\"flask\",\"heart\",\"heavens_halberd\",\"helm_of_iron_will\",\"helm_of_the_dominator\",\"hood_of_defiance\",\"hyperstone\",\"branches\",\"javelin\",\"sphere\",\"maelstrom\",\"magic_stick\",\"magic_wand\",\"manta\",\"mantle\",\"mask_of_madness\",\"medallion_of_courage\",\"mekansm\",\"mithril_hammer\",\"mjollnir\",\"monkey_king_bar\",\"lifesteal\",\"mystic_staff\",\"necronomicon\",\"null_talisman\",\"oblivion_staff\",\"ward_observer\",\"ogre_axe\",\"orb_of_venom\",\"orchid\",\"pers\",\"phase_boots\",\"pipe\",\"platemail\",\"point_booster\",\"poor_mans_shield\",\"power_treads\",\"quarterstaff\",\"quelling_blade\",\"radiance\",\"reaver\",\"refresher\",\"ring_of_aquila\",\"ring_of_basilius\",\"ring_of_health\",\"ring_of_protection\",\"ring_of_regen\",\"robe\",\"rod_of_atos\",\"relic\",\"sobi_mask\",\"sange\",\"sange_and_yasha\",\"satanic\",\"sheepstick\",\"ward_sentry\",\"shadow_amulet\",\"invis_sword\",\"shivas_guard\",\"basher\",\"slippers\",\"smoke_of_deceit\",\"soul_booster\",\"soul_ring\",\"staff_of_wizardry\",\"stout_shield\",\"talisman_of_evasion\",\"tango\",\"tpscroll\",\"tranquil_boots\",\"ultimate_orb\",\"urn_of_shadows\",\"vanguard\",\"veil_of_discord\",\"vitality_booster\",\"vladmir\",\"void_stone\",\"wraith_band\",\"yasha\",\"crimson_guard\",\"enchanted_mango\",\"lotus_orb\",\"glimmer_cape\",\"guardian_greaves\",\"moon_shard\",\"silver_edge\",\"solar_crest\",\"octarine_core\",\"aether_lens\",\"faerie_fire\",\"iron_talon\",\"dragon_lance\",\"echo_sabre\",\"infused_raindrop\",\"blight_stone\",\"wind_lace\",\"tome_of_knowledge\",\"bloodthorn\",\"hurricane_pike\"];","var extend = function (out) {\n    out = out || {};\n\n    for (var i = 1; i < arguments.length; i++) {\n        var obj = arguments[i];\n\n        if (!obj)\n            continue;\n\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                if (typeof obj[key] === 'object')\n                    out[key] = extend(out[key], obj[key]);\n                else\n                    out[key] = obj[key];\n            }\n        }\n    }\n\n    return out;\n};\n\nmodule.exports = extend;","var findWhere = function (arr, obj) {\n    arrLoop: for (var i = 0; i < arr.length; i++) {\n        objLoop: for (var key in obj) {\n            if (arr[i][key] != obj[key]) {\n                continue arrLoop;\n            }\n        }\n        return arr[i];\n    }\n}\n\nmodule.exports = findWhere;","\"use strict\";\n\nvar getJSON = function (url, successCallback, errorCallback) {\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n\n    request.onload = function() {\n        if (request.status >= 200 && request.status < 400) {\n            // Success!\n            var data = JSON.parse(request.responseText);\n            successCallback(data);\n        } else {\n            // We reached our target server, but it returned an error\n            errorCallback();\n        }\n    };\n\n    request.onerror = function() {\n        // There was a connection error of some sort\n        errorCallback();\n    };\n\n    request.send();\n}\n\nmodule.exports = getJSON;","var isEmpty = function (obj) {\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nmodule.exports = isEmpty;","var isString = function (myVar) {\n    return typeof myVar === 'string' || myVar instanceof String;\n}\n\nmodule.exports = isString;","'use strict';\n\nvar util = {};\nutil.extend = require(\"./extend\");\nutil.findWhere = require(\"./findWhere\");\nutil.getJSON = require(\"./getJSON\");\nutil.union = require(\"./union\");\nutil.uniqueId = require(\"./uniqueId\");\nutil.uniques = require(\"./uniques\");\n\nmodule.exports = util;","\"use strict\";\nvar uniques = require(\"./uniques\");\n\nvar union = function (a, b) {\n    var arr = a.concat(b);\n    return uniques(arr);\n}\n\nmodule.exports = union;","\"use strict\";\n\nvar idCounter = 0;\nvar uniqueId = function (prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n};\n\nmodule.exports = uniqueId;","\"use strict\";\nvar uniques = function (arr) {\n    var a = [];\n    for (var i=0, l=arr.length; i<l; i++)\n        if (a.indexOf(arr[i]) === -1 && arr[i] !== '')\n            a.push(arr[i]);\n    return a;\n}\n\nmodule.exports = uniques;","(function (factory) {\n\t// Module systems magic dance.\n\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\n\t\t// CommonJS or Node: hard-coded dependency on \"knockout\"\n\t\tfactory((typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null), exports);\n\t} else if (typeof define === \"function\" && define[\"amd\"]) {\n\t\t// AMD anonymous module with hard-coded dependency on \"knockout\"\n\t\tdefine([\"knockout\", \"exports\"], factory);\n\t} else {\n\t\t// <script> tag: use the global `ko` object, attaching a `mapping` property\n\t\tfactory(ko, ko.mapping = {});\n\t}\n}(function (ko, exports) {\n\tvar DEBUG=true;\n\tvar mappingProperty = \"__ko_mapping__\";\n\tvar realKoDependentObservable = ko.dependentObservable;\n\tvar mappingNesting = 0;\n\tvar dependentObservables;\n\tvar visitedObjects;\n\tvar recognizedRootProperties = [\"create\", \"update\", \"key\", \"arrayChanged\"];\n\tvar emptyReturn = {};\n\n\tvar _defaultOptions = {\n\t\tinclude: [\"_destroy\"],\n\t\tignore: [],\n\t\tcopy: [],\n\t\tobserve: []\n\t};\n\tvar defaultOptions = _defaultOptions;\n\n\t// Author: KennyTM @ StackOverflow\n\tfunction unionArrays (x, y) {\n\t\tvar obj = {};\n\t\tfor (var i = x.length - 1; i >= 0; -- i) obj[x[i]] = x[i];\n\t\tfor (var i = y.length - 1; i >= 0; -- i) obj[y[i]] = y[i];\n\t\tvar res = [];\n\n\t\tfor (var k in obj) {\n\t\t\tres.push(obj[k]);\n\t\t};\n\n\t\treturn res;\n\t}\n\n\tfunction extendObject(destination, source) {\n\t\tvar destType;\n\n\t\tfor (var key in source) {\n\t\t\tif (source.hasOwnProperty(key) && source[key]) {\n\t\t\t\tdestType = exports.getType(destination[key]);\n\t\t\t\tif (key && destination[key] && destType !== \"array\" && destType !== \"string\") {\n\t\t\t\t\textendObject(destination[key], source[key]);\n\t\t\t\t} else {\n\t\t\t\t\tvar bothArrays = exports.getType(destination[key]) === \"array\" && exports.getType(source[key]) === \"array\";\n\t\t\t\t\tif (bothArrays) {\n\t\t\t\t\t\tdestination[key] = unionArrays(destination[key], source[key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction merge(obj1, obj2) {\n\t\tvar merged = {};\n\t\textendObject(merged, obj1);\n\t\textendObject(merged, obj2);\n\n\t\treturn merged;\n\t}\n\n\texports.isMapped = function (viewModel) {\n\t\tvar unwrapped = ko.utils.unwrapObservable(viewModel);\n\t\treturn unwrapped && unwrapped[mappingProperty];\n\t}\n\n\texports.fromJS = function (jsObject /*, inputOptions, target*/ ) {\n\t\tif (arguments.length == 0) throw new Error(\"When calling ko.fromJS, pass the object you want to convert.\");\n\n\t\ttry {\n\t\t\tif (!mappingNesting++) {\n\t\t\t\tdependentObservables = [];\n\t\t\t\tvisitedObjects = new objectLookup();\n\t\t\t}\n\n\t\t\tvar options;\n\t\t\tvar target;\n\n\t\t\tif (arguments.length == 2) {\n\t\t\t\tif (arguments[1][mappingProperty]) {\n\t\t\t\t\ttarget = arguments[1];\n\t\t\t\t} else {\n\t\t\t\t\toptions = arguments[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (arguments.length == 3) {\n\t\t\t\toptions = arguments[1];\n\t\t\t\ttarget = arguments[2];\n\t\t\t}\n\n\t\t\tif (target) {\n\t\t\t\toptions = merge(options, target[mappingProperty]);\n\t\t\t}\n\t\t\toptions = fillOptions(options);\n\n\t\t\tvar result = updateViewModel(target, jsObject, options);\n\t\t\tif (target) {\n\t\t\t\tresult = target;\n\t\t\t}\n\n\t\t\t// Evaluate any dependent observables that were proxied.\n\t\t\t// Do this after the model's observables have been created\n\t\t\tif (!--mappingNesting) {\n\t\t\t\twhile (dependentObservables.length) {\n\t\t\t\t\tvar DO = dependentObservables.pop();\n\t\t\t\t\tif (DO) {\n\t\t\t\t\t\tDO();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Move this magic property to the underlying dependent observable\n\t\t\t\t\t\tDO.__DO[\"throttleEvaluation\"] = DO[\"throttleEvaluation\"];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Save any new mapping options in the view model, so that updateFromJS can use them later.\n\t\t\tresult[mappingProperty] = merge(result[mappingProperty], options);\n\n\t\t\treturn result;\n\t\t} catch(e) {\n\t\t\tmappingNesting = 0;\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\texports.fromJSON = function (jsonString /*, options, target*/ ) {\n\t\tvar parsed = ko.utils.parseJson(jsonString);\n\t\targuments[0] = parsed;\n\t\treturn exports.fromJS.apply(this, arguments);\n\t};\n\n\texports.updateFromJS = function (viewModel) {\n\t\tthrow new Error(\"ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!\");\n\t};\n\n\texports.updateFromJSON = function (viewModel) {\n\t\tthrow new Error(\"ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!\");\n\t};\n\n\texports.toJS = function (rootObject, options) {\n\t\tif (!defaultOptions) exports.resetDefaultOptions();\n\n\t\tif (arguments.length == 0) throw new Error(\"When calling ko.mapping.toJS, pass the object you want to convert.\");\n\t\tif (exports.getType(defaultOptions.ignore) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().ignore should be an array.\");\n\t\tif (exports.getType(defaultOptions.include) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().include should be an array.\");\n\t\tif (exports.getType(defaultOptions.copy) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().copy should be an array.\");\n\n\t\t// Merge in the options used in fromJS\n\t\toptions = fillOptions(options, rootObject[mappingProperty]);\n\n\t\t// We just unwrap everything at every level in the object graph\n\t\treturn exports.visitModel(rootObject, function (x) {\n\t\t\treturn ko.utils.unwrapObservable(x)\n\t\t}, options);\n\t};\n\n\texports.toJSON = function (rootObject, options) {\n\t\tvar plainJavaScriptObject = exports.toJS(rootObject, options);\n\t\treturn ko.utils.stringifyJson(plainJavaScriptObject);\n\t};\n\n\texports.defaultOptions = function () {\n\t\tif (arguments.length > 0) {\n\t\t\tdefaultOptions = arguments[0];\n\t\t} else {\n\t\t\treturn defaultOptions;\n\t\t}\n\t};\n\n\texports.resetDefaultOptions = function () {\n\t\tdefaultOptions = {\n\t\t\tinclude: _defaultOptions.include.slice(0),\n\t\t\tignore: _defaultOptions.ignore.slice(0),\n\t\t\tcopy: _defaultOptions.copy.slice(0)\n\t\t};\n\t};\n\n\texports.getType = function(x) {\n\t\tif ((x) && (typeof (x) === \"object\")) {\n\t\t\tif (x.constructor === Date) return \"date\";\n\t\t\tif (x.constructor === Array) return \"array\";\n\t\t}\n\t\treturn typeof x;\n\t}\n\n\tfunction fillOptions(rawOptions, otherOptions) {\n\t\tvar options = merge({}, rawOptions);\n\n\t\t// Move recognized root-level properties into a root namespace\n\t\tfor (var i = recognizedRootProperties.length - 1; i >= 0; i--) {\n\t\t\tvar property = recognizedRootProperties[i];\n\t\t\t\n\t\t\t// Carry on, unless this property is present\n\t\t\tif (!options[property]) continue;\n\t\t\t\n\t\t\t// Move the property into the root namespace\n\t\t\tif (!(options[\"\"] instanceof Object)) options[\"\"] = {};\n\t\t\toptions[\"\"][property] = options[property];\n\t\t\tdelete options[property];\n\t\t}\n\n\t\tif (otherOptions) {\n\t\t\toptions.ignore = mergeArrays(otherOptions.ignore, options.ignore);\n\t\t\toptions.include = mergeArrays(otherOptions.include, options.include);\n\t\t\toptions.copy = mergeArrays(otherOptions.copy, options.copy);\n\t\t\toptions.observe = mergeArrays(otherOptions.observe, options.observe);\n\t\t}\n\t\toptions.ignore = mergeArrays(options.ignore, defaultOptions.ignore);\n\t\toptions.include = mergeArrays(options.include, defaultOptions.include);\n\t\toptions.copy = mergeArrays(options.copy, defaultOptions.copy);\n\t\toptions.observe = mergeArrays(options.observe, defaultOptions.observe);\n\n\t\toptions.mappedProperties = options.mappedProperties || {};\n\t\toptions.copiedProperties = options.copiedProperties || {};\n\t\treturn options;\n\t}\n\n\tfunction mergeArrays(a, b) {\n\t\tif (exports.getType(a) !== \"array\") {\n\t\t\tif (exports.getType(a) === \"undefined\") a = [];\n\t\t\telse a = [a];\n\t\t}\n\t\tif (exports.getType(b) !== \"array\") {\n\t\t\tif (exports.getType(b) === \"undefined\") b = [];\n\t\t\telse b = [b];\n\t\t}\n\n\t\treturn ko.utils.arrayGetDistinctValues(a.concat(b));\n\t}\n\n\t// When using a 'create' callback, we proxy the dependent observable so that it doesn't immediately evaluate on creation.\n\t// The reason is that the dependent observables in the user-specified callback may contain references to properties that have not been mapped yet.\n\tfunction withProxyDependentObservable(dependentObservables, callback) {\n\t\tvar localDO = ko.dependentObservable;\n\t\tko.dependentObservable = function (read, owner, options) {\n\t\t\toptions = options || {};\n\n\t\t\tif (read && typeof read == \"object\") { // mirrors condition in knockout implementation of DO's\n\t\t\t\toptions = read;\n\t\t\t}\n\n\t\t\tvar realDeferEvaluation = options.deferEvaluation;\n\n\t\t\tvar isRemoved = false;\n\n\t\t\t// We wrap the original dependent observable so that we can remove it from the 'dependentObservables' list we need to evaluate after mapping has\n\t\t\t// completed if the user already evaluated the DO themselves in the meantime.\n\t\t\tvar wrap = function (DO) {\n\t\t\t\t// Temporarily revert ko.dependentObservable, since it is used in ko.isWriteableObservable\n\t\t\t\tvar tmp = ko.dependentObservable;\n\t\t\t\tko.dependentObservable = realKoDependentObservable;\n\t\t\t\tvar isWriteable = ko.isWriteableObservable(DO);\n\t\t\t\tko.dependentObservable = tmp;\n\n\t\t\t\tvar wrapped = realKoDependentObservable({\n\t\t\t\t\tread: function () {\n\t\t\t\t\t\tif (!isRemoved) {\n\t\t\t\t\t\t\tko.utils.arrayRemoveItem(dependentObservables, DO);\n\t\t\t\t\t\t\tisRemoved = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn DO.apply(DO, arguments);\n\t\t\t\t\t},\n\t\t\t\t\twrite: isWriteable && function (val) {\n\t\t\t\t\t\treturn DO(val);\n\t\t\t\t\t},\n\t\t\t\t\tdeferEvaluation: true\n\t\t\t\t});\n\t\t\t\tif (DEBUG) wrapped._wrapper = true;\n\t\t\t\twrapped.__DO = DO;\n\t\t\t\treturn wrapped;\n\t\t\t};\n\t\t\t\n\t\t\toptions.deferEvaluation = true; // will either set for just options, or both read/options.\n\t\t\tvar realDependentObservable = new realKoDependentObservable(read, owner, options);\n\n\t\t\tif (!realDeferEvaluation) {\n\t\t\t\trealDependentObservable = wrap(realDependentObservable);\n\t\t\t\tdependentObservables.push(realDependentObservable);\n\t\t\t}\n\n\t\t\treturn realDependentObservable;\n\t\t}\n\t\tko.dependentObservable.fn = realKoDependentObservable.fn;\n\t\tko.computed = ko.dependentObservable;\n\t\tvar result = callback();\n\t\tko.dependentObservable = localDO;\n\t\tko.computed = ko.dependentObservable;\n\t\treturn result;\n\t}\n\n\tfunction updateViewModel(mappedRootObject, rootObject, options, parentName, parent, parentPropertyName, mappedParent) {\n\t\tvar isArray = exports.getType(ko.utils.unwrapObservable(rootObject)) === \"array\";\n\n\t\tparentPropertyName = parentPropertyName || \"\";\n\n\t\t// If this object was already mapped previously, take the options from there and merge them with our existing ones.\n\t\tif (exports.isMapped(mappedRootObject)) {\n\t\t\tvar previousMapping = ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];\n\t\t\toptions = merge(previousMapping, options);\n\t\t}\n\n\t\tvar callbackParams = {\n\t\t\tdata: rootObject,\n\t\t\tparent: mappedParent || parent\n\t\t};\n\n\t\tvar hasCreateCallback = function () {\n\t\t\treturn options[parentName] && options[parentName].create instanceof Function;\n\t\t};\n\n\t\tvar createCallback = function (data) {\n\t\t\treturn withProxyDependentObservable(dependentObservables, function () {\n\t\t\t\t\n\t\t\t\tif (ko.utils.unwrapObservable(parent) instanceof Array) {\n\t\t\t\t\treturn options[parentName].create({\n\t\t\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\t\t\tparent: callbackParams.parent,\n\t\t\t\t\t\tskip: emptyReturn\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn options[parentName].create({\n\t\t\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\t\t\tparent: callbackParams.parent\n\t\t\t\t\t});\n\t\t\t\t}\t\t\t\t\n\t\t\t});\n\t\t};\n\n\t\tvar hasUpdateCallback = function () {\n\t\t\treturn options[parentName] && options[parentName].update instanceof Function;\n\t\t};\n\n\t\tvar updateCallback = function (obj, data) {\n\t\t\tvar params = {\n\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\tparent: callbackParams.parent,\n\t\t\t\ttarget: ko.utils.unwrapObservable(obj)\n\t\t\t};\n\n\t\t\tif (ko.isWriteableObservable(obj)) {\n\t\t\t\tparams.observable = obj;\n\t\t\t}\n\n\t\t\treturn options[parentName].update(params);\n\t\t}\n\n\t\tvar alreadyMapped = visitedObjects.get(rootObject);\n\t\tif (alreadyMapped) {\n\t\t\treturn alreadyMapped;\n\t\t}\n\n\t\tparentName = parentName || \"\";\n\n\t\tif (!isArray) {\n\t\t\t// For atomic types, do a direct update on the observable\n\t\t\tif (!canHaveProperties(rootObject)) {\n\t\t\t\tswitch (exports.getType(rootObject)) {\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\tif (ko.isWriteableObservable(rootObject)) {\n\t\t\t\t\t\t\trootObject(updateCallback(rootObject));\n\t\t\t\t\t\t\tmappedRootObject = rootObject;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmappedRootObject = updateCallback(rootObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmappedRootObject = rootObject;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (ko.isWriteableObservable(mappedRootObject)) {\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tvar valueToWrite = updateCallback(mappedRootObject);\n\t\t\t\t\t\t\tmappedRootObject(valueToWrite);\n\t\t\t\t\t\t\treturn valueToWrite;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar valueToWrite = ko.utils.unwrapObservable(rootObject);\n\t\t\t\t\t\t\tmappedRootObject(valueToWrite);\n\t\t\t\t\t\t\treturn valueToWrite;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar hasCreateOrUpdateCallback = hasCreateCallback() || hasUpdateCallback();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (hasCreateCallback()) {\n\t\t\t\t\t\t\tmappedRootObject = createCallback();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmappedRootObject = ko.observable(ko.utils.unwrapObservable(rootObject));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tmappedRootObject(updateCallback(mappedRootObject));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (hasCreateOrUpdateCallback) return mappedRootObject;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tmappedRootObject = ko.utils.unwrapObservable(mappedRootObject);\n\t\t\t\tif (!mappedRootObject) {\n\t\t\t\t\tif (hasCreateCallback()) {\n\t\t\t\t\t\tvar result = createCallback();\n\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tresult = updateCallback(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\treturn updateCallback(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmappedRootObject = {};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\tmappedRootObject = updateCallback(mappedRootObject);\n\t\t\t\t}\n\n\t\t\t\tvisitedObjects.save(rootObject, mappedRootObject);\n\t\t\t\tif (hasUpdateCallback()) return mappedRootObject;\n\n\t\t\t\t// For non-atomic types, visit all properties and update recursively\n\t\t\t\tvisitPropertiesOrArrayEntries(rootObject, function (indexer) {\n\t\t\t\t\tvar fullPropertyName = parentPropertyName.length ? parentPropertyName + \".\" + indexer : indexer;\n\n\t\t\t\t\tif (ko.utils.arrayIndexOf(options.ignore, fullPropertyName) != -1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ko.utils.arrayIndexOf(options.copy, fullPropertyName) != -1) {\n\t\t\t\t\t\tmappedRootObject[indexer] = rootObject[indexer];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof rootObject[indexer] != \"object\" && typeof rootObject[indexer] != \"array\" && options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tmappedRootObject[indexer] = rootObject[indexer];\n\t\t\t\t\t\toptions.copiedProperties[fullPropertyName] = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// In case we are adding an already mapped property, fill it with the previously mapped property value to prevent recursion.\n\t\t\t\t\t// If this is a property that was generated by fromJS, we should use the options specified there\n\t\t\t\t\tvar prevMappedProperty = visitedObjects.get(rootObject[indexer]);\n\t\t\t\t\tvar retval = updateViewModel(mappedRootObject[indexer], rootObject[indexer], options, indexer, mappedRootObject, fullPropertyName, mappedRootObject);\n\t\t\t\t\tvar value = prevMappedProperty || retval;\n\t\t\t\t\t\n\t\t\t\t\tif(options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tmappedRootObject[indexer] = value();\n\t\t\t\t\t\toptions.copiedProperties[fullPropertyName] = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (ko.isWriteableObservable(mappedRootObject[indexer])) {\n\t\t\t\t\t\tvalue = ko.utils.unwrapObservable(value);\n\t\t\t\t\t\tif (mappedRootObject[indexer]() !== value) {\n\t\t\t\t\t\t\tmappedRootObject[indexer](value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = mappedRootObject[indexer] === undefined ? value : ko.utils.unwrapObservable(value);\n\t\t\t\t\t\tmappedRootObject[indexer] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\toptions.mappedProperties[fullPropertyName] = true;\n\t\t\t\t});\n\t\t\t}\n\t\t} else { //mappedRootObject is an array\n\t\t\tvar changes = [];\n\n\t\t\tvar hasKeyCallback = false;\n\t\t\tvar keyCallback = function (x) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\tif (options[parentName] && options[parentName].key) {\n\t\t\t\tkeyCallback = options[parentName].key;\n\t\t\t\thasKeyCallback = true;\n\t\t\t}\n\n\t\t\tif (!ko.isObservable(mappedRootObject)) {\n\t\t\t\t// When creating the new observable array, also add a bunch of utility functions that take the 'key' of the array items into account.\n\t\t\t\tmappedRootObject = ko.observableArray([]);\n\n\t\t\t\tmappedRootObject.mappedRemove = function (valueOrPredicate) {\n\t\t\t\t\tvar predicate = typeof valueOrPredicate == \"function\" ? valueOrPredicate : function (value) {\n\t\t\t\t\t\t\treturn value === keyCallback(valueOrPredicate);\n\t\t\t\t\t\t};\n\t\t\t\t\treturn mappedRootObject.remove(function (item) {\n\t\t\t\t\t\treturn predicate(keyCallback(item));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedRemoveAll = function (arrayOfValues) {\n\t\t\t\t\tvar arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);\n\t\t\t\t\treturn mappedRootObject.remove(function (item) {\n\t\t\t\t\t\treturn ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedDestroy = function (valueOrPredicate) {\n\t\t\t\t\tvar predicate = typeof valueOrPredicate == \"function\" ? valueOrPredicate : function (value) {\n\t\t\t\t\t\t\treturn value === keyCallback(valueOrPredicate);\n\t\t\t\t\t\t};\n\t\t\t\t\treturn mappedRootObject.destroy(function (item) {\n\t\t\t\t\t\treturn predicate(keyCallback(item));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedDestroyAll = function (arrayOfValues) {\n\t\t\t\t\tvar arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);\n\t\t\t\t\treturn mappedRootObject.destroy(function (item) {\n\t\t\t\t\t\treturn ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedIndexOf = function (item) {\n\t\t\t\t\tvar keys = filterArrayByKey(mappedRootObject(), keyCallback);\n\t\t\t\t\tvar key = keyCallback(item);\n\t\t\t\t\treturn ko.utils.arrayIndexOf(keys, key);\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedGet = function (item) {\n\t\t\t\t\treturn mappedRootObject()[mappedRootObject.mappedIndexOf(item)];\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedCreate = function (value) {\n\t\t\t\t\tif (mappedRootObject.mappedIndexOf(value) !== -1) {\n\t\t\t\t\t\tthrow new Error(\"There already is an object with the key that you specified.\");\n\t\t\t\t\t}\n\n\t\t\t\t\tvar item = hasCreateCallback() ? createCallback(value) : value;\n\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\tvar newValue = updateCallback(item, value);\n\t\t\t\t\t\tif (ko.isWriteableObservable(item)) {\n\t\t\t\t\t\t\titem(newValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem = newValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmappedRootObject.push(item);\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar currentArrayKeys = filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject), keyCallback).sort();\n\t\t\tvar newArrayKeys = filterArrayByKey(rootObject, keyCallback);\n\t\t\tif (hasKeyCallback) newArrayKeys.sort();\n\t\t\tvar editScript = ko.utils.compareArrays(currentArrayKeys, newArrayKeys);\n\n\t\t\tvar ignoreIndexOf = {};\n\t\t\t\n\t\t\tvar i, j;\n\n\t\t\tvar unwrappedRootObject = ko.utils.unwrapObservable(rootObject);\n\t\t\tvar itemsByKey = {};\n\t\t\tvar optimizedKeys = true;\n\t\t\tfor (i = 0, j = unwrappedRootObject.length; i < j; i++) {\n\t\t\t\tvar key = keyCallback(unwrappedRootObject[i]);\n\t\t\t\tif (key === undefined || key instanceof Object) {\n\t\t\t\t\toptimizedKeys = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\titemsByKey[key] = unwrappedRootObject[i];\n\t\t\t}\n\n\t\t\tvar newContents = [];\n\t\t\tvar passedOver = 0;\n\t\t\tfor (i = 0, j = editScript.length; i < j; i++) {\n\t\t\t\tvar key = editScript[i];\n\t\t\t\tvar mappedItem;\n\t\t\t\tvar fullPropertyName = parentPropertyName + \"[\" + i + \"]\";\n\t\t\t\tswitch (key.status) {\n\t\t\t\tcase \"added\":\n\t\t\t\t\tvar item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);\n\t\t\t\t\tmappedItem = updateViewModel(undefined, item, options, parentName, mappedRootObject, fullPropertyName, parent);\n\t\t\t\t\tif(!hasCreateCallback()) {\n\t\t\t\t\t\tmappedItem = ko.utils.unwrapObservable(mappedItem);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);\n\t\t\t\t\t\n\t\t\t\t\tif (mappedItem === emptyReturn) {\n\t\t\t\t\t\tpassedOver++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewContents[index - passedOver] = mappedItem;\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tignoreIndexOf[index] = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"retained\":\n\t\t\t\t\tvar item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);\n\t\t\t\t\tmappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);\n\t\t\t\t\tupdateViewModel(mappedItem, item, options, parentName, mappedRootObject, fullPropertyName, parent);\n\n\t\t\t\t\tvar index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);\n\t\t\t\t\tnewContents[index] = mappedItem;\n\t\t\t\t\tignoreIndexOf[index] = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleted\":\n\t\t\t\t\tmappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tchanges.push({\n\t\t\t\t\tevent: key.status,\n\t\t\t\t\titem: mappedItem\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tmappedRootObject(newContents);\n\n\t\t\tif (options[parentName] && options[parentName].arrayChanged) {\n\t\t\t\tko.utils.arrayForEach(changes, function (change) {\n\t\t\t\t\toptions[parentName].arrayChanged(change.event, change.item);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn mappedRootObject;\n\t}\n\n\tfunction ignorableIndexOf(array, item, ignoreIndices) {\n\t\tfor (var i = 0, j = array.length; i < j; i++) {\n\t\t\tif (ignoreIndices[i] === true) continue;\n\t\t\tif (array[i] === item) return i;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction mapKey(item, callback) {\n\t\tvar mappedItem;\n\t\tif (callback) mappedItem = callback(item);\n\t\tif (exports.getType(mappedItem) === \"undefined\") mappedItem = item;\n\n\t\treturn ko.utils.unwrapObservable(mappedItem);\n\t}\n\n\tfunction getItemByKey(array, key, callback) {\n\t\tarray = ko.utils.unwrapObservable(array);\n\t\tfor (var i = 0, j = array.length; i < j; i++) {\n\t\t\tvar item = array[i];\n\t\t\tif (mapKey(item, callback) === key) return item;\n\t\t}\n\n\t\tthrow new Error(\"When calling ko.update*, the key '\" + key + \"' was not found!\");\n\t}\n\n\tfunction filterArrayByKey(array, callback) {\n\t\treturn ko.utils.arrayMap(ko.utils.unwrapObservable(array), function (item) {\n\t\t\tif (callback) {\n\t\t\t\treturn mapKey(item, callback);\n\t\t\t} else {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction visitPropertiesOrArrayEntries(rootObject, visitorCallback) {\n\t\tif (exports.getType(rootObject) === \"array\") {\n\t\t\tfor (var i = 0; i < rootObject.length; i++)\n\t\t\tvisitorCallback(i);\n\t\t} else {\n\t\t\tfor (var propertyName in rootObject)\n\t\t\tvisitorCallback(propertyName);\n\t\t}\n\t};\n\n\tfunction canHaveProperties(object) {\n\t\tvar type = exports.getType(object);\n\t\treturn ((type === \"object\") || (type === \"array\")) && (object !== null);\n\t}\n\n\t// Based on the parentName, this creates a fully classified name of a property\n\n\tfunction getPropertyName(parentName, parent, indexer) {\n\t\tvar propertyName = parentName || \"\";\n\t\tif (exports.getType(parent) === \"array\") {\n\t\t\tif (parentName) {\n\t\t\t\tpropertyName += \"[\" + indexer + \"]\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (parentName) {\n\t\t\t\tpropertyName += \".\";\n\t\t\t}\n\t\t\tpropertyName += indexer;\n\t\t}\n\t\treturn propertyName;\n\t}\n\n\texports.visitModel = function (rootObject, callback, options) {\n\t\toptions = options || {};\n\t\toptions.visitedObjects = options.visitedObjects || new objectLookup();\n\n\t\tvar mappedRootObject;\n\t\tvar unwrappedRootObject = ko.utils.unwrapObservable(rootObject);\n\n\t\tif (!canHaveProperties(unwrappedRootObject)) {\n\t\t\treturn callback(rootObject, options.parentName);\n\t\t} else {\n\t\t\toptions = fillOptions(options, unwrappedRootObject[mappingProperty]);\n\n\t\t\t// Only do a callback, but ignore the results\n\t\t\tcallback(rootObject, options.parentName);\n\t\t\tmappedRootObject = exports.getType(unwrappedRootObject) === \"array\" ? [] : {};\n\t\t}\n\n\t\toptions.visitedObjects.save(rootObject, mappedRootObject);\n\n\t\tvar parentName = options.parentName;\n\t\tvisitPropertiesOrArrayEntries(unwrappedRootObject, function (indexer) {\n\t\t\tif (options.ignore && ko.utils.arrayIndexOf(options.ignore, indexer) != -1) return;\n\n\t\t\tvar propertyValue = unwrappedRootObject[indexer];\n\t\t\toptions.parentName = getPropertyName(parentName, unwrappedRootObject, indexer);\n\n\t\t\t// If we don't want to explicitly copy the unmapped property...\n\t\t\tif (ko.utils.arrayIndexOf(options.copy, indexer) === -1) {\n\t\t\t\t// ...find out if it's a property we want to explicitly include\n\t\t\t\tif (ko.utils.arrayIndexOf(options.include, indexer) === -1) {\n\t\t\t\t\t// The mapped properties object contains all the properties that were part of the original object.\n\t\t\t\t\t// If a property does not exist, and it is not because it is part of an array (e.g. \"myProp[3]\"), then it should not be unmapped.\n\t\t\t\t    if (unwrappedRootObject[mappingProperty]\n\t\t\t\t        && unwrappedRootObject[mappingProperty].mappedProperties && !unwrappedRootObject[mappingProperty].mappedProperties[indexer]\n\t\t\t\t        && unwrappedRootObject[mappingProperty].copiedProperties && !unwrappedRootObject[mappingProperty].copiedProperties[indexer]\n\t\t\t\t        && !(exports.getType(unwrappedRootObject) === \"array\")) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar outputProperty;\n\t\t\tswitch (exports.getType(ko.utils.unwrapObservable(propertyValue))) {\n\t\t\tcase \"object\":\n\t\t\tcase \"array\":\n\t\t\tcase \"undefined\":\n\t\t\t\tvar previouslyMappedValue = options.visitedObjects.get(propertyValue);\n\t\t\t\tmappedRootObject[indexer] = (exports.getType(previouslyMappedValue) !== \"undefined\") ? previouslyMappedValue : exports.visitModel(propertyValue, callback, options);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmappedRootObject[indexer] = callback(propertyValue, options.parentName);\n\t\t\t}\n\t\t});\n\n\t\treturn mappedRootObject;\n\t}\n\n\tfunction simpleObjectLookup() {\n\t\tvar keys = [];\n\t\tvar values = [];\n\t\tthis.save = function (key, value) {\n\t\t\tvar existingIndex = ko.utils.arrayIndexOf(keys, key);\n\t\t\tif (existingIndex >= 0) values[existingIndex] = value;\n\t\t\telse {\n\t\t\t\tkeys.push(key);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t};\n\t\tthis.get = function (key) {\n\t\t\tvar existingIndex = ko.utils.arrayIndexOf(keys, key);\n\t\t\tvar value = (existingIndex >= 0) ? values[existingIndex] : undefined;\n\t\t\treturn value;\n\t\t};\n\t};\n\t\n\tfunction objectLookup() {\n\t\tvar buckets = {};\n\t\t\n\t\tvar findBucket = function(key) {\n\t\t\tvar bucketKey;\n\t\t\ttry {\n\t\t\t\tbucketKey = key;//JSON.stringify(key);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tbucketKey = \"$$$\";\n\t\t\t}\n\n\t\t\tvar bucket = buckets[bucketKey];\n\t\t\tif (bucket === undefined) {\n\t\t\t\tbucket = new simpleObjectLookup();\n\t\t\t\tbuckets[bucketKey] = bucket;\n\t\t\t}\n\t\t\treturn bucket;\n\t\t};\n\t\t\n\t\tthis.save = function (key, value) {\n\t\t\tfindBucket(key).save(key, value);\n\t\t};\n\t\tthis.get = function (key) {\n\t\t\treturn findBucket(key).get(key);\n\t\t};\n\t};\n}));","// Knockout Fast Mapping v0.1\n// License: MIT (http://www.opensource.org/licenses/mit-license.php)\n\n(function (factory) {\n\t// Module systems magic dance.\n\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\n\t\t// CommonJS or Node: hard-coded dependency on \"knockout\"\n\t\tfactory((typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null), exports);\n\t} else if (typeof define === \"function\" && define[\"amd\"]) {\n\t\t// AMD anonymous module with hard-coded dependency on \"knockout\"\n\t\tdefine([\"knockout\", \"exports\"], factory);\n\t} else {\n\t\t// <script> tag: use the global `ko` object, attaching a `wrap` property\n\t\tfactory(ko, ko.wrap = {});\n\t}\n}(function (ko, exports) {\n    \n    // this function mimics ko.mapping\n    exports.fromJS = function(jsObject, computedFunctions)\n    {\n        reset();\n\treturn wrap(jsObject, computedFunctions);\n    }\n\n    // this function unwraps the outer for assigning the result to an observable\n    // see https://github.com/SteveSanderson/knockout/issues/517\n    exports.updateFromJS = function(observable, jsObject, computedFunctions)\n    {\n        reset();\n\treturn observable(ko.utils.unwrapObservable(wrap(jsObject, computedFunctions)));\n    }\n\n    exports.fromJSON = function (jsonString, computedFunctions) {\n\tvar parsed = ko.utils.parseJson(jsonString);\n\targuments[0] = parsed;\n\treturn exports.fromJS.apply(this, computedFunctions);\n    };\n    \n    exports.toJS = function (observable) {\n\treturn unwrap(observable);\n    }\n\n    exports.toJSON = function (observable) {\n\tvar plainJavaScriptObject = exports.toJS(observable);\n\treturn ko.utils.stringifyJson(plainJavaScriptObject);\n    };\n\n    function typeOf(value) {\n\tvar s = typeof value;\n\tif (s === 'object') {\n            if (value) {\n                if (value.constructor == Date)\n                    s = 'date';\n\t\telse if (Object.prototype.toString.call(value) == '[object Array]')\n                    s = 'array';\n            } else {\n\t\ts = 'null';\n            }\n\t}\n\treturn s;\n    }\n\n    // unwrapping\n    function unwrapObject(o)\n    {\n\tvar t = {};\n\n\tfor (var k in o)\n\t{\n\t    var v = o[k];\n\n\t    if (ko.isComputed(v))\n\t\tcontinue;\n\n\t    t[k] = unwrap(v);\n\t}\n\n\treturn t;\n    }\n\n    function unwrapArray(a)\n    {\n\tvar r = [];\n\n\tif (!a || a.length == 0)\n\t    return r;\n\t\n\tfor (var i = 0, l = a.length; i < l; ++i)\n\t    r.push(unwrap(a[i]));\n\n\treturn r;\n    }\n\n    function unwrap(v)\n    {\n\tvar isObservable = ko.isObservable(v);\n\n\tif (isObservable)\n\t{\n\t    var val = v();\n\n\t    return unwrap(val);\n\t}\n\telse\n\t{\n\t    if (typeOf(v) == \"array\")\n\t    {\n\t\treturn unwrapArray(v);\n\t    }\n\t    else if (typeOf(v) == \"object\")\n\t    {\n\t\treturn unwrapObject(v);\n\t    }\n\t    else\n\t    {\n\t\treturn v;\n\t    }\n\t}\n    }\n\n    function reset()\n    {\n        parents = [{obj: null, wrapped: null, lvl: \"\"}];\n    }    \n    \n    // wrapping\n\n    function wrapObject(o, computedFunctions)\n    {\n        // check for infinite recursion\n        for (var i = 0; i < parents.length; ++i) {\n            if (parents[i].obj === o) {\n                return parents[i].wrapped;\n            }\n        }\n\n\tvar t = {};\n\n\tfor (var k in o)\n\t{\n\t    var v = o[k];\n\n            parents.push({obj: o, wrapped: t, lvl: currentLvl() + \"/\" + k});\n\n\t    t[k] = wrap(v, computedFunctions);\n\n            parents.pop();\n\t}\n\n\tif (computedFunctions && computedFunctions[currentLvl()])\n\t    t = computedFunctions[currentLvl()](t);\n\n        if (hasES5Plugin())\n            ko.track(t);\n\n\treturn t;\n    }\n\n    function wrapArray(a, computedFunctions)\n    {\n\tvar r = ko.observableArray();\n\n\tif (!a || a.length == 0)\n\t    return r;\n\n\tfor (var i = 0, l = a.length; i < l; ++i)\n\t    r.push(wrap(a[i], computedFunctions));\n\n\treturn r;\n    }\n\n    // a stack, used for two purposes:\n    //  - circular reference checking\n    //  - computed functions\n    var parents;\n\n    function currentLvl()\n    {\n\treturn parents[parents.length-1].lvl;\n    }\n\n    function wrap(v, computedFunctions)\n    {\n\tif (typeOf(v) == \"array\")\n\t{\n\t    return wrapArray(v, computedFunctions);\n\t}\n\telse if (typeOf(v) == \"object\")\n\t{\n\t    return wrapObject(v, computedFunctions);\n\t}\n\telse\n\t{\n            if (!hasES5Plugin() && typeof v !== 'function')\n            {\n\t        var t = ko.observable();\n\t        t(v);\n\t        return t;\n            } else\n                return v;\n\t}\n    }\n\n    function hasES5Plugin()\n    {\n        return ko.track != null;\n    }\n}));","/*!\n * Chart.js\n * http://chartjs.org/\n * Version: 1.1.1\n *\n * Copyright 2015 Nick Downie\n * Released under the MIT license\n * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md\n */\n\n\n(function(){\n\n\t\"use strict\";\n\n\t//Declare root variable - window in the browser, global on the server\n\tvar root = this,\n\t\tprevious = root.Chart;\n\n\t//Occupy the global variable of Chart, and create a simple base class\n\tvar Chart = function(context){\n\t\tvar chart = this;\n\t\tthis.canvas = context.canvas;\n\n\t\tthis.ctx = context;\n\n\t\t//Variables global to the chart\n\t\tvar computeDimension = function(element,dimension)\n\t\t{\n\t\t\tif (element['offset'+dimension])\n\t\t\t{\n\t\t\t\treturn element['offset'+dimension];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn document.defaultView.getComputedStyle(element).getPropertyValue(dimension);\n\t\t\t}\n\t\t};\n\n\t\tvar width = this.width = computeDimension(context.canvas,'Width') || context.canvas.width;\n\t\tvar height = this.height = computeDimension(context.canvas,'Height') || context.canvas.height;\n\n\t\tthis.aspectRatio = this.width / this.height;\n\t\t//High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\n\t\thelpers.retinaScale(this);\n\n\t\treturn this;\n\t};\n\t//Globally expose the defaults to allow for user updating/changing\n\tChart.defaults = {\n\t\tglobal: {\n\t\t\t// Boolean - Whether to animate the chart\n\t\t\tanimation: true,\n\n\t\t\t// Number - Number of animation steps\n\t\t\tanimationSteps: 60,\n\n\t\t\t// String - Animation easing effect\n\t\t\tanimationEasing: \"easeOutQuart\",\n\n\t\t\t// Boolean - If we should show the scale at all\n\t\t\tshowScale: true,\n\n\t\t\t// Boolean - If we want to override with a hard coded scale\n\t\t\tscaleOverride: false,\n\n\t\t\t// ** Required if scaleOverride is true **\n\t\t\t// Number - The number of steps in a hard coded scale\n\t\t\tscaleSteps: null,\n\t\t\t// Number - The value jump in the hard coded scale\n\t\t\tscaleStepWidth: null,\n\t\t\t// Number - The scale starting value\n\t\t\tscaleStartValue: null,\n\n\t\t\t// String - Colour of the scale line\n\t\t\tscaleLineColor: \"rgba(0,0,0,.1)\",\n\n\t\t\t// Number - Pixel width of the scale line\n\t\t\tscaleLineWidth: 1,\n\n\t\t\t// Boolean - Whether to show labels on the scale\n\t\t\tscaleShowLabels: true,\n\n\t\t\t// Interpolated JS string - can access value\n\t\t\tscaleLabel: \"<%=value%>\",\n\n\t\t\t// Boolean - Whether the scale should stick to integers, and not show any floats even if drawing space is there\n\t\t\tscaleIntegersOnly: true,\n\n\t\t\t// Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\n\t\t\tscaleBeginAtZero: false,\n\n\t\t\t// String - Scale label font declaration for the scale label\n\t\t\tscaleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Scale label font size in pixels\n\t\t\tscaleFontSize: 12,\n\n\t\t\t// String - Scale label font weight style\n\t\t\tscaleFontStyle: \"normal\",\n\n\t\t\t// String - Scale label font colour\n\t\t\tscaleFontColor: \"#666\",\n\n\t\t\t// Boolean - whether or not the chart should be responsive and resize when the browser does.\n\t\t\tresponsive: false,\n\n\t\t\t// Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container\n\t\t\tmaintainAspectRatio: true,\n\n\t\t\t// Boolean - Determines whether to draw tooltips on the canvas or not - attaches events to touchmove & mousemove\n\t\t\tshowTooltips: true,\n\n\t\t\t// Boolean - Determines whether to draw built-in tooltip or call custom tooltip function\n\t\t\tcustomTooltips: false,\n\n\t\t\t// Array - Array of string names to attach tooltip events\n\t\t\ttooltipEvents: [\"mousemove\", \"touchstart\", \"touchmove\", \"mouseout\"],\n\n\t\t\t// String - Tooltip background colour\n\t\t\ttooltipFillColor: \"rgba(0,0,0,0.8)\",\n\n\t\t\t// String - Tooltip label font declaration for the scale label\n\t\t\ttooltipFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Tooltip label font size in pixels\n\t\t\ttooltipFontSize: 14,\n\n\t\t\t// String - Tooltip font weight style\n\t\t\ttooltipFontStyle: \"normal\",\n\n\t\t\t// String - Tooltip label font colour\n\t\t\ttooltipFontColor: \"#fff\",\n\n\t\t\t// String - Tooltip title font declaration for the scale label\n\t\t\ttooltipTitleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Tooltip title font size in pixels\n\t\t\ttooltipTitleFontSize: 14,\n\n\t\t\t// String - Tooltip title font weight style\n\t\t\ttooltipTitleFontStyle: \"bold\",\n\n\t\t\t// String - Tooltip title font colour\n\t\t\ttooltipTitleFontColor: \"#fff\",\n\n\t\t\t// String - Tooltip title template\n\t\t\ttooltipTitleTemplate: \"<%= label%>\",\n\n\t\t\t// Number - pixel width of padding around tooltip text\n\t\t\ttooltipYPadding: 6,\n\n\t\t\t// Number - pixel width of padding around tooltip text\n\t\t\ttooltipXPadding: 6,\n\n\t\t\t// Number - Size of the caret on the tooltip\n\t\t\ttooltipCaretSize: 8,\n\n\t\t\t// Number - Pixel radius of the tooltip border\n\t\t\ttooltipCornerRadius: 6,\n\n\t\t\t// Number - Pixel offset from point x to tooltip edge\n\t\t\ttooltipXOffset: 10,\n\n\t\t\t// String - Template string for single tooltips\n\t\t\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= value %>\",\n\n\t\t\t// String - Template string for single tooltips\n\t\t\tmultiTooltipTemplate: \"<%= datasetLabel %>: <%= value %>\",\n\n\t\t\t// String - Colour behind the legend colour block\n\t\t\tmultiTooltipKeyBackground: '#fff',\n\n\t\t\t// Array - A list of colors to use as the defaults\n\t\t\tsegmentColorDefault: [\"#A6CEE3\", \"#1F78B4\", \"#B2DF8A\", \"#33A02C\", \"#FB9A99\", \"#E31A1C\", \"#FDBF6F\", \"#FF7F00\", \"#CAB2D6\", \"#6A3D9A\", \"#B4B482\", \"#B15928\" ],\n\n\t\t\t// Array - A list of highlight colors to use as the defaults\n\t\t\tsegmentHighlightColorDefaults: [ \"#CEF6FF\", \"#47A0DC\", \"#DAFFB2\", \"#5BC854\", \"#FFC2C1\", \"#FF4244\", \"#FFE797\", \"#FFA728\", \"#F2DAFE\", \"#9265C2\", \"#DCDCAA\", \"#D98150\" ],\n\n\t\t\t// Function - Will fire on animation progression.\n\t\t\tonAnimationProgress: function(){},\n\n\t\t\t// Function - Will fire on animation completion.\n\t\t\tonAnimationComplete: function(){}\n\n\t\t}\n\t};\n\n\t//Create a dictionary of chart types, to allow for extension of existing types\n\tChart.types = {};\n\n\t//Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\n\t\t//-- Basic js utility methods\n\tvar each = helpers.each = function(loopable,callback,self){\n\t\t\tvar additionalArgs = Array.prototype.slice.call(arguments, 3);\n\t\t\t// Check to see if null or undefined firstly.\n\t\t\tif (loopable){\n\t\t\t\tif (loopable.length === +loopable.length){\n\t\t\t\t\tvar i;\n\t\t\t\t\tfor (i=0; i<loopable.length; i++){\n\t\t\t\t\t\tcallback.apply(self,[loopable[i], i].concat(additionalArgs));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tfor (var item in loopable){\n\t\t\t\t\t\tcallback.apply(self,[loopable[item],item].concat(additionalArgs));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tclone = helpers.clone = function(obj){\n\t\t\tvar objClone = {};\n\t\t\teach(obj,function(value,key){\n\t\t\t\tif (obj.hasOwnProperty(key)){\n\t\t\t\t\tobjClone[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn objClone;\n\t\t},\n\t\textend = helpers.extend = function(base){\n\t\t\teach(Array.prototype.slice.call(arguments,1), function(extensionObject) {\n\t\t\t\teach(extensionObject,function(value,key){\n\t\t\t\t\tif (extensionObject.hasOwnProperty(key)){\n\t\t\t\t\t\tbase[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn base;\n\t\t},\n\t\tmerge = helpers.merge = function(base,master){\n\t\t\t//Merge properties in left object over to a shallow clone of object right.\n\t\t\tvar args = Array.prototype.slice.call(arguments,0);\n\t\t\targs.unshift({});\n\t\t\treturn extend.apply(null, args);\n\t\t},\n\t\tindexOf = helpers.indexOf = function(arrayToSearch, item){\n\t\t\tif (Array.prototype.indexOf) {\n\t\t\t\treturn arrayToSearch.indexOf(item);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor (var i = 0; i < arrayToSearch.length; i++) {\n\t\t\t\t\tif (arrayToSearch[i] === item) return i;\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t},\n\t\twhere = helpers.where = function(collection, filterCallback){\n\t\t\tvar filtered = [];\n\n\t\t\thelpers.each(collection, function(item){\n\t\t\t\tif (filterCallback(item)){\n\t\t\t\t\tfiltered.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn filtered;\n\t\t},\n\t\tfindNextWhere = helpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex){\n\t\t\t// Default to start of the array\n\t\t\tif (!startIndex){\n\t\t\t\tstartIndex = -1;\n\t\t\t}\n\t\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\t\tif (filterCallback(currentItem)){\n\t\t\t\t\treturn currentItem;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfindPreviousWhere = helpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex){\n\t\t\t// Default to end of the array\n\t\t\tif (!startIndex){\n\t\t\t\tstartIndex = arrayToSearch.length;\n\t\t\t}\n\t\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\t\tif (filterCallback(currentItem)){\n\t\t\t\t\treturn currentItem;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinherits = helpers.inherits = function(extensions){\n\t\t\t//Basic javascript inheritance based on the model created in Backbone.js\n\t\t\tvar parent = this;\n\t\t\tvar ChartElement = (extensions && extensions.hasOwnProperty(\"constructor\")) ? extensions.constructor : function(){ return parent.apply(this, arguments); };\n\n\t\t\tvar Surrogate = function(){ this.constructor = ChartElement;};\n\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\tChartElement.prototype = new Surrogate();\n\n\t\t\tChartElement.extend = inherits;\n\n\t\t\tif (extensions) extend(ChartElement.prototype, extensions);\n\n\t\t\tChartElement.__super__ = parent.prototype;\n\n\t\t\treturn ChartElement;\n\t\t},\n\t\tnoop = helpers.noop = function(){},\n\t\tuid = helpers.uid = (function(){\n\t\t\tvar id=0;\n\t\t\treturn function(){\n\t\t\t\treturn \"chart-\" + id++;\n\t\t\t};\n\t\t})(),\n\t\twarn = helpers.warn = function(str){\n\t\t\t//Method for warning of errors\n\t\t\tif (window.console && typeof window.console.warn === \"function\") console.warn(str);\n\t\t},\n\t\tamd = helpers.amd = (typeof define === 'function' && define.amd),\n\t\t//-- Math methods\n\t\tisNumber = helpers.isNumber = function(n){\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t\t},\n\t\tmax = helpers.max = function(array){\n\t\t\treturn Math.max.apply( Math, array );\n\t\t},\n\t\tmin = helpers.min = function(array){\n\t\t\treturn Math.min.apply( Math, array );\n\t\t},\n\t\tcap = helpers.cap = function(valueToCap,maxValue,minValue){\n\t\t\tif(isNumber(maxValue)) {\n\t\t\t\tif( valueToCap > maxValue ) {\n\t\t\t\t\treturn maxValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(isNumber(minValue)){\n\t\t\t\tif ( valueToCap < minValue ){\n\t\t\t\t\treturn minValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn valueToCap;\n\t\t},\n\t\tgetDecimalPlaces = helpers.getDecimalPlaces = function(num){\n\t\t\tif (num%1!==0 && isNumber(num)){\n\t\t\t\tvar s = num.toString();\n\t\t\t\tif(s.indexOf(\"e-\") < 0){\n\t\t\t\t\t// no exponent, e.g. 0.01\n\t\t\t\t\treturn s.split(\".\")[1].length;\n\t\t\t\t}\n\t\t\t\telse if(s.indexOf(\".\") < 0) {\n\t\t\t\t\t// no decimal point, e.g. 1e-9\n\t\t\t\t\treturn parseInt(s.split(\"e-\")[1]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// exponent and decimal point, e.g. 1.23e-9\n\t\t\t\t\tvar parts = s.split(\".\")[1].split(\"e-\");\n\t\t\t\t\treturn parts[0].length + parseInt(parts[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\ttoRadians = helpers.radians = function(degrees){\n\t\t\treturn degrees * (Math.PI/180);\n\t\t},\n\t\t// Gets the angle from vertical upright to the point about a centre.\n\t\tgetAngleFromPoint = helpers.getAngleFromPoint = function(centrePoint, anglePoint){\n\t\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\t\tradialDistanceFromCenter = Math.sqrt( distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\n\t\t\tvar angle = Math.PI * 2 + Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\t\t//If the segment is in the top left quadrant, we need to add another rotation to the angle\n\t\t\tif (distanceFromXCenter < 0 && distanceFromYCenter < 0){\n\t\t\t\tangle += Math.PI*2;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tangle: angle,\n\t\t\t\tdistance: radialDistanceFromCenter\n\t\t\t};\n\t\t},\n\t\taliasPixel = helpers.aliasPixel = function(pixelWidth){\n\t\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t\t},\n\t\tsplineCurve = helpers.splineCurve = function(FirstPoint,MiddlePoint,AfterPoint,t){\n\t\t\t//Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t\t//http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\t\t\tvar d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),\n\t\t\t\td12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),\n\t\t\t\tfa=t*d01/(d01+d12),// scaling factor for triangle Ta\n\t\t\t\tfb=t*d12/(d01+d12);\n\t\t\treturn {\n\t\t\t\tinner : {\n\t\t\t\t\tx : MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),\n\t\t\t\t\ty : MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)\n\t\t\t\t},\n\t\t\t\touter : {\n\t\t\t\t\tx: MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),\n\t\t\t\t\ty : MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tcalculateOrderOfMagnitude = helpers.calculateOrderOfMagnitude = function(val){\n\t\t\treturn Math.floor(Math.log(val) / Math.LN10);\n\t\t},\n\t\tcalculateScaleRange = helpers.calculateScaleRange = function(valuesArray, drawingSize, textSize, startFromZero, integersOnly){\n\n\t\t\t//Set a minimum step of two - a point at the top of the graph, and a point at the base\n\t\t\tvar minSteps = 2,\n\t\t\t\tmaxSteps = Math.floor(drawingSize/(textSize * 1.5)),\n\t\t\t\tskipFitting = (minSteps >= maxSteps);\n\n\t\t\t// Filter out null values since these would min() to zero\n\t\t\tvar values = [];\n\t\t\teach(valuesArray, function( v ){\n\t\t\t\tv == null || values.push( v );\n\t\t\t});\n\t\t\tvar minValue = min(values),\n\t\t\t    maxValue = max(values);\n\n\t\t\t// We need some degree of separation here to calculate the scales if all the values are the same\n\t\t\t// Adding/minusing 0.5 will give us a range of 1.\n\t\t\tif (maxValue === minValue){\n\t\t\t\tmaxValue += 0.5;\n\t\t\t\t// So we don't end up with a graph with a negative start value if we've said always start from zero\n\t\t\t\tif (minValue >= 0.5 && !startFromZero){\n\t\t\t\t\tminValue -= 0.5;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// Make up a whole number above the values\n\t\t\t\t\tmaxValue += 0.5;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar\tvalueRange = Math.abs(maxValue - minValue),\n\t\t\t\trangeOrderOfMagnitude = calculateOrderOfMagnitude(valueRange),\n\t\t\t\tgraphMax = Math.ceil(maxValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tgraphMin = (startFromZero) ? 0 : Math.floor(minValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tgraphRange = graphMax - graphMin,\n\t\t\t\tstepValue = Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tnumberOfSteps = Math.round(graphRange / stepValue);\n\n\t\t\t//If we have more space on the graph we'll use it to give more definition to the data\n\t\t\twhile((numberOfSteps > maxSteps || (numberOfSteps * 2) < maxSteps) && !skipFitting) {\n\t\t\t\tif(numberOfSteps > maxSteps){\n\t\t\t\t\tstepValue *=2;\n\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t// Don't ever deal with a decimal number of steps - cancel fitting and just use the minimum number of steps.\n\t\t\t\t\tif (numberOfSteps % 1 !== 0){\n\t\t\t\t\t\tskipFitting = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//We can fit in double the amount of scale points on the scale\n\t\t\t\telse{\n\t\t\t\t\t//If user has declared ints only, and the step value isn't a decimal\n\t\t\t\t\tif (integersOnly && rangeOrderOfMagnitude >= 0){\n\t\t\t\t\t\t//If the user has said integers only, we need to check that making the scale more granular wouldn't make it a float\n\t\t\t\t\t\tif(stepValue/2 % 1 === 0){\n\t\t\t\t\t\t\tstepValue /=2;\n\t\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//If it would make it a float break out of the loop\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//If the scale doesn't have to be an int, make the scale more granular anyway.\n\t\t\t\t\telse{\n\t\t\t\t\t\tstepValue /=2;\n\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (skipFitting){\n\t\t\t\tnumberOfSteps = minSteps;\n\t\t\t\tstepValue = graphRange / numberOfSteps;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tsteps : numberOfSteps,\n\t\t\t\tstepValue : stepValue,\n\t\t\t\tmin : graphMin,\n\t\t\t\tmax\t: graphMin + (numberOfSteps * stepValue)\n\t\t\t};\n\n\t\t},\n\t\t/* jshint ignore:start */\n\t\t// Blows up jshint errors based on the new Function constructor\n\t\t//Templating methods\n\t\t//Javascript micro templating by John Resig - source at http://ejohn.org/blog/javascript-micro-templating/\n\t\ttemplate = helpers.template = function(templateString, valuesObject){\n\n\t\t\t// If templateString is function rather than string-template - call the function for valuesObject\n\n\t\t\tif(templateString instanceof Function){\n\t\t\t \treturn templateString(valuesObject);\n\t\t \t}\n\n\t\t\tvar cache = {};\n\t\t\tfunction tmpl(str, data){\n\t\t\t\t// Figure out if we're getting a template, or if we need to\n\t\t\t\t// load the template - and be sure to cache the result.\n\t\t\t\tvar fn = !/\\W/.test(str) ?\n\t\t\t\tcache[str] = cache[str] :\n\n\t\t\t\t// Generate a reusable function that will serve as a template\n\t\t\t\t// generator (and which will be cached).\n\t\t\t\tnew Function(\"obj\",\n\t\t\t\t\t\"var p=[],print=function(){p.push.apply(p,arguments);};\" +\n\n\t\t\t\t\t// Introduce the data as local variables using with(){}\n\t\t\t\t\t\"with(obj){p.push('\" +\n\n\t\t\t\t\t// Convert the template into pure JavaScript\n\t\t\t\t\tstr\n\t\t\t\t\t\t.replace(/[\\r\\t\\n]/g, \" \")\n\t\t\t\t\t\t.split(\"<%\").join(\"\\t\")\n\t\t\t\t\t\t.replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\n\t\t\t\t\t\t.replace(/\\t=(.*?)%>/g, \"',$1,'\")\n\t\t\t\t\t\t.split(\"\\t\").join(\"');\")\n\t\t\t\t\t\t.split(\"%>\").join(\"p.push('\")\n\t\t\t\t\t\t.split(\"\\r\").join(\"\\\\'\") +\n\t\t\t\t\t\"');}return p.join('');\"\n\t\t\t\t);\n\n\t\t\t\t// Provide some basic currying to the user\n\t\t\t\treturn data ? fn( data ) : fn;\n\t\t\t}\n\t\t\treturn tmpl(templateString,valuesObject);\n\t\t},\n\t\t/* jshint ignore:end */\n\t\tgenerateLabels = helpers.generateLabels = function(templateString,numberOfSteps,graphMin,stepValue){\n\t\t\tvar labelsArray = new Array(numberOfSteps);\n\t\t\tif (templateString){\n\t\t\t\teach(labelsArray,function(val,index){\n\t\t\t\t\tlabelsArray[index] = template(templateString,{value: (graphMin + (stepValue*(index+1)))});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn labelsArray;\n\t\t},\n\t\t//--Animation methods\n\t\t//Easing functions adapted from Robert Penner's easing equations\n\t\t//http://www.robertpenner.com/easing/\n\t\teasingEffects = helpers.easingEffects = {\n\t\t\tlinear: function (t) {\n\t\t\t\treturn t;\n\t\t\t},\n\t\t\teaseInQuad: function (t) {\n\t\t\t\treturn t * t;\n\t\t\t},\n\t\t\teaseOutQuad: function (t) {\n\t\t\t\treturn -1 * t * (t - 2);\n\t\t\t},\n\t\t\teaseInOutQuad: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * t * t;\n\t\t\t\t}\n\t\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t\t},\n\t\t\teaseInCubic: function (t) {\n\t\t\t\treturn t * t * t;\n\t\t\t},\n\t\t\teaseOutCubic: function (t) {\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t\t},\n\t\t\teaseInOutCubic: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * t * t * t;\n\t\t\t\t}\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t\t},\n\t\t\teaseInQuart: function (t) {\n\t\t\t\treturn t * t * t * t;\n\t\t\t},\n\t\t\teaseOutQuart: function (t) {\n\t\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t\t},\n\t\t\teaseInOutQuart: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * t * t * t * t;\n\t\t\t\t}\n\t\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t\t},\n\t\t\teaseInQuint: function (t) {\n\t\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t\t},\n\t\t\teaseOutQuint: function (t) {\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t\t},\n\t\t\teaseInOutQuint: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * t * t * t * t * t;\n\t\t\t\t}\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t\t},\n\t\t\teaseInSine: function (t) {\n\t\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t\t},\n\t\t\teaseOutSine: function (t) {\n\t\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t\t},\n\t\t\teaseInOutSine: function (t) {\n\t\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t\t},\n\t\t\teaseInExpo: function (t) {\n\t\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t\t},\n\t\t\teaseOutExpo: function (t) {\n\t\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t\t},\n\t\t\teaseInOutExpo: function (t) {\n\t\t\t\tif (t === 0){\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (t === 1){\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t\t}\n\t\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t\t},\n\t\t\teaseInCirc: function (t) {\n\t\t\t\tif (t >= 1){\n\t\t\t\t\treturn t;\n\t\t\t\t}\n\t\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t\t},\n\t\t\teaseOutCirc: function (t) {\n\t\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t\t},\n\t\t\teaseInOutCirc: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t\t}\n\t\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t\t},\n\t\t\teaseInElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0){\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif ((t /= 1) == 1){\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!p){\n\t\t\t\t\tp = 1 * 0.3;\n\t\t\t\t}\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else{\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\t}\n\t\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t},\n\t\t\teaseOutElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0){\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif ((t /= 1) == 1){\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!p){\n\t\t\t\t\tp = 1 * 0.3;\n\t\t\t\t}\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else{\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\t}\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t\t},\n\t\t\teaseInOutElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0){\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif ((t /= 1 / 2) == 2){\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!p){\n\t\t\t\t\tp = 1 * (0.3 * 1.5);\n\t\t\t\t}\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\t}\n\t\t\t\tif (t < 1){\n\t\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));}\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t\t},\n\t\t\teaseInBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t\t},\n\t\t\teaseOutBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t\t},\n\t\t\teaseInOutBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tif ((t /= 1 / 2) < 1){\n\t\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t\t}\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t\t},\n\t\t\teaseInBounce: function (t) {\n\t\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t\t},\n\t\t\teaseOutBounce: function (t) {\n\t\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t\t} else {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t\t\t}\n\t\t\t},\n\t\t\teaseInOutBounce: function (t) {\n\t\t\t\tif (t < 1 / 2){\n\t\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t\t}\n\t\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t\t}\n\t\t},\n\t\t//Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\t\trequestAnimFrame = helpers.requestAnimFrame = (function(){\n\t\t\treturn window.requestAnimationFrame ||\n\t\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\t\twindow.oRequestAnimationFrame ||\n\t\t\t\twindow.msRequestAnimationFrame ||\n\t\t\t\tfunction(callback) {\n\t\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t\t};\n\t\t})(),\n\t\tcancelAnimFrame = helpers.cancelAnimFrame = (function(){\n\t\t\treturn window.cancelAnimationFrame ||\n\t\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\t\twindow.oCancelAnimationFrame ||\n\t\t\t\twindow.msCancelAnimationFrame ||\n\t\t\t\tfunction(callback) {\n\t\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\n\t\t\t\t};\n\t\t})(),\n\t\tanimationLoop = helpers.animationLoop = function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){\n\n\t\t\tvar currentStep = 0,\n\t\t\t\teasingFunction = easingEffects[easingString] || easingEffects.linear;\n\n\t\t\tvar animationFrame = function(){\n\t\t\t\tcurrentStep++;\n\t\t\t\tvar stepDecimal = currentStep/totalSteps;\n\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\n\n\t\t\t\tcallback.call(chartInstance,easeDecimal,stepDecimal, currentStep);\n\t\t\t\tonProgress.call(chartInstance,easeDecimal,stepDecimal);\n\t\t\t\tif (currentStep < totalSteps){\n\t\t\t\t\tchartInstance.animationFrame = requestAnimFrame(animationFrame);\n\t\t\t\t} else{\n\t\t\t\t\tonComplete.apply(chartInstance);\n\t\t\t\t}\n\t\t\t};\n\t\t\trequestAnimFrame(animationFrame);\n\t\t},\n\t\t//-- DOM methods\n\t\tgetRelativePosition = helpers.getRelativePosition = function(evt){\n\t\t\tvar mouseX, mouseY;\n\t\t\tvar e = evt.originalEvent || evt,\n\t\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\t\tboundingRect = canvas.getBoundingClientRect();\n\n\t\t\tif (e.touches){\n\t\t\t\tmouseX = e.touches[0].clientX - boundingRect.left;\n\t\t\t\tmouseY = e.touches[0].clientY - boundingRect.top;\n\n\t\t\t}\n\t\t\telse{\n\t\t\t\tmouseX = e.clientX - boundingRect.left;\n\t\t\t\tmouseY = e.clientY - boundingRect.top;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx : mouseX,\n\t\t\t\ty : mouseY\n\t\t\t};\n\n\t\t},\n\t\taddEvent = helpers.addEvent = function(node,eventType,method){\n\t\t\tif (node.addEventListener){\n\t\t\t\tnode.addEventListener(eventType,method);\n\t\t\t} else if (node.attachEvent){\n\t\t\t\tnode.attachEvent(\"on\"+eventType, method);\n\t\t\t} else {\n\t\t\t\tnode[\"on\"+eventType] = method;\n\t\t\t}\n\t\t},\n\t\tremoveEvent = helpers.removeEvent = function(node, eventType, handler){\n\t\t\tif (node.removeEventListener){\n\t\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t\t} else if (node.detachEvent){\n\t\t\t\tnode.detachEvent(\"on\"+eventType,handler);\n\t\t\t} else{\n\t\t\t\tnode[\"on\" + eventType] = noop;\n\t\t\t}\n\t\t},\n\t\tbindEvents = helpers.bindEvents = function(chartInstance, arrayOfEvents, handler){\n\t\t\t// Create the events object if it's not already present\n\t\t\tif (!chartInstance.events) chartInstance.events = {};\n\n\t\t\teach(arrayOfEvents,function(eventName){\n\t\t\t\tchartInstance.events[eventName] = function(){\n\t\t\t\t\thandler.apply(chartInstance, arguments);\n\t\t\t\t};\n\t\t\t\taddEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName]);\n\t\t\t});\n\t\t},\n\t\tunbindEvents = helpers.unbindEvents = function (chartInstance, arrayOfEvents) {\n\t\t\teach(arrayOfEvents, function(handler,eventName){\n\t\t\t\tremoveEvent(chartInstance.chart.canvas, eventName, handler);\n\t\t\t});\n\t\t},\n\t\tgetMaximumWidth = helpers.getMaximumWidth = function(domNode){\n\t\t\tvar container = domNode.parentNode,\n\t\t\t    padding = parseInt(getStyle(container, 'padding-left')) + parseInt(getStyle(container, 'padding-right'));\n\t\t\t// TODO = check cross browser stuff with this.\n\t\t\treturn container ? container.clientWidth - padding : 0;\n\t\t},\n\t\tgetMaximumHeight = helpers.getMaximumHeight = function(domNode){\n\t\t\tvar container = domNode.parentNode,\n\t\t\t    padding = parseInt(getStyle(container, 'padding-bottom')) + parseInt(getStyle(container, 'padding-top'));\n\t\t\t// TODO = check cross browser stuff with this.\n\t\t\treturn container ? container.clientHeight - padding : 0;\n\t\t},\n\t\tgetStyle = helpers.getStyle = function (el, property) {\n\t\t\treturn el.currentStyle ?\n\t\t\t\tel.currentStyle[property] :\n\t\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t\t},\n\t\tgetMaximumSize = helpers.getMaximumSize = helpers.getMaximumWidth, // legacy support\n\t\tretinaScale = helpers.retinaScale = function(chart){\n\t\t\tvar ctx = chart.ctx,\n\t\t\t\twidth = chart.canvas.width,\n\t\t\t\theight = chart.canvas.height;\n\n\t\t\tif (window.devicePixelRatio) {\n\t\t\t\tctx.canvas.style.width = width + \"px\";\n\t\t\t\tctx.canvas.style.height = height + \"px\";\n\t\t\t\tctx.canvas.height = height * window.devicePixelRatio;\n\t\t\t\tctx.canvas.width = width * window.devicePixelRatio;\n\t\t\t\tctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\t\t\t}\n\t\t},\n\t\t//-- Canvas methods\n\t\tclear = helpers.clear = function(chart){\n\t\t\tchart.ctx.clearRect(0,0,chart.width,chart.height);\n\t\t},\n\t\tfontString = helpers.fontString = function(pixelSize,fontStyle,fontFamily){\n\t\t\treturn fontStyle + \" \" + pixelSize+\"px \" + fontFamily;\n\t\t},\n\t\tlongestText = helpers.longestText = function(ctx,font,arrayOfStrings){\n\t\t\tctx.font = font;\n\t\t\tvar longest = 0;\n\t\t\teach(arrayOfStrings,function(string){\n\t\t\t\tvar textWidth = ctx.measureText(string).width;\n\t\t\t\tlongest = (textWidth > longest) ? textWidth : longest;\n\t\t\t});\n\t\t\treturn longest;\n\t\t},\n\t\tdrawRoundedRectangle = helpers.drawRoundedRectangle = function(ctx,x,y,width,height,radius){\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x + radius, y);\n\t\t\tctx.lineTo(x + width - radius, y);\n\t\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\t\tctx.lineTo(x + width, y + height - radius);\n\t\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\t\tctx.lineTo(x + radius, y + height);\n\t\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\t\tctx.lineTo(x, y + radius);\n\t\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\t\tctx.closePath();\n\t\t};\n\n\n\t//Store a reference to each instance - allowing us to globally resize chart instances on window resize.\n\t//Destroy method on the chart will remove the instance of the chart from this reference.\n\tChart.instances = {};\n\n\tChart.Type = function(data,options,chart){\n\t\tthis.options = options;\n\t\tthis.chart = chart;\n\t\tthis.id = uid();\n\t\t//Add the chart instance to the global namespace\n\t\tChart.instances[this.id] = this;\n\n\t\t// Initialize is always called when a chart type is created\n\t\t// By default it is a no op, but it should be extended\n\t\tif (options.responsive){\n\t\t\tthis.resize();\n\t\t}\n\t\tthis.initialize.call(this,data);\n\t};\n\n\t//Core methods that'll be a part of every chart type\n\textend(Chart.Type.prototype,{\n\t\tinitialize : function(){return this;},\n\t\tclear : function(){\n\t\t\tclear(this.chart);\n\t\t\treturn this;\n\t\t},\n\t\tstop : function(){\n\t\t\t// Stops any current animation loop occuring\n\t\t\tChart.animationService.cancelAnimation(this);\n\t\t\treturn this;\n\t\t},\n\t\tresize : function(callback){\n\t\t\tthis.stop();\n\t\t\tvar canvas = this.chart.canvas,\n\t\t\t\tnewWidth = getMaximumWidth(this.chart.canvas),\n\t\t\t\tnewHeight = this.options.maintainAspectRatio ? newWidth / this.chart.aspectRatio : getMaximumHeight(this.chart.canvas);\n\n\t\t\tcanvas.width = this.chart.width = newWidth;\n\t\t\tcanvas.height = this.chart.height = newHeight;\n\n\t\t\tretinaScale(this.chart);\n\n\t\t\tif (typeof callback === \"function\"){\n\t\t\t\tcallback.apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\treflow : noop,\n\t\trender : function(reflow){\n\t\t\tif (reflow){\n\t\t\t\tthis.reflow();\n\t\t\t}\n\t\t\t\n\t\t\tif (this.options.animation && !reflow){\n\t\t\t\tvar animation = new Chart.Animation();\n\t\t\t\tanimation.numSteps = this.options.animationSteps;\n\t\t\t\tanimation.easing = this.options.animationEasing;\n\t\t\t\t\n\t\t\t\t// render function\n\t\t\t\tanimation.render = function(chartInstance, animationObject) {\n\t\t\t\t\tvar easingFunction = helpers.easingEffects[animationObject.easing];\n\t\t\t\t\tvar stepDecimal = animationObject.currentStep / animationObject.numSteps;\n\t\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\n\t\t\t\t\t\n\t\t\t\t\tchartInstance.draw(easeDecimal, stepDecimal, animationObject.currentStep);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// user events\n\t\t\t\tanimation.onAnimationProgress = this.options.onAnimationProgress;\n\t\t\t\tanimation.onAnimationComplete = this.options.onAnimationComplete;\n\t\t\t\t\n\t\t\t\tChart.animationService.addAnimation(this, animation);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.draw();\n\t\t\t\tthis.options.onAnimationComplete.call(this);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tgenerateLegend : function(){\n\t\t\treturn helpers.template(this.options.legendTemplate, this);\n\t\t},\n\t\tdestroy : function(){\n\t\t\tthis.stop();\n\t\t\tthis.clear();\n\t\t\tunbindEvents(this, this.events);\n\t\t\tvar canvas = this.chart.canvas;\n\n\t\t\t// Reset canvas height/width attributes starts a fresh with the canvas context\n\t\t\tcanvas.width = this.chart.width;\n\t\t\tcanvas.height = this.chart.height;\n\n\t\t\t// < IE9 doesn't support removeProperty\n\t\t\tif (canvas.style.removeProperty) {\n\t\t\t\tcanvas.style.removeProperty('width');\n\t\t\t\tcanvas.style.removeProperty('height');\n\t\t\t} else {\n\t\t\t\tcanvas.style.removeAttribute('width');\n\t\t\t\tcanvas.style.removeAttribute('height');\n\t\t\t}\n\n\t\t\tdelete Chart.instances[this.id];\n\t\t},\n\t\tshowTooltip : function(ChartElements, forceRedraw){\n\t\t\t// Only redraw the chart if we've actually changed what we're hovering on.\n\t\t\tif (typeof this.activeElements === 'undefined') this.activeElements = [];\n\n\t\t\tvar isChanged = (function(Elements){\n\t\t\t\tvar changed = false;\n\n\t\t\t\tif (Elements.length !== this.activeElements.length){\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn changed;\n\t\t\t\t}\n\n\t\t\t\teach(Elements, function(element, index){\n\t\t\t\t\tif (element !== this.activeElements[index]){\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn changed;\n\t\t\t}).call(this, ChartElements);\n\n\t\t\tif (!isChanged && !forceRedraw){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.activeElements = ChartElements;\n\t\t\t}\n\t\t\tthis.draw();\n\t\t\tif(this.options.customTooltips){\n\t\t\t\tthis.options.customTooltips(false);\n\t\t\t}\n\t\t\tif (ChartElements.length > 0){\n\t\t\t\t// If we have multiple datasets, show a MultiTooltip for all of the data points at that index\n\t\t\t\tif (this.datasets && this.datasets.length > 1) {\n\t\t\t\t\tvar dataArray,\n\t\t\t\t\t\tdataIndex;\n\n\t\t\t\t\tfor (var i = this.datasets.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tdataArray = this.datasets[i].points || this.datasets[i].bars || this.datasets[i].segments;\n\t\t\t\t\t\tdataIndex = indexOf(dataArray, ChartElements[0]);\n\t\t\t\t\t\tif (dataIndex !== -1){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar tooltipLabels = [],\n\t\t\t\t\t\ttooltipColors = [],\n\t\t\t\t\t\tmedianPosition = (function(index) {\n\n\t\t\t\t\t\t\t// Get all the points at that particular index\n\t\t\t\t\t\t\tvar Elements = [],\n\t\t\t\t\t\t\t\tdataCollection,\n\t\t\t\t\t\t\t\txPositions = [],\n\t\t\t\t\t\t\t\tyPositions = [],\n\t\t\t\t\t\t\t\txMax,\n\t\t\t\t\t\t\t\tyMax,\n\t\t\t\t\t\t\t\txMin,\n\t\t\t\t\t\t\t\tyMin;\n\t\t\t\t\t\t\thelpers.each(this.datasets, function(dataset){\n\t\t\t\t\t\t\t\tdataCollection = dataset.points || dataset.bars || dataset.segments;\n\t\t\t\t\t\t\t\tif (dataCollection[dataIndex] && dataCollection[dataIndex].hasValue()){\n\t\t\t\t\t\t\t\t\tElements.push(dataCollection[dataIndex]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\thelpers.each(Elements, function(element) {\n\t\t\t\t\t\t\t\txPositions.push(element.x);\n\t\t\t\t\t\t\t\tyPositions.push(element.y);\n\n\n\t\t\t\t\t\t\t\t//Include any colour information about the element\n\t\t\t\t\t\t\t\ttooltipLabels.push(helpers.template(this.options.multiTooltipTemplate, element));\n\t\t\t\t\t\t\t\ttooltipColors.push({\n\t\t\t\t\t\t\t\t\tfill: element._saved.fillColor || element.fillColor,\n\t\t\t\t\t\t\t\t\tstroke: element._saved.strokeColor || element.strokeColor\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\t\tyMin = min(yPositions);\n\t\t\t\t\t\t\tyMax = max(yPositions);\n\n\t\t\t\t\t\t\txMin = min(xPositions);\n\t\t\t\t\t\t\txMax = max(xPositions);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tx: (xMin > this.chart.width/2) ? xMin : xMax,\n\t\t\t\t\t\t\t\ty: (yMin + yMax)/2\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}).call(this, dataIndex);\n\n\t\t\t\t\tnew Chart.MultiTooltip({\n\t\t\t\t\t\tx: medianPosition.x,\n\t\t\t\t\t\ty: medianPosition.y,\n\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\n\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\n\t\t\t\t\t\txOffset: this.options.tooltipXOffset,\n\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\n\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\n\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\n\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\n\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\n\t\t\t\t\t\ttitleTextColor: this.options.tooltipTitleFontColor,\n\t\t\t\t\t\ttitleFontFamily: this.options.tooltipTitleFontFamily,\n\t\t\t\t\t\ttitleFontStyle: this.options.tooltipTitleFontStyle,\n\t\t\t\t\t\ttitleFontSize: this.options.tooltipTitleFontSize,\n\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\n\t\t\t\t\t\tlabels: tooltipLabels,\n\t\t\t\t\t\tlegendColors: tooltipColors,\n\t\t\t\t\t\tlegendColorBackground : this.options.multiTooltipKeyBackground,\n\t\t\t\t\t\ttitle: template(this.options.tooltipTitleTemplate,ChartElements[0]),\n\t\t\t\t\t\tchart: this.chart,\n\t\t\t\t\t\tctx: this.chart.ctx,\n\t\t\t\t\t\tcustom: this.options.customTooltips\n\t\t\t\t\t}).draw();\n\n\t\t\t\t} else {\n\t\t\t\t\teach(ChartElements, function(Element) {\n\t\t\t\t\t\tvar tooltipPosition = Element.tooltipPosition();\n\t\t\t\t\t\tnew Chart.Tooltip({\n\t\t\t\t\t\t\tx: Math.round(tooltipPosition.x),\n\t\t\t\t\t\t\ty: Math.round(tooltipPosition.y),\n\t\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\n\t\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\n\t\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\n\t\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\n\t\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\n\t\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\n\t\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\n\t\t\t\t\t\t\tcaretHeight: this.options.tooltipCaretSize,\n\t\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\n\t\t\t\t\t\t\ttext: template(this.options.tooltipTemplate, Element),\n\t\t\t\t\t\t\tchart: this.chart,\n\t\t\t\t\t\t\tcustom: this.options.customTooltips\n\t\t\t\t\t\t}).draw();\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\ttoBase64Image : function(){\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\n\t\t}\n\t});\n\n\tChart.Type.extend = function(extensions){\n\n\t\tvar parent = this;\n\n\t\tvar ChartType = function(){\n\t\t\treturn parent.apply(this,arguments);\n\t\t};\n\n\t\t//Copy the prototype object of the this class\n\t\tChartType.prototype = clone(parent.prototype);\n\t\t//Now overwrite some of the properties in the base class with the new extensions\n\t\textend(ChartType.prototype, extensions);\n\n\t\tChartType.extend = Chart.Type.extend;\n\n\t\tif (extensions.name || parent.prototype.name){\n\n\t\t\tvar chartName = extensions.name || parent.prototype.name;\n\t\t\t//Assign any potential default values of the new chart type\n\n\t\t\t//If none are defined, we'll use a clone of the chart type this is being extended from.\n\t\t\t//I.e. if we extend a line chart, we'll use the defaults from the line chart if our new chart\n\t\t\t//doesn't define some defaults of their own.\n\n\t\t\tvar baseDefaults = (Chart.defaults[parent.prototype.name]) ? clone(Chart.defaults[parent.prototype.name]) : {};\n\n\t\t\tChart.defaults[chartName] = extend(baseDefaults,extensions.defaults);\n\n\t\t\tChart.types[chartName] = ChartType;\n\n\t\t\t//Register this new chart type in the Chart prototype\n\t\t\tChart.prototype[chartName] = function(data,options){\n\t\t\t\tvar config = merge(Chart.defaults.global, Chart.defaults[chartName], options || {});\n\t\t\t\treturn new ChartType(data,config,this);\n\t\t\t};\n\t\t} else{\n\t\t\twarn(\"Name not provided for this chart, so it hasn't been registered\");\n\t\t}\n\t\treturn parent;\n\t};\n\n\tChart.Element = function(configuration){\n\t\textend(this,configuration);\n\t\tthis.initialize.apply(this,arguments);\n\t\tthis.save();\n\t};\n\textend(Chart.Element.prototype,{\n\t\tinitialize : function(){},\n\t\trestore : function(props){\n\t\t\tif (!props){\n\t\t\t\textend(this,this._saved);\n\t\t\t} else {\n\t\t\t\teach(props,function(key){\n\t\t\t\t\tthis[key] = this._saved[key];\n\t\t\t\t},this);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tsave : function(){\n\t\t\tthis._saved = clone(this);\n\t\t\tdelete this._saved._saved;\n\t\t\treturn this;\n\t\t},\n\t\tupdate : function(newProps){\n\t\t\teach(newProps,function(value,key){\n\t\t\t\tthis._saved[key] = this[key];\n\t\t\t\tthis[key] = value;\n\t\t\t},this);\n\t\t\treturn this;\n\t\t},\n\t\ttransition : function(props,ease){\n\t\t\teach(props,function(value,key){\n\t\t\t\tthis[key] = ((value - this._saved[key]) * ease) + this._saved[key];\n\t\t\t},this);\n\t\t\treturn this;\n\t\t},\n\t\ttooltipPosition : function(){\n\t\t\treturn {\n\t\t\t\tx : this.x,\n\t\t\t\ty : this.y\n\t\t\t};\n\t\t},\n\t\thasValue: function(){\n\t\t\treturn isNumber(this.value);\n\t\t}\n\t});\n\n\tChart.Element.extend = inherits;\n\n\n\tChart.Point = Chart.Element.extend({\n\t\tdisplay: true,\n\t\tinRange: function(chartX,chartY){\n\t\t\tvar hitDetectionRange = this.hitDetectionRadius + this.radius;\n\t\t\treturn ((Math.pow(chartX-this.x, 2)+Math.pow(chartY-this.y, 2)) < Math.pow(hitDetectionRange,2));\n\t\t},\n\t\tdraw : function(){\n\t\t\tif (this.display){\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);\n\t\t\t\tctx.closePath();\n\n\t\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\t\tctx.fill();\n\t\t\t\tctx.stroke();\n\t\t\t}\n\n\n\t\t\t//Quick debug for bezier curve splining\n\t\t\t//Highlights control points and the line between them.\n\t\t\t//Handy for dev - stripped in the min version.\n\n\t\t\t// ctx.save();\n\t\t\t// ctx.fillStyle = \"black\";\n\t\t\t// ctx.strokeStyle = \"black\"\n\t\t\t// ctx.beginPath();\n\t\t\t// ctx.arc(this.controlPoints.inner.x,this.controlPoints.inner.y, 2, 0, Math.PI*2);\n\t\t\t// ctx.fill();\n\n\t\t\t// ctx.beginPath();\n\t\t\t// ctx.arc(this.controlPoints.outer.x,this.controlPoints.outer.y, 2, 0, Math.PI*2);\n\t\t\t// ctx.fill();\n\n\t\t\t// ctx.moveTo(this.controlPoints.inner.x,this.controlPoints.inner.y);\n\t\t\t// ctx.lineTo(this.x, this.y);\n\t\t\t// ctx.lineTo(this.controlPoints.outer.x,this.controlPoints.outer.y);\n\t\t\t// ctx.stroke();\n\n\t\t\t// ctx.restore();\n\n\n\n\t\t}\n\t});\n\n\tChart.Arc = Chart.Element.extend({\n\t\tinRange : function(chartX,chartY){\n\n\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(this, {\n\t\t\t\tx: chartX,\n\t\t\t\ty: chartY\n\t\t\t});\n\n\t\t\t// Normalize all angles to 0 - 2*PI (0 - 360°)\n\t\t\tvar pointRelativeAngle = pointRelativePosition.angle % (Math.PI * 2),\n\t\t\t    startAngle = (Math.PI * 2 + this.startAngle) % (Math.PI * 2),\n\t\t\t    endAngle = (Math.PI * 2 + this.endAngle) % (Math.PI * 2) || 360;\n\n\t\t\t// Calculate wether the pointRelativeAngle is between the start and the end angle\n\t\t\tvar betweenAngles = (endAngle < startAngle) ?\n\t\t\t\tpointRelativeAngle <= endAngle || pointRelativeAngle >= startAngle:\n\t\t\t\tpointRelativeAngle >= startAngle && pointRelativeAngle <= endAngle;\n\n\t\t\t//Check if within the range of the open/close angle\n\t\t\tvar withinRadius = (pointRelativePosition.distance >= this.innerRadius && pointRelativePosition.distance <= this.outerRadius);\n\n\t\t\treturn (betweenAngles && withinRadius);\n\t\t\t//Ensure within the outside of the arc centre, but inside arc outer\n\t\t},\n\t\ttooltipPosition : function(){\n\t\t\tvar centreAngle = this.startAngle + ((this.endAngle - this.startAngle) / 2),\n\t\t\t\trangeFromCentre = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;\n\t\t\treturn {\n\t\t\t\tx : this.x + (Math.cos(centreAngle) * rangeFromCentre),\n\t\t\t\ty : this.y + (Math.sin(centreAngle) * rangeFromCentre)\n\t\t\t};\n\t\t},\n\t\tdraw : function(animationPercent){\n\n\t\t\tvar easingDecimal = animationPercent || 1;\n\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(this.x, this.y, this.outerRadius < 0 ? 0 : this.outerRadius, this.startAngle, this.endAngle);\n\n            ctx.arc(this.x, this.y, this.innerRadius < 0 ? 0 : this.innerRadius, this.endAngle, this.startAngle, true);\n\n\t\t\tctx.closePath();\n\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\tctx.fill();\n\t\t\tctx.lineJoin = 'bevel';\n\n\t\t\tif (this.showStroke){\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t});\n\n\tChart.Rectangle = Chart.Element.extend({\n\t\tdraw : function(){\n\t\t\tvar ctx = this.ctx,\n\t\t\t\thalfWidth = this.width/2,\n\t\t\t\tleftX = this.x - halfWidth,\n\t\t\t\trightX = this.x + halfWidth,\n\t\t\t\ttop = this.base - (this.base - this.y),\n\t\t\t\thalfStroke = this.strokeWidth / 2;\n\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\tif (this.showStroke){\n\t\t\t\tleftX += halfStroke;\n\t\t\t\trightX -= halfStroke;\n\t\t\t\ttop += halfStroke;\n\t\t\t}\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.fillStyle = this.fillColor;\n\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\t// It'd be nice to keep this class totally generic to any rectangle\n\t\t\t// and simply specify which border to miss out.\n\t\t\tctx.moveTo(leftX, this.base);\n\t\t\tctx.lineTo(leftX, top);\n\t\t\tctx.lineTo(rightX, top);\n\t\t\tctx.lineTo(rightX, this.base);\n\t\t\tctx.fill();\n\t\t\tif (this.showStroke){\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\theight : function(){\n\t\t\treturn this.base - this.y;\n\t\t},\n\t\tinRange : function(chartX,chartY){\n\t\t\treturn (chartX >= this.x - this.width/2 && chartX <= this.x + this.width/2) && (chartY >= this.y && chartY <= this.base);\n\t\t}\n\t});\n\n\tChart.Animation = Chart.Element.extend({\n\t\tcurrentStep: null, // the current animation step\n\t\tnumSteps: 60, // default number of steps\n\t\teasing: \"\", // the easing to use for this animation\n\t\trender: null, // render function used by the animation service\n\t\t\n\t\tonAnimationProgress: null, // user specified callback to fire on each step of the animation \n\t\tonAnimationComplete: null, // user specified callback to fire when the animation finishes\n\t});\n\t\n\tChart.Tooltip = Chart.Element.extend({\n\t\tdraw : function(){\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\n\t\t\tthis.xAlign = \"center\";\n\t\t\tthis.yAlign = \"above\";\n\n\t\t\t//Distance between the actual element.y position and the start of the tooltip caret\n\t\t\tvar caretPadding = this.caretPadding = 2;\n\n\t\t\tvar tooltipWidth = ctx.measureText(this.text).width + 2*this.xPadding,\n\t\t\t\ttooltipRectHeight = this.fontSize + 2*this.yPadding,\n\t\t\t\ttooltipHeight = tooltipRectHeight + this.caretHeight + caretPadding;\n\n\t\t\tif (this.x + tooltipWidth/2 >this.chart.width){\n\t\t\t\tthis.xAlign = \"left\";\n\t\t\t} else if (this.x - tooltipWidth/2 < 0){\n\t\t\t\tthis.xAlign = \"right\";\n\t\t\t}\n\n\t\t\tif (this.y - tooltipHeight < 0){\n\t\t\t\tthis.yAlign = \"below\";\n\t\t\t}\n\n\n\t\t\tvar tooltipX = this.x - tooltipWidth/2,\n\t\t\t\ttooltipY = this.y - tooltipHeight;\n\n\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\t// Custom Tooltips\n\t\t\tif(this.custom){\n\t\t\t\tthis.custom(this);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tswitch(this.yAlign)\n\t\t\t\t{\n\t\t\t\tcase \"above\":\n\t\t\t\t\t//Draw a caret above the x/y\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(this.x,this.y - caretPadding);\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y - (caretPadding + this.caretHeight));\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y - (caretPadding + this.caretHeight));\n\t\t\t\t\tctx.closePath();\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"below\":\n\t\t\t\t\ttooltipY = this.y + caretPadding + this.caretHeight;\n\t\t\t\t\t//Draw a caret below the x/y\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(this.x, this.y + caretPadding);\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y + caretPadding + this.caretHeight);\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y + caretPadding + this.caretHeight);\n\t\t\t\t\tctx.closePath();\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tswitch(this.xAlign)\n\t\t\t\t{\n\t\t\t\tcase \"left\":\n\t\t\t\t\ttooltipX = this.x - tooltipWidth + (this.cornerRadius + this.caretHeight);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\ttooltipX = this.x - (this.cornerRadius + this.caretHeight);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdrawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);\n\n\t\t\t\tctx.fill();\n\n\t\t\t\tctx.fillStyle = this.textColor;\n\t\t\t\tctx.textAlign = \"center\";\n\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\tctx.fillText(this.text, tooltipX + tooltipWidth/2, tooltipY + tooltipRectHeight/2);\n\t\t\t}\n\t\t}\n\t});\n\n\tChart.MultiTooltip = Chart.Element.extend({\n\t\tinitialize : function(){\n\t\t\tthis.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\n\t\t\tthis.titleFont = fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);\n\n\t\t\tthis.titleHeight = this.title ? this.titleFontSize * 1.5 : 0;\n\t\t\tthis.height = (this.labels.length * this.fontSize) + ((this.labels.length-1) * (this.fontSize/2)) + (this.yPadding*2) + this.titleHeight;\n\n\t\t\tthis.ctx.font = this.titleFont;\n\n\t\t\tvar titleWidth = this.ctx.measureText(this.title).width,\n\t\t\t\t//Label has a legend square as well so account for this.\n\t\t\t\tlabelWidth = longestText(this.ctx,this.font,this.labels) + this.fontSize + 3,\n\t\t\t\tlongestTextWidth = max([labelWidth,titleWidth]);\n\n\t\t\tthis.width = longestTextWidth + (this.xPadding*2);\n\n\n\t\t\tvar halfHeight = this.height/2;\n\n\t\t\t//Check to ensure the height will fit on the canvas\n\t\t\tif (this.y - halfHeight < 0 ){\n\t\t\t\tthis.y = halfHeight;\n\t\t\t} else if (this.y + halfHeight > this.chart.height){\n\t\t\t\tthis.y = this.chart.height - halfHeight;\n\t\t\t}\n\n\t\t\t//Decide whether to align left or right based on position on canvas\n\t\t\tif (this.x > this.chart.width/2){\n\t\t\t\tthis.x -= this.xOffset + this.width;\n\t\t\t} else {\n\t\t\t\tthis.x += this.xOffset;\n\t\t\t}\n\n\n\t\t},\n\t\tgetLineHeight : function(index){\n\t\t\tvar baseLineHeight = this.y - (this.height/2) + this.yPadding,\n\t\t\t\tafterTitleIndex = index-1;\n\n\t\t\t//If the index is zero, we're getting the title\n\t\t\tif (index === 0){\n\t\t\t\treturn baseLineHeight + this.titleHeight / 3;\n\t\t\t} else{\n\t\t\t\treturn baseLineHeight + ((this.fontSize * 1.5 * afterTitleIndex) + this.fontSize / 2) + this.titleHeight;\n\t\t\t}\n\n\t\t},\n\t\tdraw : function(){\n\t\t\t// Custom Tooltips\n\t\t\tif(this.custom){\n\t\t\t\tthis.custom(this);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdrawRoundedRectangle(this.ctx,this.x,this.y - this.height/2,this.width,this.height,this.cornerRadius);\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\tctx.fillStyle = this.fillColor;\n\t\t\t\tctx.fill();\n\t\t\t\tctx.closePath();\n\n\t\t\t\tctx.textAlign = \"left\";\n\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\tctx.fillStyle = this.titleTextColor;\n\t\t\t\tctx.font = this.titleFont;\n\n\t\t\t\tctx.fillText(this.title,this.x + this.xPadding, this.getLineHeight(0));\n\n\t\t\t\tctx.font = this.font;\n\t\t\t\thelpers.each(this.labels,function(label,index){\n\t\t\t\t\tctx.fillStyle = this.textColor;\n\t\t\t\t\tctx.fillText(label,this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(index + 1));\n\n\t\t\t\t\t//A bit gnarly, but clearing this rectangle breaks when using explorercanvas (clears whole canvas)\n\t\t\t\t\t//ctx.clearRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\t\t\t\t\t//Instead we'll make a white filled block to put the legendColour palette over.\n\n\t\t\t\t\tctx.fillStyle = this.legendColorBackground;\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\n\t\t\t\t\tctx.fillStyle = this.legendColors[index].fill;\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\n\n\t\t\t\t},this);\n\t\t\t}\n\t\t}\n\t});\n\n\tChart.Scale = Chart.Element.extend({\n\t\tinitialize : function(){\n\t\t\tthis.fit();\n\t\t},\n\t\tbuildYLabels : function(){\n\t\t\tthis.yLabels = [];\n\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\n\n\t\t\tfor (var i=0; i<=this.steps; i++){\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\n\t\t\t}\n\t\t\tthis.yLabelWidth = (this.display && this.showLabels) ? longestText(this.ctx,this.font,this.yLabels) + 10 : 0;\n\t\t},\n\t\taddXLabel : function(label){\n\t\t\tthis.xLabels.push(label);\n\t\t\tthis.valuesCount++;\n\t\t\tthis.fit();\n\t\t},\n\t\tremoveXLabel : function(){\n\t\t\tthis.xLabels.shift();\n\t\t\tthis.valuesCount--;\n\t\t\tthis.fit();\n\t\t},\n\t\t// Fitting loop to rotate x Labels and figure out what fits there, and also calculate how many Y steps to use\n\t\tfit: function(){\n\t\t\t// First we need the width of the yLabels, assuming the xLabels aren't rotated\n\n\t\t\t// To do that we need the base line at the top and base of the chart, assuming there is no x label rotation\n\t\t\tthis.startPoint = (this.display) ? this.fontSize : 0;\n\t\t\tthis.endPoint = (this.display) ? this.height - (this.fontSize * 1.5) - 5 : this.height; // -5 to pad labels\n\n\t\t\t// Apply padding settings to the start and end point.\n\t\t\tthis.startPoint += this.padding;\n\t\t\tthis.endPoint -= this.padding;\n\n\t\t\t// Cache the starting endpoint, excluding the space for x labels\n\t\t\tvar cachedEndPoint = this.endPoint;\n\n\t\t\t// Cache the starting height, so can determine if we need to recalculate the scale yAxis\n\t\t\tvar cachedHeight = this.endPoint - this.startPoint,\n\t\t\t\tcachedYLabelWidth;\n\n\t\t\t// Build the current yLabels so we have an idea of what size they'll be to start\n\t\t\t/*\n\t\t\t *\tThis sets what is returned from calculateScaleRange as static properties of this class:\n\t\t\t *\n\t\t\t\tthis.steps;\n\t\t\t\tthis.stepValue;\n\t\t\t\tthis.min;\n\t\t\t\tthis.max;\n\t\t\t *\n\t\t\t */\n\t\t\tthis.calculateYRange(cachedHeight);\n\n\t\t\t// With these properties set we can now build the array of yLabels\n\t\t\t// and also the width of the largest yLabel\n\t\t\tthis.buildYLabels();\n\n\t\t\tthis.calculateXLabelRotation();\n\n\t\t\twhile((cachedHeight > this.endPoint - this.startPoint)){\n\t\t\t\tcachedHeight = this.endPoint - this.startPoint;\n\t\t\t\tcachedYLabelWidth = this.yLabelWidth;\n\n\t\t\t\tthis.calculateYRange(cachedHeight);\n\t\t\t\tthis.buildYLabels();\n\n\t\t\t\t// Only go through the xLabel loop again if the yLabel width has changed\n\t\t\t\tif (cachedYLabelWidth < this.yLabelWidth){\n\t\t\t\t\tthis.endPoint = cachedEndPoint;\n\t\t\t\t\tthis.calculateXLabelRotation();\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tcalculateXLabelRotation : function(){\n\t\t\t//Get the width of each grid by calculating the difference\n\t\t\t//between x offsets between 0 and 1.\n\n\t\t\tthis.ctx.font = this.font;\n\n\t\t\tvar firstWidth = this.ctx.measureText(this.xLabels[0]).width,\n\t\t\t\tlastWidth = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width,\n\t\t\t\tfirstRotated,\n\t\t\t\tlastRotated;\n\n\n\t\t\tthis.xScalePaddingRight = lastWidth/2 + 3;\n\t\t\tthis.xScalePaddingLeft = (firstWidth/2 > this.yLabelWidth) ? firstWidth/2 : this.yLabelWidth;\n\n\t\t\tthis.xLabelRotation = 0;\n\t\t\tif (this.display){\n\t\t\t\tvar originalLabelWidth = longestText(this.ctx,this.font,this.xLabels),\n\t\t\t\t\tcosRotation,\n\t\t\t\t\tfirstRotatedWidth;\n\t\t\t\tthis.xLabelWidth = originalLabelWidth;\n\t\t\t\t//Allow 3 pixels x2 padding either side for label readability\n\t\t\t\tvar xGridWidth = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6;\n\n\t\t\t\t//Max label rotate should be 90 - also act as a loop counter\n\t\t\t\twhile ((this.xLabelWidth > xGridWidth && this.xLabelRotation === 0) || (this.xLabelWidth > xGridWidth && this.xLabelRotation <= 90 && this.xLabelRotation > 0)){\n\t\t\t\t\tcosRotation = Math.cos(toRadians(this.xLabelRotation));\n\n\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\n\t\t\t\t\tlastRotated = cosRotation * lastWidth;\n\n\t\t\t\t\t// We're right aligning the text now.\n\t\t\t\t\tif (firstRotated + this.fontSize / 2 > this.yLabelWidth){\n\t\t\t\t\t\tthis.xScalePaddingLeft = firstRotated + this.fontSize / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis.xScalePaddingRight = this.fontSize/2;\n\n\n\t\t\t\t\tthis.xLabelRotation++;\n\t\t\t\t\tthis.xLabelWidth = cosRotation * originalLabelWidth;\n\n\t\t\t\t}\n\t\t\t\tif (this.xLabelRotation > 0){\n\t\t\t\t\tthis.endPoint -= Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth + 3;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.xLabelWidth = 0;\n\t\t\t\tthis.xScalePaddingRight = this.padding;\n\t\t\t\tthis.xScalePaddingLeft = this.padding;\n\t\t\t}\n\n\t\t},\n\t\t// Needs to be overidden in each Chart type\n\t\t// Otherwise we need to pass all the data into the scale class\n\t\tcalculateYRange: noop,\n\t\tdrawingArea: function(){\n\t\t\treturn this.startPoint - this.endPoint;\n\t\t},\n\t\tcalculateY : function(value){\n\t\t\tvar scalingFactor = this.drawingArea() / (this.min - this.max);\n\t\t\treturn this.endPoint - (scalingFactor * (value - this.min));\n\t\t},\n\t\tcalculateX : function(index){\n\t\t\tvar isRotated = (this.xLabelRotation > 0),\n\t\t\t\t// innerWidth = (this.offsetGridLines) ? this.width - offsetLeft - this.padding : this.width - (offsetLeft + halfLabelWidth * 2) - this.padding,\n\t\t\t\tinnerWidth = this.width - (this.xScalePaddingLeft + this.xScalePaddingRight),\n\t\t\t\tvalueWidth = innerWidth/Math.max((this.valuesCount - ((this.offsetGridLines) ? 0 : 1)), 1),\n\t\t\t\tvalueOffset = (valueWidth * index) + this.xScalePaddingLeft;\n\n\t\t\tif (this.offsetGridLines){\n\t\t\t\tvalueOffset += (valueWidth/2);\n\t\t\t}\n\n\t\t\treturn Math.round(valueOffset);\n\t\t},\n\t\tupdate : function(newProps){\n\t\t\thelpers.extend(this, newProps);\n\t\t\tthis.fit();\n\t\t},\n\t\tdraw : function(){\n\t\t\tvar ctx = this.ctx,\n\t\t\t\tyLabelGap = (this.endPoint - this.startPoint) / this.steps,\n\t\t\t\txStart = Math.round(this.xScalePaddingLeft);\n\t\t\tif (this.display){\n\t\t\t\tctx.fillStyle = this.textColor;\n\t\t\t\tctx.font = this.font;\n\t\t\t\teach(this.yLabels,function(labelString,index){\n\t\t\t\t\tvar yLabelCenter = this.endPoint - (yLabelGap * index),\n\t\t\t\t\t\tlinePositionY = Math.round(yLabelCenter),\n\t\t\t\t\t\tdrawHorizontalLine = this.showHorizontalLines;\n\n\t\t\t\t\tctx.textAlign = \"right\";\n\t\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\t\tif (this.showLabels){\n\t\t\t\t\t\tctx.fillText(labelString,xStart - 10,yLabelCenter);\n\t\t\t\t\t}\n\n\t\t\t\t\t// This is X axis, so draw it\n\t\t\t\t\tif (index === 0 && !drawHorizontalLine){\n\t\t\t\t\t\tdrawHorizontalLine = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawHorizontalLine){\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// This is the first line on the scale\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tlinePositionY += helpers.aliasPixel(ctx.lineWidth);\n\n\t\t\t\t\tif(drawHorizontalLine){\n\t\t\t\t\t\tctx.moveTo(xStart, linePositionY);\n\t\t\t\t\t\tctx.lineTo(this.width, linePositionY);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(xStart - 5, linePositionY);\n\t\t\t\t\tctx.lineTo(xStart, linePositionY);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t},this);\n\n\t\t\t\teach(this.xLabels,function(label,index){\n\t\t\t\t\tvar xPos = this.calculateX(index) + aliasPixel(this.lineWidth),\n\t\t\t\t\t\t// Check to see if line/bar here and decide where to place the line\n\t\t\t\t\t\tlinePos = this.calculateX(index - (this.offsetGridLines ? 0.5 : 0)) + aliasPixel(this.lineWidth),\n\t\t\t\t\t\tisRotated = (this.xLabelRotation > 0),\n\t\t\t\t\t\tdrawVerticalLine = this.showVerticalLines;\n\n\t\t\t\t\t// This is Y axis, so draw it\n\t\t\t\t\tif (index === 0 && !drawVerticalLine){\n\t\t\t\t\t\tdrawVerticalLine = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawVerticalLine){\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// This is the first line on the scale\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawVerticalLine){\n\t\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\n\t\t\t\t\t\tctx.lineTo(linePos,this.startPoint - 3);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t}\n\n\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\n\n\t\t\t\t\t// Small lines at the bottom of the base grid line\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\n\t\t\t\t\tctx.lineTo(linePos,this.endPoint + 5);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t\tctx.save();\n\t\t\t\t\tctx.translate(xPos,(isRotated) ? this.endPoint + 12 : this.endPoint + 8);\n\t\t\t\t\tctx.rotate(toRadians(this.xLabelRotation)*-1);\n\t\t\t\t\tctx.font = this.font;\n\t\t\t\t\tctx.textAlign = (isRotated) ? \"right\" : \"center\";\n\t\t\t\t\tctx.textBaseline = (isRotated) ? \"middle\" : \"top\";\n\t\t\t\t\tctx.fillText(label, 0, 0);\n\t\t\t\t\tctx.restore();\n\t\t\t\t},this);\n\n\t\t\t}\n\t\t}\n\n\t});\n\n\tChart.RadialScale = Chart.Element.extend({\n\t\tinitialize: function(){\n\t\t\tthis.size = min([this.height, this.width]);\n\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\n\t\t},\n\t\tcalculateCenterOffset: function(value){\n\t\t\t// Take into account half font size + the yPadding of the top value\n\t\t\tvar scalingFactor = this.drawingArea / (this.max - this.min);\n\n\t\t\treturn (value - this.min) * scalingFactor;\n\t\t},\n\t\tupdate : function(){\n\t\t\tif (!this.lineArc){\n\t\t\t\tthis.setScaleSize();\n\t\t\t} else {\n\t\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\n\t\t\t}\n\t\t\tthis.buildYLabels();\n\t\t},\n\t\tbuildYLabels: function(){\n\t\t\tthis.yLabels = [];\n\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\n\n\t\t\tfor (var i=0; i<=this.steps; i++){\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\n\t\t\t}\n\t\t},\n\t\tgetCircumference : function(){\n\t\t\treturn ((Math.PI*2) / this.valuesCount);\n\t\t},\n\t\tsetScaleSize: function(){\n\t\t\t/*\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n\t\t\t *\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n\t\t\t *\n\t\t\t * Solution:\n\t\t\t *\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\n\t\t\t * at each index we check if the text overlaps.\n\t\t\t *\n\t\t\t * Where it does, we store that angle and that index.\n\t\t\t *\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\n\t\t\t * from the shape radius to move the point inwards by that x.\n\t\t\t *\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\n\t\t\t * along with labels.\n\t\t\t *\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\n\t\t\t *\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n\t\t\t * and position it in the most space efficient manner\n\t\t\t *\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\t\t\t */\n\n\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n\t\t\tvar largestPossibleRadius = min([(this.height/2 - this.pointLabelFontSize - 5), this.width/2]),\n\t\t\t\tpointPosition,\n\t\t\t\ti,\n\t\t\t\ttextWidth,\n\t\t\t\thalfTextWidth,\n\t\t\t\tfurthestRight = this.width,\n\t\t\t\tfurthestRightIndex,\n\t\t\t\tfurthestRightAngle,\n\t\t\t\tfurthestLeft = 0,\n\t\t\t\tfurthestLeftIndex,\n\t\t\t\tfurthestLeftAngle,\n\t\t\t\txProtrusionLeft,\n\t\t\t\txProtrusionRight,\n\t\t\t\tradiusReductionRight,\n\t\t\t\tradiusReductionLeft,\n\t\t\t\tmaxWidthRadius;\n\t\t\tthis.ctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\n\t\t\tfor (i=0;i<this.valuesCount;i++){\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\n\t\t\t\ttextWidth = this.ctx.measureText(template(this.templateString, { value: this.labels[i] })).width + 5;\n\t\t\t\tif (i === 0 || i === this.valuesCount/2){\n\t\t\t\t\t// If we're at index zero, or exactly the middle, we're at exactly the top/bottom\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\n\t\t\t\t\t// w/left and right text sizes\n\t\t\t\t\thalfTextWidth = textWidth/2;\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (i < this.valuesCount/2) {\n\t\t\t\t\t// Less than half the values means we'll left align the text\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (i > this.valuesCount/2){\n\t\t\t\t\t// More than half the values means we'll right align the text\n\t\t\t\t\tif (pointPosition.x - textWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txProtrusionLeft = furthestLeft;\n\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\n\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\n\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\n\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI/2);\n\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI/2);\n\n\t\t\t// Ensure we actually need to reduce the size of the chart\n\t\t\tradiusReductionRight = (isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\n\t\t\tradiusReductionLeft = (isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\n\n\t\t\tthis.drawingArea = largestPossibleRadius - (radiusReductionLeft + radiusReductionRight)/2;\n\n\t\t\t//this.drawingArea = min([maxWidthRadius, (this.height - (2 * (this.pointLabelFontSize + 5)))/2])\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\n\n\t\t},\n\t\tsetCenterPoint: function(leftMovement, rightMovement){\n\n\t\t\tvar maxRight = this.width - rightMovement - this.drawingArea,\n\t\t\t\tmaxLeft = leftMovement + this.drawingArea;\n\n\t\t\tthis.xCenter = (maxLeft + maxRight)/2;\n\t\t\t// Always vertically in the centre as the text height doesn't change\n\t\t\tthis.yCenter = (this.height/2);\n\t\t},\n\n\t\tgetIndexAngle : function(index){\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.valuesCount;\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\n\n\t\t\treturn index * angleMultiplier - (Math.PI/2);\n\t\t},\n\t\tgetPointPosition : function(index, distanceFromCenter){\n\t\t\tvar thisAngle = this.getIndexAngle(index);\n\t\t\treturn {\n\t\t\t\tx : (Math.cos(thisAngle) * distanceFromCenter) + this.xCenter,\n\t\t\t\ty : (Math.sin(thisAngle) * distanceFromCenter) + this.yCenter\n\t\t\t};\n\t\t},\n\t\tdraw: function(){\n\t\t\tif (this.display){\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\teach(this.yLabels, function(label, index){\n\t\t\t\t\t// Don't draw a centre value\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\tvar yCenterOffset = index * (this.drawingArea/this.steps),\n\t\t\t\t\t\t\tyHeight = this.yCenter - yCenterOffset,\n\t\t\t\t\t\t\tpointPosition;\n\n\t\t\t\t\t\t// Draw circular lines around the scale\n\t\t\t\t\t\tif (this.lineWidth > 0){\n\t\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\n\t\t\t\t\t\t\tif(this.lineArc){\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tctx.arc(this.xCenter, this.yCenter, yCenterOffset, 0, Math.PI*2);\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tfor (var i=0;i<this.valuesCount;i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpointPosition = this.getPointPosition(i, this.calculateCenterOffset(this.min + (index * this.stepValue)));\n\t\t\t\t\t\t\t\t\tif (i === 0){\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.showLabels){\n\t\t\t\t\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\t\t\t\t\t\t\tif (this.showLabelBackdrop){\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\tctx.fillStyle = this.backdropColor;\n\t\t\t\t\t\t\t\tctx.fillRect(\n\t\t\t\t\t\t\t\t\tthis.xCenter - labelWidth/2 - this.backdropPaddingX,\n\t\t\t\t\t\t\t\t\tyHeight - this.fontSize/2 - this.backdropPaddingY,\n\t\t\t\t\t\t\t\t\tlabelWidth + this.backdropPaddingX*2,\n\t\t\t\t\t\t\t\t\tthis.fontSize + this.backdropPaddingY*2\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\t\t\t\tctx.fillStyle = this.fontColor;\n\t\t\t\t\t\t\tctx.fillText(label, this.xCenter, yHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tif (!this.lineArc){\n\t\t\t\t\tctx.lineWidth = this.angleLineWidth;\n\t\t\t\t\tctx.strokeStyle = this.angleLineColor;\n\t\t\t\t\tfor (var i = this.valuesCount - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar centerOffset = null, outerPosition = null;\n\n\t\t\t\t\t\tif (this.angleLineWidth > 0 && (i % this.angleLineInterval === 0)){\n\t\t\t\t\t\t\tcenterOffset = this.calculateCenterOffset(this.max);\n\t\t\t\t\t\t\touterPosition = this.getPointPosition(i, centerOffset);\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.backgroundColors && this.backgroundColors.length == this.valuesCount) {\n\t\t\t\t\t\t\tif (centerOffset == null)\n\t\t\t\t\t\t\t\tcenterOffset = this.calculateCenterOffset(this.max);\n\n\t\t\t\t\t\t\tif (outerPosition == null)\n\t\t\t\t\t\t\t\touterPosition = this.getPointPosition(i, centerOffset);\n\n\t\t\t\t\t\t\tvar previousOuterPosition = this.getPointPosition(i === 0 ? this.valuesCount - 1 : i - 1, centerOffset);\n\t\t\t\t\t\t\tvar nextOuterPosition = this.getPointPosition(i === this.valuesCount - 1 ? 0 : i + 1, centerOffset);\n\n\t\t\t\t\t\t\tvar previousOuterHalfway = { x: (previousOuterPosition.x + outerPosition.x) / 2, y: (previousOuterPosition.y + outerPosition.y) / 2 };\n\t\t\t\t\t\t\tvar nextOuterHalfway = { x: (outerPosition.x + nextOuterPosition.x) / 2, y: (outerPosition.y + nextOuterPosition.y) / 2 };\n\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\n\t\t\t\t\t\t\tctx.lineTo(previousOuterHalfway.x, previousOuterHalfway.y);\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\n\t\t\t\t\t\t\tctx.lineTo(nextOuterHalfway.x, nextOuterHalfway.y);\n\t\t\t\t\t\t\tctx.fillStyle = this.backgroundColors[i];\n\t\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Extra 3px out for some label spacing\n\t\t\t\t\t\tvar pointLabelPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max) + 5);\n\t\t\t\t\t\tctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\n\t\t\t\t\t\tctx.fillStyle = this.pointLabelFontColor;\n\n\t\t\t\t\t\tvar labelsCount = this.labels.length,\n\t\t\t\t\t\t\thalfLabelsCount = this.labels.length/2,\n\t\t\t\t\t\t\tquarterLabelsCount = halfLabelsCount/2,\n\t\t\t\t\t\t\tupperHalf = (i < quarterLabelsCount || i > labelsCount - quarterLabelsCount),\n\t\t\t\t\t\t\texactQuarter = (i === quarterLabelsCount || i === labelsCount - quarterLabelsCount);\n\t\t\t\t\t\tif (i === 0){\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if(i === halfLabelsCount){\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if (i < halfLabelsCount){\n\t\t\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textAlign = 'right';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\n\t\t\t\t\t\tif (exactQuarter){\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t} else if (upperHalf){\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tctx.fillText(this.labels[i], pointLabelPosition.x, pointLabelPosition.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tChart.animationService = {\n\t\tframeDuration: 17,\n\t\tanimations: [],\n\t\tdropFrames: 0,\n\t\taddAnimation: function(chartInstance, animationObject) {\n\t\t\tfor (var index = 0; index < this.animations.length; ++ index){\n\t\t\t\tif (this.animations[index].chartInstance === chartInstance){\n\t\t\t\t\t// replacing an in progress animation\n\t\t\t\t\tthis.animations[index].animationObject = animationObject;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.animations.push({\n\t\t\t\tchartInstance: chartInstance,\n\t\t\t\tanimationObject: animationObject\n\t\t\t});\n\n\t\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\n\t\t\tif (this.animations.length == 1) {\n\t\t\t\thelpers.requestAnimFrame.call(window, this.digestWrapper);\n\t\t\t}\n\t\t},\n\t\t// Cancel the animation for a given chart instance\n\t\tcancelAnimation: function(chartInstance) {\n\t\t\tvar index = helpers.findNextWhere(this.animations, function(animationWrapper) {\n\t\t\t\treturn animationWrapper.chartInstance === chartInstance;\n\t\t\t});\n\t\t\t\n\t\t\tif (index)\n\t\t\t{\n\t\t\t\tthis.animations.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\t// calls startDigest with the proper context\n\t\tdigestWrapper: function() {\n\t\t\tChart.animationService.startDigest.call(Chart.animationService);\n\t\t},\n\t\tstartDigest: function() {\n\n\t\t\tvar startTime = Date.now();\n\t\t\tvar framesToDrop = 0;\n\n\t\t\tif(this.dropFrames > 1){\n\t\t\t\tframesToDrop = Math.floor(this.dropFrames);\n\t\t\t\tthis.dropFrames -= framesToDrop;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.animations.length; i++) {\n\n\t\t\t\tif (this.animations[i].animationObject.currentStep === null){\n\t\t\t\t\tthis.animations[i].animationObject.currentStep = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.animations[i].animationObject.currentStep += 1 + framesToDrop;\n\t\t\t\tif(this.animations[i].animationObject.currentStep > this.animations[i].animationObject.numSteps){\n\t\t\t\t\tthis.animations[i].animationObject.currentStep = this.animations[i].animationObject.numSteps;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.animations[i].animationObject.render(this.animations[i].chartInstance, this.animations[i].animationObject);\n\t\t\t\t\n\t\t\t\t// Check if executed the last frame.\n\t\t\t\tif (this.animations[i].animationObject.currentStep == this.animations[i].animationObject.numSteps){\n\t\t\t\t\t// Call onAnimationComplete\n\t\t\t\t\tthis.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance);\n\t\t\t\t\t// Remove the animation.\n\t\t\t\t\tthis.animations.splice(i, 1);\n\t\t\t\t\t// Keep the index in place to offset the splice\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar endTime = Date.now();\n\t\t\tvar delay = endTime - startTime - this.frameDuration;\n\t\t\tvar frameDelay = delay / this.frameDuration;\n\n\t\t\tif(frameDelay > 1){\n\t\t\t\tthis.dropFrames += frameDelay;\n\t\t\t}\n\n\t\t\t// Do we have more stuff to animate?\n\t\t\tif (this.animations.length > 0){\n\t\t\t\thelpers.requestAnimFrame.call(window, this.digestWrapper);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Attach global event to resize each chart instance when the browser resizes\n\thelpers.addEvent(window, \"resize\", (function(){\n\t\t// Basic debounce of resize function so it doesn't hurt performance when resizing browser.\n\t\tvar timeout;\n\t\treturn function(){\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(function(){\n\t\t\t\teach(Chart.instances,function(instance){\n\t\t\t\t\t// If the responsive flag is set in the chart instance config\n\t\t\t\t\t// Cascade the resize event down to the chart.\n\t\t\t\t\tif (instance.options.responsive){\n\t\t\t\t\t\tinstance.resize(instance.render, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 50);\n\t\t};\n\t})());\n\n\n\tif (amd) {\n\t\tdefine('Chart', [], function(){\n\t\t\treturn Chart;\n\t\t});\n\t} else if (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = Chart;\n\t}\n\n\troot.Chart = Chart;\n\n\tChart.noConflict = function(){\n\t\troot.Chart = previous;\n\t\treturn Chart;\n\t};\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\n\tvar defaultConfig = {\n\t\t//Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\n\t\tscaleBeginAtZero : true,\n\n\t\t//Boolean - Whether grid lines are shown across the chart\n\t\tscaleShowGridLines : true,\n\n\t\t//String - Colour of the grid lines\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\n\t\t//Number - Width of the grid lines\n\t\tscaleGridLineWidth : 1,\n\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\n\t\tscaleShowHorizontalLines: true,\n\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\n\t\tscaleShowVerticalLines: true,\n\n\t\t//Boolean - If there is a stroke on each bar\n\t\tbarShowStroke : true,\n\n\t\t//Number - Pixel width of the bar stroke\n\t\tbarStrokeWidth : 2,\n\n\t\t//Number - Spacing between each of the X value sets\n\t\tbarValueSpacing : 5,\n\n\t\t//Number - Spacing between data sets within X values\n\t\tbarDatasetSpacing : 1,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\"\n\n\t};\n\n\n\tChart.Type.extend({\n\t\tname: \"Bar\",\n\t\tdefaults : defaultConfig,\n\t\tinitialize:  function(data){\n\n\t\t\t//Expose options as a scope variable here so we can access it in the ScaleClass\n\t\t\tvar options = this.options;\n\n\t\t\tthis.ScaleClass = Chart.Scale.extend({\n\t\t\t\toffsetGridLines : true,\n\t\t\t\tcalculateBarX : function(datasetCount, datasetIndex, barIndex){\n\t\t\t\t\t//Reusable method for calculating the xPosition of a given bar based on datasetIndex & width of the bar\n\t\t\t\t\tvar xWidth = this.calculateBaseWidth(),\n\t\t\t\t\t\txAbsolute = this.calculateX(barIndex) - (xWidth/2),\n\t\t\t\t\t\tbarWidth = this.calculateBarWidth(datasetCount);\n\n\t\t\t\t\treturn xAbsolute + (barWidth * datasetIndex) + (datasetIndex * options.barDatasetSpacing) + barWidth/2;\n\t\t\t\t},\n\t\t\t\tcalculateBaseWidth : function(){\n\t\t\t\t\treturn (this.calculateX(1) - this.calculateX(0)) - (2*options.barValueSpacing);\n\t\t\t\t},\n\t\t\t\tcalculateBarWidth : function(datasetCount){\n\t\t\t\t\t//The padding between datasets is to the right of each bar, providing that there are more than 1 dataset\n\t\t\t\t\tvar baseWidth = this.calculateBaseWidth() - ((datasetCount - 1) * options.barDatasetSpacing);\n\n\t\t\t\t\treturn (baseWidth / datasetCount);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeBars = (evt.type !== 'mouseout') ? this.getBarsAtEvent(evt) : [];\n\n\t\t\t\t\tthis.eachBars(function(bar){\n\t\t\t\t\t\tbar.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeBars, function(activeBar){\n\t\t\t\t\t\tif (activeBar) {\n\t\t\t\t\t\t\tactiveBar.fillColor = activeBar.highlightFill;\n\t\t\t\t\t\t\tactiveBar.strokeColor = activeBar.highlightStroke;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeBars);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\n\t\t\tthis.BarClass = Chart.Rectangle.extend({\n\t\t\t\tstrokeWidth : this.options.barStrokeWidth,\n\t\t\t\tshowStroke : this.options.barShowStroke,\n\t\t\t\tctx : this.chart.ctx\n\t\t\t});\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset,datasetIndex){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel : dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tbars : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tdatasetObject.bars.push(new this.BarClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tstrokeColor : (typeof dataset.strokeColor == 'object') ? dataset.strokeColor[index] : dataset.strokeColor,\n\t\t\t\t\t\tfillColor : (typeof dataset.fillColor == 'object') ? dataset.fillColor[index] : dataset.fillColor,\n\t\t\t\t\t\thighlightFill : (dataset.highlightFill) ? (typeof dataset.highlightFill == 'object') ? dataset.highlightFill[index] : dataset.highlightFill : (typeof dataset.fillColor == 'object') ? dataset.fillColor[index] : dataset.fillColor,\n\t\t\t\t\t\thighlightStroke : (dataset.highlightStroke) ? (typeof dataset.highlightStroke == 'object') ? dataset.highlightStroke[index] : dataset.highlightStroke : (typeof dataset.strokeColor == 'object') ? dataset.strokeColor[index] : dataset.strokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t},this);\n\n\t\t\tthis.buildScale(data.labels);\n\n\t\t\tthis.BarClass.prototype.base = this.scale.endPoint;\n\n\t\t\tthis.eachBars(function(bar, index, datasetIndex){\n\t\t\t\thelpers.extend(bar, {\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\n\t\t\t\t\ty: this.scale.endPoint\n\t\t\t\t});\n\t\t\t\tbar.save();\n\t\t\t}, this);\n\n\t\t\tthis.render();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.scale.update();\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\n\t\t\t});\n\n\t\t\tthis.eachBars(function(bar){\n\t\t\t\tbar.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\t\teachBars : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset, datasetIndex){\n\t\t\t\thelpers.each(dataset.bars, callback, this, datasetIndex);\n\t\t\t},this);\n\t\t},\n\t\tgetBarsAtEvent : function(e){\n\t\t\tvar barsArray = [],\n\t\t\t\teventPosition = helpers.getRelativePosition(e),\n\t\t\t\tdatasetIterator = function(dataset){\n\t\t\t\t\tbarsArray.push(dataset.bars[barIndex]);\n\t\t\t\t},\n\t\t\t\tbarIndex;\n\n\t\t\tfor (var datasetIndex = 0; datasetIndex < this.datasets.length; datasetIndex++) {\n\t\t\t\tfor (barIndex = 0; barIndex < this.datasets[datasetIndex].bars.length; barIndex++) {\n\t\t\t\t\tif (this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){\n\t\t\t\t\t\thelpers.each(this.datasets, datasetIterator);\n\t\t\t\t\t\treturn barsArray;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn barsArray;\n\t\t},\n\t\tbuildScale : function(labels){\n\t\t\tvar self = this;\n\n\t\t\tvar dataTotal = function(){\n\t\t\t\tvar values = [];\n\t\t\t\tself.eachBars(function(bar){\n\t\t\t\t\tvalues.push(bar.value);\n\t\t\t\t});\n\t\t\t\treturn values;\n\t\t\t};\n\n\t\t\tvar scaleOptions = {\n\t\t\t\ttemplateString : this.options.scaleLabel,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttextColor : this.options.scaleFontColor,\n\t\t\t\tfontSize : this.options.scaleFontSize,\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\n\t\t\t\tvaluesCount : labels.length,\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\n\t\t\t\tcalculateYRange: function(currentHeight){\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\n\t\t\t\t\t\tdataTotal(),\n\t\t\t\t\t\tcurrentHeight,\n\t\t\t\t\t\tthis.fontSize,\n\t\t\t\t\t\tthis.beginAtZero,\n\t\t\t\t\t\tthis.integersOnly\n\t\t\t\t\t);\n\t\t\t\t\thelpers.extend(this, updatedRanges);\n\t\t\t\t},\n\t\t\t\txLabels : labels,\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\n\t\t\t\tlineColor : this.options.scaleLineColor,\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\n\t\t\t\tpadding : (this.options.showScale) ? 0 : (this.options.barShowStroke) ? this.options.barStrokeWidth : 0,\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\n\t\t\t\tdisplay : this.options.showScale\n\t\t\t};\n\n\t\t\tif (this.options.scaleOverride){\n\t\t\t\thelpers.extend(scaleOptions, {\n\t\t\t\t\tcalculateYRange: helpers.noop,\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.scale = new this.ScaleClass(scaleOptions);\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\tthis.datasets[datasetIndex].bars.push(new this.BarClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, this.scale.valuesCount+1),\n\t\t\t\t\ty: this.scale.endPoint,\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\n\t\t\t\t\tbase : this.scale.endPoint,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].strokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].fillColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.addXLabel(label);\n\t\t\t//Then re-render the chart.\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.removeXLabel();\n\t\t\t//Then re-render the chart.\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.bars.shift();\n\t\t\t},this);\n\t\t\tthis.update();\n\t\t},\n\t\treflow : function(){\n\t\t\thelpers.extend(this.BarClass.prototype,{\n\t\t\t\ty: this.scale.endPoint,\n\t\t\t\tbase : this.scale.endPoint\n\t\t\t});\n\t\t\tvar newScaleProps = helpers.extend({\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width\n\t\t\t});\n\t\t\tthis.scale.update(newScaleProps);\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tthis.clear();\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\tthis.scale.draw(easingDecimal);\n\n\t\t\t//Draw all the bars for each dataset\n\t\t\thelpers.each(this.datasets,function(dataset,datasetIndex){\n\t\t\t\thelpers.each(dataset.bars,function(bar,index){\n\t\t\t\t\tif (bar.hasValue()){\n\t\t\t\t\t\tbar.base = this.scale.endPoint;\n\t\t\t\t\t\t//Transition then draw\n\t\t\t\t\t\tbar.transition({\n\t\t\t\t\t\t\tx : this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\n\t\t\t\t\t\t\ty : this.scale.calculateY(bar.value),\n\t\t\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length)\n\t\t\t\t\t\t}, easingDecimal).draw();\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\t\t\t},this);\n\t\t}\n\t});\n\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\t//Cache a local reference to Chart.helpers\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\t//Boolean - Whether we should show a stroke on each segment\n\t\tsegmentShowStroke : true,\n\n\t\t//String - The colour of each segment stroke\n\t\tsegmentStrokeColor : \"#fff\",\n\n\t\t//Number - The width of each segment stroke\n\t\tsegmentStrokeWidth : 2,\n\n\t\t//The percentage of the chart that we cut out of the middle.\n\t\tpercentageInnerCutout : 50,\n\n\t\t//Number - Amount of animation steps\n\t\tanimationSteps : 100,\n\n\t\t//String - Animation easing effect\n\t\tanimationEasing : \"easeOutBounce\",\n\n\t\t//Boolean - Whether we animate the rotation of the Doughnut\n\t\tanimateRotate : true,\n\n\t\t//Boolean - Whether we animate scaling the Doughnut from the centre\n\t\tanimateScale : false,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>\"\n\n\t};\n\n\tChart.Type.extend({\n\t\t//Passing in a name registers this chart in the Chart namespace\n\t\tname: \"Doughnut\",\n\t\t//Providing a defaults will also register the defaults in the chart namespace\n\t\tdefaults : defaultConfig,\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\n\t\tinitialize:  function(data){\n\n\t\t\t//Declare segments as a static property to prevent inheriting across the Chart type prototype\n\t\t\tthis.segments = [];\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\n\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\n\n\t\t\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeSegments);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.calculateTotal(data);\n\n\t\t\thelpers.each(data,function(datapoint, index){\n\t\t\t\tif (!datapoint.color) {\n\t\t\t\t\tdatapoint.color = 'hsl(' + (360 * index / data.length) + ', 100%, 50%)';\n\t\t\t\t}\n\t\t\t\tthis.addData(datapoint, index, true);\n\t\t\t},this);\n\n\t\t\tthis.render();\n\t\t},\n\t\tgetSegmentsAtEvent : function(e){\n\t\t\tvar segmentsArray = [];\n\n\t\t\tvar location = helpers.getRelativePosition(e);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\n\t\t\t},this);\n\t\t\treturn segmentsArray;\n\t\t},\n\t\taddData : function(segment, atIndex, silent){\n\t\t\tvar index = atIndex !== undefined ? atIndex : this.segments.length;\n\t\t\tif ( typeof(segment.color) === \"undefined\" ) {\n\t\t\t\tsegment.color = Chart.defaults.global.segmentColorDefault[index % Chart.defaults.global.segmentColorDefault.length];\n\t\t\t\tsegment.highlight = Chart.defaults.global.segmentHighlightColorDefaults[index % Chart.defaults.global.segmentHighlightColorDefaults.length];\t\t\t\t\n\t\t\t}\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\n\t\t\t\tvalue : segment.value,\n\t\t\t\touterRadius : (this.options.animateScale) ? 0 : this.outerRadius,\n\t\t\t\tinnerRadius : (this.options.animateScale) ? 0 : (this.outerRadius/100) * this.options.percentageInnerCutout,\n\t\t\t\tfillColor : segment.color,\n\t\t\t\thighlightColor : segment.highlight || segment.color,\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\n\t\t\t\tstartAngle : Math.PI * 1.5,\n\t\t\t\tcircumference : (this.options.animateRotate) ? 0 : this.calculateCircumference(segment.value),\n\t\t\t\tlabel : segment.label\n\t\t\t}));\n\t\t\tif (!silent){\n\t\t\t\tthis.reflow();\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t},\n\t\tcalculateCircumference : function(value) {\n\t\t\tif ( this.total > 0 ) {\n\t\t\t\treturn (Math.PI*2)*(value / this.total);\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\tcalculateTotal : function(data){\n\t\t\tthis.total = 0;\n\t\t\thelpers.each(data,function(segment){\n\t\t\t\tthis.total += Math.abs(segment.value);\n\t\t\t},this);\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.calculateTotal(this.segments);\n\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor']);\n\t\t\t});\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tsegment.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\n\t\tremoveData: function(atIndex){\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\n\t\t\tthis.segments.splice(indexToDelete, 1);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\n\t\treflow : function(){\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\n\t\t\thelpers.each(this.segments, function(segment){\n\t\t\t\tsegment.update({\n\t\t\t\t\touterRadius : this.outerRadius,\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\n\t\t\t\t});\n\t\t\t}, this);\n\t\t},\n\t\tdraw : function(easeDecimal){\n\t\t\tvar animDecimal = (easeDecimal) ? easeDecimal : 1;\n\t\t\tthis.clear();\n\t\t\thelpers.each(this.segments,function(segment,index){\n\t\t\t\tsegment.transition({\n\t\t\t\t\tcircumference : this.calculateCircumference(segment.value),\n\t\t\t\t\touterRadius : this.outerRadius,\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\n\t\t\t\t},animDecimal);\n\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\n\n\t\t\t\tsegment.draw();\n\t\t\t\tif (index === 0){\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\n\t\t\t\t}\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\n\t\t\t\tif (index < this.segments.length-1){\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\n\t\t\t\t}\n\t\t\t},this);\n\n\t\t}\n\t});\n\n\tChart.types.Doughnut.extend({\n\t\tname : \"Pie\",\n\t\tdefaults : helpers.merge(defaultConfig,{percentageInnerCutout : 0})\n\t});\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\n\t\t///Boolean - Whether grid lines are shown across the chart\n\t\tscaleShowGridLines : true,\n\n\t\t//String - Colour of the grid lines\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\n\t\t//Number - Width of the grid lines\n\t\tscaleGridLineWidth : 1,\n\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\n\t\tscaleShowHorizontalLines: true,\n\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\n\t\tscaleShowVerticalLines: true,\n\n\t\t//Boolean - Whether the line is curved between points\n\t\tbezierCurve : true,\n\n\t\t//Number - Tension of the bezier curve between points\n\t\tbezierCurveTension : 0.4,\n\n\t\t//Boolean - Whether to show a dot for each point\n\t\tpointDot : true,\n\n\t\t//Number - Radius of each point dot in pixels\n\t\tpointDotRadius : 4,\n\n\t\t//Number - Pixel width of point dot stroke\n\t\tpointDotStrokeWidth : 1,\n\n\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\n\t\tpointHitDetectionRadius : 20,\n\n\t\t//Boolean - Whether to show a stroke for datasets\n\t\tdatasetStroke : true,\n\n\t\t//Number - Pixel width of dataset stroke\n\t\tdatasetStrokeWidth : 2,\n\n\t\t//Boolean - Whether to fill the dataset with a colour\n\t\tdatasetFill : true,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\",\n\n\t\t//Boolean - Whether to horizontally center the label and point dot inside the grid\n\t\toffsetGridLines : false\n\n\t};\n\n\n\tChart.Type.extend({\n\t\tname: \"Line\",\n\t\tdefaults : defaultConfig,\n\t\tinitialize:  function(data){\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\n\t\t\tthis.PointClass = Chart.Point.extend({\n\t\t\t\toffsetGridLines : this.options.offsetGridLines,\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\n\t\t\t\tradius : this.options.pointDotRadius,\n\t\t\t\tdisplay: this.options.pointDot,\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tinRange : function(mouseX){\n\t\t\t\t\treturn (Math.pow(mouseX-this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius,2));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activePoints = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\n\t\t\t\t\tthis.eachPoints(function(point){\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activePoints, function(activePoint){\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activePoints);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel : dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tpointColor : dataset.pointColor,\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\tpoints : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\t\tfillColor : dataset.pointColor,\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t\tthis.buildScale(data.labels);\n\n\n\t\t\t\tthis.eachPoints(function(point, index){\n\t\t\t\t\thelpers.extend(point, {\n\t\t\t\t\t\tx: this.scale.calculateX(index),\n\t\t\t\t\t\ty: this.scale.endPoint\n\t\t\t\t\t});\n\t\t\t\t\tpoint.save();\n\t\t\t\t}, this);\n\n\t\t\t},this);\n\n\n\t\t\tthis.render();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.scale.update();\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\n\t\t\t});\n\t\t\tthis.eachPoints(function(point){\n\t\t\t\tpoint.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\t\teachPoints : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,callback,this);\n\t\t\t},this);\n\t\t},\n\t\tgetPointsAtEvent : function(e){\n\t\t\tvar pointsArray = [],\n\t\t\t\teventPosition = helpers.getRelativePosition(e);\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,function(point){\n\t\t\t\t\tif (point.inRange(eventPosition.x,eventPosition.y)) pointsArray.push(point);\n\t\t\t\t});\n\t\t\t},this);\n\t\t\treturn pointsArray;\n\t\t},\n\t\tbuildScale : function(labels){\n\t\t\tvar self = this;\n\n\t\t\tvar dataTotal = function(){\n\t\t\t\tvar values = [];\n\t\t\t\tself.eachPoints(function(point){\n\t\t\t\t\tvalues.push(point.value);\n\t\t\t\t});\n\n\t\t\t\treturn values;\n\t\t\t};\n\n\t\t\tvar scaleOptions = {\n\t\t\t\ttemplateString : this.options.scaleLabel,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttextColor : this.options.scaleFontColor,\n\t\t\t\toffsetGridLines : this.options.offsetGridLines,\n\t\t\t\tfontSize : this.options.scaleFontSize,\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\n\t\t\t\tvaluesCount : labels.length,\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\n\t\t\t\tcalculateYRange : function(currentHeight){\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\n\t\t\t\t\t\tdataTotal(),\n\t\t\t\t\t\tcurrentHeight,\n\t\t\t\t\t\tthis.fontSize,\n\t\t\t\t\t\tthis.beginAtZero,\n\t\t\t\t\t\tthis.integersOnly\n\t\t\t\t\t);\n\t\t\t\t\thelpers.extend(this, updatedRanges);\n\t\t\t\t},\n\t\t\t\txLabels : labels,\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\n\t\t\t\tlineColor : this.options.scaleLineColor,\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\n\t\t\t\tpadding: (this.options.showScale) ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\n\t\t\t\tdisplay : this.options.showScale\n\t\t\t};\n\n\t\t\tif (this.options.scaleOverride){\n\t\t\t\thelpers.extend(scaleOptions, {\n\t\t\t\t\tcalculateYRange: helpers.noop,\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tthis.scale = new Chart.Scale(scaleOptions);\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\n\t\t\t\t\tx: this.scale.calculateX(this.scale.valuesCount+1),\n\t\t\t\t\ty: this.scale.endPoint,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.addXLabel(label);\n\t\t\t//Then re-render the chart.\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.removeXLabel();\n\t\t\t//Then re-render the chart.\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.points.shift();\n\t\t\t},this);\n\t\t\tthis.update();\n\t\t},\n\t\treflow : function(){\n\t\t\tvar newScaleProps = helpers.extend({\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width\n\t\t\t});\n\t\t\tthis.scale.update(newScaleProps);\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tthis.clear();\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\t// Some helper methods for getting the next/prev points\n\t\t\tvar hasValue = function(item){\n\t\t\t\treturn item.value !== null;\n\t\t\t},\n\t\t\tnextPoint = function(point, collection, index){\n\t\t\t\treturn helpers.findNextWhere(collection, hasValue, index) || point;\n\t\t\t},\n\t\t\tpreviousPoint = function(point, collection, index){\n\t\t\t\treturn helpers.findPreviousWhere(collection, hasValue, index) || point;\n\t\t\t};\n\n\t\t\tif (!this.scale) return;\n\t\t\tthis.scale.draw(easingDecimal);\n\n\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tvar pointsWithValues = helpers.where(dataset.points, hasValue);\n\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\n\t\t\t\t//We can use this extra loop to calculate the control points of this dataset also in this loop\n\n\t\t\t\thelpers.each(dataset.points, function(point, index){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.transition({\n\t\t\t\t\t\t\ty : this.scale.calculateY(point.value),\n\t\t\t\t\t\t\tx : this.scale.calculateX(index)\n\t\t\t\t\t\t}, easingDecimal);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\n\t\t\t\t// Control points need to be calculated in a separate loop, because we need to know the current x/y of the point\n\t\t\t\t// This would cause issues when there is no animation, because the y of the next point would be 0, so beziers would be skewed\n\t\t\t\tif (this.options.bezierCurve){\n\t\t\t\t\thelpers.each(pointsWithValues, function(point, index){\n\t\t\t\t\t\tvar tension = (index > 0 && index < pointsWithValues.length - 1) ? this.options.bezierCurveTension : 0;\n\t\t\t\t\t\tpoint.controlPoints = helpers.splineCurve(\n\t\t\t\t\t\t\tpreviousPoint(point, pointsWithValues, index),\n\t\t\t\t\t\t\tpoint,\n\t\t\t\t\t\t\tnextPoint(point, pointsWithValues, index),\n\t\t\t\t\t\t\ttension\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\n\n\t\t\t\t\t\t// Cap puter bezier handles to the upper/lower scale bounds\n\t\t\t\t\t\tif (point.controlPoints.outer.y > this.scale.endPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.endPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (point.controlPoints.outer.y < this.scale.startPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.startPoint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Cap inner bezier handles to the upper/lower scale bounds\n\t\t\t\t\t\tif (point.controlPoints.inner.y > this.scale.endPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.endPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (point.controlPoints.inner.y < this.scale.startPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.startPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t},this);\n\t\t\t\t}\n\n\n\t\t\t\t//Draw the line between all the points\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\n\t\t\t\tctx.beginPath();\n\n\t\t\t\thelpers.each(pointsWithValues, function(point, index){\n\t\t\t\t\tif (index === 0){\n\t\t\t\t\t\tctx.moveTo(point.x, point.y);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(this.options.bezierCurve){\n\t\t\t\t\t\t\tvar previous = previousPoint(point, pointsWithValues, index);\n\n\t\t\t\t\t\t\tctx.bezierCurveTo(\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.x,\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.y,\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.x,\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.y,\n\t\t\t\t\t\t\t\tpoint.x,\n\t\t\t\t\t\t\t\tpoint.y\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tctx.lineTo(point.x,point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tif (this.options.datasetStroke) {\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\n\t\t\t\tif (this.options.datasetFill && pointsWithValues.length > 0){\n\t\t\t\t\t//Round off the line by going to the base of the chart, back to the start, then fill.\n\t\t\t\t\tctx.lineTo(pointsWithValues[pointsWithValues.length - 1].x, this.scale.endPoint);\n\t\t\t\t\tctx.lineTo(pointsWithValues[0].x, this.scale.endPoint);\n\t\t\t\t\tctx.fillStyle = dataset.fillColor;\n\t\t\t\t\tctx.closePath();\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\n\t\t\t\t//Now draw the points over the line\n\t\t\t\t//A little inefficient double looping, but better than the line\n\t\t\t\t//lagging behind the point positions\n\t\t\t\thelpers.each(pointsWithValues,function(point){\n\t\t\t\t\tpoint.draw();\n\t\t\t\t});\n\t\t\t},this);\n\t\t}\n\t});\n\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\t//Cache a local reference to Chart.helpers\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\t//Boolean - Show a backdrop to the scale label\n\t\tscaleShowLabelBackdrop : true,\n\n\t\t//String - The colour of the label backdrop\n\t\tscaleBackdropColor : \"rgba(255,255,255,0.75)\",\n\n\t\t// Boolean - Whether the scale should begin at zero\n\t\tscaleBeginAtZero : true,\n\n\t\t//Number - The backdrop padding above & below the label in pixels\n\t\tscaleBackdropPaddingY : 2,\n\n\t\t//Number - The backdrop padding to the side of the label in pixels\n\t\tscaleBackdropPaddingX : 2,\n\n\t\t//Boolean - Show line for each value in the scale\n\t\tscaleShowLine : true,\n\n\t\t//Boolean - Stroke a line around each segment in the chart\n\t\tsegmentShowStroke : true,\n\n\t\t//String - The colour of the stroke on each segment.\n\t\tsegmentStrokeColor : \"#fff\",\n\n\t\t//Number - The width of the stroke value in pixels\n\t\tsegmentStrokeWidth : 2,\n\n\t\t//Number - Amount of animation steps\n\t\tanimationSteps : 100,\n\n\t\t//String - Animation easing effect.\n\t\tanimationEasing : \"easeOutBounce\",\n\n\t\t//Boolean - Whether to animate the rotation of the chart\n\t\tanimateRotate : true,\n\n\t\t//Boolean - Whether to animate scaling the chart from the centre\n\t\tanimateScale : false,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>\"\n\t};\n\n\n\tChart.Type.extend({\n\t\t//Passing in a name registers this chart in the Chart namespace\n\t\tname: \"PolarArea\",\n\t\t//Providing a defaults will also register the defaults in the chart namespace\n\t\tdefaults : defaultConfig,\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\n\t\tinitialize:  function(data){\n\t\t\tthis.segments = [];\n\t\t\t//Declare segment class as a chart instance specific class, so it can share props for this instance\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tinnerRadius : 0,\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.scale = new Chart.RadialScale({\n\t\t\t\tdisplay: this.options.showScale,\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\n\t\t\t\tfontSize: this.options.scaleFontSize,\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\n\t\t\t\tfontColor: this.options.scaleFontColor,\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\n\t\t\t\tlineColor: this.options.scaleLineColor,\n\t\t\t\tlineArc: true,\n\t\t\t\twidth: this.chart.width,\n\t\t\t\theight: this.chart.height,\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttemplateString: this.options.scaleLabel,\n\t\t\t\tvaluesCount: data.length\n\t\t\t});\n\n\t\t\tthis.updateScaleRange(data);\n\n\t\t\tthis.scale.update();\n\n\t\t\thelpers.each(data,function(segment,index){\n\t\t\t\tthis.addData(segment,index,true);\n\t\t\t},this);\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\n\t\t\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeSegments);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.render();\n\t\t},\n\t\tgetSegmentsAtEvent : function(e){\n\t\t\tvar segmentsArray = [];\n\n\t\t\tvar location = helpers.getRelativePosition(e);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\n\t\t\t},this);\n\t\t\treturn segmentsArray;\n\t\t},\n\t\taddData : function(segment, atIndex, silent){\n\t\t\tvar index = atIndex || this.segments.length;\n\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\n\t\t\t\tfillColor: segment.color,\n\t\t\t\thighlightColor: segment.highlight || segment.color,\n\t\t\t\tlabel: segment.label,\n\t\t\t\tvalue: segment.value,\n\t\t\t\touterRadius: (this.options.animateScale) ? 0 : this.scale.calculateCenterOffset(segment.value),\n\t\t\t\tcircumference: (this.options.animateRotate) ? 0 : this.scale.getCircumference(),\n\t\t\t\tstartAngle: Math.PI * 1.5\n\t\t\t}));\n\t\t\tif (!silent){\n\t\t\t\tthis.reflow();\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t},\n\t\tremoveData: function(atIndex){\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\n\t\t\tthis.segments.splice(indexToDelete, 1);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\t\tcalculateTotal: function(data){\n\t\t\tthis.total = 0;\n\t\t\thelpers.each(data,function(segment){\n\t\t\t\tthis.total += segment.value;\n\t\t\t},this);\n\t\t\tthis.scale.valuesCount = this.segments.length;\n\t\t},\n\t\tupdateScaleRange: function(datapoints){\n\t\t\tvar valuesArray = [];\n\t\t\thelpers.each(datapoints,function(segment){\n\t\t\t\tvaluesArray.push(segment.value);\n\t\t\t});\n\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\n\t\t\t\t{\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t} :\n\t\t\t\thelpers.calculateScaleRange(\n\t\t\t\t\tvaluesArray,\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\n\t\t\t\t\tthis.options.scaleFontSize,\n\t\t\t\t\tthis.options.scaleBeginAtZero,\n\t\t\t\t\tthis.options.scaleIntegersOnly\n\t\t\t\t);\n\n\t\t\thelpers.extend(\n\t\t\t\tthis.scale,\n\t\t\t\tscaleSizes,\n\t\t\t\t{\n\t\t\t\t\tsize: helpers.min([this.chart.width, this.chart.height]),\n\t\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\t\tyCenter: this.chart.height/2\n\t\t\t\t}\n\t\t\t);\n\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.calculateTotal(this.segments);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tsegment.save();\n\t\t\t});\n\t\t\t\n\t\t\tthis.reflow();\n\t\t\tthis.render();\n\t\t},\n\t\treflow : function(){\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.updateScaleRange(this.segments);\n\t\t\tthis.scale.update();\n\n\t\t\thelpers.extend(this.scale,{\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2\n\t\t\t});\n\n\t\t\thelpers.each(this.segments, function(segment){\n\t\t\t\tsegment.update({\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\n\t\t\t\t});\n\t\t\t}, this);\n\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\t//Clear & draw the canvas\n\t\t\tthis.clear();\n\t\t\thelpers.each(this.segments,function(segment, index){\n\t\t\t\tsegment.transition({\n\t\t\t\t\tcircumference : this.scale.getCircumference(),\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\n\t\t\t\t},easingDecimal);\n\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\n\n\t\t\t\t// If we've removed the first segment we need to set the first one to\n\t\t\t\t// start at the top.\n\t\t\t\tif (index === 0){\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\n\t\t\t\t}\n\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\n\t\t\t\tif (index < this.segments.length - 1){\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\n\t\t\t\t}\n\t\t\t\tsegment.draw();\n\t\t\t}, this);\n\t\t\tthis.scale.draw();\n\t\t}\n\t});\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\n\n\tChart.Type.extend({\n\t\tname: \"Radar\",\n\t\tdefaults:{\n\t\t\t//Boolean - Whether to show lines for each scale point\n\t\t\tscaleShowLine : true,\n\n\t\t\t//Boolean - Whether we show the angle lines out of the radar\n\t\t\tangleShowLineOut : true,\n\n\t\t\t//Boolean - Whether to show labels on the scale\n\t\t\tscaleShowLabels : false,\n\n\t\t\t// Boolean - Whether the scale should begin at zero\n\t\t\tscaleBeginAtZero : true,\n\n\t\t\t//String - Colour of the angle line\n\t\t\tangleLineColor : \"rgba(0,0,0,.1)\",\n\n\t\t\t//Number - Pixel width of the angle line\n\t\t\tangleLineWidth : 1,\n\n\t\t\t//Number - Interval at which to draw angle lines (\"every Nth point\")\n\t\t\tangleLineInterval: 1,\n\n\t\t\t//String - Point label font declaration\n\t\t\tpointLabelFontFamily : \"'Arial'\",\n\n\t\t\t//String - Point label font weight\n\t\t\tpointLabelFontStyle : \"normal\",\n\n\t\t\t//Number - Point label font size in pixels\n\t\t\tpointLabelFontSize : 10,\n\n\t\t\t//String - Point label font colour\n\t\t\tpointLabelFontColor : \"#666\",\n\n\t\t\t//Boolean - Whether to show a dot for each point\n\t\t\tpointDot : true,\n\n\t\t\t//Number - Radius of each point dot in pixels\n\t\t\tpointDotRadius : 3,\n\n\t\t\t//Number - Pixel width of point dot stroke\n\t\t\tpointDotStrokeWidth : 1,\n\n\t\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\n\t\t\tpointHitDetectionRadius : 20,\n\n\t\t\t//Boolean - Whether to show a stroke for datasets\n\t\t\tdatasetStroke : true,\n\n\t\t\t//Number - Pixel width of dataset stroke\n\t\t\tdatasetStrokeWidth : 2,\n\n\t\t\t//Boolean - Whether to fill the dataset with a colour\n\t\t\tdatasetFill : true,\n\n\t\t\t//String - A legend template\n\t\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\"\n\n\t\t},\n\n\t\tinitialize: function(data){\n\t\t\tthis.PointClass = Chart.Point.extend({\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\n\t\t\t\tradius : this.options.pointDotRadius,\n\t\t\t\tdisplay: this.options.pointDot,\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\n\t\t\t\tctx : this.chart.ctx\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\tthis.buildScale(data);\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activePointsCollection = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\n\n\t\t\t\t\tthis.eachPoints(function(point){\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activePointsCollection, function(activePoint){\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.showTooltip(activePointsCollection);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel: dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tpointColor : dataset.pointColor,\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\tpoints : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tvar pointPosition;\n\t\t\t\t\tif (!this.scale.animation){\n\t\t\t\t\t\tpointPosition = this.scale.getPointPosition(index, this.scale.calculateCenterOffset(dataPoint));\n\t\t\t\t\t}\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tx: (this.options.animation) ? this.scale.xCenter : pointPosition.x,\n\t\t\t\t\t\ty: (this.options.animation) ? this.scale.yCenter : pointPosition.y,\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\t\tfillColor : dataset.pointColor,\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t},this);\n\n\t\t\tthis.render();\n\t\t},\n\t\teachPoints : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,callback,this);\n\t\t\t},this);\n\t\t},\n\n\t\tgetPointsAtEvent : function(evt){\n\t\t\tvar mousePosition = helpers.getRelativePosition(evt),\n\t\t\t\tfromCenter = helpers.getAngleFromPoint({\n\t\t\t\t\tx: this.scale.xCenter,\n\t\t\t\t\ty: this.scale.yCenter\n\t\t\t\t}, mousePosition);\n\n\t\t\tvar anglePerIndex = (Math.PI * 2) /this.scale.valuesCount,\n\t\t\t\tpointIndex = Math.round((fromCenter.angle - Math.PI * 1.5) / anglePerIndex),\n\t\t\t\tactivePointsCollection = [];\n\n\t\t\t// If we're at the top, make the pointIndex 0 to get the first of the array.\n\t\t\tif (pointIndex >= this.scale.valuesCount || pointIndex < 0){\n\t\t\t\tpointIndex = 0;\n\t\t\t}\n\n\t\t\tif (fromCenter.distance <= this.scale.drawingArea){\n\t\t\t\thelpers.each(this.datasets, function(dataset){\n\t\t\t\t\tactivePointsCollection.push(dataset.points[pointIndex]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn activePointsCollection;\n\t\t},\n\n\t\tbuildScale : function(data){\n\t\t\tthis.scale = new Chart.RadialScale({\n\t\t\t\tdisplay: this.options.showScale,\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\n\t\t\t\tfontSize: this.options.scaleFontSize,\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\n\t\t\t\tfontColor: this.options.scaleFontColor,\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\n\t\t\t\tbackgroundColors: this.options.scaleBackgroundColors,\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\n\t\t\t\tlineColor: this.options.scaleLineColor,\n\t\t\t\tangleLineColor : this.options.angleLineColor,\n\t\t\t\tangleLineWidth : (this.options.angleShowLineOut) ? this.options.angleLineWidth : 0,\n        angleLineInterval: (this.options.angleLineInterval) ? this.options.angleLineInterval : 1,\n\t\t\t\t// Point labels at the edge of each line\n\t\t\t\tpointLabelFontColor : this.options.pointLabelFontColor,\n\t\t\t\tpointLabelFontSize : this.options.pointLabelFontSize,\n\t\t\t\tpointLabelFontFamily : this.options.pointLabelFontFamily,\n\t\t\t\tpointLabelFontStyle : this.options.pointLabelFontStyle,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth: this.chart.width,\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttemplateString: this.options.scaleLabel,\n\t\t\t\tlabels: data.labels,\n\t\t\t\tvaluesCount: data.datasets[0].data.length\n\t\t\t});\n\n\t\t\tthis.scale.setScaleSize();\n\t\t\tthis.updateScaleRange(data.datasets);\n\t\t\tthis.scale.buildYLabels();\n\t\t},\n\t\tupdateScaleRange: function(datasets){\n\t\t\tvar valuesArray = (function(){\n\t\t\t\tvar totalDataArray = [];\n\t\t\t\thelpers.each(datasets,function(dataset){\n\t\t\t\t\tif (dataset.data){\n\t\t\t\t\t\ttotalDataArray = totalDataArray.concat(dataset.data);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thelpers.each(dataset.points, function(point){\n\t\t\t\t\t\t\ttotalDataArray.push(point.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn totalDataArray;\n\t\t\t})();\n\n\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\n\t\t\t\t{\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t} :\n\t\t\t\thelpers.calculateScaleRange(\n\t\t\t\t\tvaluesArray,\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\n\t\t\t\t\tthis.options.scaleFontSize,\n\t\t\t\t\tthis.options.scaleBeginAtZero,\n\t\t\t\t\tthis.options.scaleIntegersOnly\n\t\t\t\t);\n\n\t\t\thelpers.extend(\n\t\t\t\tthis.scale,\n\t\t\t\tscaleSizes\n\t\t\t);\n\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\t\t\tthis.scale.valuesCount++;\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\tvar pointPosition = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(value));\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\n\t\t\t\t\tx: pointPosition.x,\n\t\t\t\t\ty: pointPosition.y,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.labels.push(label);\n\n\t\t\tthis.reflow();\n\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.valuesCount--;\n\t\t\tthis.scale.labels.shift();\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.points.shift();\n\t\t\t},this);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.eachPoints(function(point){\n\t\t\t\tpoint.save();\n\t\t\t});\n\t\t\tthis.reflow();\n\t\t\tthis.render();\n\t\t},\n\t\treflow: function(){\n\t\t\thelpers.extend(this.scale, {\n\t\t\t\twidth : this.chart.width,\n\t\t\t\theight: this.chart.height,\n\t\t\t\tsize : helpers.min([this.chart.width, this.chart.height]),\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2\n\t\t\t});\n\t\t\tthis.updateScaleRange(this.datasets);\n\t\t\tthis.scale.setScaleSize();\n\t\t\tthis.scale.buildYLabels();\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easeDecimal = ease || 1,\n\t\t\t\tctx = this.chart.ctx;\n\t\t\tthis.clear();\n\t\t\tthis.scale.draw();\n\n\t\t\thelpers.each(this.datasets,function(dataset){\n\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\n\t\t\t\thelpers.each(dataset.points,function(point,index){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.transition(this.scale.getPointPosition(index, this.scale.calculateCenterOffset(point.value)), easeDecimal);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\n\n\t\t\t\t//Draw the line between all the points\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\n\t\t\t\tctx.beginPath();\n\t\t\t\thelpers.each(dataset.points,function(point,index){\n\t\t\t\t\tif (index === 0){\n\t\t\t\t\t\tctx.moveTo(point.x,point.y);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tctx.lineTo(point.x,point.y);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.stroke();\n\n\t\t\t\tctx.fillStyle = dataset.fillColor;\n\t\t\t\tif(this.options.datasetFill){\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\t\t\t\t//Now draw the points over the line\n\t\t\t\t//A little inefficient double looping, but better than the line\n\t\t\t\t//lagging behind the point positions\n\t\t\t\thelpers.each(dataset.points,function(point){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.draw();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t},this);\n\n\t\t}\n\n\t});\n\n\n\n\n\n}).call(this);\n","/*!\n * jQuery UI :data 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: :data Selector\n//>>group: Core\n//>>description: Selects elements which have data stored under the specified key.\n//>>docs: http://api.jqueryui.com/data-selector/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.extend( $.expr[ \":\" ], {\n\tdata: $.expr.createPseudo ?\n\t\t$.expr.createPseudo( function( dataName ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t};\n\t\t} ) :\n\n\t\t// Support: jQuery <1.8\n\t\tfunction( elem, i, match ) {\n\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t}\n} );\n} ) );\n","/*!\n * jQuery UI Disable Selection 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: disableSelection\n//>>group: Core\n//>>description: Disable selection of text content within the set of matched elements.\n//>>docs: http://api.jqueryui.com/disableSelection/\n\n// This file is deprecated\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\nreturn $.fn.extend( {\n\tdisableSelection: ( function() {\n\t\tvar eventType = \"onselectstart\" in document.createElement( \"div\" ) ?\n\t\t\t\"selectstart\" :\n\t\t\t\"mousedown\";\n\n\t\treturn function() {\n\t\t\treturn this.on( eventType + \".ui-disableSelection\", function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} );\n\t\t};\n\t} )(),\n\n\tenableSelection: function() {\n\t\treturn this.off( \".ui-disableSelection\" );\n\t}\n} );\n\n} ) );\n","/*!\n * jQuery UI Focusable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: :focusable Selector\n//>>group: Core\n//>>description: Selects elements which can be focused.\n//>>docs: http://api.jqueryui.com/focusable-selector/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// Selectors\n$.ui.focusable = function( element, hasTabindex ) {\n\tvar map, mapName, img, focusableIfVisible, fieldset,\n\t\tnodeName = element.nodeName.toLowerCase();\n\n\tif ( \"area\" === nodeName ) {\n\t\tmap = element.parentNode;\n\t\tmapName = map.name;\n\t\tif ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n\t\t\treturn false;\n\t\t}\n\t\timg = $( \"img[usemap='#\" + mapName + \"']\" );\n\t\treturn img.length > 0 && img.is( \":visible\" );\n\t}\n\n\tif ( /^(input|select|textarea|button|object)$/.test( nodeName ) ) {\n\t\tfocusableIfVisible = !element.disabled;\n\n\t\tif ( focusableIfVisible ) {\n\n\t\t\t// Form controls within a disabled fieldset are disabled.\n\t\t\t// However, controls within the fieldset's legend do not get disabled.\n\t\t\t// Since controls generally aren't placed inside legends, we skip\n\t\t\t// this portion of the check.\n\t\t\tfieldset = $( element ).closest( \"fieldset\" )[ 0 ];\n\t\t\tif ( fieldset ) {\n\t\t\t\tfocusableIfVisible = !fieldset.disabled;\n\t\t\t}\n\t\t}\n\t} else if ( \"a\" === nodeName ) {\n\t\tfocusableIfVisible = element.href || hasTabindex;\n\t} else {\n\t\tfocusableIfVisible = hasTabindex;\n\t}\n\n\treturn focusableIfVisible && $( element ).is( \":visible\" ) && visible( $( element ) );\n};\n\n// Support: IE 8 only\n// IE 8 doesn't resolve inherit to visible/hidden for computed values\nfunction visible( element ) {\n\tvar visibility = element.css( \"visibility\" );\n\twhile ( visibility === \"inherit\" ) {\n\t\telement = element.parent();\n\t\tvisibility = element.css( \"visibility\" );\n\t}\n\treturn visibility !== \"hidden\";\n}\n\n$.extend( $.expr[ \":\" ], {\n\tfocusable: function( element ) {\n\t\treturn $.ui.focusable( element, $.attr( element, \"tabindex\" ) != null );\n\t}\n} );\n\nreturn $.ui.focusable;\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// This file is deprecated\nreturn $.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n} ) );\n","/*!\n * jQuery UI Keycode 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Keycode\n//>>group: Core\n//>>description: Provide keycodes as keynames\n//>>docs: http://api.jqueryui.com/jQuery.ui.keyCode/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.ui.keyCode = {\n\tBACKSPACE: 8,\n\tCOMMA: 188,\n\tDELETE: 46,\n\tDOWN: 40,\n\tEND: 35,\n\tENTER: 13,\n\tESCAPE: 27,\n\tHOME: 36,\n\tLEFT: 37,\n\tPAGE_DOWN: 34,\n\tPAGE_UP: 33,\n\tPERIOD: 190,\n\tRIGHT: 39,\n\tSPACE: 32,\n\tTAB: 9,\n\tUP: 38\n};\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\nreturn $.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode ||\n\t\t\t\tinstance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n} ) );\n","/*!\n * jQuery UI Position 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/position/\n */\n\n//>>label: Position\n//>>group: Core\n//>>description: Positions elements relative to other elements.\n//>>docs: http://api.jqueryui.com/position/\n//>>demos: http://jqueryui.com/position/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n( function() {\nvar cachedScrollbarWidth,\n\tmax = Math.max,\n\tabs = Math.abs,\n\trhorizontal = /left|center|right/,\n\trvertical = /top|center|bottom/,\n\troffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\n\trposition = /^\\w+/,\n\trpercent = /%$/,\n\t_position = $.fn.position;\n\nfunction getOffsets( offsets, width, height ) {\n\treturn [\n\t\tparseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\n\t\tparseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\n\t];\n}\n\nfunction parseCss( element, property ) {\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\n}\n\nfunction getDimensions( elem ) {\n\tvar raw = elem[ 0 ];\n\tif ( raw.nodeType === 9 ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: 0, left: 0 }\n\t\t};\n\t}\n\tif ( $.isWindow( raw ) ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\n\t\t};\n\t}\n\tif ( raw.preventDefault ) {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\n\t\t};\n\t}\n\treturn {\n\t\twidth: elem.outerWidth(),\n\t\theight: elem.outerHeight(),\n\t\toffset: elem.offset()\n\t};\n}\n\n$.position = {\n\tscrollbarWidth: function() {\n\t\tif ( cachedScrollbarWidth !== undefined ) {\n\t\t\treturn cachedScrollbarWidth;\n\t\t}\n\t\tvar w1, w2,\n\t\t\tdiv = $( \"<div \" +\n\t\t\t\t\"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>\" +\n\t\t\t\t\"<div style='height:100px;width:auto;'></div></div>\" ),\n\t\t\tinnerDiv = div.children()[ 0 ];\n\n\t\t$( \"body\" ).append( div );\n\t\tw1 = innerDiv.offsetWidth;\n\t\tdiv.css( \"overflow\", \"scroll\" );\n\n\t\tw2 = innerDiv.offsetWidth;\n\n\t\tif ( w1 === w2 ) {\n\t\t\tw2 = div[ 0 ].clientWidth;\n\t\t}\n\n\t\tdiv.remove();\n\n\t\treturn ( cachedScrollbarWidth = w1 - w2 );\n\t},\n\tgetScrollInfo: function( within ) {\n\t\tvar overflowX = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-x\" ),\n\t\t\toverflowY = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-y\" ),\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[ 0 ].scrollWidth ),\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[ 0 ].scrollHeight );\n\t\treturn {\n\t\t\twidth: hasOverflowY ? $.position.scrollbarWidth() : 0,\n\t\t\theight: hasOverflowX ? $.position.scrollbarWidth() : 0\n\t\t};\n\t},\n\tgetWithinInfo: function( element ) {\n\t\tvar withinElement = $( element || window ),\n\t\t\tisWindow = $.isWindow( withinElement[ 0 ] ),\n\t\t\tisDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9,\n\t\t\thasOffset = !isWindow && !isDocument;\n\t\treturn {\n\t\t\telement: withinElement,\n\t\t\tisWindow: isWindow,\n\t\t\tisDocument: isDocument,\n\t\t\toffset: hasOffset ? $( element ).offset() : { left: 0, top: 0 },\n\t\t\tscrollLeft: withinElement.scrollLeft(),\n\t\t\tscrollTop: withinElement.scrollTop(),\n\t\t\twidth: withinElement.outerWidth(),\n\t\t\theight: withinElement.outerHeight()\n\t\t};\n\t}\n};\n\n$.fn.position = function( options ) {\n\tif ( !options || !options.of ) {\n\t\treturn _position.apply( this, arguments );\n\t}\n\n\t// Make a copy, we don't want to modify arguments\n\toptions = $.extend( {}, options );\n\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\n\t\ttarget = $( options.of ),\n\t\twithin = $.position.getWithinInfo( options.within ),\n\t\tscrollInfo = $.position.getScrollInfo( within ),\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\n\t\toffsets = {};\n\n\tdimensions = getDimensions( target );\n\tif ( target[ 0 ].preventDefault ) {\n\n\t\t// Force left top to allow flipping\n\t\toptions.at = \"left top\";\n\t}\n\ttargetWidth = dimensions.width;\n\ttargetHeight = dimensions.height;\n\ttargetOffset = dimensions.offset;\n\n\t// Clone to reuse original targetOffset later\n\tbasePosition = $.extend( {}, targetOffset );\n\n\t// Force my and at to have valid horizontal and vertical positions\n\t// if a value is missing or invalid, it will be converted to center\n\t$.each( [ \"my\", \"at\" ], function() {\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\n\t\t\thorizontalOffset,\n\t\t\tverticalOffset;\n\n\t\tif ( pos.length === 1 ) {\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\n\t\t\t\tpos.concat( [ \"center\" ] ) :\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\n\t\t\t\t\t[ \"center\", \"center\" ];\n\t\t}\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\n\n\t\t// Calculate offsets\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\n\t\toffsets[ this ] = [\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\n\t\t];\n\n\t\t// Reduce to just the positions without the offsets\n\t\toptions[ this ] = [\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\n\t\t];\n\t} );\n\n\t// Normalize collision option\n\tif ( collision.length === 1 ) {\n\t\tcollision[ 1 ] = collision[ 0 ];\n\t}\n\n\tif ( options.at[ 0 ] === \"right\" ) {\n\t\tbasePosition.left += targetWidth;\n\t} else if ( options.at[ 0 ] === \"center\" ) {\n\t\tbasePosition.left += targetWidth / 2;\n\t}\n\n\tif ( options.at[ 1 ] === \"bottom\" ) {\n\t\tbasePosition.top += targetHeight;\n\t} else if ( options.at[ 1 ] === \"center\" ) {\n\t\tbasePosition.top += targetHeight / 2;\n\t}\n\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\n\tbasePosition.left += atOffset[ 0 ];\n\tbasePosition.top += atOffset[ 1 ];\n\n\treturn this.each( function() {\n\t\tvar collisionPosition, using,\n\t\t\telem = $( this ),\n\t\t\telemWidth = elem.outerWidth(),\n\t\t\telemHeight = elem.outerHeight(),\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) +\n\t\t\t\tscrollInfo.width,\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) +\n\t\t\t\tscrollInfo.height,\n\t\t\tposition = $.extend( {}, basePosition ),\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\n\n\t\tif ( options.my[ 0 ] === \"right\" ) {\n\t\t\tposition.left -= elemWidth;\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\n\t\t\tposition.left -= elemWidth / 2;\n\t\t}\n\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\n\t\t\tposition.top -= elemHeight;\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\n\t\t\tposition.top -= elemHeight / 2;\n\t\t}\n\n\t\tposition.left += myOffset[ 0 ];\n\t\tposition.top += myOffset[ 1 ];\n\n\t\tcollisionPosition = {\n\t\t\tmarginLeft: marginLeft,\n\t\t\tmarginTop: marginTop\n\t\t};\n\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\n\t\t\t\t\ttargetWidth: targetWidth,\n\t\t\t\t\ttargetHeight: targetHeight,\n\t\t\t\t\telemWidth: elemWidth,\n\t\t\t\t\telemHeight: elemHeight,\n\t\t\t\t\tcollisionPosition: collisionPosition,\n\t\t\t\t\tcollisionWidth: collisionWidth,\n\t\t\t\t\tcollisionHeight: collisionHeight,\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\n\t\t\t\t\tmy: options.my,\n\t\t\t\t\tat: options.at,\n\t\t\t\t\twithin: within,\n\t\t\t\t\telem: elem\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\tif ( options.using ) {\n\n\t\t\t// Adds feedback as second argument to using callback, if present\n\t\t\tusing = function( props ) {\n\t\t\t\tvar left = targetOffset.left - position.left,\n\t\t\t\t\tright = left + targetWidth - elemWidth,\n\t\t\t\t\ttop = targetOffset.top - position.top,\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\n\t\t\t\t\tfeedback = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\telement: target,\n\t\t\t\t\t\t\tleft: targetOffset.left,\n\t\t\t\t\t\t\ttop: targetOffset.top,\n\t\t\t\t\t\t\twidth: targetWidth,\n\t\t\t\t\t\t\theight: targetHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\telement: {\n\t\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\t\tleft: position.left,\n\t\t\t\t\t\t\ttop: position.top,\n\t\t\t\t\t\t\twidth: elemWidth,\n\t\t\t\t\t\t\theight: elemHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\n\t\t\t\t\t};\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\n\t\t\t\t\tfeedback.horizontal = \"center\";\n\t\t\t\t}\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\n\t\t\t\t\tfeedback.vertical = \"middle\";\n\t\t\t\t}\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\n\t\t\t\t\tfeedback.important = \"horizontal\";\n\t\t\t\t} else {\n\t\t\t\t\tfeedback.important = \"vertical\";\n\t\t\t\t}\n\t\t\t\toptions.using.call( this, props, feedback );\n\t\t\t};\n\t\t}\n\n\t\telem.offset( $.extend( position, { using: using } ) );\n\t} );\n};\n\n$.ui.position = {\n\tfit: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\touterWidth = within.width,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\n\t\t\t\tnewOverRight;\n\n\t\t\t// Element is wider than within\n\t\t\tif ( data.collisionWidth > outerWidth ) {\n\n\t\t\t\t// Element is initially over the left side of within\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth -\n\t\t\t\t\t\twithinOffset;\n\t\t\t\t\tposition.left += overLeft - newOverRight;\n\n\t\t\t\t// Element is initially over right side of within\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\n\t\t\t\t\tposition.left = withinOffset;\n\n\t\t\t\t// Element is initially over both left and right sides of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overLeft > overRight ) {\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Too far left -> align with left edge\n\t\t\t} else if ( overLeft > 0 ) {\n\t\t\t\tposition.left += overLeft;\n\n\t\t\t// Too far right -> align with right edge\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tposition.left -= overRight;\n\n\t\t\t// Adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\touterHeight = data.within.height,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = withinOffset - collisionPosTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\n\t\t\t\tnewOverBottom;\n\n\t\t\t// Element is taller than within\n\t\t\tif ( data.collisionHeight > outerHeight ) {\n\n\t\t\t\t// Element is initially over the top of within\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight -\n\t\t\t\t\t\twithinOffset;\n\t\t\t\t\tposition.top += overTop - newOverBottom;\n\n\t\t\t\t// Element is initially over bottom of within\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\n\t\t\t\t\tposition.top = withinOffset;\n\n\t\t\t\t// Element is initially over both top and bottom of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overTop > overBottom ) {\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Too far up -> align with top\n\t\t\t} else if ( overTop > 0 ) {\n\t\t\t\tposition.top += overTop;\n\n\t\t\t// Too far down -> align with bottom edge\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tposition.top -= overBottom;\n\n\t\t\t// Adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\n\t\t\t}\n\t\t}\n\t},\n\tflip: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\n\t\t\t\touterWidth = within.width,\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\n\t\t\t\t\t-data.elemWidth :\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\n\t\t\t\t\t\tdata.elemWidth :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\n\t\t\t\t\tdata.targetWidth :\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\n\t\t\t\t\t\t-data.targetWidth :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 0 ],\n\t\t\t\tnewOverRight,\n\t\t\t\tnewOverLeft;\n\n\t\t\tif ( overLeft < 0 ) {\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth -\n\t\t\t\t\touterWidth - withinOffset;\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset +\n\t\t\t\t\tatOffset + offset - offsetLeft;\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\n\t\t\t\touterHeight = within.height,\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = collisionPosTop - offsetTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\n\t\t\t\tmyOffset = top ?\n\t\t\t\t\t-data.elemHeight :\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\tdata.elemHeight :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\n\t\t\t\t\tdata.targetHeight :\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\t-data.targetHeight :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 1 ],\n\t\t\t\tnewOverTop,\n\t\t\t\tnewOverBottom;\n\t\t\tif ( overTop < 0 ) {\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight -\n\t\t\t\t\touterHeight - withinOffset;\n\t\t\t\tif ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tnewOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset +\n\t\t\t\t\toffset - offsetTop;\n\t\t\t\tif ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tflipfit: {\n\t\tleft: function() {\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\n\t\t},\n\t\ttop: function() {\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\n\t\t}\n\t}\n};\n\n} )();\n\nreturn $.ui.position;\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.ui.safeActiveElement = function( document ) {\n\tvar activeElement;\n\n\t// Support: IE 9 only\n\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\ttry {\n\t\tactiveElement = document.activeElement;\n\t} catch ( error ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE may return null instead of an element\n\t// Interestingly, this only seems to occur when NOT in an iframe\n\tif ( !activeElement ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 11 only\n\t// IE11 returns a seemingly empty object in some cases when accessing\n\t// document.activeElement from an <iframe>\n\tif ( !activeElement.nodeName ) {\n\t\tactiveElement = document.body;\n\t}\n\n\treturn activeElement;\n};\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.ui.safeBlur = function( element ) {\n\n\t// Support: IE9 - 10 only\n\t// If the <body> is blurred, IE will switch windows, see #9420\n\tif ( element && element.nodeName.toLowerCase() !== \"body\" ) {\n\t\t$( element ).trigger( \"blur\" );\n\t}\n};\n\n} ) );\n","/*!\n * jQuery UI Scroll Parent 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: scrollParent\n//>>group: Core\n//>>description: Get the closest ancestor element that is scrollable.\n//>>docs: http://api.jqueryui.com/scrollParent/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\nreturn $.fn.scrollParent = function( includeHidden ) {\n\tvar position = this.css( \"position\" ),\n\t\texcludeStaticParent = position === \"absolute\",\n\t\toverflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n\t\tscrollParent = this.parents().filter( function() {\n\t\t\tvar parent = $( this );\n\t\t\tif ( excludeStaticParent && parent.css( \"position\" ) === \"static\" ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn overflowRegex.test( parent.css( \"overflow\" ) + parent.css( \"overflow-y\" ) +\n\t\t\t\tparent.css( \"overflow-x\" ) );\n\t\t} ).eq( 0 );\n\n\treturn position === \"fixed\" || !scrollParent.length ?\n\t\t$( this[ 0 ].ownerDocument || document ) :\n\t\tscrollParent;\n};\n\n} ) );\n","/*!\n * jQuery UI Tabbable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: :tabbable Selector\n//>>group: Core\n//>>description: Selects elements which can be tabbed to.\n//>>docs: http://api.jqueryui.com/tabbable-selector/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\", \"./focusable\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\nreturn $.extend( $.expr[ \":\" ], {\n\ttabbable: function( element ) {\n\t\tvar tabIndex = $.attr( element, \"tabindex\" ),\n\t\t\thasTabindex = tabIndex != null;\n\t\treturn ( !hasTabindex || tabIndex >= 0 ) && $.ui.focusable( element, hasTabindex );\n\t}\n} );\n\n} ) );\n","/*!\n * jQuery UI Unique ID 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: uniqueId\n//>>group: Core\n//>>description: Functions to generate and remove uniqueId's\n//>>docs: http://api.jqueryui.com/uniqueId/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\nreturn $.fn.extend( {\n\tuniqueId: ( function() {\n\t\tvar uuid = 0;\n\n\t\treturn function() {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !this.id ) {\n\t\t\t\t\tthis.id = \"ui-id-\" + ( ++uuid );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\t} )(),\n\n\tremoveUniqueId: function() {\n\t\treturn this.each( function() {\n\t\t\tif ( /^ui-id-\\d+$/.test( this.id ) ) {\n\t\t\t\t$( this ).removeAttr( \"id\" );\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n$.ui = $.ui || {};\n\nreturn $.ui.version = \"1.12.1\";\n\n} ) );\n","/*!\n * jQuery UI Widget 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Widget\n//>>group: Core\n//>>description: Provides a factory for creating stateful widgets with a common API.\n//>>docs: http://api.jqueryui.com/jQuery.widget/\n//>>demos: http://jqueryui.com/widget/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nvar widgetUuid = 0;\nvar widgetSlice = Array.prototype.slice;\n\n$.cleanData = ( function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// Http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n} )( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar existingConstructor, constructor, basePrototype;\n\n\t// ProxiedPrototype allows the provided prototype to remain unmodified\n\t// so that it can be used as a mixin for multiple widgets (#8876)\n\tvar proxiedPrototype = {};\n\n\tvar namespace = name.split( \".\" )[ 0 ];\n\tname = name.split( \".\" )[ 1 ];\n\tvar fullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\tif ( $.isArray( prototype ) ) {\n\t\tprototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n\t}\n\n\t// Create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\n\t\t// Allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// Allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\n\t// Extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\n\t\t// Copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\n\t\t// Track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t} );\n\n\tbasePrototype = new base();\n\n\t// We need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = ( function() {\n\t\t\tfunction _super() {\n\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t}\n\n\t\t\tfunction _superApply( args ) {\n\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super;\n\t\t\t\tvar __superApply = this._superApply;\n\t\t\t\tvar returnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t} )();\n\t} );\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t} );\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// Redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor,\n\t\t\t\tchild._proto );\n\t\t} );\n\n\t\t// Remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widgetSlice.call( arguments, 1 );\n\tvar inputIndex = 0;\n\tvar inputLength = input.length;\n\tvar key;\n\tvar value;\n\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\";\n\t\tvar args = widgetSlice.call( arguments, 1 );\n\t\tvar returnValue = this;\n\n\t\tif ( isMethodCall ) {\n\n\t\t\t// If this is an empty collection, we need to have the instance method\n\t\t\t// return undefined instead of the jQuery instance\n\t\t\tif ( !this.length && options === \"instance\" ) {\n\t\t\t\treturnValue = undefined;\n\t\t\t} else {\n\t\t\t\tthis.each( function() {\n\t\t\t\t\tvar methodValue;\n\t\t\t\t\tvar instance = $.data( this, fullName );\n\n\t\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\t\treturnValue = instance;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !instance ) {\n\t\t\t\t\t\treturn $.error( \"cannot call methods on \" + name +\n\t\t\t\t\t\t\t\" prior to initialization; \" +\n\t\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name +\n\t\t\t\t\t\t\t\" widget instance\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\n\t\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\t\tmethodValue;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat( args ) );\n\t\t\t}\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\n\toptions: {\n\t\tclasses: {},\n\t\tdisabled: false,\n\n\t\t// Callbacks\n\t\tcreate: null\n\t},\n\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widgetUuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\t\tthis.classesElementLookup = {};\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.document = $( element.style ?\n\n\t\t\t\t// Element within the document\n\t\t\t\telement.ownerDocument :\n\n\t\t\t\t// Element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._setOptionDisabled( this.options.disabled );\n\t\t}\n\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn {};\n\t},\n\n\t_getCreateEventData: $.noop,\n\n\t_create: $.noop,\n\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tvar that = this;\n\n\t\tthis._destroy();\n\t\t$.each( this.classesElementLookup, function( key, value ) {\n\t\t\tthat._removeClass( value, key );\n\t\t} );\n\n\t\t// We can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName );\n\t\tthis.widget()\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" );\n\n\t\t// Clean up events and states\n\t\tthis.bindings.off( this.eventNamespace );\n\t},\n\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key;\n\t\tvar parts;\n\t\tvar curOption;\n\t\tvar i;\n\n\t\tif ( arguments.length === 0 ) {\n\n\t\t\t// Don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\n\t\t\t// Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"classes\" ) {\n\t\t\tthis._setOptionClasses( value );\n\t\t}\n\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._setOptionDisabled( value );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOptionClasses: function( value ) {\n\t\tvar classKey, elements, currentElements;\n\n\t\tfor ( classKey in value ) {\n\t\t\tcurrentElements = this.classesElementLookup[ classKey ];\n\t\t\tif ( value[ classKey ] === this.options.classes[ classKey ] ||\n\t\t\t\t\t!currentElements ||\n\t\t\t\t\t!currentElements.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We are doing this to create a new jQuery object because the _removeClass() call\n\t\t\t// on the next line is going to destroy the reference to the current elements being\n\t\t\t// tracked. We need to save a copy of this collection so that we can add the new classes\n\t\t\t// below.\n\t\t\telements = $( currentElements.get() );\n\t\t\tthis._removeClass( currentElements, classKey );\n\n\t\t\t// We don't use _addClass() here, because that uses this.options.classes\n\t\t\t// for generating the string of classes. We want to use the value passed in from\n\t\t\t// _setOption(), this is the new value of the classes option which was passed to\n\t\t\t// _setOption(). We pass this value directly to _classes().\n\t\t\telements.addClass( this._classes( {\n\t\t\t\telement: elements,\n\t\t\t\tkeys: classKey,\n\t\t\t\tclasses: value,\n\t\t\t\tadd: true\n\t\t\t} ) );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._toggleClass( this.widget(), this.widgetFullName + \"-disabled\", null, !!value );\n\n\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\tif ( value ) {\n\t\t\tthis._removeClass( this.hoverable, null, \"ui-state-hover\" );\n\t\t\tthis._removeClass( this.focusable, null, \"ui-state-focus\" );\n\t\t}\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions( { disabled: false } );\n\t},\n\n\tdisable: function() {\n\t\treturn this._setOptions( { disabled: true } );\n\t},\n\n\t_classes: function( options ) {\n\t\tvar full = [];\n\t\tvar that = this;\n\n\t\toptions = $.extend( {\n\t\t\telement: this.element,\n\t\t\tclasses: this.options.classes || {}\n\t\t}, options );\n\n\t\tfunction processClassString( classes, checkOption ) {\n\t\t\tvar current, i;\n\t\t\tfor ( i = 0; i < classes.length; i++ ) {\n\t\t\t\tcurrent = that.classesElementLookup[ classes[ i ] ] || $();\n\t\t\t\tif ( options.add ) {\n\t\t\t\t\tcurrent = $( $.unique( current.get().concat( options.element.get() ) ) );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent = $( current.not( options.element ).get() );\n\t\t\t\t}\n\t\t\t\tthat.classesElementLookup[ classes[ i ] ] = current;\n\t\t\t\tfull.push( classes[ i ] );\n\t\t\t\tif ( checkOption && options.classes[ classes[ i ] ] ) {\n\t\t\t\t\tfull.push( options.classes[ classes[ i ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._on( options.element, {\n\t\t\t\"remove\": \"_untrackClassesElement\"\n\t\t} );\n\n\t\tif ( options.keys ) {\n\t\t\tprocessClassString( options.keys.match( /\\S+/g ) || [], true );\n\t\t}\n\t\tif ( options.extra ) {\n\t\t\tprocessClassString( options.extra.match( /\\S+/g ) || [] );\n\t\t}\n\n\t\treturn full.join( \" \" );\n\t},\n\n\t_untrackClassesElement: function( event ) {\n\t\tvar that = this;\n\t\t$.each( that.classesElementLookup, function( key, value ) {\n\t\t\tif ( $.inArray( event.target, value ) !== -1 ) {\n\t\t\t\tthat.classesElementLookup[ key ] = $( value.not( event.target ).get() );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_removeClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, false );\n\t},\n\n\t_addClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, true );\n\t},\n\n\t_toggleClass: function( element, keys, extra, add ) {\n\t\tadd = ( typeof add === \"boolean\" ) ? add : extra;\n\t\tvar shift = ( typeof element === \"string\" || element === null ),\n\t\t\toptions = {\n\t\t\t\textra: shift ? keys : extra,\n\t\t\t\tkeys: shift ? element : keys,\n\t\t\t\telement: shift ? this.element : element,\n\t\t\t\tadd: add\n\t\t\t};\n\t\toptions.element.toggleClass( this._classes( options ), add );\n\t\treturn this;\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement;\n\t\tvar instance = this;\n\n\t\t// No suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// No element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\n\t\t\t\t// Allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// Copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ );\n\t\t\tvar eventName = match[ 1 ] + instance.eventNamespace;\n\t\t\tvar selector = match[ 2 ];\n\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.on( eventName, selector, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.on( eventName, handlerProxy );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = ( eventName || \"\" ).split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.off( eventName ).off( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig;\n\t\tvar callback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\n\t\t// The original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// Copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\n\t\tvar hasOptions;\n\t\tvar effectName = !options ?\n\t\t\tmethod :\n\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\tdefaultEffect :\n\t\t\t\toptions.effect || defaultEffect;\n\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue( function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t} );\n\t\t}\n\t};\n} );\n\nreturn $.widget;\n\n} ) );\n","/*!\n * jQuery UI Autocomplete 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Autocomplete\n//>>group: Widgets\n//>>description: Lists suggested words as the user is typing.\n//>>docs: http://api.jqueryui.com/autocomplete/\n//>>demos: http://jqueryui.com/autocomplete/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/autocomplete.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./menu\",\n\t\t\t\"../keycode\",\n\t\t\t\"../position\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.autocomplete\", {\n\tversion: \"1.12.1\",\n\tdefaultElement: \"<input>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tautoFocus: false,\n\t\tdelay: 300,\n\t\tminLength: 1,\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\tsource: null,\n\n\t\t// Callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresponse: null,\n\t\tsearch: null,\n\t\tselect: null\n\t},\n\n\trequestIndex: 0,\n\tpending: 0,\n\n\t_create: function() {\n\n\t\t// Some browsers only repeat keydown events, not keypress events,\n\t\t// so we use the suppressKeyPress flag to determine if we've already\n\t\t// handled the keydown event. #7269\n\t\t// Unfortunately the code for & in keypress is the same as the up arrow,\n\t\t// so we use the suppressKeyPressRepeat flag to avoid handling keypress\n\t\t// events when we know the keydown event was used to modify the\n\t\t// search term. #7799\n\t\tvar suppressKeyPress, suppressKeyPressRepeat, suppressInput,\n\t\t\tnodeName = this.element[ 0 ].nodeName.toLowerCase(),\n\t\t\tisTextarea = nodeName === \"textarea\",\n\t\t\tisInput = nodeName === \"input\";\n\n\t\t// Textareas are always multi-line\n\t\t// Inputs are always single-line, even if inside a contentEditable element\n\t\t// IE also treats inputs as contentEditable\n\t\t// All other element types are determined by whether or not they're contentEditable\n\t\tthis.isMultiLine = isTextarea || !isInput && this._isContentEditable( this.element );\n\n\t\tthis.valueMethod = this.element[ isTextarea || isInput ? \"val\" : \"text\" ];\n\t\tthis.isNewMenu = true;\n\n\t\tthis._addClass( \"ui-autocomplete-input\" );\n\t\tthis.element.attr( \"autocomplete\", \"off\" );\n\n\t\tthis._on( this.element, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.element.prop( \"readOnly\" ) ) {\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tsuppressInput = true;\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsuppressKeyPress = false;\n\t\t\t\tsuppressInput = false;\n\t\t\t\tsuppressKeyPressRepeat = false;\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ENTER:\n\n\t\t\t\t\t// when menu is open and has focus\n\t\t\t\t\tif ( this.menu.active ) {\n\n\t\t\t\t\t\t// #6055 - Opera still allows the keypress to occur\n\t\t\t\t\t\t// which causes forms to submit\n\t\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.TAB:\n\t\t\t\t\tif ( this.menu.active ) {\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ESCAPE:\n\t\t\t\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\t\t\t\tthis._value( this.term );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.close( event );\n\n\t\t\t\t\t\t// Different browsers have different default behavior for escape\n\t\t\t\t\t\t// Single press can mean undo or clear\n\t\t\t\t\t\t// Double press in IE means clear the whole form\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\n\t\t\t\t\t// search timeout should be triggered before the input value is changed\n\t\t\t\t\tthis._searchTimeout( event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeypress: function( event ) {\n\t\t\t\tif ( suppressKeyPress ) {\n\t\t\t\t\tsuppressKeyPress = false;\n\t\t\t\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( suppressKeyPressRepeat ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Replicate some key handlers to allow them to repeat in Firefox and Opera\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: function( event ) {\n\t\t\t\tif ( suppressInput ) {\n\t\t\t\t\tsuppressInput = false;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._searchTimeout( event );\n\t\t\t},\n\t\t\tfocus: function() {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.previous = this._value();\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tif ( this.cancelBlur ) {\n\t\t\t\t\tdelete this.cancelBlur;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearTimeout( this.searching );\n\t\t\t\tthis.close( event );\n\t\t\t\tthis._change( event );\n\t\t\t}\n\t\t} );\n\n\t\tthis._initSource();\n\t\tthis.menu = $( \"<ul>\" )\n\t\t\t.appendTo( this._appendTo() )\n\t\t\t.menu( {\n\n\t\t\t\t// disable ARIA support, the live region takes care of that\n\t\t\t\trole: null\n\t\t\t} )\n\t\t\t.hide()\n\t\t\t.menu( \"instance\" );\n\n\t\tthis._addClass( this.menu.element, \"ui-autocomplete\", \"ui-front\" );\n\t\tthis._on( this.menu.element, {\n\t\t\tmousedown: function( event ) {\n\n\t\t\t\t// prevent moving focus out of the text field\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t\tthis.cancelBlur = true;\n\t\t\t\tthis._delay( function() {\n\t\t\t\t\tdelete this.cancelBlur;\n\n\t\t\t\t\t// Support: IE 8 only\n\t\t\t\t\t// Right clicking a menu item or selecting text from the menu items will\n\t\t\t\t\t// result in focus moving out of the input. However, we've already received\n\t\t\t\t\t// and ignored the blur event because of the cancelBlur flag set above. So\n\t\t\t\t\t// we restore focus to ensure that the menu closes properly based on the user's\n\t\t\t\t\t// next actions.\n\t\t\t\t\tif ( this.element[ 0 ] !== $.ui.safeActiveElement( this.document[ 0 ] ) ) {\n\t\t\t\t\t\tthis.element.trigger( \"focus\" );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t},\n\t\t\tmenufocus: function( event, ui ) {\n\t\t\t\tvar label, item;\n\n\t\t\t\t// support: Firefox\n\t\t\t\t// Prevent accidental activation of menu items in Firefox (#7024 #9118)\n\t\t\t\tif ( this.isNewMenu ) {\n\t\t\t\t\tthis.isNewMenu = false;\n\t\t\t\t\tif ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis.menu.blur();\n\n\t\t\t\t\t\tthis.document.one( \"mousemove\", function() {\n\t\t\t\t\t\t\t$( event.target ).trigger( event.originalEvent );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem = ui.item.data( \"ui-autocomplete-item\" );\n\t\t\t\tif ( false !== this._trigger( \"focus\", event, { item: item } ) ) {\n\n\t\t\t\t\t// use value to match what will end up in the input, if it was a key event\n\t\t\t\t\tif ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis._value( item.value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Announce the value in the liveRegion\n\t\t\t\tlabel = ui.item.attr( \"aria-label\" ) || item.value;\n\t\t\t\tif ( label && $.trim( label ).length ) {\n\t\t\t\t\tthis.liveRegion.children().hide();\n\t\t\t\t\t$( \"<div>\" ).text( label ).appendTo( this.liveRegion );\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenuselect: function( event, ui ) {\n\t\t\t\tvar item = ui.item.data( \"ui-autocomplete-item\" ),\n\t\t\t\t\tprevious = this.previous;\n\n\t\t\t\t// Only trigger when focus was lost (click on menu)\n\t\t\t\tif ( this.element[ 0 ] !== $.ui.safeActiveElement( this.document[ 0 ] ) ) {\n\t\t\t\t\tthis.element.trigger( \"focus\" );\n\t\t\t\t\tthis.previous = previous;\n\n\t\t\t\t\t// #6109 - IE triggers two focus events and the second\n\t\t\t\t\t// is asynchronous, so we need to reset the previous\n\t\t\t\t\t// term synchronously and asynchronously :-(\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t\tthis.selectedItem = item;\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tif ( false !== this._trigger( \"select\", event, { item: item } ) ) {\n\t\t\t\t\tthis._value( item.value );\n\t\t\t\t}\n\n\t\t\t\t// reset the term after the select event\n\t\t\t\t// this allows custom select handling to work properly\n\t\t\t\tthis.term = this._value();\n\n\t\t\t\tthis.close( event );\n\t\t\t\tthis.selectedItem = item;\n\t\t\t}\n\t\t} );\n\n\t\tthis.liveRegion = $( \"<div>\", {\n\t\t\trole: \"status\",\n\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\"aria-relevant\": \"additions\"\n\t\t} )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\n\t\tthis._addClass( this.liveRegion, null, \"ui-helper-hidden-accessible\" );\n\n\t\t// Turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_destroy: function() {\n\t\tclearTimeout( this.searching );\n\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\tthis.menu.element.remove();\n\t\tthis.liveRegion.remove();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"source\" ) {\n\t\t\tthis._initSource();\n\t\t}\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menu.element.appendTo( this._appendTo() );\n\t\t}\n\t\tif ( key === \"disabled\" && value && this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\t},\n\n\t_isEventTargetInWidget: function( event ) {\n\t\tvar menuElement = this.menu.element[ 0 ];\n\n\t\treturn event.target === this.element[ 0 ] ||\n\t\t\tevent.target === menuElement ||\n\t\t\t$.contains( menuElement, event.target );\n\t},\n\n\t_closeOnClickOutside: function( event ) {\n\t\tif ( !this._isEventTargetInWidget( event ) ) {\n\t\t\tthis.close();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front, dialog\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_initSource: function() {\n\t\tvar array, url,\n\t\t\tthat = this;\n\t\tif ( $.isArray( this.options.source ) ) {\n\t\t\tarray = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tresponse( $.ui.autocomplete.filter( array, request.term ) );\n\t\t\t};\n\t\t} else if ( typeof this.options.source === \"string\" ) {\n\t\t\turl = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tif ( that.xhr ) {\n\t\t\t\t\tthat.xhr.abort();\n\t\t\t\t}\n\t\t\t\tthat.xhr = $.ajax( {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: request,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tsuccess: function( data ) {\n\t\t\t\t\t\tresponse( data );\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tresponse( [] );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t} else {\n\t\t\tthis.source = this.options.source;\n\t\t}\n\t},\n\n\t_searchTimeout: function( event ) {\n\t\tclearTimeout( this.searching );\n\t\tthis.searching = this._delay( function() {\n\n\t\t\t// Search if the value has changed, or if the user retypes the same value (see #7434)\n\t\t\tvar equalValues = this.term === this._value(),\n\t\t\t\tmenuVisible = this.menu.element.is( \":visible\" ),\n\t\t\t\tmodifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n\n\t\t\tif ( !equalValues || ( equalValues && !menuVisible && !modifierKey ) ) {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.search( null, event );\n\t\t\t}\n\t\t}, this.options.delay );\n\t},\n\n\tsearch: function( value, event ) {\n\t\tvalue = value != null ? value : this._value();\n\n\t\t// Always save the actual value, not the one passed as an argument\n\t\tthis.term = this._value();\n\n\t\tif ( value.length < this.options.minLength ) {\n\t\t\treturn this.close( event );\n\t\t}\n\n\t\tif ( this._trigger( \"search\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._search( value );\n\t},\n\n\t_search: function( value ) {\n\t\tthis.pending++;\n\t\tthis._addClass( \"ui-autocomplete-loading\" );\n\t\tthis.cancelSearch = false;\n\n\t\tthis.source( { term: value }, this._response() );\n\t},\n\n\t_response: function() {\n\t\tvar index = ++this.requestIndex;\n\n\t\treturn $.proxy( function( content ) {\n\t\t\tif ( index === this.requestIndex ) {\n\t\t\t\tthis.__response( content );\n\t\t\t}\n\n\t\t\tthis.pending--;\n\t\t\tif ( !this.pending ) {\n\t\t\t\tthis._removeClass( \"ui-autocomplete-loading\" );\n\t\t\t}\n\t\t}, this );\n\t},\n\n\t__response: function( content ) {\n\t\tif ( content ) {\n\t\t\tcontent = this._normalize( content );\n\t\t}\n\t\tthis._trigger( \"response\", null, { content: content } );\n\t\tif ( !this.options.disabled && content && content.length && !this.cancelSearch ) {\n\t\t\tthis._suggest( content );\n\t\t\tthis._trigger( \"open\" );\n\t\t} else {\n\n\t\t\t// use ._close() instead of .close() so we don't cancel future searches\n\t\t\tthis._close();\n\t\t}\n\t},\n\n\tclose: function( event ) {\n\t\tthis.cancelSearch = true;\n\t\tthis._close( event );\n\t},\n\n\t_close: function( event ) {\n\n\t\t// Remove the handler that closes the menu on outside clicks\n\t\tthis._off( this.document, \"mousedown\" );\n\n\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.menu.element.hide();\n\t\t\tthis.menu.blur();\n\t\t\tthis.isNewMenu = true;\n\t\t\tthis._trigger( \"close\", event );\n\t\t}\n\t},\n\n\t_change: function( event ) {\n\t\tif ( this.previous !== this._value() ) {\n\t\t\tthis._trigger( \"change\", event, { item: this.selectedItem } );\n\t\t}\n\t},\n\n\t_normalize: function( items ) {\n\n\t\t// assume all items have the right format when the first item is complete\n\t\tif ( items.length && items[ 0 ].label && items[ 0 ].value ) {\n\t\t\treturn items;\n\t\t}\n\t\treturn $.map( items, function( item ) {\n\t\t\tif ( typeof item === \"string\" ) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item,\n\t\t\t\t\tvalue: item\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn $.extend( {}, item, {\n\t\t\t\tlabel: item.label || item.value,\n\t\t\t\tvalue: item.value || item.label\n\t\t\t} );\n\t\t} );\n\t},\n\n\t_suggest: function( items ) {\n\t\tvar ul = this.menu.element.empty();\n\t\tthis._renderMenu( ul, items );\n\t\tthis.isNewMenu = true;\n\t\tthis.menu.refresh();\n\n\t\t// Size and position menu\n\t\tul.show();\n\t\tthis._resizeMenu();\n\t\tul.position( $.extend( {\n\t\t\tof: this.element\n\t\t}, this.options.position ) );\n\n\t\tif ( this.options.autoFocus ) {\n\t\t\tthis.menu.next();\n\t\t}\n\n\t\t// Listen for interactions outside of the widget (#6642)\n\t\tthis._on( this.document, {\n\t\t\tmousedown: \"_closeOnClickOutside\"\n\t\t} );\n\t},\n\n\t_resizeMenu: function() {\n\t\tvar ul = this.menu.element;\n\t\tul.outerWidth( Math.max(\n\n\t\t\t// Firefox wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping (#7513)\n\t\t\tul.width( \"\" ).outerWidth() + 1,\n\t\t\tthis.element.outerWidth()\n\t\t) );\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this;\n\t\t$.each( items, function( index, item ) {\n\t\t\tthat._renderItemData( ul, item );\n\t\t} );\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-autocomplete-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\treturn $( \"<li>\" )\n\t\t\t.append( $( \"<div>\" ).text( item.label ) )\n\t\t\t.appendTo( ul );\n\t},\n\n\t_move: function( direction, event ) {\n\t\tif ( !this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.search( null, event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.menu.isFirstItem() && /^previous/.test( direction ) ||\n\t\t\t\tthis.menu.isLastItem() && /^next/.test( direction ) ) {\n\n\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\tthis._value( this.term );\n\t\t\t}\n\n\t\t\tthis.menu.blur();\n\t\t\treturn;\n\t\t}\n\t\tthis.menu[ direction ]( event );\n\t},\n\n\twidget: function() {\n\t\treturn this.menu.element;\n\t},\n\n\t_value: function() {\n\t\treturn this.valueMethod.apply( this.element, arguments );\n\t},\n\n\t_keyEvent: function( keyEvent, event ) {\n\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis._move( keyEvent, event );\n\n\t\t\t// Prevents moving cursor to beginning/end of the text field in some browsers\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t// Support: Chrome <=50\n\t// We should be able to just use this.element.prop( \"isContentEditable\" )\n\t// but hidden elements always report false in Chrome.\n\t// https://code.google.com/p/chromium/issues/detail?id=313082\n\t_isContentEditable: function( element ) {\n\t\tif ( !element.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar editable = element.prop( \"contentEditable\" );\n\n\t\tif ( editable === \"inherit\" ) {\n\t\t  return this._isContentEditable( element.parent() );\n\t\t}\n\n\t\treturn editable === \"true\";\n\t}\n} );\n\n$.extend( $.ui.autocomplete, {\n\tescapeRegex: function( value ) {\n\t\treturn value.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" );\n\t},\n\tfilter: function( array, term ) {\n\t\tvar matcher = new RegExp( $.ui.autocomplete.escapeRegex( term ), \"i\" );\n\t\treturn $.grep( array, function( value ) {\n\t\t\treturn matcher.test( value.label || value.value || value );\n\t\t} );\n\t}\n} );\n\n// Live region extension, adding a `messages` option\n// NOTE: This is an experimental API. We are still investigating\n// a full solution for string manipulation and internationalization.\n$.widget( \"ui.autocomplete\", $.ui.autocomplete, {\n\toptions: {\n\t\tmessages: {\n\t\t\tnoResults: \"No search results.\",\n\t\t\tresults: function( amount ) {\n\t\t\t\treturn amount + ( amount > 1 ? \" results are\" : \" result is\" ) +\n\t\t\t\t\t\" available, use up and down arrow keys to navigate.\";\n\t\t\t}\n\t\t}\n\t},\n\n\t__response: function( content ) {\n\t\tvar message;\n\t\tthis._superApply( arguments );\n\t\tif ( this.options.disabled || this.cancelSearch ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( content && content.length ) {\n\t\t\tmessage = this.options.messages.results( content.length );\n\t\t} else {\n\t\t\tmessage = this.options.messages.noResults;\n\t\t}\n\t\tthis.liveRegion.children().hide();\n\t\t$( \"<div>\" ).text( message ).appendTo( this.liveRegion );\n\t}\n} );\n\nreturn $.ui.autocomplete;\n\n} ) );\n","/*!\n * jQuery UI Button 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Button\n//>>group: Widgets\n//>>description: Enhances a form with themeable buttons.\n//>>docs: http://api.jqueryui.com/button/\n//>>demos: http://jqueryui.com/button/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/button.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\n\t\t\t// These are only for backcompat\n\t\t\t// TODO: Remove after 1.12\n\t\t\t\"./controlgroup\",\n\t\t\t\"./checkboxradio\",\n\n\t\t\t\"../keycode\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.button\", {\n\tversion: \"1.12.1\",\n\tdefaultElement: \"<button>\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-button\": \"ui-corner-all\"\n\t\t},\n\t\tdisabled: null,\n\t\ticon: null,\n\t\ticonPosition: \"beginning\",\n\t\tlabel: null,\n\t\tshowLabel: true\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar disabled,\n\n\t\t\t// This is to support cases like in jQuery Mobile where the base widget does have\n\t\t\t// an implementation of _getCreateOptions\n\t\t\toptions = this._super() || {};\n\n\t\tthis.isInput = this.element.is( \"input\" );\n\n\t\tdisabled = this.element[ 0 ].disabled;\n\t\tif ( disabled != null ) {\n\t\t\toptions.disabled = disabled;\n\t\t}\n\n\t\tthis.originalLabel = this.isInput ? this.element.val() : this.element.html();\n\t\tif ( this.originalLabel ) {\n\t\t\toptions.label = this.originalLabel;\n\t\t}\n\n\t\treturn options;\n\t},\n\n\t_create: function() {\n\t\tif ( !this.option.showLabel & !this.options.icon ) {\n\t\t\tthis.options.showLabel = true;\n\t\t}\n\n\t\t// We have to check the option again here even though we did in _getCreateOptions,\n\t\t// because null may have been passed on init which would override what was set in\n\t\t// _getCreateOptions\n\t\tif ( this.options.disabled == null ) {\n\t\t\tthis.options.disabled = this.element[ 0 ].disabled || false;\n\t\t}\n\n\t\tthis.hasTitle = !!this.element.attr( \"title\" );\n\n\t\t// Check to see if the label needs to be set or if its already correct\n\t\tif ( this.options.label && this.options.label !== this.originalLabel ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( this.options.label );\n\t\t\t} else {\n\t\t\t\tthis.element.html( this.options.label );\n\t\t\t}\n\t\t}\n\t\tthis._addClass( \"ui-button\", \"ui-widget\" );\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\t\tthis._enhance();\n\n\t\tif ( this.element.is( \"a\" ) ) {\n\t\t\tthis._on( {\n\t\t\t\t\"keyup\": function( event ) {\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: PhantomJS <= 1.9, IE 8 Only\n\t\t\t\t\t\t// If a native click is available use it so we actually cause navigation\n\t\t\t\t\t\t// otherwise just trigger a click event\n\t\t\t\t\t\tif ( this.element[ 0 ].click ) {\n\t\t\t\t\t\t\tthis.element[ 0 ].click();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.element.trigger( \"click\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\t_enhance: function() {\n\t\tif ( !this.element.is( \"button\" ) ) {\n\t\t\tthis.element.attr( \"role\", \"button\" );\n\t\t}\n\n\t\tif ( this.options.icon ) {\n\t\t\tthis._updateIcon( \"icon\", this.options.icon );\n\t\t\tthis._updateTooltip();\n\t\t}\n\t},\n\n\t_updateTooltip: function() {\n\t\tthis.title = this.element.attr( \"title\" );\n\n\t\tif ( !this.options.showLabel && !this.title ) {\n\t\t\tthis.element.attr( \"title\", this.options.label );\n\t\t}\n\t},\n\n\t_updateIcon: function( option, value ) {\n\t\tvar icon = option !== \"iconPosition\",\n\t\t\tposition = icon ? this.options.iconPosition : value,\n\t\t\tdisplayBlock = position === \"top\" || position === \"bottom\";\n\n\t\t// Create icon\n\t\tif ( !this.icon ) {\n\t\t\tthis.icon = $( \"<span>\" );\n\n\t\t\tthis._addClass( this.icon, \"ui-button-icon\", \"ui-icon\" );\n\n\t\t\tif ( !this.options.showLabel ) {\n\t\t\t\tthis._addClass( \"ui-button-icon-only\" );\n\t\t\t}\n\t\t} else if ( icon ) {\n\n\t\t\t// If we are updating the icon remove the old icon class\n\t\t\tthis._removeClass( this.icon, null, this.options.icon );\n\t\t}\n\n\t\t// If we are updating the icon add the new icon class\n\t\tif ( icon ) {\n\t\t\tthis._addClass( this.icon, null, value );\n\t\t}\n\n\t\tthis._attachIcon( position );\n\n\t\t// If the icon is on top or bottom we need to add the ui-widget-icon-block class and remove\n\t\t// the iconSpace if there is one.\n\t\tif ( displayBlock ) {\n\t\t\tthis._addClass( this.icon, null, \"ui-widget-icon-block\" );\n\t\t\tif ( this.iconSpace ) {\n\t\t\t\tthis.iconSpace.remove();\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Position is beginning or end so remove the ui-widget-icon-block class and add the\n\t\t\t// space if it does not exist\n\t\t\tif ( !this.iconSpace ) {\n\t\t\t\tthis.iconSpace = $( \"<span> </span>\" );\n\t\t\t\tthis._addClass( this.iconSpace, \"ui-button-icon-space\" );\n\t\t\t}\n\t\t\tthis._removeClass( this.icon, null, \"ui-wiget-icon-block\" );\n\t\t\tthis._attachIconSpace( position );\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tthis.element.removeAttr( \"role\" );\n\n\t\tif ( this.icon ) {\n\t\t\tthis.icon.remove();\n\t\t}\n\t\tif ( this.iconSpace ) {\n\t\t\tthis.iconSpace.remove();\n\t\t}\n\t\tif ( !this.hasTitle ) {\n\t\t\tthis.element.removeAttr( \"title\" );\n\t\t}\n\t},\n\n\t_attachIconSpace: function( iconPosition ) {\n\t\tthis.icon[ /^(?:end|bottom)/.test( iconPosition ) ? \"before\" : \"after\" ]( this.iconSpace );\n\t},\n\n\t_attachIcon: function( iconPosition ) {\n\t\tthis.element[ /^(?:end|bottom)/.test( iconPosition ) ? \"append\" : \"prepend\" ]( this.icon );\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar newShowLabel = options.showLabel === undefined ?\n\t\t\t\tthis.options.showLabel :\n\t\t\t\toptions.showLabel,\n\t\t\tnewIcon = options.icon === undefined ? this.options.icon : options.icon;\n\n\t\tif ( !newShowLabel && !newIcon ) {\n\t\t\toptions.showLabel = true;\n\t\t}\n\t\tthis._super( options );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icon\" ) {\n\t\t\tif ( value ) {\n\t\t\t\tthis._updateIcon( key, value );\n\t\t\t} else if ( this.icon ) {\n\t\t\t\tthis.icon.remove();\n\t\t\t\tif ( this.iconSpace ) {\n\t\t\t\t\tthis.iconSpace.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"iconPosition\" ) {\n\t\t\tthis._updateIcon( key, value );\n\t\t}\n\n\t\t// Make sure we can't end up with a button that has neither text nor icon\n\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis._toggleClass( \"ui-button-icon-only\", null, !value );\n\t\t\t\tthis._updateTooltip();\n\t\t}\n\n\t\tif ( key === \"label\" ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( value );\n\t\t\t} else {\n\n\t\t\t\t// If there is an icon, append it, else nothing then append the value\n\t\t\t\t// this avoids removal of the icon when setting label text\n\t\t\t\tthis.element.html( value );\n\t\t\t\tif ( this.icon ) {\n\t\t\t\t\tthis._attachIcon( this.options.iconPosition );\n\t\t\t\t\tthis._attachIconSpace( this.options.iconPosition );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._toggleClass( null, \"ui-state-disabled\", value );\n\t\t\tthis.element[ 0 ].disabled = value;\n\t\t\tif ( value ) {\n\t\t\t\tthis.element.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\n\t\t// Make sure to only check disabled if its an element that supports this otherwise\n\t\t// check for the disabled class to determine state\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ?\n\t\t\tthis.element[ 0 ].disabled : this.element.hasClass( \"ui-button-disabled\" );\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOptions( { disabled: isDisabled } );\n\t\t}\n\n\t\tthis._updateTooltip();\n\t}\n} );\n\n// DEPRECATED\nif ( $.uiBackCompat !== false ) {\n\n\t// Text and Icons options\n\t$.widget( \"ui.button\", $.ui.button, {\n\t\toptions: {\n\t\t\ttext: true,\n\t\t\ticons: {\n\t\t\t\tprimary: null,\n\t\t\t\tsecondary: null\n\t\t\t}\n\t\t},\n\n\t\t_create: function() {\n\t\t\tif ( this.options.showLabel && !this.options.text ) {\n\t\t\t\tthis.options.showLabel = this.options.text;\n\t\t\t}\n\t\t\tif ( !this.options.showLabel && this.options.text ) {\n\t\t\t\tthis.options.text = this.options.showLabel;\n\t\t\t}\n\t\t\tif ( !this.options.icon && ( this.options.icons.primary ||\n\t\t\t\t\tthis.options.icons.secondary ) ) {\n\t\t\t\tif ( this.options.icons.primary ) {\n\t\t\t\t\tthis.options.icon = this.options.icons.primary;\n\t\t\t\t} else {\n\t\t\t\t\tthis.options.icon = this.options.icons.secondary;\n\t\t\t\t\tthis.options.iconPosition = \"end\";\n\t\t\t\t}\n\t\t\t} else if ( this.options.icon ) {\n\t\t\t\tthis.options.icons.primary = this.options.icon;\n\t\t\t}\n\t\t\tthis._super();\n\t\t},\n\n\t\t_setOption: function( key, value ) {\n\t\t\tif ( key === \"text\" ) {\n\t\t\t\tthis._super( \"showLabel\", value );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis.options.text = value;\n\t\t\t}\n\t\t\tif ( key === \"icon\" ) {\n\t\t\t\tthis.options.icons.primary = value;\n\t\t\t}\n\t\t\tif ( key === \"icons\" ) {\n\t\t\t\tif ( value.primary ) {\n\t\t\t\t\tthis._super( \"icon\", value.primary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"beginning\" );\n\t\t\t\t} else if ( value.secondary ) {\n\t\t\t\t\tthis._super( \"icon\", value.secondary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"end\" );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._superApply( arguments );\n\t\t}\n\t} );\n\n\t$.fn.button = ( function( orig ) {\n\t\treturn function() {\n\t\t\tif ( !this.length || ( this.length && this[ 0 ].tagName !== \"INPUT\" ) ||\n\t\t\t\t\t( this.length && this[ 0 ].tagName === \"INPUT\" && (\n\t\t\t\t\t\tthis.attr( \"type\" ) !== \"checkbox\" && this.attr( \"type\" ) !== \"radio\"\n\t\t\t\t\t) ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t}\n\t\t\tif ( !$.ui.checkboxradio ) {\n\t\t\t\t$.error( \"Checkboxradio widget missing\" );\n\t\t\t}\n\t\t\tif ( arguments.length === 0 ) {\n\t\t\t\treturn this.checkboxradio( {\n\t\t\t\t\t\"icon\": false\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn this.checkboxradio.apply( this, arguments );\n\t\t};\n\t} )( $.fn.button );\n\n\t$.fn.buttonset = function() {\n\t\tif ( !$.ui.controlgroup ) {\n\t\t\t$.error( \"Controlgroup widget missing\" );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" && arguments[ 2 ] ) {\n\t\t\treturn this.controlgroup.apply( this,\n\t\t\t\t[ arguments[ 0 ], \"items.button\", arguments[ 2 ] ] );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" ) {\n\t\t\treturn this.controlgroup.apply( this, [ arguments[ 0 ], \"items.button\" ] );\n\t\t}\n\t\tif ( typeof arguments[ 0 ] === \"object\" && arguments[ 0 ].items ) {\n\t\t\targuments[ 0 ].items = {\n\t\t\t\tbutton: arguments[ 0 ].items\n\t\t\t};\n\t\t}\n\t\treturn this.controlgroup.apply( this, arguments );\n\t};\n}\n\nreturn $.ui.button;\n\n} ) );\n","/*!\n * jQuery UI Dialog 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Dialog\n//>>group: Widgets\n//>>description: Displays customizable dialog windows.\n//>>docs: http://api.jqueryui.com/dialog/\n//>>demos: http://jqueryui.com/dialog/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/dialog.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./button\",\n\t\t\t\"./draggable\",\n\t\t\t\"./mouse\",\n\t\t\t\"./resizable\",\n\t\t\t\"../focusable\",\n\t\t\t\"../keycode\",\n\t\t\t\"../position\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../safe-blur\",\n\t\t\t\"../tabbable\",\n\t\t\t\"../unique-id\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.dialog\", {\n\tversion: \"1.12.1\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoOpen: true,\n\t\tbuttons: [],\n\t\tclasses: {\n\t\t\t\"ui-dialog\": \"ui-corner-all\",\n\t\t\t\"ui-dialog-titlebar\": \"ui-corner-all\"\n\t\t},\n\t\tcloseOnEscape: true,\n\t\tcloseText: \"Close\",\n\t\tdraggable: true,\n\t\thide: null,\n\t\theight: \"auto\",\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 150,\n\t\tminWidth: 150,\n\t\tmodal: false,\n\t\tposition: {\n\t\t\tmy: \"center\",\n\t\t\tat: \"center\",\n\t\t\tof: window,\n\t\t\tcollision: \"fit\",\n\n\t\t\t// Ensure the titlebar is always visible\n\t\t\tusing: function( pos ) {\n\t\t\t\tvar topOffset = $( this ).css( pos ).offset().top;\n\t\t\t\tif ( topOffset < 0 ) {\n\t\t\t\t\t$( this ).css( \"top\", pos.top - topOffset );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresizable: true,\n\t\tshow: null,\n\t\ttitle: null,\n\t\twidth: 300,\n\n\t\t// Callbacks\n\t\tbeforeClose: null,\n\t\tclose: null,\n\t\tdrag: null,\n\t\tdragStart: null,\n\t\tdragStop: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresize: null,\n\t\tresizeStart: null,\n\t\tresizeStop: null\n\t},\n\n\tsizeRelatedOptions: {\n\t\tbuttons: true,\n\t\theight: true,\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true,\n\t\twidth: true\n\t},\n\n\tresizableRelatedOptions: {\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true\n\t},\n\n\t_create: function() {\n\t\tthis.originalCss = {\n\t\t\tdisplay: this.element[ 0 ].style.display,\n\t\t\twidth: this.element[ 0 ].style.width,\n\t\t\tminHeight: this.element[ 0 ].style.minHeight,\n\t\t\tmaxHeight: this.element[ 0 ].style.maxHeight,\n\t\t\theight: this.element[ 0 ].style.height\n\t\t};\n\t\tthis.originalPosition = {\n\t\t\tparent: this.element.parent(),\n\t\t\tindex: this.element.parent().children().index( this.element )\n\t\t};\n\t\tthis.originalTitle = this.element.attr( \"title\" );\n\t\tif ( this.options.title == null && this.originalTitle != null ) {\n\t\t\tthis.options.title = this.originalTitle;\n\t\t}\n\n\t\t// Dialogs can't be disabled\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.options.disabled = false;\n\t\t}\n\n\t\tthis._createWrapper();\n\n\t\tthis.element\n\t\t\t.show()\n\t\t\t.removeAttr( \"title\" )\n\t\t\t.appendTo( this.uiDialog );\n\n\t\tthis._addClass( \"ui-dialog-content\", \"ui-widget-content\" );\n\n\t\tthis._createTitlebar();\n\t\tthis._createButtonPane();\n\n\t\tif ( this.options.draggable && $.fn.draggable ) {\n\t\t\tthis._makeDraggable();\n\t\t}\n\t\tif ( this.options.resizable && $.fn.resizable ) {\n\t\t\tthis._makeResizable();\n\t\t}\n\n\t\tthis._isOpen = false;\n\n\t\tthis._trackFocus();\n\t},\n\n\t_init: function() {\n\t\tif ( this.options.autoOpen ) {\n\t\t\tthis.open();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\t\tif ( element && ( element.jquery || element.nodeType ) ) {\n\t\t\treturn $( element );\n\t\t}\n\t\treturn this.document.find( element || \"body\" ).eq( 0 );\n\t},\n\n\t_destroy: function() {\n\t\tvar next,\n\t\t\toriginalPosition = this.originalPosition;\n\n\t\tthis._untrackInstance();\n\t\tthis._destroyOverlay();\n\n\t\tthis.element\n\t\t\t.removeUniqueId()\n\t\t\t.css( this.originalCss )\n\n\t\t\t// Without detaching first, the following becomes really slow\n\t\t\t.detach();\n\n\t\tthis.uiDialog.remove();\n\n\t\tif ( this.originalTitle ) {\n\t\t\tthis.element.attr( \"title\", this.originalTitle );\n\t\t}\n\n\t\tnext = originalPosition.parent.children().eq( originalPosition.index );\n\n\t\t// Don't try to place the dialog next to itself (#8613)\n\t\tif ( next.length && next[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tnext.before( this.element );\n\t\t} else {\n\t\t\toriginalPosition.parent.append( this.element );\n\t\t}\n\t},\n\n\twidget: function() {\n\t\treturn this.uiDialog;\n\t},\n\n\tdisable: $.noop,\n\tenable: $.noop,\n\n\tclose: function( event ) {\n\t\tvar that = this;\n\n\t\tif ( !this._isOpen || this._trigger( \"beforeClose\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = false;\n\t\tthis._focusedElement = null;\n\t\tthis._destroyOverlay();\n\t\tthis._untrackInstance();\n\n\t\tif ( !this.opener.filter( \":focusable\" ).trigger( \"focus\" ).length ) {\n\n\t\t\t// Hiding a focused element doesn't trigger blur in WebKit\n\t\t\t// so in case we have nothing to focus on, explicitly blur the active element\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=47182\n\t\t\t$.ui.safeBlur( $.ui.safeActiveElement( this.document[ 0 ] ) );\n\t\t}\n\n\t\tthis._hide( this.uiDialog, this.options.hide, function() {\n\t\t\tthat._trigger( \"close\", event );\n\t\t} );\n\t},\n\n\tisOpen: function() {\n\t\treturn this._isOpen;\n\t},\n\n\tmoveToTop: function() {\n\t\tthis._moveToTop();\n\t},\n\n\t_moveToTop: function( event, silent ) {\n\t\tvar moved = false,\n\t\t\tzIndices = this.uiDialog.siblings( \".ui-front:visible\" ).map( function() {\n\t\t\t\treturn +$( this ).css( \"z-index\" );\n\t\t\t} ).get(),\n\t\t\tzIndexMax = Math.max.apply( null, zIndices );\n\n\t\tif ( zIndexMax >= +this.uiDialog.css( \"z-index\" ) ) {\n\t\t\tthis.uiDialog.css( \"z-index\", zIndexMax + 1 );\n\t\t\tmoved = true;\n\t\t}\n\n\t\tif ( moved && !silent ) {\n\t\t\tthis._trigger( \"focus\", event );\n\t\t}\n\t\treturn moved;\n\t},\n\n\topen: function() {\n\t\tvar that = this;\n\t\tif ( this._isOpen ) {\n\t\t\tif ( this._moveToTop() ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = true;\n\t\tthis.opener = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\n\n\t\tthis._size();\n\t\tthis._position();\n\t\tthis._createOverlay();\n\t\tthis._moveToTop( null, true );\n\n\t\t// Ensure the overlay is moved to the top with the dialog, but only when\n\t\t// opening. The overlay shouldn't move after the dialog is open so that\n\t\t// modeless dialogs opened after the modal dialog stack properly.\n\t\tif ( this.overlay ) {\n\t\t\tthis.overlay.css( \"z-index\", this.uiDialog.css( \"z-index\" ) - 1 );\n\t\t}\n\n\t\tthis._show( this.uiDialog, this.options.show, function() {\n\t\t\tthat._focusTabbable();\n\t\t\tthat._trigger( \"focus\" );\n\t\t} );\n\n\t\t// Track the dialog immediately upon openening in case a focus event\n\t\t// somehow occurs outside of the dialog before an element inside the\n\t\t// dialog is focused (#10152)\n\t\tthis._makeFocusTarget();\n\n\t\tthis._trigger( \"open\" );\n\t},\n\n\t_focusTabbable: function() {\n\n\t\t// Set focus to the first match:\n\t\t// 1. An element that was focused previously\n\t\t// 2. First element inside the dialog matching [autofocus]\n\t\t// 3. Tabbable element inside the content element\n\t\t// 4. Tabbable element inside the buttonpane\n\t\t// 5. The close button\n\t\t// 6. The dialog itself\n\t\tvar hasFocus = this._focusedElement;\n\t\tif ( !hasFocus ) {\n\t\t\thasFocus = this.element.find( \"[autofocus]\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.element.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogButtonPane.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogTitlebarClose.filter( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialog;\n\t\t}\n\t\thasFocus.eq( 0 ).trigger( \"focus\" );\n\t},\n\n\t_keepFocus: function( event ) {\n\t\tfunction checkFocus() {\n\t\t\tvar activeElement = $.ui.safeActiveElement( this.document[ 0 ] ),\n\t\t\t\tisActive = this.uiDialog[ 0 ] === activeElement ||\n\t\t\t\t\t$.contains( this.uiDialog[ 0 ], activeElement );\n\t\t\tif ( !isActive ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t}\n\t\tevent.preventDefault();\n\t\tcheckFocus.call( this );\n\n\t\t// support: IE\n\t\t// IE <= 8 doesn't prevent moving focus even with event.preventDefault()\n\t\t// so we check again later\n\t\tthis._delay( checkFocus );\n\t},\n\n\t_createWrapper: function() {\n\t\tthis.uiDialog = $( \"<div>\" )\n\t\t\t.hide()\n\t\t\t.attr( {\n\n\t\t\t\t// Setting tabIndex makes the div focusable\n\t\t\t\ttabIndex: -1,\n\t\t\t\trole: \"dialog\"\n\t\t\t} )\n\t\t\t.appendTo( this._appendTo() );\n\n\t\tthis._addClass( this.uiDialog, \"ui-dialog\", \"ui-widget ui-widget-content ui-front\" );\n\t\tthis._on( this.uiDialog, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\n\t\t\t\t\t\tevent.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.close( event );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Prevent tabbing out of dialogs\n\t\t\t\tif ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar tabbables = this.uiDialog.find( \":tabbable\" ),\n\t\t\t\t\tfirst = tabbables.filter( \":first\" ),\n\t\t\t\t\tlast = tabbables.filter( \":last\" );\n\n\t\t\t\tif ( ( event.target === last[ 0 ] || event.target === this.uiDialog[ 0 ] ) &&\n\t\t\t\t\t\t!event.shiftKey ) {\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tfirst.trigger( \"focus\" );\n\t\t\t\t\t} );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} else if ( ( event.target === first[ 0 ] ||\n\t\t\t\t\t\tevent.target === this.uiDialog[ 0 ] ) && event.shiftKey ) {\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tlast.trigger( \"focus\" );\n\t\t\t\t\t} );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmousedown: function( event ) {\n\t\t\t\tif ( this._moveToTop( event ) ) {\n\t\t\t\t\tthis._focusTabbable();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// We assume that any existing aria-describedby attribute means\n\t\t// that the dialog content is marked up properly\n\t\t// otherwise we brute force the content as the description\n\t\tif ( !this.element.find( \"[aria-describedby]\" ).length ) {\n\t\t\tthis.uiDialog.attr( {\n\t\t\t\t\"aria-describedby\": this.element.uniqueId().attr( \"id\" )\n\t\t\t} );\n\t\t}\n\t},\n\n\t_createTitlebar: function() {\n\t\tvar uiDialogTitle;\n\n\t\tthis.uiDialogTitlebar = $( \"<div>\" );\n\t\tthis._addClass( this.uiDialogTitlebar,\n\t\t\t\"ui-dialog-titlebar\", \"ui-widget-header ui-helper-clearfix\" );\n\t\tthis._on( this.uiDialogTitlebar, {\n\t\t\tmousedown: function( event ) {\n\n\t\t\t\t// Don't prevent click on close button (#8838)\n\t\t\t\t// Focusing a dialog that is partially scrolled out of view\n\t\t\t\t// causes the browser to scroll it into view, preventing the click event\n\t\t\t\tif ( !$( event.target ).closest( \".ui-dialog-titlebar-close\" ) ) {\n\n\t\t\t\t\t// Dialog isn't getting focus when dragging (#8063)\n\t\t\t\t\tthis.uiDialog.trigger( \"focus\" );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Support: IE\n\t\t// Use type=\"button\" to prevent enter keypresses in textboxes from closing the\n\t\t// dialog in IE (#9312)\n\t\tthis.uiDialogTitlebarClose = $( \"<button type='button'></button>\" )\n\t\t\t.button( {\n\t\t\t\tlabel: $( \"<a>\" ).text( this.options.closeText ).html(),\n\t\t\t\ticon: \"ui-icon-closethick\",\n\t\t\t\tshowLabel: false\n\t\t\t} )\n\t\t\t.appendTo( this.uiDialogTitlebar );\n\n\t\tthis._addClass( this.uiDialogTitlebarClose, \"ui-dialog-titlebar-close\" );\n\t\tthis._on( this.uiDialogTitlebarClose, {\n\t\t\tclick: function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t} );\n\n\t\tuiDialogTitle = $( \"<span>\" ).uniqueId().prependTo( this.uiDialogTitlebar );\n\t\tthis._addClass( uiDialogTitle, \"ui-dialog-title\" );\n\t\tthis._title( uiDialogTitle );\n\n\t\tthis.uiDialogTitlebar.prependTo( this.uiDialog );\n\n\t\tthis.uiDialog.attr( {\n\t\t\t\"aria-labelledby\": uiDialogTitle.attr( \"id\" )\n\t\t} );\n\t},\n\n\t_title: function( title ) {\n\t\tif ( this.options.title ) {\n\t\t\ttitle.text( this.options.title );\n\t\t} else {\n\t\t\ttitle.html( \"&#160;\" );\n\t\t}\n\t},\n\n\t_createButtonPane: function() {\n\t\tthis.uiDialogButtonPane = $( \"<div>\" );\n\t\tthis._addClass( this.uiDialogButtonPane, \"ui-dialog-buttonpane\",\n\t\t\t\"ui-widget-content ui-helper-clearfix\" );\n\n\t\tthis.uiButtonSet = $( \"<div>\" )\n\t\t\t.appendTo( this.uiDialogButtonPane );\n\t\tthis._addClass( this.uiButtonSet, \"ui-dialog-buttonset\" );\n\n\t\tthis._createButtons();\n\t},\n\n\t_createButtons: function() {\n\t\tvar that = this,\n\t\t\tbuttons = this.options.buttons;\n\n\t\t// If we already have a button pane, remove it\n\t\tthis.uiDialogButtonPane.remove();\n\t\tthis.uiButtonSet.empty();\n\n\t\tif ( $.isEmptyObject( buttons ) || ( $.isArray( buttons ) && !buttons.length ) ) {\n\t\t\tthis._removeClass( this.uiDialog, \"ui-dialog-buttons\" );\n\t\t\treturn;\n\t\t}\n\n\t\t$.each( buttons, function( name, props ) {\n\t\t\tvar click, buttonOptions;\n\t\t\tprops = $.isFunction( props ) ?\n\t\t\t\t{ click: props, text: name } :\n\t\t\t\tprops;\n\n\t\t\t// Default to a non-submitting button\n\t\t\tprops = $.extend( { type: \"button\" }, props );\n\n\t\t\t// Change the context for the click callback to be the main element\n\t\t\tclick = props.click;\n\t\t\tbuttonOptions = {\n\t\t\t\ticon: props.icon,\n\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\tshowLabel: props.showLabel,\n\n\t\t\t\t// Deprecated options\n\t\t\t\ticons: props.icons,\n\t\t\t\ttext: props.text\n\t\t\t};\n\n\t\t\tdelete props.click;\n\t\t\tdelete props.icon;\n\t\t\tdelete props.iconPosition;\n\t\t\tdelete props.showLabel;\n\n\t\t\t// Deprecated options\n\t\t\tdelete props.icons;\n\t\t\tif ( typeof props.text === \"boolean\" ) {\n\t\t\t\tdelete props.text;\n\t\t\t}\n\n\t\t\t$( \"<button></button>\", props )\n\t\t\t\t.button( buttonOptions )\n\t\t\t\t.appendTo( that.uiButtonSet )\n\t\t\t\t.on( \"click\", function() {\n\t\t\t\t\tclick.apply( that.element[ 0 ], arguments );\n\t\t\t\t} );\n\t\t} );\n\t\tthis._addClass( this.uiDialog, \"ui-dialog-buttons\" );\n\t\tthis.uiDialogButtonPane.appendTo( this.uiDialog );\n\t},\n\n\t_makeDraggable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\tposition: ui.position,\n\t\t\t\toffset: ui.offset\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.draggable( {\n\t\t\tcancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\n\t\t\thandle: \".ui-dialog-titlebar\",\n\t\t\tcontainment: \"document\",\n\t\t\tstart: function( event, ui ) {\n\t\t\t\tthat._addClass( $( this ), \"ui-dialog-dragging\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"dragStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tdrag: function( event, ui ) {\n\t\t\t\tthat._trigger( \"drag\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar left = ui.offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = ui.offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + ( left >= 0 ? \"+\" : \"\" ) + left + \" \" +\n\t\t\t\t\t\t\"top\" + ( top >= 0 ? \"+\" : \"\" ) + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\tthat._removeClass( $( this ), \"ui-dialog-dragging\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"dragStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_makeResizable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options,\n\t\t\thandles = options.resizable,\n\n\t\t\t// .ui-resizable has position: relative defined in the stylesheet\n\t\t\t// but dialogs have to use absolute or fixed positioning\n\t\t\tposition = this.uiDialog.css( \"position\" ),\n\t\t\tresizeHandles = typeof handles === \"string\" ?\n\t\t\t\thandles :\n\t\t\t\t\"n,e,s,w,se,sw,ne,nw\";\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\toriginalPosition: ui.originalPosition,\n\t\t\t\toriginalSize: ui.originalSize,\n\t\t\t\tposition: ui.position,\n\t\t\t\tsize: ui.size\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.resizable( {\n\t\t\tcancel: \".ui-dialog-content\",\n\t\t\tcontainment: \"document\",\n\t\t\talsoResize: this.element,\n\t\t\tmaxWidth: options.maxWidth,\n\t\t\tmaxHeight: options.maxHeight,\n\t\t\tminWidth: options.minWidth,\n\t\t\tminHeight: this._minHeight(),\n\t\t\thandles: resizeHandles,\n\t\t\tstart: function( event, ui ) {\n\t\t\t\tthat._addClass( $( this ), \"ui-dialog-resizing\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"resizeStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tresize: function( event, ui ) {\n\t\t\t\tthat._trigger( \"resize\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar offset = that.uiDialog.offset(),\n\t\t\t\t\tleft = offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.height = that.uiDialog.height();\n\t\t\t\toptions.width = that.uiDialog.width();\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + ( left >= 0 ? \"+\" : \"\" ) + left + \" \" +\n\t\t\t\t\t\t\"top\" + ( top >= 0 ? \"+\" : \"\" ) + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\tthat._removeClass( $( this ), \"ui-dialog-resizing\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"resizeStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t} )\n\t\t\t.css( \"position\", position );\n\t},\n\n\t_trackFocus: function() {\n\t\tthis._on( this.widget(), {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._makeFocusTarget();\n\t\t\t\tthis._focusedElement = $( event.target );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_makeFocusTarget: function() {\n\t\tthis._untrackInstance();\n\t\tthis._trackingInstances().unshift( this );\n\t},\n\n\t_untrackInstance: function() {\n\t\tvar instances = this._trackingInstances(),\n\t\t\texists = $.inArray( this, instances );\n\t\tif ( exists !== -1 ) {\n\t\t\tinstances.splice( exists, 1 );\n\t\t}\n\t},\n\n\t_trackingInstances: function() {\n\t\tvar instances = this.document.data( \"ui-dialog-instances\" );\n\t\tif ( !instances ) {\n\t\t\tinstances = [];\n\t\t\tthis.document.data( \"ui-dialog-instances\", instances );\n\t\t}\n\t\treturn instances;\n\t},\n\n\t_minHeight: function() {\n\t\tvar options = this.options;\n\n\t\treturn options.height === \"auto\" ?\n\t\t\toptions.minHeight :\n\t\t\tMath.min( options.minHeight, options.height );\n\t},\n\n\t_position: function() {\n\n\t\t// Need to show the dialog to get the actual offset in the position plugin\n\t\tvar isVisible = this.uiDialog.is( \":visible\" );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.show();\n\t\t}\n\t\tthis.uiDialog.position( this.options.position );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.hide();\n\t\t}\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar that = this,\n\t\t\tresize = false,\n\t\t\tresizableOptions = {};\n\n\t\t$.each( options, function( key, value ) {\n\t\t\tthat._setOption( key, value );\n\n\t\t\tif ( key in that.sizeRelatedOptions ) {\n\t\t\t\tresize = true;\n\t\t\t}\n\t\t\tif ( key in that.resizableRelatedOptions ) {\n\t\t\t\tresizableOptions[ key ] = value;\n\t\t\t}\n\t\t} );\n\n\t\tif ( resize ) {\n\t\t\tthis._size();\n\t\t\tthis._position();\n\t\t}\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", resizableOptions );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar isDraggable, isResizable,\n\t\t\tuiDialog = this.uiDialog;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.uiDialog.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"buttons\" ) {\n\t\t\tthis._createButtons();\n\t\t}\n\n\t\tif ( key === \"closeText\" ) {\n\t\t\tthis.uiDialogTitlebarClose.button( {\n\n\t\t\t\t// Ensure that we always pass a string\n\t\t\t\tlabel: $( \"<a>\" ).text( \"\" + this.options.closeText ).html()\n\t\t\t} );\n\t\t}\n\n\t\tif ( key === \"draggable\" ) {\n\t\t\tisDraggable = uiDialog.is( \":data(ui-draggable)\" );\n\t\t\tif ( isDraggable && !value ) {\n\t\t\t\tuiDialog.draggable( \"destroy\" );\n\t\t\t}\n\n\t\t\tif ( !isDraggable && value ) {\n\t\t\t\tthis._makeDraggable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"position\" ) {\n\t\t\tthis._position();\n\t\t}\n\n\t\tif ( key === \"resizable\" ) {\n\n\t\t\t// currently resizable, becoming non-resizable\n\t\t\tisResizable = uiDialog.is( \":data(ui-resizable)\" );\n\t\t\tif ( isResizable && !value ) {\n\t\t\t\tuiDialog.resizable( \"destroy\" );\n\t\t\t}\n\n\t\t\t// Currently resizable, changing handles\n\t\t\tif ( isResizable && typeof value === \"string\" ) {\n\t\t\t\tuiDialog.resizable( \"option\", \"handles\", value );\n\t\t\t}\n\n\t\t\t// Currently non-resizable, becoming resizable\n\t\t\tif ( !isResizable && value !== false ) {\n\t\t\t\tthis._makeResizable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"title\" ) {\n\t\t\tthis._title( this.uiDialogTitlebar.find( \".ui-dialog-title\" ) );\n\t\t}\n\t},\n\n\t_size: function() {\n\n\t\t// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\n\t\t// divs will both have width and height set, so we need to reset them\n\t\tvar nonContentHeight, minContentHeight, maxContentHeight,\n\t\t\toptions = this.options;\n\n\t\t// Reset content sizing\n\t\tthis.element.show().css( {\n\t\t\twidth: \"auto\",\n\t\t\tminHeight: 0,\n\t\t\tmaxHeight: \"none\",\n\t\t\theight: 0\n\t\t} );\n\n\t\tif ( options.minWidth > options.width ) {\n\t\t\toptions.width = options.minWidth;\n\t\t}\n\n\t\t// Reset wrapper sizing\n\t\t// determine the height of all the non-content elements\n\t\tnonContentHeight = this.uiDialog.css( {\n\t\t\theight: \"auto\",\n\t\t\twidth: options.width\n\t\t} )\n\t\t\t.outerHeight();\n\t\tminContentHeight = Math.max( 0, options.minHeight - nonContentHeight );\n\t\tmaxContentHeight = typeof options.maxHeight === \"number\" ?\n\t\t\tMath.max( 0, options.maxHeight - nonContentHeight ) :\n\t\t\t\"none\";\n\n\t\tif ( options.height === \"auto\" ) {\n\t\t\tthis.element.css( {\n\t\t\t\tminHeight: minContentHeight,\n\t\t\t\tmaxHeight: maxContentHeight,\n\t\t\t\theight: \"auto\"\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.element.height( Math.max( 0, options.height - nonContentHeight ) );\n\t\t}\n\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", \"minHeight\", this._minHeight() );\n\t\t}\n\t},\n\n\t_blockFrames: function() {\n\t\tthis.iframeBlocks = this.document.find( \"iframe\" ).map( function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\twidth: iframe.outerWidth(),\n\t\t\t\t\theight: iframe.outerHeight()\n\t\t\t\t} )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t} );\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_allowInteraction: function( event ) {\n\t\tif ( $( event.target ).closest( \".ui-dialog\" ).length ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: Remove hack when datepicker implements\n\t\t// the .ui-front logic (#8989)\n\t\treturn !!$( event.target ).closest( \".ui-datepicker\" ).length;\n\t},\n\n\t_createOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We use a delay in case the overlay is created from an\n\t\t// event that we're going to be cancelling (#2804)\n\t\tvar isOpening = true;\n\t\tthis._delay( function() {\n\t\t\tisOpening = false;\n\t\t} );\n\n\t\tif ( !this.document.data( \"ui-dialog-overlays\" ) ) {\n\n\t\t\t// Prevent use of anchors and inputs\n\t\t\t// Using _on() for an event handler shared across many instances is\n\t\t\t// safe because the dialogs stack and must be closed in reverse order\n\t\t\tthis._on( this.document, {\n\t\t\t\tfocusin: function( event ) {\n\t\t\t\t\tif ( isOpening ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !this._allowInteraction( event ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis._trackingInstances()[ 0 ]._focusTabbable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tthis.overlay = $( \"<div>\" )\n\t\t\t.appendTo( this._appendTo() );\n\n\t\tthis._addClass( this.overlay, null, \"ui-widget-overlay ui-front\" );\n\t\tthis._on( this.overlay, {\n\t\t\tmousedown: \"_keepFocus\"\n\t\t} );\n\t\tthis.document.data( \"ui-dialog-overlays\",\n\t\t\t( this.document.data( \"ui-dialog-overlays\" ) || 0 ) + 1 );\n\t},\n\n\t_destroyOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.overlay ) {\n\t\t\tvar overlays = this.document.data( \"ui-dialog-overlays\" ) - 1;\n\n\t\t\tif ( !overlays ) {\n\t\t\t\tthis._off( this.document, \"focusin\" );\n\t\t\t\tthis.document.removeData( \"ui-dialog-overlays\" );\n\t\t\t} else {\n\t\t\t\tthis.document.data( \"ui-dialog-overlays\", overlays );\n\t\t\t}\n\n\t\t\tthis.overlay.remove();\n\t\t\tthis.overlay = null;\n\t\t}\n\t}\n} );\n\n// DEPRECATED\n// TODO: switch return back to widget declaration at top of file when this is removed\nif ( $.uiBackCompat !== false ) {\n\n\t// Backcompat for dialogClass option\n\t$.widget( \"ui.dialog\", $.ui.dialog, {\n\t\toptions: {\n\t\t\tdialogClass: \"\"\n\t\t},\n\t\t_createWrapper: function() {\n\t\t\tthis._super();\n\t\t\tthis.uiDialog.addClass( this.options.dialogClass );\n\t\t},\n\t\t_setOption: function( key, value ) {\n\t\t\tif ( key === \"dialogClass\" ) {\n\t\t\t\tthis.uiDialog\n\t\t\t\t\t.removeClass( this.options.dialogClass )\n\t\t\t\t\t.addClass( value );\n\t\t\t}\n\t\t\tthis._superApply( arguments );\n\t\t}\n\t} );\n}\n\nreturn $.ui.dialog;\n\n} ) );\n","/*!\n * jQuery UI Draggable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Draggable\n//>>group: Interactions\n//>>description: Enables dragging functionality for any element.\n//>>docs: http://api.jqueryui.com/draggable/\n//>>demos: http://jqueryui.com/draggable/\n//>>css.structure: ../../themes/base/draggable.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../data\",\n\t\t\t\"../plugin\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../safe-blur\",\n\t\t\t\"../scroll-parent\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.draggable\", $.ui.mouse, {\n\tversion: \"1.12.1\",\n\twidgetEventPrefix: \"drag\",\n\toptions: {\n\t\taddClasses: true,\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectToSortable: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\tiframeFix: false,\n\t\topacity: false,\n\t\trefreshPositions: false,\n\t\trevert: false,\n\t\trevertDuration: 500,\n\t\tscope: \"default\",\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tsnap: false,\n\t\tsnapMode: \"both\",\n\t\tsnapTolerance: 20,\n\t\tstack: false,\n\t\tzIndex: false,\n\n\t\t// Callbacks\n\t\tdrag: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\t_create: function() {\n\n\t\tif ( this.options.helper === \"original\" ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\t\tif ( this.options.addClasses ) {\n\t\t\tthis._addClass( \"ui-draggable\" );\n\t\t}\n\t\tthis._setHandleClassName();\n\n\t\tthis._mouseInit();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._removeHandleClassName();\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tif ( ( this.helper || this.element ).is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis.destroyOnClear = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._removeHandleClassName();\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar o = this.options;\n\n\t\t// Among others, prevent a drag on a resizable-handle\n\t\tif ( this.helper || o.disabled ||\n\t\t\t\t$( event.target ).closest( \".ui-resizable-handle\" ).length > 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//Quit if we're not on a valid handle\n\t\tthis.handle = this._getHandle( event );\n\t\tif ( !this.handle ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._blurActiveElement( event );\n\n\t\tthis._blockFrames( o.iframeFix === true ? \"iframe\" : o.iframeFix );\n\n\t\treturn true;\n\n\t},\n\n\t_blockFrames: function( selector ) {\n\t\tthis.iframeBlocks = this.document.find( selector ).map( function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.outerWidth( iframe.outerWidth() )\n\t\t\t\t.outerHeight( iframe.outerHeight() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t} );\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_blurActiveElement: function( event ) {\n\t\tvar activeElement = $.ui.safeActiveElement( this.document[ 0 ] ),\n\t\t\ttarget = $( event.target );\n\n\t\t// Don't blur if the event occurred on an element that is within\n\t\t// the currently focused element\n\t\t// See #10527, #12472\n\t\tif ( target.closest( activeElement ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Blur any element that currently has focus, see #4261\n\t\t$.ui.safeBlur( activeElement );\n\t},\n\n\t_mouseStart: function( event ) {\n\n\t\tvar o = this.options;\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper( event );\n\n\t\tthis._addClass( this.helper, \"ui-draggable-dragging\" );\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//If ddmanager is used for droppables, set the global draggable\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Store the helper's css position\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\t\tthis.scrollParent = this.helper.scrollParent( true );\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tthis.hasFixedAncestor = this.helper.parents().filter( function() {\n\t\t\t\treturn $( this ).css( \"position\" ) === \"fixed\";\n\t\t\t} ).length > 0;\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.positionAbs = this.element.offset();\n\t\tthis._refreshOffsets( event );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this.position = this._generatePosition( event, false );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t( o.cursorAt && this._adjustOffsetFromHelper( o.cursorAt ) );\n\n\t\t//Set a containment if given in the options\n\t\tthis._setContainment();\n\n\t\t//Trigger event + callbacks\n\t\tif ( this._trigger( \"start\", event ) === false ) {\n\t\t\tthis._clear();\n\t\t\treturn false;\n\t\t}\n\n\t\t//Recache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//Prepare the droppable offsets\n\t\tif ( $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( this, event );\n\t\t}\n\n\t\t// Execute the drag once - this causes the helper not to be visible before getting its\n\t\t// correct position\n\t\tthis._mouseDrag( event, true );\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has started\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStart( this, event );\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_refreshOffsets: function( event ) {\n\t\tthis.offset = {\n\t\t\ttop: this.positionAbs.top - this.margins.top,\n\t\t\tleft: this.positionAbs.left - this.margins.left,\n\t\t\tscroll: false,\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset()\n\t\t};\n\n\t\tthis.offset.click = {\n\t\t\tleft: event.pageX - this.offset.left,\n\t\t\ttop: event.pageY - this.offset.top\n\t\t};\n\t},\n\n\t_mouseDrag: function( event, noPropagation ) {\n\n\t\t// reset any necessary cached properties (see #5009)\n\t\tif ( this.hasFixedAncestor ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event, true );\n\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\n\t\tif ( !noPropagation ) {\n\t\t\tvar ui = this._uiHash();\n\t\t\tif ( this._trigger( \"drag\", event, ui ) === false ) {\n\t\t\t\tthis._mouseUp( new $.Event( \"mouseup\", event ) );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.position = ui.position;\n\t\t}\n\n\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.drag( this, event );\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tvar that = this,\n\t\t\tdropped = false;\n\t\tif ( $.ui.ddmanager && !this.options.dropBehaviour ) {\n\t\t\tdropped = $.ui.ddmanager.drop( this, event );\n\t\t}\n\n\t\t//if a drop comes from outside (a sortable)\n\t\tif ( this.dropped ) {\n\t\t\tdropped = this.dropped;\n\t\t\tthis.dropped = false;\n\t\t}\n\n\t\tif ( ( this.options.revert === \"invalid\" && !dropped ) ||\n\t\t\t\t( this.options.revert === \"valid\" && dropped ) ||\n\t\t\t\tthis.options.revert === true || ( $.isFunction( this.options.revert ) &&\n\t\t\t\tthis.options.revert.call( this.element, dropped ) )\n\t\t) {\n\t\t\t$( this.helper ).animate(\n\t\t\t\tthis.originalPosition,\n\t\t\t\tparseInt( this.options.revertDuration, 10 ),\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( that._trigger( \"stop\", event ) !== false ) {\n\t\t\t\t\t\tthat._clear();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tif ( this._trigger( \"stop\", event ) !== false ) {\n\t\t\t\tthis._clear();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis._unblockFrames();\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has stopped\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStop( this, event );\n\t\t}\n\n\t\t// Only need to focus if the event occurred on the draggable itself, see #10527\n\t\tif ( this.handleElement.is( event.target ) ) {\n\n\t\t\t// The interaction is over; whether or not the click resulted in a drag,\n\t\t\t// focus the element\n\t\t\tthis.element.trigger( \"focus\" );\n\t\t}\n\n\t\treturn $.ui.mouse.prototype._mouseUp.call( this, event );\n\t},\n\n\tcancel: function() {\n\n\t\tif ( this.helper.is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis._mouseUp( new $.Event( \"mouseup\", { target: this.element[ 0 ] } ) );\n\t\t} else {\n\t\t\tthis._clear();\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t_getHandle: function( event ) {\n\t\treturn this.options.handle ?\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\n\t\t\ttrue;\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.handleElement = this.options.handle ?\n\t\t\tthis.element.find( this.options.handle ) : this.element;\n\t\tthis._addClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_removeHandleClassName: function() {\n\t\tthis._removeClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_createHelper: function( event ) {\n\n\t\tvar o = this.options,\n\t\t\thelperIsFunction = $.isFunction( o.helper ),\n\t\t\thelper = helperIsFunction ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ?\n\t\t\t\t\tthis.element.clone().removeAttr( \"id\" ) :\n\t\t\t\t\tthis.element );\n\n\t\tif ( !helper.parents( \"body\" ).length ) {\n\t\t\thelper.appendTo( ( o.appendTo === \"parent\" ?\n\t\t\t\tthis.element[ 0 ].parentNode :\n\t\t\t\to.appendTo ) );\n\t\t}\n\n\t\t// Http://bugs.jqueryui.com/ticket/9446\n\t\t// a helper function can return the original element\n\t\t// which wouldn't have been set to relative in _create\n\t\tif ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\n\t\tif ( helper[ 0 ] !== this.element[ 0 ] &&\n\t\t\t\t!( /(fixed|absolute)/ ).test( helper.css( \"position\" ) ) ) {\n\t\t\thelper.css( \"position\", \"absolute\" );\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_setPositionRelative: function() {\n\t\tif ( !( /^(?:r|a|f)/ ).test( this.element.css( \"position\" ) ) ) {\n\t\t\tthis.element[ 0 ].style.position = \"relative\";\n\t\t}\n\t},\n\n\t_adjustOffsetFromHelper: function( obj ) {\n\t\tif ( typeof obj === \"string\" ) {\n\t\t\tobj = obj.split( \" \" );\n\t\t}\n\t\tif ( $.isArray( obj ) ) {\n\t\t\tobj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };\n\t\t}\n\t\tif ( \"left\" in obj ) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif ( \"right\" in obj ) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif ( \"top\" in obj ) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif ( \"bottom\" in obj ) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_isRootNode: function( element ) {\n\t\treturn ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tvar po = this.offsetParent.offset(),\n\t\t\tdocument = this.document[ 0 ];\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the\n\t\t// following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the\n\t\t// next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't\n\t\t// the document, which means that the scroll is included in the initial calculation of the\n\t\t// offset of the parent, and never recalculated upon drag\n\t\tif ( this.cssPosition === \"absolute\" && this.scrollParent[ 0 ] !== document &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif ( this._isRootNode( this.offsetParent[ 0 ] ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + ( parseInt( this.offsetParent.css( \"borderTopWidth\" ), 10 ) || 0 ),\n\t\t\tleft: po.left + ( parseInt( this.offsetParent.css( \"borderLeftWidth\" ), 10 ) || 0 )\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\t\tif ( this.cssPosition !== \"relative\" ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\tvar p = this.element.position(),\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: p.top - ( parseInt( this.helper.css( \"top\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),\n\t\t\tleft: p.left - ( parseInt( this.helper.css( \"left\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )\n\t\t};\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: ( parseInt( this.element.css( \"marginLeft\" ), 10 ) || 0 ),\n\t\t\ttop: ( parseInt( this.element.css( \"marginTop\" ), 10 ) || 0 ),\n\t\t\tright: ( parseInt( this.element.css( \"marginRight\" ), 10 ) || 0 ),\n\t\t\tbottom: ( parseInt( this.element.css( \"marginBottom\" ), 10 ) || 0 )\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar isUserScrollable, c, ce,\n\t\t\to = this.options,\n\t\t\tdocument = this.document[ 0 ];\n\n\t\tthis.relativeContainer = null;\n\n\t\tif ( !o.containment ) {\n\t\t\tthis.containment = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t$( window ).scrollLeft() + $( window ).width() -\n\t\t\t\t\tthis.helperProportions.width - this.margins.left,\n\t\t\t\t$( window ).scrollTop() +\n\t\t\t\t\t( $( window ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"document\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t$( document ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( $( document ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment.constructor === Array ) {\n\t\t\tthis.containment = o.containment;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\n\t\tc = $( o.containment );\n\t\tce = c[ 0 ];\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tisUserScrollable = /(scroll|auto)/.test( c.css( \"overflow\" ) );\n\n\t\tthis.containment = [\n\t\t\t( parseInt( c.css( \"borderLeftWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingLeft\" ), 10 ) || 0 ),\n\t\t\t( parseInt( c.css( \"borderTopWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingTop\" ), 10 ) || 0 ),\n\t\t\t( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t( parseInt( c.css( \"borderRightWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.width -\n\t\t\t\tthis.margins.left -\n\t\t\t\tthis.margins.right,\n\t\t\t( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t( parseInt( c.css( \"borderBottomWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.height -\n\t\t\t\tthis.margins.top -\n\t\t\t\tthis.margins.bottom\n\t\t];\n\t\tthis.relativeContainer = c;\n\t},\n\n\t_convertPositionTo: function( d, pos ) {\n\n\t\tif ( !pos ) {\n\t\t\tpos = this.position;\n\t\t}\n\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.top\t+\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top * mod -\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.left +\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left * mod\t-\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event, constrainPosition ) {\n\n\t\tvar containment, co, top, left,\n\t\t\to = this.options,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY;\n\n\t\t// Cache the scroll\n\t\tif ( !scrollIsRootNode || !this.offset.scroll ) {\n\t\t\tthis.offset.scroll = {\n\t\t\t\ttop: this.scrollParent.scrollTop(),\n\t\t\t\tleft: this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\t// If we are not dragging yet, we won't check for options\n\t\tif ( constrainPosition ) {\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( this.relativeContainer ) {\n\t\t\t\t\tco = this.relativeContainer.offset();\n\t\t\t\t\tcontainment = [\n\t\t\t\t\t\tthis.containment[ 0 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 1 ] + co.top,\n\t\t\t\t\t\tthis.containment[ 2 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 3 ] + co.top\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcontainment = this.containment;\n\t\t\t\t}\n\n\t\t\t\tif ( event.pageX - this.offset.click.left < containment[ 0 ] ) {\n\t\t\t\t\tpageX = containment[ 0 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top < containment[ 1 ] ) {\n\t\t\t\t\tpageY = containment[ 1 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif ( event.pageX - this.offset.click.left > containment[ 2 ] ) {\n\t\t\t\t\tpageX = containment[ 2 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top > containment[ 3 ] ) {\n\t\t\t\t\tpageY = containment[ 3 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.grid ) {\n\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid\n\t\t\t\t// argument errors in IE (see ticket #6950)\n\t\t\t\ttop = o.grid[ 1 ] ? this.originalPageY + Math.round( ( pageY -\n\t\t\t\t\tthis.originalPageY ) / o.grid[ 1 ] ) * o.grid[ 1 ] : this.originalPageY;\n\t\t\t\tpageY = containment ? ( ( top - this.offset.click.top >= containment[ 1 ] ||\n\t\t\t\t\ttop - this.offset.click.top > containment[ 3 ] ) ?\n\t\t\t\t\t\ttop :\n\t\t\t\t\t\t( ( top - this.offset.click.top >= containment[ 1 ] ) ?\n\t\t\t\t\t\t\ttop - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) : top;\n\n\t\t\t\tleft = o.grid[ 0 ] ? this.originalPageX +\n\t\t\t\t\tMath.round( ( pageX - this.originalPageX ) / o.grid[ 0 ] ) * o.grid[ 0 ] :\n\t\t\t\t\tthis.originalPageX;\n\t\t\t\tpageX = containment ? ( ( left - this.offset.click.left >= containment[ 0 ] ||\n\t\t\t\t\tleft - this.offset.click.left > containment[ 2 ] ) ?\n\t\t\t\t\t\tleft :\n\t\t\t\t\t\t( ( left - this.offset.click.left >= containment[ 0 ] ) ?\n\t\t\t\t\t\t\tleft - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) : left;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"y\" ) {\n\t\t\t\tpageX = this.originalPageX;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"x\" ) {\n\t\t\t\tpageY = this.originalPageY;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageY -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.top -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageX -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.left -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_clear: function() {\n\t\tthis._removeClass( this.helper, \"ui-draggable-dragging\" );\n\t\tif ( this.helper[ 0 ] !== this.element[ 0 ] && !this.cancelHelperRemoval ) {\n\t\t\tthis.helper.remove();\n\t\t}\n\t\tthis.helper = null;\n\t\tthis.cancelHelperRemoval = false;\n\t\tif ( this.destroyOnClear ) {\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\n\t// From now on bulk stuff - mainly helpers\n\n\t_trigger: function( type, event, ui ) {\n\t\tui = ui || this._uiHash();\n\t\t$.ui.plugin.call( this, type, [ event, ui, this ], true );\n\n\t\t// Absolute position and offset (see #6884 ) have to be recalculated after plugins\n\t\tif ( /^(drag|start|stop)/.test( type ) ) {\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\t\t\tui.offset = this.positionAbs;\n\t\t}\n\t\treturn $.Widget.prototype._trigger.call( this, type, event, ui );\n\t},\n\n\tplugins: {},\n\n\t_uiHash: function() {\n\t\treturn {\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\toriginalPosition: this.originalPosition,\n\t\t\toffset: this.positionAbs\n\t\t};\n\t}\n\n} );\n\n$.ui.plugin.add( \"draggable\", \"connectToSortable\", {\n\tstart: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.sortables = [];\n\t\t$( draggable.options.connectToSortable ).each( function() {\n\t\t\tvar sortable = $( this ).sortable( \"instance\" );\n\n\t\t\tif ( sortable && !sortable.options.disabled ) {\n\t\t\t\tdraggable.sortables.push( sortable );\n\n\t\t\t\t// RefreshPositions is called at drag start to refresh the containerCache\n\t\t\t\t// which is used in drag. This ensures it's initialized and synchronized\n\t\t\t\t// with any changes that might have happened on the page since initialization.\n\t\t\t\tsortable.refreshPositions();\n\t\t\t\tsortable._trigger( \"activate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tstop: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.cancelHelperRemoval = false;\n\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar sortable = this;\n\n\t\t\tif ( sortable.isOver ) {\n\t\t\t\tsortable.isOver = 0;\n\n\t\t\t\t// Allow this sortable to handle removing the helper\n\t\t\t\tdraggable.cancelHelperRemoval = true;\n\t\t\t\tsortable.cancelHelperRemoval = false;\n\n\t\t\t\t// Use _storedCSS To restore properties in the sortable,\n\t\t\t\t// as this also handles revert (#9675) since the draggable\n\t\t\t\t// may have modified them in unexpected ways (#8809)\n\t\t\t\tsortable._storedCSS = {\n\t\t\t\t\tposition: sortable.placeholder.css( \"position\" ),\n\t\t\t\t\ttop: sortable.placeholder.css( \"top\" ),\n\t\t\t\t\tleft: sortable.placeholder.css( \"left\" )\n\t\t\t\t};\n\n\t\t\t\tsortable._mouseStop( event );\n\n\t\t\t\t// Once drag has ended, the sortable should return to using\n\t\t\t\t// its original helper, not the shared helper from draggable\n\t\t\t\tsortable.options.helper = sortable.options._helper;\n\t\t\t} else {\n\n\t\t\t\t// Prevent this Sortable from removing the helper.\n\t\t\t\t// However, don't set the draggable to remove the helper\n\t\t\t\t// either as another connected Sortable may yet handle the removal.\n\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\tsortable._trigger( \"deactivate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tdrag: function( event, ui, draggable ) {\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar innermostIntersecting = false,\n\t\t\t\tsortable = this;\n\n\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\tsortable.positionAbs = draggable.positionAbs;\n\t\t\tsortable.helperProportions = draggable.helperProportions;\n\t\t\tsortable.offset.click = draggable.offset.click;\n\n\t\t\tif ( sortable._intersectsWith( sortable.containerCache ) ) {\n\t\t\t\tinnermostIntersecting = true;\n\n\t\t\t\t$.each( draggable.sortables, function() {\n\n\t\t\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\t\t\tthis.positionAbs = draggable.positionAbs;\n\t\t\t\t\tthis.helperProportions = draggable.helperProportions;\n\t\t\t\t\tthis.offset.click = draggable.offset.click;\n\n\t\t\t\t\tif ( this !== sortable &&\n\t\t\t\t\t\t\tthis._intersectsWith( this.containerCache ) &&\n\t\t\t\t\t\t\t$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {\n\t\t\t\t\t\tinnermostIntersecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn innermostIntersecting;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( innermostIntersecting ) {\n\n\t\t\t\t// If it intersects, we use a little isOver variable and set it once,\n\t\t\t\t// so that the move-in stuff gets fired only once.\n\t\t\t\tif ( !sortable.isOver ) {\n\t\t\t\t\tsortable.isOver = 1;\n\n\t\t\t\t\t// Store draggable's parent in case we need to reappend to it later.\n\t\t\t\t\tdraggable._parent = ui.helper.parent();\n\n\t\t\t\t\tsortable.currentItem = ui.helper\n\t\t\t\t\t\t.appendTo( sortable.element )\n\t\t\t\t\t\t.data( \"ui-sortable-item\", true );\n\n\t\t\t\t\t// Store helper option to later restore it\n\t\t\t\t\tsortable.options._helper = sortable.options.helper;\n\n\t\t\t\t\tsortable.options.helper = function() {\n\t\t\t\t\t\treturn ui.helper[ 0 ];\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fire the start events of the sortable with our passed browser event,\n\t\t\t\t\t// and our own helper (so it doesn't create a new one)\n\t\t\t\t\tevent.target = sortable.currentItem[ 0 ];\n\t\t\t\t\tsortable._mouseCapture( event, true );\n\t\t\t\t\tsortable._mouseStart( event, true, true );\n\n\t\t\t\t\t// Because the browser event is way off the new appended portlet,\n\t\t\t\t\t// modify necessary variables to reflect the changes\n\t\t\t\t\tsortable.offset.click.top = draggable.offset.click.top;\n\t\t\t\t\tsortable.offset.click.left = draggable.offset.click.left;\n\t\t\t\t\tsortable.offset.parent.left -= draggable.offset.parent.left -\n\t\t\t\t\t\tsortable.offset.parent.left;\n\t\t\t\t\tsortable.offset.parent.top -= draggable.offset.parent.top -\n\t\t\t\t\t\tsortable.offset.parent.top;\n\n\t\t\t\t\tdraggable._trigger( \"toSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is in a valid drop zone,\n\t\t\t\t\t// used solely in the revert option to handle \"valid/invalid\".\n\t\t\t\t\tdraggable.dropped = sortable.element;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables in the case that\n\t\t\t\t\t// adding to one sortable changes the location of the other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Hack so receive/update callbacks work (mostly)\n\t\t\t\t\tdraggable.currentItem = draggable.element;\n\t\t\t\t\tsortable.fromOutside = draggable;\n\t\t\t\t}\n\n\t\t\t\tif ( sortable.currentItem ) {\n\t\t\t\t\tsortable._mouseDrag( event );\n\n\t\t\t\t\t// Copy the sortable's position because the draggable's can potentially reflect\n\t\t\t\t\t// a relative position, while sortable is always absolute, which the dragged\n\t\t\t\t\t// element has now become. (#8809)\n\t\t\t\t\tui.position = sortable.position;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// If it doesn't intersect with the sortable, and it intersected before,\n\t\t\t\t// we fake the drag stop of the sortable, but make sure it doesn't remove\n\t\t\t\t// the helper by using cancelHelperRemoval.\n\t\t\t\tif ( sortable.isOver ) {\n\n\t\t\t\t\tsortable.isOver = 0;\n\t\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\t\t// Calling sortable's mouseStop would trigger a revert,\n\t\t\t\t\t// so revert must be temporarily false until after mouseStop is called.\n\t\t\t\t\tsortable.options._revert = sortable.options.revert;\n\t\t\t\t\tsortable.options.revert = false;\n\n\t\t\t\t\tsortable._trigger( \"out\", event, sortable._uiHash( sortable ) );\n\t\t\t\t\tsortable._mouseStop( event, true );\n\n\t\t\t\t\t// Restore sortable behaviors that were modfied\n\t\t\t\t\t// when the draggable entered the sortable area (#9481)\n\t\t\t\t\tsortable.options.revert = sortable.options._revert;\n\t\t\t\t\tsortable.options.helper = sortable.options._helper;\n\n\t\t\t\t\tif ( sortable.placeholder ) {\n\t\t\t\t\t\tsortable.placeholder.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore and recalculate the draggable's offset considering the sortable\n\t\t\t\t\t// may have modified them in unexpected ways. (#8809, #10669)\n\t\t\t\t\tui.helper.appendTo( draggable._parent );\n\t\t\t\t\tdraggable._refreshOffsets( event );\n\t\t\t\t\tui.position = draggable._generatePosition( event, true );\n\n\t\t\t\t\tdraggable._trigger( \"fromSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is no longer in a valid drop zone\n\t\t\t\t\tdraggable.dropped = false;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables just in case removing\n\t\t\t\t\t// from one sortable changes the location of other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"cursor\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( \"body\" ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"cursor\" ) ) {\n\t\t\to._cursor = t.css( \"cursor\" );\n\t\t}\n\t\tt.css( \"cursor\", o.cursor );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._cursor ) {\n\t\t\t$( \"body\" ).css( \"cursor\", o._cursor );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"opacity\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\t\tif ( t.css( \"opacity\" ) ) {\n\t\t\to._opacity = t.css( \"opacity\" );\n\t\t}\n\t\tt.css( \"opacity\", o.opacity );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._opacity ) {\n\t\t\t$( ui.helper ).css( \"opacity\", o._opacity );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"scroll\", {\n\tstart: function( event, ui, i ) {\n\t\tif ( !i.scrollParentNotHidden ) {\n\t\t\ti.scrollParentNotHidden = i.helper.scrollParent( false );\n\t\t}\n\n\t\tif ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] &&\n\t\t\t\ti.scrollParentNotHidden[ 0 ].tagName !== \"HTML\" ) {\n\t\t\ti.overflowOffset = i.scrollParentNotHidden.offset();\n\t\t}\n\t},\n\tdrag: function( event, ui, i  ) {\n\n\t\tvar o = i.options,\n\t\t\tscrolled = false,\n\t\t\tscrollParent = i.scrollParentNotHidden[ 0 ],\n\t\t\tdocument = i.document[ 0 ];\n\n\t\tif ( scrollParent !== document && scrollParent.tagName !== \"HTML\" ) {\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( event.pageY - $( document ).scrollTop() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() - o.scrollSpeed );\n\t\t\t\t} else if ( $( window ).height() - ( event.pageY - $( document ).scrollTop() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() + o.scrollSpeed );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( event.pageX - $( document ).scrollLeft() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() - o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t} else if ( $( window ).width() - ( event.pageX - $( document ).scrollLeft() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() + o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scrolled !== false && $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( i, event );\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"snap\", {\n\tstart: function( event, ui, i ) {\n\n\t\tvar o = i.options;\n\n\t\ti.snapElements = [];\n\n\t\t$( o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap )\n\t\t\t.each( function() {\n\t\t\t\tvar $t = $( this ),\n\t\t\t\t\t$o = $t.offset();\n\t\t\t\tif ( this !== i.element[ 0 ] ) {\n\t\t\t\t\ti.snapElements.push( {\n\t\t\t\t\t\titem: this,\n\t\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\n\t\t\t\t\t\ttop: $o.top, left: $o.left\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t},\n\tdrag: function( event, ui, inst ) {\n\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\n\t\t\to = inst.options,\n\t\t\td = o.snapTolerance,\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\n\n\t\tfor ( i = inst.snapElements.length - 1; i >= 0; i-- ) {\n\n\t\t\tl = inst.snapElements[ i ].left - inst.margins.left;\n\t\t\tr = l + inst.snapElements[ i ].width;\n\t\t\tt = inst.snapElements[ i ].top - inst.margins.top;\n\t\t\tb = t + inst.snapElements[ i ].height;\n\n\t\t\tif ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d ||\n\t\t\t\t\t!$.contains( inst.snapElements[ i ].item.ownerDocument,\n\t\t\t\t\tinst.snapElements[ i ].item ) ) {\n\t\t\t\tif ( inst.snapElements[ i ].snapping ) {\n\t\t\t\t\t( inst.options.snap.release &&\n\t\t\t\t\t\tinst.options.snap.release.call(\n\t\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t$.extend( inst._uiHash(), { snapItem: inst.snapElements[ i ].item } )\n\t\t\t\t\t\t) );\n\t\t\t\t}\n\t\t\t\tinst.snapElements[ i ].snapping = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( o.snapMode !== \"inner\" ) {\n\t\t\t\tts = Math.abs( t - y2 ) <= d;\n\t\t\t\tbs = Math.abs( b - y1 ) <= d;\n\t\t\t\tls = Math.abs( l - x2 ) <= d;\n\t\t\t\trs = Math.abs( r - x1 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = ( ts || bs || ls || rs );\n\n\t\t\tif ( o.snapMode !== \"outer\" ) {\n\t\t\t\tts = Math.abs( t - y1 ) <= d;\n\t\t\t\tbs = Math.abs( b - y2 ) <= d;\n\t\t\t\tls = Math.abs( l - x1 ) <= d;\n\t\t\t\trs = Math.abs( r - x2 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !inst.snapElements[ i ].snapping && ( ts || bs || ls || rs || first ) ) {\n\t\t\t\t( inst.options.snap.snap &&\n\t\t\t\t\tinst.options.snap.snap.call(\n\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\t$.extend( inst._uiHash(), {\n\t\t\t\t\t\t\tsnapItem: inst.snapElements[ i ].item\n\t\t\t\t\t\t} ) ) );\n\t\t\t}\n\t\t\tinst.snapElements[ i ].snapping = ( ts || bs || ls || rs || first );\n\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"stack\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar min,\n\t\t\to = instance.options,\n\t\t\tgroup = $.makeArray( $( o.stack ) ).sort( function( a, b ) {\n\t\t\t\treturn ( parseInt( $( a ).css( \"zIndex\" ), 10 ) || 0 ) -\n\t\t\t\t\t( parseInt( $( b ).css( \"zIndex\" ), 10 ) || 0 );\n\t\t\t} );\n\n\t\tif ( !group.length ) { return; }\n\n\t\tmin = parseInt( $( group[ 0 ] ).css( \"zIndex\" ), 10 ) || 0;\n\t\t$( group ).each( function( i ) {\n\t\t\t$( this ).css( \"zIndex\", min + i );\n\t\t} );\n\t\tthis.css( \"zIndex\", ( min + group.length ) );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"zIndex\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"zIndex\" ) ) {\n\t\t\to._zIndex = t.css( \"zIndex\" );\n\t\t}\n\t\tt.css( \"zIndex\", o.zIndex );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\n\t\tif ( o._zIndex ) {\n\t\t\t$( ui.helper ).css( \"zIndex\", o._zIndex );\n\t\t}\n\t}\n} );\n\nreturn $.ui.draggable;\n\n} ) );\n","/*!\n * jQuery UI Menu 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Menu\n//>>group: Widgets\n//>>description: Creates nestable menus.\n//>>docs: http://api.jqueryui.com/menu/\n//>>demos: http://jqueryui.com/menu/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/menu.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"../keycode\",\n\t\t\t\"../position\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../unique-id\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nreturn $.widget( \"ui.menu\", {\n\tversion: \"1.12.1\",\n\tdefaultElement: \"<ul>\",\n\tdelay: 300,\n\toptions: {\n\t\ticons: {\n\t\t\tsubmenu: \"ui-icon-caret-1-e\"\n\t\t},\n\t\titems: \"> *\",\n\t\tmenus: \"ul\",\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"right top\"\n\t\t},\n\t\trole: \"menu\",\n\n\t\t// Callbacks\n\t\tblur: null,\n\t\tfocus: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tthis.activeMenu = this.element;\n\n\t\t// Flag used to prevent firing of the click handler\n\t\t// as the event bubbles up through nested menus\n\t\tthis.mouseHandled = false;\n\t\tthis.element\n\t\t\t.uniqueId()\n\t\t\t.attr( {\n\t\t\t\trole: this.options.role,\n\t\t\t\ttabIndex: 0\n\t\t\t} );\n\n\t\tthis._addClass( \"ui-menu\", \"ui-widget ui-widget-content\" );\n\t\tthis._on( {\n\n\t\t\t// Prevent focus from sticking to links inside menu after clicking\n\t\t\t// them (focus should always stay on UL during navigation).\n\t\t\t\"mousedown .ui-menu-item\": function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\t\"click .ui-menu-item\": function( event ) {\n\t\t\t\tvar target = $( event.target );\n\t\t\t\tvar active = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\n\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\n\t\t\t\t\tthis.select( event );\n\n\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\n\t\t\t\t\tif ( !event.isPropagationStopped() ) {\n\t\t\t\t\t\tthis.mouseHandled = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Open submenu on click\n\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\n\t\t\t\t\t\tthis.expand( event );\n\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) &&\n\t\t\t\t\t\t\tactive.closest( \".ui-menu\" ).length ) {\n\n\t\t\t\t\t\t// Redirect focus to the menu\n\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\n\n\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\n\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\n\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\n\t\t\t\t\t\t\tclearTimeout( this.timer );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"mouseenter .ui-menu-item\": function( event ) {\n\n\t\t\t\t// Ignore mouse events while typeahead is active, see #10458.\n\t\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\n\t\t\t\t// is over an item in the menu\n\t\t\t\tif ( this.previousFilter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar actualTarget = $( event.target ).closest( \".ui-menu-item\" ),\n\t\t\t\t\ttarget = $( event.currentTarget );\n\n\t\t\t\t// Ignore bubbled events on parent items, see #11641\n\t\t\t\tif ( actualTarget[ 0 ] !== target[ 0 ] ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\n\t\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\n\t\t\t\tthis._removeClass( target.siblings().children( \".ui-state-active\" ),\n\t\t\t\t\tnull, \"ui-state-active\" );\n\t\t\t\tthis.focus( event, target );\n\t\t\t},\n\t\t\tmouseleave: \"collapseAll\",\n\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\n\t\t\tfocus: function( event, keepActiveItem ) {\n\n\t\t\t\t// If there's already an active item, keep it active\n\t\t\t\t// If not, activate the first item\n\t\t\t\tvar item = this.active || this.element.find( this.options.items ).eq( 0 );\n\n\t\t\t\tif ( !keepActiveItem ) {\n\t\t\t\t\tthis.focus( event, item );\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tthis._delay( function() {\n\t\t\t\t\tvar notContained = !$.contains(\n\t\t\t\t\t\tthis.element[ 0 ],\n\t\t\t\t\t\t$.ui.safeActiveElement( this.document[ 0 ] )\n\t\t\t\t\t);\n\t\t\t\t\tif ( notContained ) {\n\t\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t},\n\t\t\tkeydown: \"_keydown\"\n\t\t} );\n\n\t\tthis.refresh();\n\n\t\t// Clicks outside of a menu collapse any open menus\n\t\tthis._on( this.document, {\n\t\t\tclick: function( event ) {\n\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\n\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t}\n\n\t\t\t\t// Reset the mouseHandled flag\n\t\t\t\tthis.mouseHandled = false;\n\t\t\t}\n\t\t} );\n\t},\n\n\t_destroy: function() {\n\t\tvar items = this.element.find( \".ui-menu-item\" )\n\t\t\t\t.removeAttr( \"role aria-disabled\" ),\n\t\t\tsubmenus = items.children( \".ui-menu-item-wrapper\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.removeAttr( \"tabIndex role aria-haspopup\" );\n\n\t\t// Destroy (sub)menus\n\t\tthis.element\n\t\t\t.removeAttr( \"aria-activedescendant\" )\n\t\t\t.find( \".ui-menu\" ).addBack()\n\t\t\t\t.removeAttr( \"role aria-labelledby aria-expanded aria-hidden aria-disabled \" +\n\t\t\t\t\t\"tabIndex\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.show();\n\n\t\tsubmenus.children().each( function() {\n\t\t\tvar elem = $( this );\n\t\t\tif ( elem.data( \"ui-menu-submenu-caret\" ) ) {\n\t\t\t\telem.remove();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar match, prev, character, skip,\n\t\t\tpreventDefault = true;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\tthis.previousPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\tthis.nextPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.HOME:\n\t\t\tthis._move( \"first\", \"first\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.END:\n\t\t\tthis._move( \"last\", \"last\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.UP:\n\t\t\tthis.previous( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.DOWN:\n\t\t\tthis.next( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.LEFT:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ENTER:\n\t\tcase $.ui.keyCode.SPACE:\n\t\t\tthis._activate( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tpreventDefault = false;\n\t\t\tprev = this.previousFilter || \"\";\n\t\t\tskip = false;\n\n\t\t\t// Support number pad values\n\t\t\tcharacter = event.keyCode >= 96 && event.keyCode <= 105 ?\n\t\t\t\t( event.keyCode - 96 ).toString() : String.fromCharCode( event.keyCode );\n\n\t\t\tclearTimeout( this.filterTimer );\n\n\t\t\tif ( character === prev ) {\n\t\t\t\tskip = true;\n\t\t\t} else {\n\t\t\t\tcharacter = prev + character;\n\t\t\t}\n\n\t\t\tmatch = this._filterMenuItems( character );\n\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\n\t\t\t\tmatch;\n\n\t\t\t// If no matches on the current filter, reset to the last character pressed\n\t\t\t// to move down the menu to the first item that starts with that character\n\t\t\tif ( !match.length ) {\n\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\t\tmatch = this._filterMenuItems( character );\n\t\t\t}\n\n\t\t\tif ( match.length ) {\n\t\t\t\tthis.focus( event, match );\n\t\t\t\tthis.previousFilter = character;\n\t\t\t\tthis.filterTimer = this._delay( function() {\n\t\t\t\t\tdelete this.previousFilter;\n\t\t\t\t}, 1000 );\n\t\t\t} else {\n\t\t\t\tdelete this.previousFilter;\n\t\t\t}\n\t\t}\n\n\t\tif ( preventDefault ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_activate: function( event ) {\n\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\tif ( this.active.children( \"[aria-haspopup='true']\" ).length ) {\n\t\t\t\tthis.expand( event );\n\t\t\t} else {\n\t\t\t\tthis.select( event );\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar menus, items, newSubmenus, newItems, newWrappers,\n\t\t\tthat = this,\n\t\t\ticon = this.options.icons.submenu,\n\t\t\tsubmenus = this.element.find( this.options.menus );\n\n\t\tthis._toggleClass( \"ui-menu-icons\", null, !!this.element.find( \".ui-icon\" ).length );\n\n\t\t// Initialize nested menus\n\t\tnewSubmenus = submenus.filter( \":not(.ui-menu)\" )\n\t\t\t.hide()\n\t\t\t.attr( {\n\t\t\t\trole: this.options.role,\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t} )\n\t\t\t.each( function() {\n\t\t\t\tvar menu = $( this ),\n\t\t\t\t\titem = menu.prev(),\n\t\t\t\t\tsubmenuCaret = $( \"<span>\" ).data( \"ui-menu-submenu-caret\", true );\n\n\t\t\t\tthat._addClass( submenuCaret, \"ui-menu-icon\", \"ui-icon \" + icon );\n\t\t\t\titem\n\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\n\t\t\t\t\t.prepend( submenuCaret );\n\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\n\t\t\t} );\n\n\t\tthis._addClass( newSubmenus, \"ui-menu\", \"ui-widget ui-widget-content ui-front\" );\n\n\t\tmenus = submenus.add( this.element );\n\t\titems = menus.find( this.options.items );\n\n\t\t// Initialize menu-items containing spaces and/or dashes only as dividers\n\t\titems.not( \".ui-menu-item\" ).each( function() {\n\t\t\tvar item = $( this );\n\t\t\tif ( that._isDivider( item ) ) {\n\t\t\t\tthat._addClass( item, \"ui-menu-divider\", \"ui-widget-content\" );\n\t\t\t}\n\t\t} );\n\n\t\t// Don't refresh list items that are already adapted\n\t\tnewItems = items.not( \".ui-menu-item, .ui-menu-divider\" );\n\t\tnewWrappers = newItems.children()\n\t\t\t.not( \".ui-menu\" )\n\t\t\t\t.uniqueId()\n\t\t\t\t.attr( {\n\t\t\t\t\ttabIndex: -1,\n\t\t\t\t\trole: this._itemRole()\n\t\t\t\t} );\n\t\tthis._addClass( newItems, \"ui-menu-item\" )\n\t\t\t._addClass( newWrappers, \"ui-menu-item-wrapper\" );\n\n\t\t// Add aria-disabled attribute to any disabled menu item\n\t\titems.filter( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\n\n\t\t// If the active item has been removed, blur the menu\n\t\tif ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\tthis.blur();\n\t\t}\n\t},\n\n\t_itemRole: function() {\n\t\treturn {\n\t\t\tmenu: \"menuitem\",\n\t\t\tlistbox: \"option\"\n\t\t}[ this.options.role ];\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tvar icons = this.element.find( \".ui-menu-icon\" );\n\t\t\tthis._removeClass( icons, null, this.options.icons.submenu )\n\t\t\t\t._addClass( icons, null, value.submenu );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis.element.attr( \"aria-disabled\", String( value ) );\n\t\tthis._toggleClass( null, \"ui-state-disabled\", !!value );\n\t},\n\n\tfocus: function( event, item ) {\n\t\tvar nested, focused, activeParent;\n\t\tthis.blur( event, event && event.type === \"focus\" );\n\n\t\tthis._scrollIntoView( item );\n\n\t\tthis.active = item.first();\n\n\t\tfocused = this.active.children( \".ui-menu-item-wrapper\" );\n\t\tthis._addClass( focused, null, \"ui-state-active\" );\n\n\t\t// Only update aria-activedescendant if there's a role\n\t\t// otherwise we assume focus is managed elsewhere\n\t\tif ( this.options.role ) {\n\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\n\t\t}\n\n\t\t// Highlight active parent menu item, if any\n\t\tactiveParent = this.active\n\t\t\t.parent()\n\t\t\t\t.closest( \".ui-menu-item\" )\n\t\t\t\t\t.children( \".ui-menu-item-wrapper\" );\n\t\tthis._addClass( activeParent, null, \"ui-state-active\" );\n\n\t\tif ( event && event.type === \"keydown\" ) {\n\t\t\tthis._close();\n\t\t} else {\n\t\t\tthis.timer = this._delay( function() {\n\t\t\t\tthis._close();\n\t\t\t}, this.delay );\n\t\t}\n\n\t\tnested = item.children( \".ui-menu\" );\n\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\n\t\t\tthis._startOpening( nested );\n\t\t}\n\t\tthis.activeMenu = item.parent();\n\n\t\tthis._trigger( \"focus\", event, { item: item } );\n\t},\n\n\t_scrollIntoView: function( item ) {\n\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\n\t\tif ( this._hasScroll() ) {\n\t\t\tborderTop = parseFloat( $.css( this.activeMenu[ 0 ], \"borderTopWidth\" ) ) || 0;\n\t\t\tpaddingTop = parseFloat( $.css( this.activeMenu[ 0 ], \"paddingTop\" ) ) || 0;\n\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\n\t\t\tscroll = this.activeMenu.scrollTop();\n\t\t\telementHeight = this.activeMenu.height();\n\t\t\titemHeight = item.outerHeight();\n\n\t\t\tif ( offset < 0 ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\n\t\t\t} else if ( offset + itemHeight > elementHeight ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\n\t\t\t}\n\t\t}\n\t},\n\n\tblur: function( event, fromFocus ) {\n\t\tif ( !fromFocus ) {\n\t\t\tclearTimeout( this.timer );\n\t\t}\n\n\t\tif ( !this.active ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._removeClass( this.active.children( \".ui-menu-item-wrapper\" ),\n\t\t\tnull, \"ui-state-active\" );\n\n\t\tthis._trigger( \"blur\", event, { item: this.active } );\n\t\tthis.active = null;\n\t},\n\n\t_startOpening: function( submenu ) {\n\t\tclearTimeout( this.timer );\n\n\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\n\t\t// shift in the submenu position when mousing over the caret icon\n\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timer = this._delay( function() {\n\t\t\tthis._close();\n\t\t\tthis._open( submenu );\n\t\t}, this.delay );\n\t},\n\n\t_open: function( submenu ) {\n\t\tvar position = $.extend( {\n\t\t\tof: this.active\n\t\t}, this.options.position );\n\n\t\tclearTimeout( this.timer );\n\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" );\n\n\t\tsubmenu\n\t\t\t.show()\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.attr( \"aria-expanded\", \"true\" )\n\t\t\t.position( position );\n\t},\n\n\tcollapseAll: function( event, all ) {\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay( function() {\n\n\t\t\t// If we were passed an event, look for the submenu that contains the event\n\t\t\tvar currentMenu = all ? this.element :\n\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\n\n\t\t\t// If we found no valid submenu ancestor, use the main menu to close all\n\t\t\t// sub menus anyway\n\t\t\tif ( !currentMenu.length ) {\n\t\t\t\tcurrentMenu = this.element;\n\t\t\t}\n\n\t\t\tthis._close( currentMenu );\n\n\t\t\tthis.blur( event );\n\n\t\t\t// Work around active item staying active after menu is blurred\n\t\t\tthis._removeClass( currentMenu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\n\n\t\t\tthis.activeMenu = currentMenu;\n\t\t}, this.delay );\n\t},\n\n\t// With no arguments, closes the currently active menu - if nothing is active\n\t// it closes all menus.  If passed an argument, it will search for menus BELOW\n\t_close: function( startMenu ) {\n\t\tif ( !startMenu ) {\n\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\n\t\t}\n\n\t\tstartMenu.find( \".ui-menu\" )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" )\n\t\t\t.attr( \"aria-expanded\", \"false\" );\n\t},\n\n\t_closeOnDocumentClick: function( event ) {\n\t\treturn !$( event.target ).closest( \".ui-menu\" ).length;\n\t},\n\n\t_isDivider: function( item ) {\n\n\t\t// Match hyphen, em dash, en dash\n\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\n\t},\n\n\tcollapse: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._close();\n\t\t\tthis.focus( event, newItem );\n\t\t}\n\t},\n\n\texpand: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active\n\t\t\t\t.children( \".ui-menu \" )\n\t\t\t\t\t.find( this.options.items )\n\t\t\t\t\t\t.first();\n\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._open( newItem.parent() );\n\n\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\n\t\t\tthis._delay( function() {\n\t\t\t\tthis.focus( event, newItem );\n\t\t\t} );\n\t\t}\n\t},\n\n\tnext: function( event ) {\n\t\tthis._move( \"next\", \"first\", event );\n\t},\n\n\tprevious: function( event ) {\n\t\tthis._move( \"prev\", \"last\", event );\n\t},\n\n\tisFirstItem: function() {\n\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\n\t},\n\n\tisLastItem: function() {\n\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\n\t},\n\n\t_move: function( direction, filter, event ) {\n\t\tvar next;\n\t\tif ( this.active ) {\n\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( -1 );\n\t\t\t} else {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( 0 );\n\t\t\t}\n\t\t}\n\t\tif ( !next || !next.length || !this.active ) {\n\t\t\tnext = this.activeMenu.find( this.options.items )[ filter ]();\n\t\t}\n\n\t\tthis.focus( event, next );\n\t},\n\n\tnextPage: function( event ) {\n\t\tvar item, base, height;\n\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isLastItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each( function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base - height < 0;\n\t\t\t} );\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items )\n\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\n\t\t}\n\t},\n\n\tpreviousPage: function( event ) {\n\t\tvar item, base, height;\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isFirstItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each( function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base + height > 0;\n\t\t\t} );\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items ).first() );\n\t\t}\n\t},\n\n\t_hasScroll: function() {\n\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\n\t},\n\n\tselect: function( event ) {\n\n\t\t// TODO: It should never be possible to not have an active item at this\n\t\t// point, but the tests don't trigger mouseenter before click.\n\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\n\t\tvar ui = { item: this.active };\n\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\n\t\t\tthis.collapseAll( event, true );\n\t\t}\n\t\tthis._trigger( \"select\", event, ui );\n\t},\n\n\t_filterMenuItems: function( character ) {\n\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\n\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\n\n\t\treturn this.activeMenu\n\t\t\t.find( this.options.items )\n\n\t\t\t\t// Only match on items, not dividers or other content (#10571)\n\t\t\t\t.filter( \".ui-menu-item\" )\n\t\t\t\t\t.filter( function() {\n\t\t\t\t\t\treturn regex.test(\n\t\t\t\t\t\t\t$.trim( $( this ).children( \".ui-menu-item-wrapper\" ).text() ) );\n\t\t\t\t\t} );\n\t}\n} );\n\n} ) );\n","/*!\n * jQuery UI Mouse 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Mouse\n//>>group: Widgets\n//>>description: Abstracts mouse-based interactions to assist in creating certain widgets.\n//>>docs: http://api.jqueryui.com/mouse/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"../ie\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nvar mouseHandled = false;\n$( document ).on( \"mouseup\", function() {\n\tmouseHandled = false;\n} );\n\nreturn $.widget( \"ui.mouse\", {\n\tversion: \"1.12.1\",\n\toptions: {\n\t\tcancel: \"input, textarea, button, select, option\",\n\t\tdistance: 1,\n\t\tdelay: 0\n\t},\n\t_mouseInit: function() {\n\t\tvar that = this;\n\n\t\tthis.element\n\t\t\t.on( \"mousedown.\" + this.widgetName, function( event ) {\n\t\t\t\treturn that._mouseDown( event );\n\t\t\t} )\n\t\t\t.on( \"click.\" + this.widgetName, function( event ) {\n\t\t\t\tif ( true === $.data( event.target, that.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t\t\t$.removeData( event.target, that.widgetName + \".preventClickEvent\" );\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\tthis.started = false;\n\t},\n\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t// other instances of mouse\n\t_mouseDestroy: function() {\n\t\tthis.element.off( \".\" + this.widgetName );\n\t\tif ( this._mouseMoveDelegate ) {\n\t\t\tthis.document\n\t\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\t\t}\n\t},\n\n\t_mouseDown: function( event ) {\n\n\t\t// don't let more than one widget handle mouseStart\n\t\tif ( mouseHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mouseMoved = false;\n\n\t\t// We may have missed mouseup (out of window)\n\t\t( this._mouseStarted && this._mouseUp( event ) );\n\n\t\tthis._mouseDownEvent = event;\n\n\t\tvar that = this,\n\t\t\tbtnIsLeft = ( event.which === 1 ),\n\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\telIsCancel = ( typeof this.options.cancel === \"string\" && event.target.nodeName ?\n\t\t\t\t$( event.target ).closest( this.options.cancel ).length : false );\n\t\tif ( !btnIsLeft || elIsCancel || !this._mouseCapture( event ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.mouseDelayMet = !this.options.delay;\n\t\tif ( !this.mouseDelayMet ) {\n\t\t\tthis._mouseDelayTimer = setTimeout( function() {\n\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t}, this.options.delay );\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted = ( this._mouseStart( event ) !== false );\n\t\t\tif ( !this._mouseStarted ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Click event may never have fired (Gecko & Opera)\n\t\tif ( true === $.data( event.target, this.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t$.removeData( event.target, this.widgetName + \".preventClickEvent\" );\n\t\t}\n\n\t\t// These delegates are required to keep context\n\t\tthis._mouseMoveDelegate = function( event ) {\n\t\t\treturn that._mouseMove( event );\n\t\t};\n\t\tthis._mouseUpDelegate = function( event ) {\n\t\t\treturn that._mouseUp( event );\n\t\t};\n\n\t\tthis.document\n\t\t\t.on( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.on( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tevent.preventDefault();\n\n\t\tmouseHandled = true;\n\t\treturn true;\n\t},\n\n\t_mouseMove: function( event ) {\n\n\t\t// Only check for mouseups outside the document if you've moved inside the document\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\n\t\t// Support: IE <9\n\t\tif ( this._mouseMoved ) {\n\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ( $.ui.ie && ( !document.documentMode || document.documentMode < 9 ) &&\n\t\t\t\t\t!event.button ) {\n\t\t\t\treturn this._mouseUp( event );\n\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\n\t\t\t} else if ( !event.which ) {\n\n\t\t\t\t// Support: Safari <=8 - 9\n\t\t\t\t// Safari sets which to 0 if you press any of the following keys\n\t\t\t\t// during a drag (#14461)\n\t\t\t\tif ( event.originalEvent.altKey || event.originalEvent.ctrlKey ||\n\t\t\t\t\t\tevent.originalEvent.metaKey || event.originalEvent.shiftKey ) {\n\t\t\t\t\tthis.ignoreMissingWhich = true;\n\t\t\t\t} else if ( !this.ignoreMissingWhich ) {\n\t\t\t\t\treturn this._mouseUp( event );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( event.which || event.button ) {\n\t\t\tthis._mouseMoved = true;\n\t\t}\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseDrag( event );\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted =\n\t\t\t\t( this._mouseStart( this._mouseDownEvent, event ) !== false );\n\t\t\t( this._mouseStarted ? this._mouseDrag( event ) : this._mouseUp( event ) );\n\t\t}\n\n\t\treturn !this._mouseStarted;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis.document\n\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseStarted = false;\n\n\t\t\tif ( event.target === this._mouseDownEvent.target ) {\n\t\t\t\t$.data( event.target, this.widgetName + \".preventClickEvent\", true );\n\t\t\t}\n\n\t\t\tthis._mouseStop( event );\n\t\t}\n\n\t\tif ( this._mouseDelayTimer ) {\n\t\t\tclearTimeout( this._mouseDelayTimer );\n\t\t\tdelete this._mouseDelayTimer;\n\t\t}\n\n\t\tthis.ignoreMissingWhich = false;\n\t\tmouseHandled = false;\n\t\tevent.preventDefault();\n\t},\n\n\t_mouseDistanceMet: function( event ) {\n\t\treturn ( Math.max(\n\t\t\t\tMath.abs( this._mouseDownEvent.pageX - event.pageX ),\n\t\t\t\tMath.abs( this._mouseDownEvent.pageY - event.pageY )\n\t\t\t) >= this.options.distance\n\t\t);\n\t},\n\n\t_mouseDelayMet: function( /* event */ ) {\n\t\treturn this.mouseDelayMet;\n\t},\n\n\t// These are placeholder methods, to be overriden by extending plugin\n\t_mouseStart: function( /* event */ ) {},\n\t_mouseDrag: function( /* event */ ) {},\n\t_mouseStop: function( /* event */ ) {},\n\t_mouseCapture: function( /* event */ ) { return true; }\n} );\n\n} ) );\n","/*!\n * jQuery UI Resizable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Resizable\n//>>group: Interactions\n//>>description: Enables resize functionality for any element.\n//>>docs: http://api.jqueryui.com/resizable/\n//>>demos: http://jqueryui.com/resizable/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/resizable.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../disable-selection\",\n\t\t\t\"../plugin\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.resizable\", $.ui.mouse, {\n\tversion: \"1.12.1\",\n\twidgetEventPrefix: \"resize\",\n\toptions: {\n\t\talsoResize: false,\n\t\tanimate: false,\n\t\tanimateDuration: \"slow\",\n\t\tanimateEasing: \"swing\",\n\t\taspectRatio: false,\n\t\tautoHide: false,\n\t\tclasses: {\n\t\t\t\"ui-resizable-se\": \"ui-icon ui-icon-gripsmall-diagonal-se\"\n\t\t},\n\t\tcontainment: false,\n\t\tghost: false,\n\t\tgrid: false,\n\t\thandles: \"e,s,se\",\n\t\thelper: false,\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 10,\n\t\tminWidth: 10,\n\n\t\t// See #7960\n\t\tzIndex: 90,\n\n\t\t// Callbacks\n\t\tresize: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_num: function( value ) {\n\t\treturn parseFloat( value ) || 0;\n\t},\n\n\t_isNumber: function( value ) {\n\t\treturn !isNaN( parseFloat( value ) );\n\t},\n\n\t_hasScroll: function( el, a ) {\n\n\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\n\t\t\thas = false;\n\n\t\tif ( el[ scroll ] > 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: determine which cases actually cause this to happen\n\t\t// if the element doesn't have the scroll set, see if it's possible to\n\t\t// set the scroll\n\t\tel[ scroll ] = 1;\n\t\thas = ( el[ scroll ] > 0 );\n\t\tel[ scroll ] = 0;\n\t\treturn has;\n\t},\n\n\t_create: function() {\n\n\t\tvar margins,\n\t\t\to = this.options,\n\t\t\tthat = this;\n\t\tthis._addClass( \"ui-resizable\" );\n\n\t\t$.extend( this, {\n\t\t\t_aspectRatio: !!( o.aspectRatio ),\n\t\t\taspectRatio: o.aspectRatio,\n\t\t\toriginalElement: this.element,\n\t\t\t_proportionallyResizeElements: [],\n\t\t\t_helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\n\t\t} );\n\n\t\t// Wrap the element if it cannot hold child nodes\n\t\tif ( this.element[ 0 ].nodeName.match( /^(canvas|textarea|input|select|button|img)$/i ) ) {\n\n\t\t\tthis.element.wrap(\n\t\t\t\t$( \"<div class='ui-wrapper' style='overflow: hidden;'></div>\" ).css( {\n\t\t\t\t\tposition: this.element.css( \"position\" ),\n\t\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\t\ttop: this.element.css( \"top\" ),\n\t\t\t\t\tleft: this.element.css( \"left\" )\n\t\t\t\t} )\n\t\t\t);\n\n\t\t\tthis.element = this.element.parent().data(\n\t\t\t\t\"ui-resizable\", this.element.resizable( \"instance\" )\n\t\t\t);\n\n\t\t\tthis.elementIsWrapper = true;\n\n\t\t\tmargins = {\n\t\t\t\tmarginTop: this.originalElement.css( \"marginTop\" ),\n\t\t\t\tmarginRight: this.originalElement.css( \"marginRight\" ),\n\t\t\t\tmarginBottom: this.originalElement.css( \"marginBottom\" ),\n\t\t\t\tmarginLeft: this.originalElement.css( \"marginLeft\" )\n\t\t\t};\n\n\t\t\tthis.element.css( margins );\n\t\t\tthis.originalElement.css( \"margin\", 0 );\n\n\t\t\t// support: Safari\n\t\t\t// Prevent Safari textarea resize\n\t\t\tthis.originalResizeStyle = this.originalElement.css( \"resize\" );\n\t\t\tthis.originalElement.css( \"resize\", \"none\" );\n\n\t\t\tthis._proportionallyResizeElements.push( this.originalElement.css( {\n\t\t\t\tposition: \"static\",\n\t\t\t\tzoom: 1,\n\t\t\t\tdisplay: \"block\"\n\t\t\t} ) );\n\n\t\t\t// Support: IE9\n\t\t\t// avoid IE jump (hard set the margin)\n\t\t\tthis.originalElement.css( margins );\n\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tthis._setupHandles();\n\n\t\tif ( o.autoHide ) {\n\t\t\t$( this.element )\n\t\t\t\t.on( \"mouseenter\", function() {\n\t\t\t\t\tif ( o.disabled ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthat._removeClass( \"ui-resizable-autohide\" );\n\t\t\t\t\tthat._handles.show();\n\t\t\t\t} )\n\t\t\t\t.on( \"mouseleave\", function() {\n\t\t\t\t\tif ( o.disabled ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ( !that.resizing ) {\n\t\t\t\t\t\tthat._addClass( \"ui-resizable-autohide\" );\n\t\t\t\t\t\tthat._handles.hide();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\n\t\tthis._mouseInit();\n\t},\n\n\t_destroy: function() {\n\n\t\tthis._mouseDestroy();\n\n\t\tvar wrapper,\n\t\t\t_destroy = function( exp ) {\n\t\t\t\t$( exp )\n\t\t\t\t\t.removeData( \"resizable\" )\n\t\t\t\t\t.removeData( \"ui-resizable\" )\n\t\t\t\t\t.off( \".resizable\" )\n\t\t\t\t\t.find( \".ui-resizable-handle\" )\n\t\t\t\t\t\t.remove();\n\t\t\t};\n\n\t\t// TODO: Unwrap at same DOM position\n\t\tif ( this.elementIsWrapper ) {\n\t\t\t_destroy( this.element );\n\t\t\twrapper = this.element;\n\t\t\tthis.originalElement.css( {\n\t\t\t\tposition: wrapper.css( \"position\" ),\n\t\t\t\twidth: wrapper.outerWidth(),\n\t\t\t\theight: wrapper.outerHeight(),\n\t\t\t\ttop: wrapper.css( \"top\" ),\n\t\t\t\tleft: wrapper.css( \"left\" )\n\t\t\t} ).insertAfter( wrapper );\n\t\t\twrapper.remove();\n\t\t}\n\n\t\tthis.originalElement.css( \"resize\", this.originalResizeStyle );\n\t\t_destroy( this.originalElement );\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\n\t\tswitch ( key ) {\n\t\tcase \"handles\":\n\t\t\tthis._removeHandles();\n\t\t\tthis._setupHandles();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t},\n\n\t_setupHandles: function() {\n\t\tvar o = this.options, handle, i, n, hname, axis, that = this;\n\t\tthis.handles = o.handles ||\n\t\t\t( !$( \".ui-resizable-handle\", this.element ).length ?\n\t\t\t\t\"e,s,se\" : {\n\t\t\t\t\tn: \".ui-resizable-n\",\n\t\t\t\t\te: \".ui-resizable-e\",\n\t\t\t\t\ts: \".ui-resizable-s\",\n\t\t\t\t\tw: \".ui-resizable-w\",\n\t\t\t\t\tse: \".ui-resizable-se\",\n\t\t\t\t\tsw: \".ui-resizable-sw\",\n\t\t\t\t\tne: \".ui-resizable-ne\",\n\t\t\t\t\tnw: \".ui-resizable-nw\"\n\t\t\t\t} );\n\n\t\tthis._handles = $();\n\t\tif ( this.handles.constructor === String ) {\n\n\t\t\tif ( this.handles === \"all\" ) {\n\t\t\t\tthis.handles = \"n,e,s,w,se,sw,ne,nw\";\n\t\t\t}\n\n\t\t\tn = this.handles.split( \",\" );\n\t\t\tthis.handles = {};\n\n\t\t\tfor ( i = 0; i < n.length; i++ ) {\n\n\t\t\t\thandle = $.trim( n[ i ] );\n\t\t\t\thname = \"ui-resizable-\" + handle;\n\t\t\t\taxis = $( \"<div>\" );\n\t\t\t\tthis._addClass( axis, \"ui-resizable-handle \" + hname );\n\n\t\t\t\taxis.css( { zIndex: o.zIndex } );\n\n\t\t\t\tthis.handles[ handle ] = \".ui-resizable-\" + handle;\n\t\t\t\tthis.element.append( axis );\n\t\t\t}\n\n\t\t}\n\n\t\tthis._renderAxis = function( target ) {\n\n\t\t\tvar i, axis, padPos, padWrapper;\n\n\t\t\ttarget = target || this.element;\n\n\t\t\tfor ( i in this.handles ) {\n\n\t\t\t\tif ( this.handles[ i ].constructor === String ) {\n\t\t\t\t\tthis.handles[ i ] = this.element.children( this.handles[ i ] ).first().show();\n\t\t\t\t} else if ( this.handles[ i ].jquery || this.handles[ i ].nodeType ) {\n\t\t\t\t\tthis.handles[ i ] = $( this.handles[ i ] );\n\t\t\t\t\tthis._on( this.handles[ i ], { \"mousedown\": that._mouseDown } );\n\t\t\t\t}\n\n\t\t\t\tif ( this.elementIsWrapper &&\n\t\t\t\t\t\tthis.originalElement[ 0 ]\n\t\t\t\t\t\t\t.nodeName\n\t\t\t\t\t\t\t.match( /^(textarea|input|select|button)$/i ) ) {\n\t\t\t\t\taxis = $( this.handles[ i ], this.element );\n\n\t\t\t\t\tpadWrapper = /sw|ne|nw|se|n|s/.test( i ) ?\n\t\t\t\t\t\taxis.outerHeight() :\n\t\t\t\t\t\taxis.outerWidth();\n\n\t\t\t\t\tpadPos = [ \"padding\",\n\t\t\t\t\t\t/ne|nw|n/.test( i ) ? \"Top\" :\n\t\t\t\t\t\t/se|sw|s/.test( i ) ? \"Bottom\" :\n\t\t\t\t\t\t/^e$/.test( i ) ? \"Right\" : \"Left\" ].join( \"\" );\n\n\t\t\t\t\ttarget.css( padPos, padWrapper );\n\n\t\t\t\t\tthis._proportionallyResize();\n\t\t\t\t}\n\n\t\t\t\tthis._handles = this._handles.add( this.handles[ i ] );\n\t\t\t}\n\t\t};\n\n\t\t// TODO: make renderAxis a prototype function\n\t\tthis._renderAxis( this.element );\n\n\t\tthis._handles = this._handles.add( this.element.find( \".ui-resizable-handle\" ) );\n\t\tthis._handles.disableSelection();\n\n\t\tthis._handles.on( \"mouseover\", function() {\n\t\t\tif ( !that.resizing ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\taxis = this.className.match( /ui-resizable-(se|sw|ne|nw|n|e|s|w)/i );\n\t\t\t\t}\n\t\t\t\tthat.axis = axis && axis[ 1 ] ? axis[ 1 ] : \"se\";\n\t\t\t}\n\t\t} );\n\n\t\tif ( o.autoHide ) {\n\t\t\tthis._handles.hide();\n\t\t\tthis._addClass( \"ui-resizable-autohide\" );\n\t\t}\n\t},\n\n\t_removeHandles: function() {\n\t\tthis._handles.remove();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar i, handle,\n\t\t\tcapture = false;\n\n\t\tfor ( i in this.handles ) {\n\t\t\thandle = $( this.handles[ i ] )[ 0 ];\n\t\t\tif ( handle === event.target || $.contains( handle, event.target ) ) {\n\t\t\t\tcapture = true;\n\t\t\t}\n\t\t}\n\n\t\treturn !this.options.disabled && capture;\n\t},\n\n\t_mouseStart: function( event ) {\n\n\t\tvar curleft, curtop, cursor,\n\t\t\to = this.options,\n\t\t\tel = this.element;\n\n\t\tthis.resizing = true;\n\n\t\tthis._renderProxy();\n\n\t\tcurleft = this._num( this.helper.css( \"left\" ) );\n\t\tcurtop = this._num( this.helper.css( \"top\" ) );\n\n\t\tif ( o.containment ) {\n\t\t\tcurleft += $( o.containment ).scrollLeft() || 0;\n\t\t\tcurtop += $( o.containment ).scrollTop() || 0;\n\t\t}\n\n\t\tthis.offset = this.helper.offset();\n\t\tthis.position = { left: curleft, top: curtop };\n\n\t\tthis.size = this._helper ? {\n\t\t\t\twidth: this.helper.width(),\n\t\t\t\theight: this.helper.height()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.originalSize = this._helper ? {\n\t\t\t\twidth: el.outerWidth(),\n\t\t\t\theight: el.outerHeight()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.sizeDiff = {\n\t\t\twidth: el.outerWidth() - el.width(),\n\t\t\theight: el.outerHeight() - el.height()\n\t\t};\n\n\t\tthis.originalPosition = { left: curleft, top: curtop };\n\t\tthis.originalMousePosition = { left: event.pageX, top: event.pageY };\n\n\t\tthis.aspectRatio = ( typeof o.aspectRatio === \"number\" ) ?\n\t\t\to.aspectRatio :\n\t\t\t( ( this.originalSize.width / this.originalSize.height ) || 1 );\n\n\t\tcursor = $( \".ui-resizable-\" + this.axis ).css( \"cursor\" );\n\t\t$( \"body\" ).css( \"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor );\n\n\t\tthis._addClass( \"ui-resizable-resizing\" );\n\t\tthis._propagate( \"start\", event );\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function( event ) {\n\n\t\tvar data, props,\n\t\t\tsmp = this.originalMousePosition,\n\t\t\ta = this.axis,\n\t\t\tdx = ( event.pageX - smp.left ) || 0,\n\t\t\tdy = ( event.pageY - smp.top ) || 0,\n\t\t\ttrigger = this._change[ a ];\n\n\t\tthis._updatePrevProperties();\n\n\t\tif ( !trigger ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tdata = trigger.apply( this, [ event, dx, dy ] );\n\n\t\tthis._updateVirtualBoundaries( event.shiftKey );\n\t\tif ( this._aspectRatio || event.shiftKey ) {\n\t\t\tdata = this._updateRatio( data, event );\n\t\t}\n\n\t\tdata = this._respectSize( data, event );\n\n\t\tthis._updateCache( data );\n\n\t\tthis._propagate( \"resize\", event );\n\n\t\tprops = this._applyChanges();\n\n\t\tif ( !this._helper && this._proportionallyResizeElements.length ) {\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tif ( !$.isEmptyObject( props ) ) {\n\t\t\tthis._updatePrevProperties();\n\t\t\tthis._trigger( \"resize\", event, this.ui() );\n\t\t\tthis._applyChanges();\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\n\t\tthis.resizing = false;\n\t\tvar pr, ista, soffseth, soffsetw, s, left, top,\n\t\t\to = this.options, that = this;\n\n\t\tif ( this._helper ) {\n\n\t\t\tpr = this._proportionallyResizeElements;\n\t\t\tista = pr.length && ( /textarea/i ).test( pr[ 0 ].nodeName );\n\t\t\tsoffseth = ista && this._hasScroll( pr[ 0 ], \"left\" ) ? 0 : that.sizeDiff.height;\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width;\n\n\t\t\ts = {\n\t\t\t\twidth: ( that.helper.width()  - soffsetw ),\n\t\t\t\theight: ( that.helper.height() - soffseth )\n\t\t\t};\n\t\t\tleft = ( parseFloat( that.element.css( \"left\" ) ) +\n\t\t\t\t( that.position.left - that.originalPosition.left ) ) || null;\n\t\t\ttop = ( parseFloat( that.element.css( \"top\" ) ) +\n\t\t\t\t( that.position.top - that.originalPosition.top ) ) || null;\n\n\t\t\tif ( !o.animate ) {\n\t\t\t\tthis.element.css( $.extend( s, { top: top, left: left } ) );\n\t\t\t}\n\n\t\t\tthat.helper.height( that.size.height );\n\t\t\tthat.helper.width( that.size.width );\n\n\t\t\tif ( this._helper && !o.animate ) {\n\t\t\t\tthis._proportionallyResize();\n\t\t\t}\n\t\t}\n\n\t\t$( \"body\" ).css( \"cursor\", \"auto\" );\n\n\t\tthis._removeClass( \"ui-resizable-resizing\" );\n\n\t\tthis._propagate( \"stop\", event );\n\n\t\tif ( this._helper ) {\n\t\t\tthis.helper.remove();\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\t_updatePrevProperties: function() {\n\t\tthis.prevPosition = {\n\t\t\ttop: this.position.top,\n\t\t\tleft: this.position.left\n\t\t};\n\t\tthis.prevSize = {\n\t\t\twidth: this.size.width,\n\t\t\theight: this.size.height\n\t\t};\n\t},\n\n\t_applyChanges: function() {\n\t\tvar props = {};\n\n\t\tif ( this.position.top !== this.prevPosition.top ) {\n\t\t\tprops.top = this.position.top + \"px\";\n\t\t}\n\t\tif ( this.position.left !== this.prevPosition.left ) {\n\t\t\tprops.left = this.position.left + \"px\";\n\t\t}\n\t\tif ( this.size.width !== this.prevSize.width ) {\n\t\t\tprops.width = this.size.width + \"px\";\n\t\t}\n\t\tif ( this.size.height !== this.prevSize.height ) {\n\t\t\tprops.height = this.size.height + \"px\";\n\t\t}\n\n\t\tthis.helper.css( props );\n\n\t\treturn props;\n\t},\n\n\t_updateVirtualBoundaries: function( forceAspectRatio ) {\n\t\tvar pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\n\t\t\to = this.options;\n\n\t\tb = {\n\t\t\tminWidth: this._isNumber( o.minWidth ) ? o.minWidth : 0,\n\t\t\tmaxWidth: this._isNumber( o.maxWidth ) ? o.maxWidth : Infinity,\n\t\t\tminHeight: this._isNumber( o.minHeight ) ? o.minHeight : 0,\n\t\t\tmaxHeight: this._isNumber( o.maxHeight ) ? o.maxHeight : Infinity\n\t\t};\n\n\t\tif ( this._aspectRatio || forceAspectRatio ) {\n\t\t\tpMinWidth = b.minHeight * this.aspectRatio;\n\t\t\tpMinHeight = b.minWidth / this.aspectRatio;\n\t\t\tpMaxWidth = b.maxHeight * this.aspectRatio;\n\t\t\tpMaxHeight = b.maxWidth / this.aspectRatio;\n\n\t\t\tif ( pMinWidth > b.minWidth ) {\n\t\t\t\tb.minWidth = pMinWidth;\n\t\t\t}\n\t\t\tif ( pMinHeight > b.minHeight ) {\n\t\t\t\tb.minHeight = pMinHeight;\n\t\t\t}\n\t\t\tif ( pMaxWidth < b.maxWidth ) {\n\t\t\t\tb.maxWidth = pMaxWidth;\n\t\t\t}\n\t\t\tif ( pMaxHeight < b.maxHeight ) {\n\t\t\t\tb.maxHeight = pMaxHeight;\n\t\t\t}\n\t\t}\n\t\tthis._vBoundaries = b;\n\t},\n\n\t_updateCache: function( data ) {\n\t\tthis.offset = this.helper.offset();\n\t\tif ( this._isNumber( data.left ) ) {\n\t\t\tthis.position.left = data.left;\n\t\t}\n\t\tif ( this._isNumber( data.top ) ) {\n\t\t\tthis.position.top = data.top;\n\t\t}\n\t\tif ( this._isNumber( data.height ) ) {\n\t\t\tthis.size.height = data.height;\n\t\t}\n\t\tif ( this._isNumber( data.width ) ) {\n\t\t\tthis.size.width = data.width;\n\t\t}\n\t},\n\n\t_updateRatio: function( data ) {\n\n\t\tvar cpos = this.position,\n\t\t\tcsize = this.size,\n\t\t\ta = this.axis;\n\n\t\tif ( this._isNumber( data.height ) ) {\n\t\t\tdata.width = ( data.height * this.aspectRatio );\n\t\t} else if ( this._isNumber( data.width ) ) {\n\t\t\tdata.height = ( data.width / this.aspectRatio );\n\t\t}\n\n\t\tif ( a === \"sw\" ) {\n\t\t\tdata.left = cpos.left + ( csize.width - data.width );\n\t\t\tdata.top = null;\n\t\t}\n\t\tif ( a === \"nw\" ) {\n\t\t\tdata.top = cpos.top + ( csize.height - data.height );\n\t\t\tdata.left = cpos.left + ( csize.width - data.width );\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_respectSize: function( data ) {\n\n\t\tvar o = this._vBoundaries,\n\t\t\ta = this.axis,\n\t\t\tismaxw = this._isNumber( data.width ) && o.maxWidth && ( o.maxWidth < data.width ),\n\t\t\tismaxh = this._isNumber( data.height ) && o.maxHeight && ( o.maxHeight < data.height ),\n\t\t\tisminw = this._isNumber( data.width ) && o.minWidth && ( o.minWidth > data.width ),\n\t\t\tisminh = this._isNumber( data.height ) && o.minHeight && ( o.minHeight > data.height ),\n\t\t\tdw = this.originalPosition.left + this.originalSize.width,\n\t\t\tdh = this.originalPosition.top + this.originalSize.height,\n\t\t\tcw = /sw|nw|w/.test( a ), ch = /nw|ne|n/.test( a );\n\t\tif ( isminw ) {\n\t\t\tdata.width = o.minWidth;\n\t\t}\n\t\tif ( isminh ) {\n\t\t\tdata.height = o.minHeight;\n\t\t}\n\t\tif ( ismaxw ) {\n\t\t\tdata.width = o.maxWidth;\n\t\t}\n\t\tif ( ismaxh ) {\n\t\t\tdata.height = o.maxHeight;\n\t\t}\n\n\t\tif ( isminw && cw ) {\n\t\t\tdata.left = dw - o.minWidth;\n\t\t}\n\t\tif ( ismaxw && cw ) {\n\t\t\tdata.left = dw - o.maxWidth;\n\t\t}\n\t\tif ( isminh && ch ) {\n\t\t\tdata.top = dh - o.minHeight;\n\t\t}\n\t\tif ( ismaxh && ch ) {\n\t\t\tdata.top = dh - o.maxHeight;\n\t\t}\n\n\t\t// Fixing jump error on top/left - bug #2330\n\t\tif ( !data.width && !data.height && !data.left && data.top ) {\n\t\t\tdata.top = null;\n\t\t} else if ( !data.width && !data.height && !data.top && data.left ) {\n\t\t\tdata.left = null;\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_getPaddingPlusBorderDimensions: function( element ) {\n\t\tvar i = 0,\n\t\t\twidths = [],\n\t\t\tborders = [\n\t\t\t\telement.css( \"borderTopWidth\" ),\n\t\t\t\telement.css( \"borderRightWidth\" ),\n\t\t\t\telement.css( \"borderBottomWidth\" ),\n\t\t\t\telement.css( \"borderLeftWidth\" )\n\t\t\t],\n\t\t\tpaddings = [\n\t\t\t\telement.css( \"paddingTop\" ),\n\t\t\t\telement.css( \"paddingRight\" ),\n\t\t\t\telement.css( \"paddingBottom\" ),\n\t\t\t\telement.css( \"paddingLeft\" )\n\t\t\t];\n\n\t\tfor ( ; i < 4; i++ ) {\n\t\t\twidths[ i ] = ( parseFloat( borders[ i ] ) || 0 );\n\t\t\twidths[ i ] += ( parseFloat( paddings[ i ] ) || 0 );\n\t\t}\n\n\t\treturn {\n\t\t\theight: widths[ 0 ] + widths[ 2 ],\n\t\t\twidth: widths[ 1 ] + widths[ 3 ]\n\t\t};\n\t},\n\n\t_proportionallyResize: function() {\n\n\t\tif ( !this._proportionallyResizeElements.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar prel,\n\t\t\ti = 0,\n\t\t\telement = this.helper || this.element;\n\n\t\tfor ( ; i < this._proportionallyResizeElements.length; i++ ) {\n\n\t\t\tprel = this._proportionallyResizeElements[ i ];\n\n\t\t\t// TODO: Seems like a bug to cache this.outerDimensions\n\t\t\t// considering that we are in a loop.\n\t\t\tif ( !this.outerDimensions ) {\n\t\t\t\tthis.outerDimensions = this._getPaddingPlusBorderDimensions( prel );\n\t\t\t}\n\n\t\t\tprel.css( {\n\t\t\t\theight: ( element.height() - this.outerDimensions.height ) || 0,\n\t\t\t\twidth: ( element.width() - this.outerDimensions.width ) || 0\n\t\t\t} );\n\n\t\t}\n\n\t},\n\n\t_renderProxy: function() {\n\n\t\tvar el = this.element, o = this.options;\n\t\tthis.elementOffset = el.offset();\n\n\t\tif ( this._helper ) {\n\n\t\t\tthis.helper = this.helper || $( \"<div style='overflow:hidden;'></div>\" );\n\n\t\t\tthis._addClass( this.helper, this._helper );\n\t\t\tthis.helper.css( {\n\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tleft: this.elementOffset.left + \"px\",\n\t\t\t\ttop: this.elementOffset.top + \"px\",\n\t\t\t\tzIndex: ++o.zIndex //TODO: Don't modify option\n\t\t\t} );\n\n\t\t\tthis.helper\n\t\t\t\t.appendTo( \"body\" )\n\t\t\t\t.disableSelection();\n\n\t\t} else {\n\t\t\tthis.helper = this.element;\n\t\t}\n\n\t},\n\n\t_change: {\n\t\te: function( event, dx ) {\n\t\t\treturn { width: this.originalSize.width + dx };\n\t\t},\n\t\tw: function( event, dx ) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { left: sp.left + dx, width: cs.width - dx };\n\t\t},\n\t\tn: function( event, dx, dy ) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { top: sp.top + dy, height: cs.height - dy };\n\t\t},\n\t\ts: function( event, dx, dy ) {\n\t\t\treturn { height: this.originalSize.height + dy };\n\t\t},\n\t\tse: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.s.apply( this, arguments ),\n\t\t\t\tthis._change.e.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tsw: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.s.apply( this, arguments ),\n\t\t\t\tthis._change.w.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tne: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.n.apply( this, arguments ),\n\t\t\t\tthis._change.e.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tnw: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.n.apply( this, arguments ),\n\t\t\t\tthis._change.w.apply( this, [ event, dx, dy ] ) );\n\t\t}\n\t},\n\n\t_propagate: function( n, event ) {\n\t\t$.ui.plugin.call( this, n, [ event, this.ui() ] );\n\t\t( n !== \"resize\" && this._trigger( n, event, this.ui() ) );\n\t},\n\n\tplugins: {},\n\n\tui: function() {\n\t\treturn {\n\t\t\toriginalElement: this.originalElement,\n\t\t\telement: this.element,\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\tsize: this.size,\n\t\t\toriginalSize: this.originalSize,\n\t\t\toriginalPosition: this.originalPosition\n\t\t};\n\t}\n\n} );\n\n/*\n * Resizable Extensions\n */\n\n$.ui.plugin.add( \"resizable\", \"animate\", {\n\n\tstop: function( event ) {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tpr = that._proportionallyResizeElements,\n\t\t\tista = pr.length && ( /textarea/i ).test( pr[ 0 ].nodeName ),\n\t\t\tsoffseth = ista && that._hasScroll( pr[ 0 ], \"left\" ) ? 0 : that.sizeDiff.height,\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width,\n\t\t\tstyle = {\n\t\t\t\twidth: ( that.size.width - soffsetw ),\n\t\t\t\theight: ( that.size.height - soffseth )\n\t\t\t},\n\t\t\tleft = ( parseFloat( that.element.css( \"left\" ) ) +\n\t\t\t\t( that.position.left - that.originalPosition.left ) ) || null,\n\t\t\ttop = ( parseFloat( that.element.css( \"top\" ) ) +\n\t\t\t\t( that.position.top - that.originalPosition.top ) ) || null;\n\n\t\tthat.element.animate(\n\t\t\t$.extend( style, top && left ? { top: top, left: left } : {} ), {\n\t\t\t\tduration: o.animateDuration,\n\t\t\t\teasing: o.animateEasing,\n\t\t\t\tstep: function() {\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\twidth: parseFloat( that.element.css( \"width\" ) ),\n\t\t\t\t\t\theight: parseFloat( that.element.css( \"height\" ) ),\n\t\t\t\t\t\ttop: parseFloat( that.element.css( \"top\" ) ),\n\t\t\t\t\t\tleft: parseFloat( that.element.css( \"left\" ) )\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( pr && pr.length ) {\n\t\t\t\t\t\t$( pr[ 0 ] ).css( { width: data.width, height: data.height } );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Propagating resize, and updating values for each animation step\n\t\t\t\t\tthat._updateCache( data );\n\t\t\t\t\tthat._propagate( \"resize\", event );\n\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n} );\n\n$.ui.plugin.add( \"resizable\", \"containment\", {\n\n\tstart: function() {\n\t\tvar element, p, co, ch, cw, width, height,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tel = that.element,\n\t\t\toc = o.containment,\n\t\t\tce = ( oc instanceof $ ) ?\n\t\t\t\toc.get( 0 ) :\n\t\t\t\t( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthat.containerElement = $( ce );\n\n\t\tif ( /document/.test( oc ) || oc === document ) {\n\t\t\tthat.containerOffset = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\t\t\tthat.containerPosition = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: $( document ),\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: $( document ).width(),\n\t\t\t\theight: $( document ).height() || document.body.parentNode.scrollHeight\n\t\t\t};\n\t\t} else {\n\t\t\telement = $( ce );\n\t\t\tp = [];\n\t\t\t$( [ \"Top\", \"Right\", \"Left\", \"Bottom\" ] ).each( function( i, name ) {\n\t\t\t\tp[ i ] = that._num( element.css( \"padding\" + name ) );\n\t\t\t} );\n\n\t\t\tthat.containerOffset = element.offset();\n\t\t\tthat.containerPosition = element.position();\n\t\t\tthat.containerSize = {\n\t\t\t\theight: ( element.innerHeight() - p[ 3 ] ),\n\t\t\t\twidth: ( element.innerWidth() - p[ 1 ] )\n\t\t\t};\n\n\t\t\tco = that.containerOffset;\n\t\t\tch = that.containerSize.height;\n\t\t\tcw = that.containerSize.width;\n\t\t\twidth = ( that._hasScroll ( ce, \"left\" ) ? ce.scrollWidth : cw );\n\t\t\theight = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: ce,\n\t\t\t\tleft: co.left,\n\t\t\t\ttop: co.top,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\t\t}\n\t},\n\n\tresize: function( event ) {\n\t\tvar woset, hoset, isParent, isOffsetRelative,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcp = that.position,\n\t\t\tpRatio = that._aspectRatio || event.shiftKey,\n\t\t\tcop = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t},\n\t\t\tce = that.containerElement,\n\t\t\tcontinueResize = true;\n\n\t\tif ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\tcop = co;\n\t\t}\n\n\t\tif ( cp.left < ( that._helper ? co.left : 0 ) ) {\n\t\t\tthat.size.width = that.size.width +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.left - co.left ) :\n\t\t\t\t\t( that.position.left - cop.left ) );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.left = o.helper ? co.left : 0;\n\t\t}\n\n\t\tif ( cp.top < ( that._helper ? co.top : 0 ) ) {\n\t\t\tthat.size.height = that.size.height +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.top - co.top ) :\n\t\t\t\t\tthat.position.top );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.top = that._helper ? co.top : 0;\n\t\t}\n\n\t\tisParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );\n\t\tisOffsetRelative = /relative|absolute/.test( that.containerElement.css( \"position\" ) );\n\n\t\tif ( isParent && isOffsetRelative ) {\n\t\t\tthat.offset.left = that.parentData.left + that.position.left;\n\t\t\tthat.offset.top = that.parentData.top + that.position.top;\n\t\t} else {\n\t\t\tthat.offset.left = that.element.offset().left;\n\t\t\tthat.offset.top = that.element.offset().top;\n\t\t}\n\n\t\twoset = Math.abs( that.sizeDiff.width +\n\t\t\t( that._helper ?\n\t\t\t\tthat.offset.left - cop.left :\n\t\t\t\t( that.offset.left - co.left ) ) );\n\n\t\thoset = Math.abs( that.sizeDiff.height +\n\t\t\t( that._helper ?\n\t\t\t\tthat.offset.top - cop.top :\n\t\t\t\t( that.offset.top - co.top ) ) );\n\n\t\tif ( woset + that.size.width >= that.parentData.width ) {\n\t\t\tthat.size.width = that.parentData.width - woset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( hoset + that.size.height >= that.parentData.height ) {\n\t\t\tthat.size.height = that.parentData.height - hoset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( !continueResize ) {\n\t\t\tthat.position.left = that.prevPosition.left;\n\t\t\tthat.position.top = that.prevPosition.top;\n\t\t\tthat.size.width = that.prevSize.width;\n\t\t\tthat.size.height = that.prevSize.height;\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcop = that.containerPosition,\n\t\t\tce = that.containerElement,\n\t\t\thelper = $( that.helper ),\n\t\t\tho = helper.offset(),\n\t\t\tw = helper.outerWidth() - that.sizeDiff.width,\n\t\t\th = helper.outerHeight() - that.sizeDiff.height;\n\n\t\tif ( that._helper && !o.animate && ( /relative/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css( {\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t} );\n\t\t}\n\n\t\tif ( that._helper && !o.animate && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css( {\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t} );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"resizable\", \"alsoResize\", {\n\n\tstart: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options;\n\n\t\t$( o.alsoResize ).each( function() {\n\t\t\tvar el = $( this );\n\t\t\tel.data( \"ui-resizable-alsoresize\", {\n\t\t\t\twidth: parseFloat( el.width() ), height: parseFloat( el.height() ),\n\t\t\t\tleft: parseFloat( el.css( \"left\" ) ), top: parseFloat( el.css( \"top\" ) )\n\t\t\t} );\n\t\t} );\n\t},\n\n\tresize: function( event, ui ) {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\tdelta = {\n\t\t\t\theight: ( that.size.height - os.height ) || 0,\n\t\t\t\twidth: ( that.size.width - os.width ) || 0,\n\t\t\t\ttop: ( that.position.top - op.top ) || 0,\n\t\t\t\tleft: ( that.position.left - op.left ) || 0\n\t\t\t};\n\n\t\t\t$( o.alsoResize ).each( function() {\n\t\t\t\tvar el = $( this ), start = $( this ).data( \"ui-resizable-alsoresize\" ), style = {},\n\t\t\t\t\tcss = el.parents( ui.originalElement[ 0 ] ).length ?\n\t\t\t\t\t\t\t[ \"width\", \"height\" ] :\n\t\t\t\t\t\t\t[ \"width\", \"height\", \"top\", \"left\" ];\n\n\t\t\t\t$.each( css, function( i, prop ) {\n\t\t\t\t\tvar sum = ( start[ prop ] || 0 ) + ( delta[ prop ] || 0 );\n\t\t\t\t\tif ( sum && sum >= 0 ) {\n\t\t\t\t\t\tstyle[ prop ] = sum || null;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tel.css( style );\n\t\t\t} );\n\t},\n\n\tstop: function() {\n\t\t$( this ).removeData( \"ui-resizable-alsoresize\" );\n\t}\n} );\n\n$.ui.plugin.add( \"resizable\", \"ghost\", {\n\n\tstart: function() {\n\n\t\tvar that = $( this ).resizable( \"instance\" ), cs = that.size;\n\n\t\tthat.ghost = that.originalElement.clone();\n\t\tthat.ghost.css( {\n\t\t\topacity: 0.25,\n\t\t\tdisplay: \"block\",\n\t\t\tposition: \"relative\",\n\t\t\theight: cs.height,\n\t\t\twidth: cs.width,\n\t\t\tmargin: 0,\n\t\t\tleft: 0,\n\t\t\ttop: 0\n\t\t} );\n\n\t\tthat._addClass( that.ghost, \"ui-resizable-ghost\" );\n\n\t\t// DEPRECATED\n\t\t// TODO: remove after 1.12\n\t\tif ( $.uiBackCompat !== false && typeof that.options.ghost === \"string\" ) {\n\n\t\t\t// Ghost option\n\t\t\tthat.ghost.addClass( this.options.ghost );\n\t\t}\n\n\t\tthat.ghost.appendTo( that.helper );\n\n\t},\n\n\tresize: function() {\n\t\tvar that = $( this ).resizable( \"instance\" );\n\t\tif ( that.ghost ) {\n\t\t\tthat.ghost.css( {\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: that.size.height,\n\t\t\t\twidth: that.size.width\n\t\t\t} );\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" );\n\t\tif ( that.ghost && that.helper ) {\n\t\t\tthat.helper.get( 0 ).removeChild( that.ghost.get( 0 ) );\n\t\t}\n\t}\n\n} );\n\n$.ui.plugin.add( \"resizable\", \"grid\", {\n\n\tresize: function() {\n\t\tvar outerDimensions,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tcs = that.size,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\ta = that.axis,\n\t\t\tgrid = typeof o.grid === \"number\" ? [ o.grid, o.grid ] : o.grid,\n\t\t\tgridX = ( grid[ 0 ] || 1 ),\n\t\t\tgridY = ( grid[ 1 ] || 1 ),\n\t\t\tox = Math.round( ( cs.width - os.width ) / gridX ) * gridX,\n\t\t\toy = Math.round( ( cs.height - os.height ) / gridY ) * gridY,\n\t\t\tnewWidth = os.width + ox,\n\t\t\tnewHeight = os.height + oy,\n\t\t\tisMaxWidth = o.maxWidth && ( o.maxWidth < newWidth ),\n\t\t\tisMaxHeight = o.maxHeight && ( o.maxHeight < newHeight ),\n\t\t\tisMinWidth = o.minWidth && ( o.minWidth > newWidth ),\n\t\t\tisMinHeight = o.minHeight && ( o.minHeight > newHeight );\n\n\t\to.grid = grid;\n\n\t\tif ( isMinWidth ) {\n\t\t\tnewWidth += gridX;\n\t\t}\n\t\tif ( isMinHeight ) {\n\t\t\tnewHeight += gridY;\n\t\t}\n\t\tif ( isMaxWidth ) {\n\t\t\tnewWidth -= gridX;\n\t\t}\n\t\tif ( isMaxHeight ) {\n\t\t\tnewHeight -= gridY;\n\t\t}\n\n\t\tif ( /^(se|s|e)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t} else if ( /^(ne)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.top = op.top - oy;\n\t\t} else if ( /^(sw)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.left = op.left - ox;\n\t\t} else {\n\t\t\tif ( newHeight - gridY <= 0 || newWidth - gridX <= 0 ) {\n\t\t\t\touterDimensions = that._getPaddingPlusBorderDimensions( this );\n\t\t\t}\n\n\t\t\tif ( newHeight - gridY > 0 ) {\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top - oy;\n\t\t\t} else {\n\t\t\t\tnewHeight = gridY - outerDimensions.height;\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top + os.height - newHeight;\n\t\t\t}\n\t\t\tif ( newWidth - gridX > 0 ) {\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left - ox;\n\t\t\t} else {\n\t\t\t\tnewWidth = gridX - outerDimensions.width;\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left + os.width - newWidth;\n\t\t\t}\n\t\t}\n\t}\n\n} );\n\nreturn $.ui.resizable;\n\n} ) );\n","/*!\n * jQuery UI Spinner 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Spinner\n//>>group: Widgets\n//>>description: Displays buttons to easily input numbers via the keyboard or mouse.\n//>>docs: http://api.jqueryui.com/spinner/\n//>>demos: http://jqueryui.com/spinner/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/spinner.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./button\",\n\t\t\t\"../version\",\n\t\t\t\"../keycode\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nfunction spinnerModifer( fn ) {\n\treturn function() {\n\t\tvar previous = this.element.val();\n\t\tfn.apply( this, arguments );\n\t\tthis._refresh();\n\t\tif ( previous !== this.element.val() ) {\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t};\n}\n\n$.widget( \"ui.spinner\", {\n\tversion: \"1.12.1\",\n\tdefaultElement: \"<input>\",\n\twidgetEventPrefix: \"spin\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-spinner\": \"ui-corner-all\",\n\t\t\t\"ui-spinner-down\": \"ui-corner-br\",\n\t\t\t\"ui-spinner-up\": \"ui-corner-tr\"\n\t\t},\n\t\tculture: null,\n\t\ticons: {\n\t\t\tdown: \"ui-icon-triangle-1-s\",\n\t\t\tup: \"ui-icon-triangle-1-n\"\n\t\t},\n\t\tincremental: true,\n\t\tmax: null,\n\t\tmin: null,\n\t\tnumberFormat: null,\n\t\tpage: 10,\n\t\tstep: 1,\n\n\t\tchange: null,\n\t\tspin: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_create: function() {\n\n\t\t// handle string values that need to be parsed\n\t\tthis._setOption( \"max\", this.options.max );\n\t\tthis._setOption( \"min\", this.options.min );\n\t\tthis._setOption( \"step\", this.options.step );\n\n\t\t// Only format if there is a value, prevents the field from being marked\n\t\t// as invalid in Firefox, see #9573.\n\t\tif ( this.value() !== \"\" ) {\n\n\t\t\t// Format the value, but don't constrain.\n\t\t\tthis._value( this.element.val(), true );\n\t\t}\n\n\t\tthis._draw();\n\t\tthis._on( this._events );\n\t\tthis._refresh();\n\n\t\t// Turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = this._super();\n\t\tvar element = this.element;\n\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\n\t\t\tvar value = element.attr( option );\n\t\t\tif ( value != null && value.length ) {\n\t\t\t\toptions[ option ] = value;\n\t\t\t}\n\t\t} );\n\n\t\treturn options;\n\t},\n\n\t_events: {\n\t\tkeydown: function( event ) {\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tkeyup: \"_stop\",\n\t\tfocus: function() {\n\t\t\tthis.previous = this.element.val();\n\t\t},\n\t\tblur: function( event ) {\n\t\t\tif ( this.cancelBlur ) {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._stop();\n\t\t\tthis._refresh();\n\t\t\tif ( this.previous !== this.element.val() ) {\n\t\t\t\tthis._trigger( \"change\", event );\n\t\t\t}\n\t\t},\n\t\tmousewheel: function( event, delta ) {\n\t\t\tif ( !delta ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._spin( ( delta > 0 ? 1 : -1 ) * this.options.step, event );\n\t\t\tclearTimeout( this.mousewheelTimer );\n\t\t\tthis.mousewheelTimer = this._delay( function() {\n\t\t\t\tif ( this.spinning ) {\n\t\t\t\t\tthis._stop( event );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\n\t\t\tvar previous;\n\n\t\t\t// We never want the buttons to have focus; whenever the user is\n\t\t\t// interacting with the spinner, the focus should be on the input.\n\t\t\t// If the input is focused then this.previous is properly set from\n\t\t\t// when the input first received focus. If the input is not focused\n\t\t\t// then we need to set this.previous based on the value before spinning.\n\t\t\tprevious = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] ) ?\n\t\t\t\tthis.previous : this.element.val();\n\t\t\tfunction checkFocus() {\n\t\t\t\tvar isActive = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] );\n\t\t\t\tif ( !isActive ) {\n\t\t\t\t\tthis.element.trigger( \"focus\" );\n\t\t\t\t\tthis.previous = previous;\n\n\t\t\t\t\t// support: IE\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure focus is on (or stays on) the text field\n\t\t\tevent.preventDefault();\n\t\t\tcheckFocus.call( this );\n\n\t\t\t// Support: IE\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t// and check (again) if focus moved off of the input.\n\t\t\tthis.cancelBlur = true;\n\t\t\tthis._delay( function() {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\tcheckFocus.call( this );\n\t\t\t} );\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\n\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\n\t\t// TODO: do we really want to consider this a stop?\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\n\t\t// we trigger the stop event?\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\n\t},\n\n\t// Support mobile enhanced option and make backcompat more sane\n\t_enhance: function() {\n\t\tthis.uiSpinner = this.element\n\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t.wrap( \"<span>\" )\n\t\t\t.parent()\n\n\t\t\t\t// Add buttons\n\t\t\t\t.append(\n\t\t\t\t\t\"<a></a><a></a>\"\n\t\t\t\t);\n\t},\n\n\t_draw: function() {\n\t\tthis._enhance();\n\n\t\tthis._addClass( this.uiSpinner, \"ui-spinner\", \"ui-widget ui-widget-content\" );\n\t\tthis._addClass( \"ui-spinner-input\" );\n\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\n\n\t\t// Button bindings\n\t\tthis.buttons = this.uiSpinner.children( \"a\" )\n\t\t\t.attr( \"tabIndex\", -1 )\n\t\t\t.attr( \"aria-hidden\", true )\n\t\t\t.button( {\n\t\t\t\tclasses: {\n\t\t\t\t\t\"ui-button\": \"\"\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// TODO: Right now button does not support classes this is already updated in button PR\n\t\tthis._removeClass( this.buttons, \"ui-corner-all\" );\n\n\t\tthis._addClass( this.buttons.first(), \"ui-spinner-button ui-spinner-up\" );\n\t\tthis._addClass( this.buttons.last(), \"ui-spinner-button ui-spinner-down\" );\n\t\tthis.buttons.first().button( {\n\t\t\t\"icon\": this.options.icons.up,\n\t\t\t\"showLabel\": false\n\t\t} );\n\t\tthis.buttons.last().button( {\n\t\t\t\"icon\": this.options.icons.down,\n\t\t\t\"showLabel\": false\n\t\t} );\n\n\t\t// IE 6 doesn't understand height: 50% for the buttons\n\t\t// unless the wrapper has an explicit height\n\t\tif ( this.buttons.height() > Math.ceil( this.uiSpinner.height() * 0.5 ) &&\n\t\t\t\tthis.uiSpinner.height() > 0 ) {\n\t\t\tthis.uiSpinner.height( this.uiSpinner.height() );\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar options = this.options,\n\t\t\tkeyCode = $.ui.keyCode;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase keyCode.UP:\n\t\t\tthis._repeat( null, 1, event );\n\t\t\treturn true;\n\t\tcase keyCode.DOWN:\n\t\t\tthis._repeat( null, -1, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_UP:\n\t\t\tthis._repeat( null, options.page, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_DOWN:\n\t\t\tthis._repeat( null, -options.page, event );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_start: function( event ) {\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\t\tthis.spinning = true;\n\t\treturn true;\n\t},\n\n\t_repeat: function( i, steps, event ) {\n\t\ti = i || 500;\n\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay( function() {\n\t\t\tthis._repeat( 40, steps, event );\n\t\t}, i );\n\n\t\tthis._spin( steps * this.options.step, event );\n\t},\n\n\t_spin: function( step, event ) {\n\t\tvar value = this.value() || 0;\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\n\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false ) {\n\t\t\tthis._value( value );\n\t\t\tthis.counter++;\n\t\t}\n\t},\n\n\t_increment: function( i ) {\n\t\tvar incremental = this.options.incremental;\n\n\t\tif ( incremental ) {\n\t\t\treturn $.isFunction( incremental ) ?\n\t\t\t\tincremental( i ) :\n\t\t\t\tMath.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_adjustValue: function( value ) {\n\t\tvar base, aboveMin,\n\t\t\toptions = this.options;\n\n\t\t// Make sure we're at a valid step\n\t\t// - find out where we are relative to the base (min or 0)\n\t\tbase = options.min !== null ? options.min : 0;\n\t\taboveMin = value - base;\n\n\t\t// - round to the nearest step\n\t\taboveMin = Math.round( aboveMin / options.step ) * options.step;\n\n\t\t// - rounding is based on 0, so adjust back to our base\n\t\tvalue = base + aboveMin;\n\n\t\t// Fix precision from bad JS floating point math\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\n\n\t\t// Clamp the value\n\t\tif ( options.max !== null && value > options.max ) {\n\t\t\treturn options.max;\n\t\t}\n\t\tif ( options.min !== null && value < options.min ) {\n\t\t\treturn options.min;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t_stop: function( event ) {\n\t\tif ( !this.spinning ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timer );\n\t\tclearTimeout( this.mousewheelTimer );\n\t\tthis.counter = 0;\n\t\tthis.spinning = false;\n\t\tthis._trigger( \"stop\", event );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar prevValue, first, last;\n\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\n\t\t\tprevValue = this._parse( this.element.val() );\n\t\t\tthis.options[ key ] = value;\n\t\t\tthis.element.val( this._format( prevValue ) );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\n\t\t\tif ( typeof value === \"string\" ) {\n\t\t\t\tvalue = this._parse( value );\n\t\t\t}\n\t\t}\n\t\tif ( key === \"icons\" ) {\n\t\t\tfirst = this.buttons.first().find( \".ui-icon\" );\n\t\t\tthis._removeClass( first, null, this.options.icons.up );\n\t\t\tthis._addClass( first, null, value.up );\n\t\t\tlast = this.buttons.last().find( \".ui-icon\" );\n\t\t\tthis._removeClass( last, null, this.options.icons.down );\n\t\t\tthis._addClass( last, null, value.down );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis._toggleClass( this.uiSpinner, null, \"ui-state-disabled\", !!value );\n\t\tthis.element.prop( \"disabled\", !!value );\n\t\tthis.buttons.button( value ? \"disable\" : \"enable\" );\n\t},\n\n\t_setOptions: spinnerModifer( function( options ) {\n\t\tthis._super( options );\n\t} ),\n\n\t_parse: function( val ) {\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\n\t\t\tval = window.Globalize && this.options.numberFormat ?\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\n\t\t}\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\n\t},\n\n\t_format: function( value ) {\n\t\tif ( value === \"\" ) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn window.Globalize && this.options.numberFormat ?\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\n\t\t\tvalue;\n\t},\n\n\t_refresh: function() {\n\t\tthis.element.attr( {\n\t\t\t\"aria-valuemin\": this.options.min,\n\t\t\t\"aria-valuemax\": this.options.max,\n\n\t\t\t// TODO: what should we do with values that can't be parsed?\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\n\t\t} );\n\t},\n\n\tisValid: function() {\n\t\tvar value = this.value();\n\n\t\t// Null is invalid\n\t\tif ( value === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If value gets adjusted, it's invalid\n\t\treturn value === this._adjustValue( value );\n\t},\n\n\t// Update the value without triggering change\n\t_value: function( value, allowAny ) {\n\t\tvar parsed;\n\t\tif ( value !== \"\" ) {\n\t\t\tparsed = this._parse( value );\n\t\t\tif ( parsed !== null ) {\n\t\t\t\tif ( !allowAny ) {\n\t\t\t\t\tparsed = this._adjustValue( parsed );\n\t\t\t\t}\n\t\t\t\tvalue = this._format( parsed );\n\t\t\t}\n\t\t}\n\t\tthis.element.val( value );\n\t\tthis._refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.prop( \"disabled\", false )\n\t\t\t.removeAttr( \"autocomplete role aria-valuemin aria-valuemax aria-valuenow\" );\n\n\t\tthis.uiSpinner.replaceWith( this.element );\n\t},\n\n\tstepUp: spinnerModifer( function( steps ) {\n\t\tthis._stepUp( steps );\n\t} ),\n\t_stepUp: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tstepDown: spinnerModifer( function( steps ) {\n\t\tthis._stepDown( steps );\n\t} ),\n\t_stepDown: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * -this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tpageUp: spinnerModifer( function( pages ) {\n\t\tthis._stepUp( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tpageDown: spinnerModifer( function( pages ) {\n\t\tthis._stepDown( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tvalue: function( newVal ) {\n\t\tif ( !arguments.length ) {\n\t\t\treturn this._parse( this.element.val() );\n\t\t}\n\t\tspinnerModifer( this._value ).call( this, newVal );\n\t},\n\n\twidget: function() {\n\t\treturn this.uiSpinner;\n\t}\n} );\n\n// DEPRECATED\n// TODO: switch return back to widget declaration at top of file when this is removed\nif ( $.uiBackCompat !== false ) {\n\n\t// Backcompat for spinner html extension points\n\t$.widget( \"ui.spinner\", $.ui.spinner, {\n\t\t_enhance: function() {\n\t\t\tthis.uiSpinner = this.element\n\t\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t\t.wrap( this._uiSpinnerHtml() )\n\t\t\t\t.parent()\n\n\t\t\t\t\t// Add buttons\n\t\t\t\t\t.append( this._buttonHtml() );\n\t\t},\n\t\t_uiSpinnerHtml: function() {\n\t\t\treturn \"<span>\";\n\t\t},\n\n\t\t_buttonHtml: function() {\n\t\t\treturn \"<a></a><a></a>\";\n\t\t}\n\t} );\n}\n\nreturn $.ui.spinner;\n\n} ) );\n","!function(e,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)(\"object\"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p=\"\",r(0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){\"use strict\";function n(){var e=\"undefined\"==typeof JSON?{}:JSON;o.setupJSON(e)}var o=t(2),i=t(3);n();var a=window._rollbarConfig,s=a&&a.globalAlias||\"Rollbar\",u=window[s]&&\"undefined\"!=typeof window[s].shimId;!u&&a?o.wrapper.init(a):(window.Rollbar=o.wrapper,window.RollbarNotifier=i.Notifier),e.exports=o.wrapper},function(e,r,t){\"use strict\";function n(e,r,t){!t[4]&&window._rollbarWrappedError&&(t[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),e.uncaughtError.apply(e,t),r&&r.apply(window,t)}function o(e,r){if(r.hasOwnProperty&&r.hasOwnProperty(\"addEventListener\")){var t=r.addEventListener;r.addEventListener=function(r,n,o){t.call(this,r,e.wrap(n),o)};var n=r.removeEventListener;r.removeEventListener=function(e,r,t){n.call(this,e,r&&r._wrapped||r,t)}}}var i=t(3),a=t(8),s=i.Notifier;window._rollbarWrappedError=null;var u={};u.init=function(e,r){var t=new s(r);if(t.configure(e),e.captureUncaught){var i;r&&a.isType(r._rollbarOldOnError,\"function\")?i=r._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(i=window.onerror),window.onerror=function(){var e=Array.prototype.slice.call(arguments,0);n(t,i,e)};var u,c,l=[\"EventTarget\",\"Window\",\"Node\",\"ApplicationCache\",\"AudioTrackList\",\"ChannelMergerNode\",\"CryptoOperation\",\"EventSource\",\"FileReader\",\"HTMLUnknownElement\",\"IDBDatabase\",\"IDBRequest\",\"IDBTransaction\",\"KeyOperation\",\"MediaController\",\"MessagePort\",\"ModalWindow\",\"Notification\",\"SVGElementInstance\",\"Screen\",\"TextTrack\",\"TextTrackCue\",\"TextTrackList\",\"WebSocket\",\"WebSocketWorker\",\"Worker\",\"XMLHttpRequest\",\"XMLHttpRequestEventTarget\",\"XMLHttpRequestUpload\"];for(u=0;u<l.length;++u)c=l[u],window[c]&&window[c].prototype&&o(t,window[c].prototype)}return e.captureUnhandledRejections&&(r&&a.isType(r._unhandledRejectionHandler,\"function\")&&window.removeEventListener(\"unhandledrejection\",r._unhandledRejectionHandler),t._unhandledRejectionHandler=function(e){var r=e.reason,n=e.promise,o=e.detail;!r&&o&&(r=o.reason,n=o.promise),t.unhandledRejection(r,n)},window.addEventListener(\"unhandledrejection\",t._unhandledRejectionHandler)),window.Rollbar=t,s.processPayloads(),t},e.exports={wrapper:u,setupJSON:i.setupJSON}},function(e,r,t){\"use strict\";function n(e){E=e,w.setupJSON(e)}function o(e,r){return function(){var t=r||this;try{return e.apply(t,arguments)}catch(n){console.error(\"[Rollbar]:\",n)}}}function i(){h||(h=setTimeout(f,1e3))}function a(){return _}function s(e){_=_||this;var r=\"https://\"+s.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:r,environment:\"production\",scrubFields:g([],s.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:s.DEFAULT_LOG_LEVEL,reportLevel:s.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:s.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=e,e&&(e.hasOwnProperty(\"shimId\")?e.notifier=this:this.configure(e.options))}function u(e){window._rollbarPayloadQueue.push(e),i()}function c(e){return o(function(){var r=this._getLogArgs(arguments);return this._log(e||r.level||this.options.logLevel||s.DEFAULT_LOG_LEVEL,r.message,r.err,r.custom,r.callback)})}function l(e,r){e||(e=r?E.stringify(r):\"\");var t={body:e};return r&&(t.extra=g(!0,{},r)),{message:t}}function p(e,r,t){var n=m.guessErrorClass(r.message),o=r.name||n[0],i=n[1],a={exception:{\"class\":o,message:i}};if(e&&(a.exception.description=e||\"uncaught exception\"),r.stack){var s,u,c,p,f,d,h,w;for(a.frames=[],h=0;h<r.stack.length;++h)s=r.stack[h],u={filename:s.url?v.sanitizeUrl(s.url):\"(unknown)\",lineno:s.line||null,method:s.func&&\"?\"!==s.func?s.func:\"[anonymous]\",colno:s.column},c=p=f=null,d=s.context?s.context.length:0,d&&(w=Math.floor(d/2),p=s.context.slice(0,w),c=s.context[w],f=s.context.slice(w)),c&&(u.code=c),(p||f)&&(u.context={},p&&p.length&&(u.context.pre=p),f&&f.length&&(u.context.post=f)),s.args&&(u.args=s.args),a.frames.push(u);return a.frames.reverse(),t&&(a.extra=g(!0,{},t)),{trace:a}}return l(o+\": \"+i,t)}function f(){var e;try{for(;e=window._rollbarPayloadQueue.shift();)d(e)}finally{h=void 0}}function d(e){var r=e.endpointUrl,t=e.accessToken,n=e.payload,o=e.callback||function(){},i=(new Date).getTime();i-L>=6e4&&(L=i,R=0);var a=window._globalRollbarOptions.maxItems,c=window._globalRollbarOptions.itemsPerMinute,l=function(){return!n.ignoreRateLimit&&a>=1&&T>=a},p=function(){return!n.ignoreRateLimit&&c>=1&&R>=c};return l()?void o(new Error(a+\" max items reached\")):p()?void o(new Error(c+\" items per minute reached\")):(T++,R++,l()&&_._log(_.options.uncaughtErrorLevel,\"maxItems has been hit. Ignoring errors for the remainder of the current page load.\",null,{maxItems:a},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void y.post(r,t,n,function(r,t){return r?(r instanceof b&&(e.callback=function(){},setTimeout(function(){u(e)},s.RETRY_DELAY)),o(r)):o(null,t)}))}var h,g=t(4),m=t(5),v=t(8),w=t(10),y=w.XHR,b=w.ConnectionError,E=null;s.NOTIFIER_VERSION=\"1.9.2\",s.DEFAULT_ENDPOINT=\"api.rollbar.com/api/1/\",s.DEFAULT_SCRUB_FIELDS=[\"pw\",\"pass\",\"passwd\",\"password\",\"secret\",\"confirm_password\",\"confirmPassword\",\"password_confirmation\",\"passwordConfirmation\",\"access_token\",\"accessToken\",\"secret_key\",\"secretKey\",\"secretToken\"],s.DEFAULT_LOG_LEVEL=\"debug\",s.DEFAULT_REPORT_LEVEL=\"debug\",s.DEFAULT_UNCAUGHT_ERROR_LEVEL=\"error\",s.DEFAULT_ITEMS_PER_MIN=60,s.DEFAULT_MAX_ITEMS=0,s.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},s.RETRY_DELAY=1e4,window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:s.DEFAULT_MAX_ITEMS,itemsPerMinute:s.DEFAULT_ITEMS_PER_MIN};var _,x=s.prototype;x._getLogArgs=function(e){for(var r,t,n,i,a,u,c=this.options.logLevel||s.DEFAULT_LOG_LEVEL,l=[],p=0;p<e.length;++p)u=e[p],a=v.typeName(u),\"string\"===a?r?l.push(u):r=u:\"function\"===a?i=o(u,this):\"date\"===a?l.push(u):\"error\"===a||u instanceof Error||\"undefined\"!=typeof DOMException&&u instanceof DOMException?t?l.push(u):t=u:\"object\"!==a&&\"array\"!==a||(n?l.push(u):n=u);return l.length&&(n=n||{},n.extraArgs=l),{level:c,message:r,err:t,custom:n,callback:i}},x._route=function(e){var r=this.options.endpoint,t=/\\/$/.test(r),n=/^\\//.test(e);return t&&n?e=e.substring(1):t||n||(e=\"/\"+e),r+e},x._processShimQueue=function(e){for(var r,t,n,o,i,a,u,c={};t=e.shift();)r=t.shim,n=t.method,o=t.args,i=r.parentShim,u=c[r.shimId],u||(i?(a=c[i.shimId],u=new s(a)):u=this,c[r.shimId]=u),u[n]&&v.isType(u[n],\"function\")&&u[n].apply(u,o)},x._buildPayload=function(e,r,t,n,o){var i=this.options.accessToken,a=this.options.environment,u=g(!0,{},this.options.payload),c=v.uuid4();if(void 0===s.LEVELS[r])throw new Error(\"Invalid level\");if(!t&&!n&&!o)throw new Error(\"No message, stack info or custom data\");var l={environment:a,endpoint:this.options.endpoint,uuid:c,level:r,platform:\"browser\",framework:\"browser-js\",language:\"javascript\",body:this._buildBody(t,n,o),request:{url:window.location.href,query_string:window.location.search,user_ip:\"$remote_ip\"},client:{runtime_ms:e.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(e.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:\"rollbar-browser-js\",version:s.NOTIFIER_VERSION}};u.body&&delete u.body;var p={access_token:i,data:g(!0,l,u)};return this._scrub(p.data),p},x._buildBody=function(e,r,t){var n;return n=r?p(e,r,t):l(e,t)},x._getBrowserPlugins=function(){if(!this._browserPlugins){var e,r,t=window.navigator.plugins||[],n=t.length,o=[];for(r=0;r<n;++r)e=t[r],o.push({name:e.name,description:e.description});this._browserPlugins=o}return this._browserPlugins},x._scrub=function(e){function r(e,r,t,n,o,i){return r+v.redact(i)}function t(e){var t;if(v.isType(e,\"string\"))for(t=0;t<s.length;++t)e=e.replace(s[t],r);return e}function n(e,r){var t;for(t=0;t<a.length;++t)if(a[t].test(e)){r=v.redact(r);break}return r}function o(e,r){var o=n(e,r);return o===r?t(o):o}var i=this.options.scrubFields,a=this._getScrubFieldRegexs(i),s=this._getScrubQueryParamRegexs(i);return v.traverse(e,o),e},x._getScrubFieldRegexs=function(e){for(var r,t=[],n=0;n<e.length;++n)r=\"\\\\[?(%5[bB])?\"+e[n]+\"\\\\[?(%5[bB])?\\\\]?(%5[dD])?\",t.push(new RegExp(r,\"i\"));return t},x._getScrubQueryParamRegexs=function(e){for(var r,t=[],n=0;n<e.length;++n)r=\"\\\\[?(%5[bB])?\"+e[n]+\"\\\\[?(%5[bB])?\\\\]?(%5[dD])?\",t.push(new RegExp(\"(\"+r+\"=)([^&\\\\n]+)\",\"igm\"));return t},x._urlIsWhitelisted=function(e){var r,t,n,o,i,a,s,u,c,l;try{if(r=this.options.hostWhiteList,t=e&&e.data&&e.data.body&&e.data.body.trace,!r||0===r.length)return!0;if(!t)return!0;for(s=r.length,i=t.frames.length,c=0;c<i;c++){if(n=t.frames[c],o=n.filename,!v.isType(o,\"string\"))return!0;for(l=0;l<s;l++)if(a=r[l],u=new RegExp(a),u.test(o))return!0}}catch(p){return this.configure({hostWhiteList:null}),console.error(\"[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.\",p),!0}return!1},x._messageIsIgnored=function(e){var r,t,n,o,i,a,s,u,c;try{if(i=!1,n=this.options.ignoredMessages,!n||0===n.length)return!1;if(s=e&&e.data&&e.data.body,u=s&&s.trace&&s.trace.exception&&s.trace.exception.message,c=s&&s.message&&s.message.body,r=u||c,!r)return!1;for(o=n.length,t=0;t<o&&(a=new RegExp(n[t],\"gi\"),!(i=a.test(r)));t++);}catch(l){this.configure({ignoredMessages:null}),console.error(\"[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.\")}return i},x._enqueuePayload=function(e,r,t,n){var o={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route(\"item/\"),payload:e},i=function(){if(n){var e=\"This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details.\";n(null,{err:0,result:{id:null,uuid:null,message:e}})}};if(this._internalCheckIgnore(r,t,e))return void i();try{if(v.isType(this.options.checkIgnore,\"function\")&&this.options.checkIgnore(r,t,e))return void i()}catch(a){this.configure({checkIgnore:null}),console.error(\"[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().\",a)}if(this._urlIsWhitelisted(e)&&!this._messageIsIgnored(e)){if(this.options.verbose){if(e.data&&e.data.body&&e.data.body.trace){var s=e.data.body.trace,c=s.exception.message;console.error(\"[Rollbar]: \",c)}console.info(\"[Rollbar]: \",o)}v.isType(this.options.logFunction,\"function\")&&this.options.logFunction(o);try{v.isType(this.options.transform,\"function\")&&this.options.transform(e)}catch(a){this.configure({transform:null}),console.error(\"[Rollbar]: Error while calling custom transform() function. Removing custom transform().\",a)}this.options.enabled&&u(o)}},x._internalCheckIgnore=function(e,r,t){var n=r[0],o=s.LEVELS[n]||0,i=s.LEVELS[this.options.reportLevel]||0;if(o<i)return!0;var a=this.options?this.options.plugins:{};if(a&&a.jquery&&a.jquery.ignoreAjaxErrors)try{return!!t.data.body.message.extra.isAjax}catch(u){return!1}return!1},x._log=function(e,r,t,n,o,i,a){var s=null;if(t)try{if(s=t._savedStackTrace?t._savedStackTrace:m.parse(t),t===this.lastError)return;this.lastError=t}catch(u){console.error(\"[Rollbar]: Error while parsing the error object.\",u),r=t.message||t.description||r||String(t),t=null}var c=this._buildPayload(new Date,e,r,s,n);a&&(c.ignoreRateLimit=!0),this._enqueuePayload(c,!!i,[e,r,t,n],o)},x.log=c(),x.debug=c(\"debug\"),x.info=c(\"info\"),x.warn=c(\"warning\"),x.warning=c(\"warning\"),x.error=c(\"error\"),x.critical=c(\"critical\"),x.uncaughtError=o(function(e,r,t,n,o,i){if(i=i||null,o&&v.isType(o,\"error\"))return void this._log(this.options.uncaughtErrorLevel,e,o,i,null,!0);if(r&&v.isType(r,\"error\"))return void this._log(this.options.uncaughtErrorLevel,e,r,i,null,!0);var a={url:r||\"\",line:t};a.func=m.guessFunctionName(a.url,a.line),a.context=m.gatherContext(a.url,a.line);var s={mode:\"onerror\",message:o?String(o):e||\"uncaught exception\",url:document.location.href,stack:[a],useragent:navigator.userAgent},u=this._buildPayload(new Date,this.options.uncaughtErrorLevel,e,s,i);this._enqueuePayload(u,!0,[this.options.uncaughtErrorLevel,e,r,t,n,o])}),x.unhandledRejection=o(function(e,r){if(null==e)return void _._log(_.options.uncaughtErrorLevel,\"unhandled rejection was null or undefined!\",null,{},null,!1,!1);var t=e.message||(e?String(e):\"unhandled rejection\"),n=e._rollbarContext||r._rollbarContext||null;if(e&&v.isType(e,\"error\"))return void this._log(this.options.uncaughtErrorLevel,t,e,n,null,!0);var o={url:\"\",line:0};o.func=m.guessFunctionName(o.url,o.line),o.context=m.gatherContext(o.url,o.line);var i={mode:\"unhandledrejection\",message:t,url:document.location.href,stack:[o],useragent:navigator.userAgent},a=this._buildPayload(new Date,this.options.uncaughtErrorLevel,t,i,n);this._enqueuePayload(a,!0,[this.options.uncaughtErrorLevel,t,o.url,o.line,0,e,r])}),x.global=o(function(e){e=e||{};var r={startTime:e.startTime,maxItems:e.maxItems,itemsPerMinute:e.itemsPerMinute};g(!0,window._globalRollbarOptions,r),void 0!==e.maxItems&&(T=0),void 0!==e.itemsPerMinute&&(R=0)}),x.configure=o(function(e,r){var t=g(!0,{},e);g(!r,this.options,t),this.global(t)}),x.scope=o(function(e){var r=new s(this);return g(!0,r.options.payload,e),r}),x.wrap=function(e,r){try{var t;if(t=v.isType(r,\"function\")?r:function(){return r||{}},!v.isType(e,\"function\"))return e;if(e._isWrap)return e;if(!e._wrapped){e._wrapped=function(){try{return e.apply(this,arguments)}catch(r){throw\"string\"==typeof r&&(r=new String(r)),r.stack||(r._savedStackTrace=m.parse(r)),r._rollbarContext=t()||{},r._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=r,r}},e._wrapped._isWrap=!0;for(var n in e)e.hasOwnProperty(n)&&(e._wrapped[n]=e[n])}return e._wrapped}catch(o){return e}},x.loadFull=function(){console.error(\"[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance\")},s.processPayloads=function(e){return e?void f():void i()};var L=(new Date).getTime(),T=0,R=0;e.exports={Notifier:s,setupJSON:n,topLevelNotifier:a}},function(e,r){\"use strict\";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"[object Array]\"===n.call(e)},i=function(e){if(!e||\"[object Object]\"!==n.call(e))return!1;var r=t.call(e,\"constructor\"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,\"isPrototypeOf\");if(e.constructor&&!r&&!o)return!1;var i;for(i in e);return\"undefined\"==typeof i||t.call(e,i)};e.exports=function a(){var e,r,t,n,s,u,c=arguments[0],l=1,p=arguments.length,f=!1;for(\"boolean\"==typeof c?(f=c,c=arguments[1]||{},l=2):(\"object\"!=typeof c&&\"function\"!=typeof c||null==c)&&(c={});l<p;++l)if(e=arguments[l],null!=e)for(r in e)t=c[r],n=e[r],c!==n&&(f&&n&&(i(n)||(s=o(n)))?(s?(s=!1,u=t&&o(t)?t:[]):u=t&&i(t)?t:{},c[r]=a(f,u,n)):\"undefined\"!=typeof n&&(c[r]=n));return c}},function(e,r,t){\"use strict\";function n(){return l}function o(){return null}function i(e){var r={};return r._stackFrame=e,r.url=e.fileName,r.line=e.lineNumber,r.func=e.functionName,r.column=e.columnNumber,r.args=e.args,r.context=o(r.url,r.line),r}function a(e){function r(){var r=[];try{r=c.parse(e)}catch(t){r=[]}for(var n=[],o=0;o<r.length;o++)n.push(new i(r[o]));return n}return{stack:r(),message:e.message,name:e.name}}function s(e){return new a(e)}function u(e){if(!e)return[\"Unknown error. There was no error message to display.\",\"\"];var r=e.match(p),t=\"(unknown)\";return r&&(t=r[r.length-1],e=e.replace((r[r.length-2]||\"\")+t+\":\",\"\"),e=e.replace(/(^[\\s]+|[\\s]+$)/g,\"\")),[t,e]}var c=t(6),l=\"?\",p=new RegExp(\"^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): \");e.exports={guessFunctionName:n,guessErrorClass:u,gatherContext:o,parse:s,Stack:a,Frame:i}},function(e,r,t){var n,o,i;!function(a,s){\"use strict\";o=[t(7)],n=s,i=\"function\"==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i))}(this,function(e){\"use strict\";function r(e,r,t){if(\"function\"==typeof Array.prototype.map)return e.map(r,t);for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=r.call(t,e[o]);return n}function t(e,r,t){if(\"function\"==typeof Array.prototype.filter)return e.filter(r,t);for(var n=[],o=0;o<e.length;o++)r.call(t,e[o])&&n.push(e[o]);return n}var n=/(^|@)\\S+\\:\\d+/,o=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,i=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(o))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(e.indexOf(\":\")===-1)return[e];var r=e.replace(/[\\(\\)\\s]/g,\"\").split(\":\"),t=r.pop(),n=r[r.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var o=r.pop();return[r.join(\":\"),o,t]}return[r.join(\":\"),t,void 0]},parseV8OrIE:function(n){var i=t(n.stack.split(\"\\n\"),function(e){return!!e.match(o)},this);return r(i,function(r){r.indexOf(\"(eval \")>-1&&(r=r.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var t=r.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),n=this.extractLocation(t.pop()),o=t.join(\" \")||void 0,i=\"eval\"===n[0]?void 0:n[0];return new e(o,(void 0),i,n[1],n[2],r)},this)},parseFFOrSafari:function(n){var o=t(n.stack.split(\"\\n\"),function(e){return!e.match(i)},this);return r(o,function(r){if(r.indexOf(\" > eval\")>-1&&(r=r.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),r.indexOf(\"@\")===-1&&r.indexOf(\":\")===-1)return new e(r);var t=r.split(\"@\"),n=this.extractLocation(t.pop()),o=t.shift()||void 0;return new e(o,(void 0),n[0],n[1],n[2],r)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(r){for(var t=/Line (\\d+).*script (?:in )?(\\S+)/i,n=r.message.split(\"\\n\"),o=[],i=2,a=n.length;i<a;i+=2){var s=t.exec(n[i]);s&&o.push(new e((void 0),(void 0),s[2],s[1],(void 0),n[i]))}return o},parseOpera10:function(r){for(var t=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,n=r.stacktrace.split(\"\\n\"),o=[],i=0,a=n.length;i<a;i+=2){var s=t.exec(n[i]);s&&o.push(new e(s[3]||void 0,(void 0),s[2],s[1],(void 0),n[i]))}return o},parseOpera11:function(o){var i=t(o.stack.split(\"\\n\"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return r(i,function(r){var t,n=r.split(\"@\"),o=this.extractLocation(n.pop()),i=n.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(t=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===t||\"[arguments not available]\"===t?void 0:t.split(\",\");return new e(a,s,o[0],o[1],o[2],r)},this)}}})},function(e,r,t){var n,o,i;!function(t,a){\"use strict\";o=[],n=a,i=\"function\"==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i))}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e,r,t,n,o,i){void 0!==e&&this.setFunctionName(e),void 0!==r&&this.setArgs(r),void 0!==t&&this.setFileName(t),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return r.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(r){if(!e(r))throw new TypeError(\"Line Number must be a Number\");this.lineNumber=Number(r)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(r){if(!e(r))throw new TypeError(\"Column Number must be a Number\");this.columnNumber=Number(r)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var r=this.getFunctionName()||\"{anonymous}\",t=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",n=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return r+t+n+o+i}},r})},function(e,r,t){\"use strict\";function n(e){return{}.toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function o(e,r){return n(e)===r}function i(e){if(!o(e,\"string\"))throw new Error(\"received invalid input\");for(var r=l,t=r.parser[r.strictMode?\"strict\":\"loose\"].exec(e),n={},i=14;i--;)n[r.key[i]]=t[i]||\"\";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(e,t,o){t&&(n[r.q.name][t]=o)}),n}function a(e){var r=i(e);return\"\"===r.anchor&&(r.source=r.source.replace(\"#\",\"\")),e=r.source.replace(\"?\"+r.query,\"\")}function s(e,r){var t,n,i,a=o(e,\"object\"),u=o(e,\"array\"),c=[];if(a)for(t in e)e.hasOwnProperty(t)&&c.push(t);else if(u)for(i=0;i<e.length;++i)c.push(i);for(i=0;i<c.length;++i)t=c[i],n=e[t],a=o(n,\"object\"),u=o(n,\"array\"),a||u?e[t]=s(n,r):e[t]=r(t,n);return e}function u(e){return e=String(e),new Array(e.length+1).join(\"*\")}function c(){var e=(new Date).getTime(),r=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"===r?t:7&t|8).toString(16)});return r}t(9);var l={strictMode:!1,key:[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],q:{name:\"queryKey\",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}},p={isType:o,parseUri:i,parseUriOptions:l,redact:u,sanitizeUrl:a,traverse:s,typeName:n,uuid4:c};e.exports=p},function(e,r){!function(e){\"use strict\";e.console=e.console||{};for(var r,t,n=e.console,o={},i=function(){},a=\"memory\".split(\",\"),s=\"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn\".split(\",\");r=a.pop();)n[r]||(n[r]=o);for(;t=s.pop();)n[t]||(n[t]=i)}(\"undefined\"==typeof window?this:window)},function(e,r,t){\"use strict\";function n(e){a=e}function o(e){this.name=\"Connection Error\",this.message=e,this.stack=(new Error).stack}var i=t(8),a=null;o.prototype=Object.create(Error.prototype),o.prototype.constructor=o;var s={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\"Msxml2.XMLHTTP\")},function(){return new ActiveXObject(\"Msxml3.XMLHTTP\")},function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}],createXMLHTTPObject:function(){var e,r=!1,t=s.XMLHttpFactories,n=t.length;for(e=0;e<n;e++)try{r=t[e]();break}catch(o){}return r},post:function(e,r,t,n){if(!i.isType(t,\"object\"))throw new Error(\"Expected an object to POST\");t=a.stringify(t),n=n||function(){};var u=s.createXMLHTTPObject();if(u)try{try{var c=function(){try{if(c&&4===u.readyState){c=void 0;var e=a.parse(u.responseText);200===u.status?n(null,e):i.isType(u.status,\"number\")&&u.status>=400&&u.status<600?(403==u.status&&console.error(\"[Rollbar]:\"+e.message),n(new Error(String(u.status)))):n(new o(\"XHR response had no status code (likely connection failure)\"))}}catch(r){var t;t=r&&r.stack?r:new Error(r),n(t)}};u.open(\"POST\",e,!0),u.setRequestHeader&&(u.setRequestHeader(\"Content-Type\",\"application/json\"),u.setRequestHeader(\"X-Rollbar-Access-Token\",r)),u.onreadystatechange=c,u.send(t)}catch(l){if(\"undefined\"!=typeof XDomainRequest){\"http:\"===window.location.href.substring(0,5)&&\"https\"===e.substring(0,5)&&(e=\"http\"+e.substring(5));var p=function(){n(new o(\"Request timed out\"))},f=function(){n(new Error(\"Error during request\"))},d=function(){n(null,a.parse(u.responseText))};u=new XDomainRequest,u.onprogress=function(){},u.ontimeout=p,u.onerror=f,u.onload=d,u.open(\"POST\",e,!0),u.send(t)}}}catch(h){n(h)}}};e.exports={XHR:s,setupJSON:n,ConnectionError:o}}])});","'use strict';\nvar ko = require('./herocalc_knockout');\n    \nvar my = require(\"dota-hero-calculator-library\");\nvar AbilityModel = require(\"dota-hero-calculator-library/src/herocalc/AbilityModel\");\nvar BasicInventoryViewModel = require(\"dota-hero-calculator-library/src/herocalc/inventory/BasicInventoryViewModel\");\nvar union = require(\"dota-hero-calculator-library/src/herocalc/util/union\");\n\nvar inventoryClipBoard = {\n    items: [],\n    activeItems: []\n};\n\nvar GraphPropertyOption = function (id, label) {\n    this.id = id;\n    this.label = label;\n};\n\nAbilityModel.prototype.isQWER = function (ability) {\n    return (ability.displayname != 'Empty' &&  (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN') == -1 || ability.name.indexOf('invoker_') != -1) && ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1)\n}\n\nvar BuildExplorerViewModel = function (h) {\nvar self = this;\n    self.parent = h;\n\n    self.itemBuild = ko.observableArray([]);\n    self.skillBuild = ko.observableArray([]);\n    self.graphDataItemRows = [];\n    for (var i = 0; i < 25; i++) {\n        self.itemBuild.push(new BasicInventoryViewModel());\n        self.itemBuild()[i].carryOver = ko.observable(true);\n        self.skillBuild.push(ko.observable(-1));\n        self.graphDataItemRows.push(ko.observable(false));\n    }\n    self.toggleItemBuildCarryOver = function (index) {\n        self.itemBuild()[index].carryOver(!self.itemBuild()[index].carryOver());\n    }\n    \n    self.abilityMapData = [0,1,2,3,4];\n    self.abilityMapHero = self.parent.selectedHero().heroName;\n    self.abilityMap = ko.computed(function () {\n        if (self.abilityMapHero == self.parent.selectedHero().heroName) return;\n        self.abilityMapHero = self.parent.selectedHero().heroName;\n        var newMap = self.parent.ability().abilities().map(function(ability, index) {\n            if (self.parent.ability().isQWER(ability)) {\n                return index;\n            }\n            else {\n                return -1;\n            }\n        }).filter(function(element) { return element != -1; });\n        for (var i = 0; i < 25; i++) {\n            var abilityValue = self.skillBuild()[i]();\n            if (abilityValue == -1) continue;\n            \n            var abilityIndex = self.abilityMapData.indexOf(abilityValue);\n            var newValue = newMap[abilityIndex];\n            if (newValue != abilityValue) {\n                self.skillBuild()[i](newValue);\n            }\n        }\n        self.abilityMapData = newMap;\n    });\n    \n    self.availableSkillBuildPoints = ko.computed(function () {\n        return self.skillBuild().reduce(function(memo, num){ return memo + (num() == -1); }, 0);\n    });\n    self.getSkillBuildAbilityLevel = function (index) {\n        return self.skillBuild().reduce(function(memo, num){ return memo + (num() == index); }, 0);\n    };\n    self.toggleAbilitySkillBuild = function (index, abilityIndex, data, event) {\n        if (self.skillBuild()[index]() != abilityIndex) {\n            var ability = self.parent.ability().abilities()[abilityIndex],\n                abilityType = ability.abilitytype,\n                skillBuildSlice = self.skillBuild().slice(0, index),\n                currentAbilityLevel = self.skillBuild().reduce(function(memo, num){ return memo + (num() == abilityIndex); }, 0),\n                n = skillBuildSlice.reduce(function(memo, num){ return memo + (num() == abilityIndex); }, 0);\n            \n            if (self.IsValidAbilityLevel(ability, self.parent.selectedHero().heroName, index + 1, n)) {\n                self.skillBuild()[index](abilityIndex);\n                for (var i = index + 1; i < 25; i++) {\n                    if (self.skillBuild()[i]() == abilityIndex) {\n                        n++;\n                        if (!self.IsValidAbilityLevel(ability, self.parent.selectedHero().heroName, i + 1, n)) {\n                            self.skillBuild()[i](-1);\n                            n--;\n                        }\n                    }\n                }\n            }\n            else if (n > 0 && self.IsValidAbilityLevel(ability, self.parent.selectedHero().heroName, index + 1, n - 1)) {\n                for (var i = skillBuildSlice.length - 1; i >= 0; i--) {\n                    if (skillBuildSlice[i]() == abilityIndex) {\n                        self.skillBuild()[i](-1);\n                        self.skillBuild()[index](abilityIndex);\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            self.skillBuild()[index](-1);\n        }\n    };\n    self.IsValidAbilityLevel = function (ability, heroName, heroLevel, abilityLevel) {\n        var a = 1, b = 2, m = 4;\n        if (ability.name == 'attribute_bonus') {\n            m = 10;\n        }\n        else {\n            if (ability.abilitytype == 'DOTA_ABILITY_TYPE_ULTIMATE') {\n                if (heroName == 'invoker') {\n                    a = 2;\n                    b = 5;\n                }\n                else if (heroName == 'meepo') {\n                    a = 3;\n                    b = 7;\n                    m = 3;\n                }\n                else {\n                    a = 6;\n                    b = 5;\n                    m = 3;\n                }\n            }\n            else {\n                if (heroName == 'invoker') {\n                    m = 7;\n                }\n            }                \n        }\n        \n        return heroLevel >= a + b * abilityLevel && abilityLevel < m;\n    }\n    \n    self.resetItemBuild = function (index) {\n        self.itemBuild()[index].removeAll();\n    };        \n    self.resetAllItemBuilds = function () {\n        for (var i = 0; i < 25; i++) {\n            self.itemBuild()[i].removeAll();\n            self.itemBuild()[i].carryOver(true);\n        }\n    };\n    self.resetSkillBuild = function () {\n        for (var i = 0; i < 25; i++) {\n            self.skillBuild()[i](-1);\n        }\n    };\n    self.graphData = ko.observableArray([]);\n    self.graphDataHeader = ko.observable(self.parent.selectedHero().heroDisplayName);\n    self.parent.selectedHero.subscribe(function (newValue) {\n        self.graphDataHeader(self.parent.selectedHero().heroDisplayName);\n    });\n    self.graphDataDescription = ko.observable('');\n    self.graphProperties = ko.observableArray([\n        new GraphPropertyOption('totalArmorPhysical', 'Armor'),\n        new GraphPropertyOption('totalArmorPhysicalReduction', 'Physical Damage Reduction'),\n        new GraphPropertyOption('totalMagicResistance', 'Magical Resistance'),\n        new GraphPropertyOption('health', 'Health'),\n        new GraphPropertyOption('healthregen', 'Health Regeneration'),\n        new GraphPropertyOption('mana', 'Mana'),\n        new GraphPropertyOption('manaregen', 'Mana Regeneration'),\n        new GraphPropertyOption('ehpPhysical', 'EHP Physical'),\n        new GraphPropertyOption('ehpMagical', 'EHP Magical'),\n        new GraphPropertyOption('damage', 'Damage per attack'),\n        new GraphPropertyOption('dps', 'Damage per second'),\n        new GraphPropertyOption('attacksPerSecond', 'Attacks per second'),\n        new GraphPropertyOption('attackTime', 'Time per attack')\n    ]);\n    self.graph = function() {\n        var savedAbilityLevels = [],\n            savedLevel = self.parent.selectedHeroLevel(),\n            savedItems = self.parent.inventory.items(),\n            savedActiveItems = self.parent.inventory.activeItems(),\n            s = ko.toJS(self.skillBuild),\n            carryOverItems = [],\n            carryOverActiveItems = [],\n            dataset = [];\n        for (var i = 0; i < self.parent.ability().abilities().length; i++) {\n            savedAbilityLevels.push(self.parent.ability().abilities()[i].level());\n        }\n        for (var i = 1; i < 26; i++) {\n            self.parent.selectedHeroLevel(i);\n            var skillBuildSubset = s.slice(0, i);\n            for (var j = 0; j < self.parent.ability().abilities().length; j++) {\n                var a = self.parent.ability().abilities()[j],\n                    count = skillBuildSubset.reduce(function(memo, num) {\n                        return memo + (num == j);\n                    }, 0);\n                a.level(count);\n            }\n\n            if (!self.itemBuild()[i - 1].carryOver()) {\n                carryOverItems = [];\n                carryOverActiveItems = [];\n            }\n            carryOverItems = carryOverItems.concat(self.itemBuild()[i - 1].items());\n            carryOverActiveItems = carryOverActiveItems.concat(self.itemBuild()[i - 1].activeItems());\n\n            self.parent.inventory.items(carryOverItems);\n            self.parent.inventory.activeItems(carryOverActiveItems);\n            var dataObj = {};\n            for (var j = 0; j < self.graphProperties().length; j++) {\n                var prop = self.graphProperties()[j];\n                switch (prop.id) {\n                    case 'dps':\n                        dataObj[prop.id] = self.parent['damageTotalInfo']().totalRow[2]().toFixed(2);\n                        break;\n                    case 'damage':\n                        dataObj[prop.id] = self.parent['damageTotalInfo']().totalRow[0]().toFixed(2);\n                        break;\n                    default:\n                        dataObj[prop.id] = self.parent[prop.id]();\n                        break;\n                }\n            }\n\n            dataObj.items = carryOverItems.map(function(item) {\n                return ko.toJS(item);\n            });\n            dataset.push(dataObj);\n            if (carryOverItems > 0) {\n                self.graphDataItemRows[i - 1](true);\n            }\n        }\n        var data = {\n            header: self.graphDataHeader(),\n            description: self.graphDataDescription(),\n            items: self.parent.inventory.items().map(function(item) {\n                return ko.toJS(item);\n            }),\n            skillBuild: ko.toJS(self.skillBuild),\n            data: dataset,\n            abilityMap: self.abilityMapData.slice(0),\n            cumulativeSkillBuild: [],\n            visible: ko.observable(true)\n        }\n        for (var i = 0; i < 25; i++) {\n            var skillBuildAtLevel = [],\n                skillBuildSlice = data.skillBuild.slice(0, i + 1);\n            for (var j = 0; j < data.abilityMap.length; j++) {\n                var abilityIndex = data.abilityMap[j];\n                skillBuildAtLevel.push(skillBuildSlice.reduce(function(memo, num) {\n                    return memo + (num == abilityIndex);\n                }, 0));\n            }\n            data.cumulativeSkillBuild.push(skillBuildAtLevel);\n        }\n\n        self.graphData.push(data);\n        self.parent.selectedHeroLevel(savedLevel);\n        for (var i = 0; i < self.parent.ability().abilities().length; i++) {\n            self.parent.ability().abilities()[i].level(savedAbilityLevels[i]);\n        }\n        self.parent.inventory.items(savedItems);\n        self.parent.inventory.activeItems(savedActiveItems);\n    };\n    self.removeGraphDataSet = function (data) {\n        self.graphData.remove(data);\n    }\n    self.selectedGraphProperty = ko.observable(self.graphProperties()[0].id);\n    \n    self.graphChartOptions = ko.computed(function () {\n        var color = 'rgb(151, 154, 162)';\n        return {\n            responsive: true,\n            datasetStroke: false,\n            datasetStrokeWidth: -1,\n            datasetFill: false,\n            pointHitDetectionRadius : 10,\n            scaleFontColor: color,\n            scaleLineColor: color.replace('rgb', 'rgba').replace(')', ', .1)'),\n            scaleGridLineColor: color.replace('rgb', 'rgba').replace(')', ', .1)')\n        }\n    });\n    self.graphChartData = ko.computed(function () {\n        var data = {\n            labels: [],\n            datasets: []\n        }\n        for (var i = 0; i < 25; i++) {\n            data.labels.push((i+1).toString());\n        }\n        for (var i = 0; i < self.graphData().length; i++) {\n            var dataObj = self.graphData()[i],\n                dataset = {\n                    label: dataObj.header,\n                    fillColor: self.graphDistinctColor(self.graphData().length, i, .1),\n                    strokeColor: self.graphDistinctColor(self.graphData().length, i, 1),\n                    pointColor: self.graphDistinctColor(self.graphData().length, i, 1),\n                    pointStrokeColor: self.graphDistinctColor(self.graphData().length, i, 1),\n                    pointHighlightFill: self.graphDistinctColor(self.graphData().length, i, .1),\n                    pointHighlightStroke: self.graphDistinctColor(self.graphData().length, i, .5),\n                    data: dataObj.data.map(function (o) {\n                        return o[self.selectedGraphProperty()]\n                    })\n                };\n            data.datasets.push(dataset);\n        }\n        return data;\n    });\n    self.graphDistinctColor = function (max, index, alpha) {\n        var alpha = alpha || 1,\n            rgba = self.hslToRgb((1 / max) * index % 1, 1, .5);\n        rgba.push(alpha);\n        return \"rgba(\" + rgba.join() + \")\";\n    }\n    self.getDistinctColor = function (max, index, alpha) {\n        var alpha = alpha || 1;\n        rgba = self.hslToRgb((1 / max) * index % 1, 1, .5);\n        rgba.push(alpha);\n        return rgba;\n    }\n    self.hslToRgb = function(h, s, l) {\n        var r, g, b;\n        if (s == 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            var hue2rgb = function hue2rgb(p, q, t) {\n                if (t < 0) t += 1;\n                if (t > 1) t -= 1;\n                if (t < 1 / 6) return p + (q - p) * 6 * t;\n                if (t < 1 / 2) return q;\n                if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                return p;\n            }\n\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1 / 3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1 / 3);\n        }\n\n        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    }\n    \n    self.showGraphItemBuildRows = ko.observable(false);\n    self.showGraphSkillBuildColumns = ko.observable(false);\n    self.graphRowHasItems = function (index) {\n        return self.graphData().some(function (dataset) {\n            return dataset.visible() && dataset.data[index].items.length > 0;\n        });\n    }\n\n    self.selectInventory = function (index) {\n        self.parent.selectedInventory(self.parent.selectedInventory() == index ? -1 : index);\n    }\n    self.getSelectedInventory = ko.pureComputed(function () {\n        if (self.parent.selectedInventory() == -1) {\n            return self.parent.inventory;\n        }\n        else {\n            return self.itemBuild()[self.parent.selectedInventory()];\n        }\n    });\n    self.copyInventory = function (index) {\n        if (self.parent.selectedInventory() != -1 && self.parent.selectedInventory() != index) {\n            self.itemBuild()[self.parent.selectedInventory()].items(self.itemBuild()[self.parent.selectedInventory()].items().concat(self.itemBuild()[index].items()));\n            self.itemBuild()[self.parent.selectedInventory()].activeItems(union(self.itemBuild()[self.parent.selectedInventory()].activeItems(), self.itemBuild()[index].activeItems()));\n        }\n    }\n    self.copyInventoryToClipBoard = function (index) {\n        if (index == -1) {\n            inventoryClipBoard.items = self.parent.inventory.items.slice(0);\n            inventoryClipBoard.activeItems = self.parent.inventory.activeItems.slice(0);            \n        }\n        else {\n            inventoryClipBoard.items = self.itemBuild()[index].items.slice(0);\n            inventoryClipBoard.activeItems = self.itemBuild()[index].activeItems.slice(0);\n        }\n    }\n    self.pasteInventoryFromClipBoard = function (index) {\n        if (inventoryClipBoard.items.length > 0) {\n            if (index == -1) {\n                self.parent.inventory.items(self.parent.inventory.items().concat(inventoryClipBoard.items));\n                self.parent.inventory.activeItems(union(self.parent.inventory.activeItems(), inventoryClipBoard.activeItems));    \n            }\n            else {\n                self.itemBuild()[index].items(self.itemBuild()[index].items().concat(inventoryClipBoard.items));\n                self.itemBuild()[index].activeItems(union(self.itemBuild()[index].activeItems(), inventoryClipBoard.activeItems));\n            }\n        }\n    }\n    self.loadGraphData = function (data) {\n        self.parent.sectionDisplay()['skillbuild'](true);\n        for (var i = 0; i < data.length; i++) {\n            data[i].visible = ko.observable(data[i].visible);\n        }\n        self.graphData(data);\n    }\n    self.graphChartContext = ko.observable();\n    self.exportImage = function () {\n        var w = window.open();\n        w.document.write('<img src=\"'+ self.graphChartContext().canvas.toDataURL() +'\"/>');\n    }\n    return self;\n}\n\nmodule.exports = BuildExplorerViewModel;","\"use strict\";\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar HeroCalc = require(\"dota-hero-calculator-library\");\nvar DamageAmpViewModel = require(\"./DamageAmpViewModel\");\nvar HeroDamageAmpMixin = require(\"./HeroDamageAmpMixin\");\n\nvar CloneViewModel = function (heroData, itemData, unitData, h, p) {\n    var self = this;\n    HeroCalc.CloneModel.call(this, heroData, itemData, h, p);\n    self.bound = ko.observable(false);\n    self.inventory = p.inventory;\n    self.sectionDisplay = ko.observable({\n        'inventory': ko.observable(true),\n        'ability': ko.observable(true),\n        'buff': ko.observable(true),\n        'debuff': ko.observable(true),\n        'damageamp': ko.observable(false),\n        'illusion': ko.observable(false),\n        'skillbuild': ko.observable(false),\n        'skillbuild-skills': ko.observable(true),\n        'skillbuild-items': ko.observable(true)\n    });\n    self.sectionDisplayToggle = function (section) {\n        self.sectionDisplay()[section](!self.sectionDisplay()[section]());\n    }\n    self.showUnitTab = ko.observable(false);\n    self.showDiff = ko.observable(false);\n    self.showCriticalStrikeDetails = ko.observable(false);\n    self.showDamageDetails = ko.observable(false);\n    self.showStatDetails = ko.observable(false);\n    self.showDamageAmpCalcDetails = ko.observable(false);\n    \n    self.damageAmplification = new DamageAmpViewModel(heroData, itemData, unitData);\n    self.damageReduction = new DamageAmpViewModel(heroData, itemData, unitData);\n    HeroDamageAmpMixin(self);\n}\nCloneViewModel.prototype = Object.create(HeroCalc.CloneModel.prototype);\nCloneViewModel.prototype.constructor = CloneViewModel;\n\nmodule.exports = CloneViewModel;","'use strict';\nvar ko = require('./herocalc_knockout');\n\nvar BuffViewModel = require(\"dota-hero-calculator-library/src/herocalc/BuffViewModel\");\nvar BuffModel = require(\"dota-hero-calculator-library/src/herocalc/buffs/BuffModel\");\nvar findWhere = require(\"dota-hero-calculator-library/src/herocalc/util/findWhere\");\n\nvar DamageAmpViewModel = function (heroData, itemData, unitData, a) {\n    var self = this;\n    BuffViewModel.call(this, itemData, ko.observableArray([]));\n    self.availableBuffs = ko.observableArray([\n        new BuffModel(heroData, unitData, 'slardar', 'slardar_sprint'),\n        new BuffModel(heroData, unitData, 'undying', 'undying_flesh_golem'),\n        new BuffModel(heroData, unitData, 'chen', 'chen_penitence'),\n        new BuffModel(heroData, unitData, 'medusa', 'medusa_stone_gaze'),\n        new BuffModel(heroData, unitData, 'shadow_demon', 'shadow_demon_soul_catcher')\n    ]);\n    self.availableDebuffs = ko.observableArray([\n        new BuffModel(heroData, unitData, 'medusa', 'medusa_mana_shield'),\n        //new BuffModel(heroData, unitData, 'templar_assassin', 'templar_assassin_refraction'),\n        //new BuffModel(heroData, unitData, 'faceless_void', 'faceless_void_backtrack'),\n        //new BuffModel(heroData, unitData, 'nyx_assassin', 'nyx_assassin_spiked_carapace'),\n        new BuffModel(heroData, unitData, 'spectre', 'spectre_dispersion'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_overcharge'),\n        new BuffModel(heroData, unitData, 'bristleback', 'bristleback_bristleback'),\n        //new BuffModel(heroData, unitData, 'abaddon', 'abaddon_borrowed_time'),\n        //new BuffModel(heroData, unitData, 'abaddon', 'abaddon_aphotic_shield'),\n        //new BuffModel(heroData, unitData, 'dazzle', 'dazzle_shallow_grave'),\n        //new BuffModel(heroData, unitData, 'treant', 'treant_living_armor'),\n        new BuffModel(heroData, unitData, 'kunkka', 'kunkka_ghostship')\n    ]);\n    self.selectedBuff = ko.observable(self.availableBuffs()[0]);\n    \n    self.buffs = ko.observableArray([]);\n\n    self.getAbilityDamageAmpValue = function (abilityName, attributeName) {\n        var a = findWhere(self.buffs(), {name: abilityName});\n        if (a == undefined) {\n            return 0;\n        }\n        else {\n            var ability = a.data;\n            return self.getAbilityAttributeValue(ability.attributes, attributeName, ability.level());\n        }\n    }\n    \n    self.getDamageMultiplierSources = ko.computed(function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self.abilities()[i];\n                if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                    switch (ability.name) {\n                        case 'bristleback_bristleback':\n                            sources[ability.name] = {\n                                'multiplier': ability.damageReduction() / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'slardar_sprint':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage', ability.level()) / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'undying_flesh_golem':\n                            sources[ability.name] = {\n                                'multiplier': ability.damageAmplification() / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'medusa_stone_gaze':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'bonus_physical_damage', ability.level()) / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'chen_penitence':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage_taken', ability.level()) / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'shadow_demon_soul_catcher':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage_taken', ability.level()) / 100,\n                                'damageType': 'pure',\n                                'displayname': ability.displayname\n                            }\n                        break;\n                        case 'medusa_mana_shield':\n                            sources[ability.name] = {\n                                'multiplier': ability.damageReduction() / 100,\n                                'damageType': 'physical',\n                                'displayname': ability.displayname\n                            }                            \n                        break;\n                        case 'spectre_dispersion':\n                            sources[ability.name] = {\n                                'multiplier': -self.getAbilityAttributeValue(ability.attributes, 'damage_reflection_pct', ability.level()) / 100,\n                                'damageType': 'percentreduction',\n                                'displayname': ability.displayname\n                            }                                \n                        break;\n                        case 'abaddon_aphotic_shield':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'damage_absorb', ability.level()),\n                                'damageType': 'flatreduction',\n                                'displayname': ability.displayname\n                            }                                \n                        break;\n                        case 'kunkka_ghostship':\n                            sources[ability.name] = {\n                                'multiplier': -50 / 100,\n                                'damageType': 'percentreduction',\n                                'displayname': ability.displayname\n                            }                                \n                        break;\n                        case 'wisp_overcharge':\n                            sources[ability.name] = {\n                                'multiplier': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage_pct', ability.level()) / 100,\n                                'damageType': 'percentreduction',\n                                'displayname': ability.displayname\n                            }                                \n                        break;\n                        /*case 'faceless_void_backtrack':\n                            sources[ability.name] = {\n                                'multiplier': -self.getAbilityAttributeValue(ability.attributes, 'dodge_chance_pct', ability.level()) / 100,\n                                'damageType': 'percentreduction',\n                                'displayname': ability.displayname\n                            }                                \n                        break;*/\n                    }\n                }\n        }\n        return sources;\n    });\n    \n    return self;\n}\nDamageAmpViewModel.prototype = Object.create(BuffViewModel.prototype);\nDamageAmpViewModel.prototype.constructor = DamageAmpViewModel;\n\nmodule.exports = DamageAmpViewModel;","'use strict';\nvar ko = require('./herocalc_knockout');\nvar $ = (typeof window !== \"undefined\" ? window['$'] : typeof global !== \"undefined\" ? global['$'] : null);\nrequire('./jquery-ui.custom');\n\nko.components.register('hero-pane', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-3 col-sm-6\\\">\\n        <img class=\\\"img-rounded hero-image\\\" data-bind=\\\"attr:{src: '/media/images/heroes/' + selectedHero().heroName + '.png'}\\\"/>\\n    </div>\\n    <div class=\\\"col-md-9 col-sm-6\\\">\\n        <div class=\\\"row form-group\\\">\\n            <div class=\\\"col-md-6\\\">\\n                <label for=\\\"heroselect\\\">Hero</label>\\n                <select id=\\\"heroselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: availableHeroes , optionsText: 'heroDisplayName', value: selectedHero\\\"></select>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n                <label for=\\\"herolevel\\\">Level</label>\\n                <input id=\\\"herolevel\\\" data-bind=\\\"spinner: selectedHeroLevel, spinnerOptions: { min: 1, max: 25 }\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-6\\\">\\n                <label for=\\\"enemyselect\\\">Enemy</label>\\n                <select id=\\\"enemyselect\\\" class=\\\"form-control\\\" data-bind=\\\"css: enemy().playerColorCss, options: availableEnemies , optionsText: 'heroDisplayName', value: selectedEnemy, optionsAfterRender: setHeroOptionStyling\\\"></select>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n                <label for=\\\"enemyselect\\\">Compare to</label>\\n                <select id=\\\"enemyselect\\\" class=\\\"form-control\\\" data-bind=\\\"css: heroCompare().playerColorCss, options: availableCompare , optionsText: 'heroDisplayName', value: selectedCompare, optionsAfterRender: setHeroOptionStyling\\\"></select>\\n            </div>\\n            <div class=\\\"col-md-12 checkbox\\\" style=\\\"margin-bottom:0px;padding-left:34px;\\\" data-bind=\\\"visible: $root.layout() == 0\\\">\\n                <label><input type=\\\"checkbox\\\" style=\\\"float:none;margin-right:5px;\\\" data-bind=\\\"checked: showDiff\\\"><span style=\\\"font-size:12px\\\">Show <abbr title=\\\"The difference between two adjacent hero tabs shown next to each stat.\\\">delta values</abbr>. <span data-bind=\\\"visible: showDiff\\\">Comparing level <span data-bind=\\\"text: selectedHeroLevel\\\"></span> <span data-bind=\\\"text: heroData().displayname, css: playerColorCss\\\"></span> to level <span data-bind=\\\"text: heroCompare().selectedHeroLevel\\\"></span> <span data-bind=\\\"text: heroCompare().heroData().displayname, css: heroCompare().playerColorCss\\\"></span>.</span></span></label>\\n                <label style=\\\"margin-left:25px;font-size:12px;\\\"><input type=\\\"checkbox\\\" style=\\\"float:none;margin-right:5px;\\\" data-bind=\\\"checked: showUnitTab\\\">Show unit tab</label>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\" data-bind=\\\"css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div class=\\\"row\\\">\\n            <h3 class=\\\"col-md-12\\\">Stats <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}\\\"></a>\\n                <div style=\\\"margin-left:15px;display:inline;\\\" data-bind=\\\"style: {'display': $root.layout() == 1 ? 'inline' : 'none'}\\\">\\n                    <label><input type=\\\"checkbox\\\" style=\\\"float:none;margin-right:5px;\\\" data-bind=\\\"checked: showDiff\\\"><span style=\\\"font-size:12px\\\">Show <abbr title=\\\"The difference between two adjacent hero tabs shown next to each stat.\\\">delta values</abbr>. <span data-bind=\\\"visible: showDiff\\\">Comparing level <span data-bind=\\\"text: selectedHeroLevel\\\"></span> <span data-bind=\\\"text: heroData().displayname, css: playerColorCss\\\"></span> to level <span data-bind=\\\"text: heroCompare().selectedHeroLevel\\\"></span> <span data-bind=\\\"text: heroCompare().heroData().displayname, css: heroCompare().playerColorCss\\\"></span>.</span></span></label>\\n                    <label style=\\\"margin-left:25px;font-size:12px;\\\"><input type=\\\"checkbox\\\" style=\\\"float:none;margin-right:5px;\\\" data-bind=\\\"checked: showUnitTab\\\">Show unit tab</label>\\n                </div>\\n            </h3>\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, component: {name: 'stats-additional', params: $data}\\\"></div>\\n\\n            <div class=\\\"statscontainer\\\" data-bind=\\\"foreach: $root.allItems\\\">\\n                <div data-bind=\\\"component: { name: $data.value, params: $parentContext.$data}\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-8\\\" data-bind=\\\"css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div data-bind=\\\"component: { name: 'damage-details', params: $data}\\\"></div>\\n    \\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"itemBuildTable: $data.buildExplorer\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }\\\">Inventory <small style=\\\"color:goldenrod\\\" data-bind=\\\"html: inventory.totalCost() ? '<img src=\\\\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\\\\'/> ' + inventory.totalCost() : '' \\\"></small></h3>\\n                <div id=\\\"inventory\\\" class=\\\"inventory hover-cursor\\\" data-bind=\\\"click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()\\\"></div>\\n            </div>\\n        </div>\\n        \\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().ability, css: { section_disabled: !sectionDisplay().ability() }\\\">Abilities <small style=\\\"color:inherit\\\" data-bind=\\\"text: availableSkillPoints() ? (availableSkillPoints() == 1 ? '1 unspent skillpoint' : availableSkillPoints() + ' unspent skillpoints') : ''\\\"></small></h3>\\n                <div class=\\\"row\\\" data-bind=\\\"visible: sectionDisplay().ability(), foreach: ability().abilities()\\\">\\n                    <div data-bind=\\\"component: { name: 'ability', params: $data }\\\"></div>\\n                </div>\\n                <div class=\\\"form-horizontal\\\" data-bind=\\\"if: selectedHero().heroName == 'silencer', visible: sectionDisplay().ability()\\\">\\n                    <div class=\\\"form-group\\\">\\n                            <div class=\\\"col-md-2 control-label\\\">\\n                                <label for=\\\"intelligencestolen\\\">Intelligence Stolen</label>\\n                            </div>\\n                            <div class=\\\"col-md-2\\\">\\n                                <input class=\\\"form-control\\\" id=\\\"intelligencestolen\\\" data-bind=\\\"value: intStolen\\\" />\\n                            </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div data-bind=\\\"component: { name: 'talent-section', params: $data}\\\"></div>\\n        \\n        <div data-bind=\\\"component: { name: 'buff-section', params: $data}\\\"></div>\\n        \\n        <div class=\\\"row\\\" data-bind=\\\"component: { name: 'damage-amp', params: $data}\\\"></div>\\n\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().illusion, css: { section_disabled: !sectionDisplay().illusion() }\\\">Illusions</h3>\\n                <div data-bind=\\\"visible: sectionDisplay().illusion(), lazyBinding: sectionDisplay().illusion\\\">\\n                    <h4 style=\\\"color:red\\\">Under Construction</h4>\\n                    <div class=\\\"form-horizontal\\\">\\n                        <div class=\\\"form-group\\\">\\n                                <div class=\\\"col-md-2 control-label\\\">\\n                                    <label for=\\\"illusionSelect\\\">Type</label>\\n                                </div>\\n                                <div class=\\\"col-md-10\\\">\\n                                    <select id=\\\"illusionSelect\\\" class=\\\"form-control\\\" data-bind=\\\"options: availableIllusions , optionsText: 'illusionDisplayName', value: selectedIllusion\\\"></select>\\n                                </div>\\n                        </div>\\n                        <div class=\\\"form-group\\\">\\n                                <div class=\\\"col-md-2 control-label\\\">\\n                                    <label for=\\\"illusionabilitylevel\\\">Ability Level</label>\\n                                </div>\\n                                <div class=\\\"col-md-10\\\">\\n                                    <select id=\\\"illusionabilitylevel\\\" class=\\\"form-control\\\" data-bind=\\\"value: illusionAbilityLevel, foreach: new Array(illusionAbilityMaxLevel())\\\">\\n                                        <option data-bind=\\\"text: $index()+1\\\"></option>\\n                                    </select>\\n                                </div>\\n                        </div>\\n                        <div class=\\\"form-group\\\">\\n                            <div class=\\\"col-md-offset-2 col-md-10\\\">\\n                                <button class=\\\"btn btn-default\\\" data-bind=\\\"click: addIllusion\\\">Add Illusion</button>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    \\n    <div class=\\\"col-md-12\\\">\\n        <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().skillbuild, css: { section_disabled: !sectionDisplay().skillbuild() }\\\">Build Explorer</h3>\\n        <div data-bind=\\\"visible: sectionDisplay().skillbuild(), attr: {id: 'section-build-explorer-' + index() }, lazyBinding: sectionDisplay().skillbuild\\\">\\n            <div class=\\\"section-content\\\">    \\n                <div class=\\\"col-md-12\\\">\\n                    <h4 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay()['skillbuild-skills'], css: { section_disabled: !sectionDisplay()['skillbuild-skills']() }\\\">Skill Build <small style=\\\"color:inherit\\\" data-bind=\\\"text: buildExplorer.availableSkillBuildPoints() ? (buildExplorer.availableSkillBuildPoints() == 1 ? '1 unspent skillpoint' : buildExplorer.availableSkillBuildPoints() + ' unspent skillpoints') : ''\\\"></small></h4>\\n                        <div data-bind=\\\"visible: sectionDisplay()['skillbuild-skills']\\\">\\n                        <table>\\n                            <tbody data-bind=\\\"template: { name: 'ability-3-template', foreach: ability().abilities() }\\\"></tbody>\\n                        </table>\\n                        <div class=\\\"form-group\\\">\\n                            <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buildExplorer.resetSkillBuild\\\">Clear</button>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-12\\\">\\n                    <h4 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay()['skillbuild-items'], css: { section_disabled: !sectionDisplay()['skillbuild-items']() }\\\">Item Build</h4>\\n                    <div data-bind=\\\"visible: sectionDisplay()['skillbuild-items']\\\">\\n                        <table class=\\\"table\\\">\\n                            <thead>\\n                                <tr>\\n                                    <th>Level</th>\\n                                    <th class=\\\"text-center\\\">Inventory</th>\\n                                    <th></th>\\n                                    <th></th>\\n                                    <th></th>\\n                                </tr>\\n                            </thead>\\n                            <tbody data-bind=\\\"foreach: new Array(25), itemBuildTable: buildExplorer\\\">\\n                                <tr class=\\\"hover-cursor\\\" data-bind=\\\"css: {'row-highlight': $parent.selectedInventory() == $index()}\\\">\\n                                    <td class=\\\"carry-over\\\" data-bind=\\\"click: function (data, event) { $parent.buildExplorer.selectInventory($index()); }\\\">\\n                                        <strong data-bind=\\\"text: ($index() + 1)\\\"></strong>\\n                                        <a class=\\\"btn btn-default btn-xs glyphicon\\\" data-bind=\\\"visible: $index() > 0, toggle: $parent.buildExplorer.itemBuild()[$index()].carryOver, preventBubble: 'click', css: { 'glyphicon-arrow-down': $parent.buildExplorer.itemBuild()[$index()].carryOver(), 'glyphicon-stop': !$parent.buildExplorer.itemBuild()[$index()].carryOver() }\\\" title=\\\"Carry over items to next level's inventory\\\"></a>\\n                                    </td>\\n                                    <td class=\\\"col-md-10\\\" data-bind=\\\"click: function (data, event) { $parent.buildExplorer.selectInventory($index()); }\\\">\\n                                        <div class=\\\"itemBuild-inventory\\\" data-bind=\\\"template: { name: 'itemBuild-item-template', foreach: $parent.buildExplorer.itemBuild()[$index()].items }\\\"></div>\\n                                    </td>\\n                                    <td>\\n                                        <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"click: function (data, event) { $parent.buildExplorer.copyInventoryToClipBoard($index()); }\\\" title=\\\"Copy items\\\">Copy</a>\\n                                    </td>\\n                                    <td>\\n                                        <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"click: function (data, event) { $parent.buildExplorer.pasteInventoryFromClipBoard($index()); }\\\" title=\\\"Paste items\\\">Paste</a>\\n                                    </td>\\n                                    <td>\\n                                        <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"click: function (data, event) { $parent.buildExplorer.resetItemBuild($index()); }\\\" title=\\\"Clear inventory\\\">Clear</a>\\n                                    </td>\\n                                </tr>\\n                            </tbody>\\n                        </table>\\n                        <div class=\\\"form-group\\\">\\n                            <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buildExplorer.resetAllItemBuilds\\\">Clear</button>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <label>Data set header label</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" data-bind=\\\"value: buildExplorer.graphDataHeader\\\">\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <label>Data set description</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" data-bind=\\\"value: buildExplorer.graphDataDescription\\\">\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buildExplorer.graph\\\">Add data set</button>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <label>Hero Property</label>\\n                    <select class=\\\"form-control\\\" data-bind=\\\"options: buildExplorer.graphProperties, optionsText: 'label', optionsValue: 'id', value: buildExplorer.selectedGraphProperty\\\"></select>\\n                </div>\\n                <!-- ko if: buildExplorer.graphData().length > 0 -->\\n                <div class=\\\"form-group\\\" data-bind=\\\"chart: buildExplorer.graphChartData, chartType: 'Scatter', chartOptions: buildExplorer.graphChartOptions(), chartContext: buildExplorer.graphChartContext\\\"></div>\\n                <div class=\\\"form-group\\\">\\n                  <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buildExplorer.exportImage\\\"><span class=\\\"glyphicon glyphicon-export\\\"></span> Export Image</button>\\n                </div>\\n                <button class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: buildExplorer.showGraphItemBuildRows, css: {'toggled': buildExplorer.showGraphItemBuildRows}\\\">Show item build rows</button>\\n                <button class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: buildExplorer.showGraphSkillBuildColumns, css: {'toggled': buildExplorer.showGraphSkillBuildColumns}\\\">Show skill build columns</button>\\n                <table class=\\\"table build-table\\\">\\n                    <thead>\\n                        <tr>\\n                            <th class=\\\"right-border\\\">Level</th>\\n                            <!-- ko foreach: buildExplorer.graphData -->\\n                            <th class=\\\"text-center\\\" data-bind=\\\"css: { 'right-border': !$parent.buildExplorer.showGraphSkillBuildColumns() || !$data.visible() }\\\">\\n                                <span data-bind=\\\"css: { 'tooltip-underline': $data.description }, tooltip: {title: $data.description, placement: 'bottom'}, visible: $data.visible(), text: $data.header, style: { color: $parent.buildExplorer.graphDistinctColor($parent.buildExplorer.graphData().length, $index(), 1) }\\\"></span>\\n                                <span class=\\\"btn btn-xs glyphicon glyphicon-info-sign\\\" data-bind=\\\"visible: $data.visible(), popover: {template: 'popover-graphData-template', data: $data, options: {} }\\\"></span>\\n                                <button class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-remove pull-right\\\" class=\\\"close\\\" data-bind=\\\"visible: !$parent.buildExplorer.showGraphSkillBuildColumns() || !$data.visible(), click: function(data, event) { $parent.buildExplorer.removeGraphDataSet($data); }\\\"></button>\\n                                <button class=\\\"btn btn-default btn-xs shop-button glyphicon pull-right\\\" data-bind=\\\"visible: !$parent.buildExplorer.showGraphSkillBuildColumns() || !$data.visible(), toggle: $data.visible, css: { 'glyphicon-minus': $data.visible(), 'glyphicon-plus': !$data.visible()}\\\"></button>\\n                            </th>\\n                            <th class=\\\"text-left right-border\\\" data-bind=\\\"visible: $data.visible() && $parent.buildExplorer.showGraphSkillBuildColumns()\\\"><abbr title=\\\"Q-W-E-R-Stats\\\">Skill Build</abbr>\\n                                <button class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-remove pull-right\\\" class=\\\"close\\\" data-bind=\\\"visible: $parent.buildExplorer.showGraphSkillBuildColumns(), click: function(data, event) { $parent.buildExplorer.removeGraphDataSet($data); }\\\"></button>\\n                                <button class=\\\"btn btn-default btn-xs shop-button glyphicon pull-right\\\" data-bind=\\\"visible: $parent.buildExplorer.showGraphSkillBuildColumns(), toggle: $data.visible, css: { 'glyphicon-minus': $data.visible(), 'glyphicon-plus': !$data.visible()}\\\"></button>\\n                            </th>\\n                            <!-- /ko -->\\n                        </tr>\\n                    </thead>\\n                    <tbody data-bind=\\\"foreach: new Array(buildExplorer.graphData()[0].data.length)\\\">\\n                        <tr>\\n                            <td class=\\\"right-border\\\">\\n                                <strong data-bind=\\\"text: ($index() + 1)\\\"></strong>\\n                            </td>\\n                            <!-- ko foreach: new Array($parent.buildExplorer.graphData().length) -->\\n                            <td class=\\\"text-right\\\" data-bind=\\\"css: { 'right-border': !$parents[1].buildExplorer.showGraphSkillBuildColumns() || !$parents[1].buildExplorer.graphData()[$index()].visible() }\\\">\\n                                <span data-bind=\\\"visible: $parents[1].buildExplorer.graphData()[$index()].visible(), text: $parents[1].buildExplorer.graphData()[$index()].data[$parentContext.$index()][$parents[1].buildExplorer.selectedGraphProperty()]\\\"></span>\\n                            </td>\\n                            <td class=\\\"text-left right-border\\\" data-bind=\\\"visible: $parents[1].buildExplorer.graphData()[$index()].visible() && $parents[1].buildExplorer.showGraphSkillBuildColumns(), text: $parents[1].buildExplorer.graphData()[$index()].cumulativeSkillBuild[$parentContext.$index()].join('-')\\\"></td>\\n                            <!-- /ko -->\\n                        </tr>\\n                        <tr class=\\\"itemBuild-inventory\\\" data-bind=\\\"visible: $parent.buildExplorer.showGraphItemBuildRows() && $parent.buildExplorer.graphRowHasItems($index())\\\">\\n                            <td class=\\\"right-border-itemrow no-top-border\\\"></td>\\n                            <!-- ko foreach: new Array($parent.buildExplorer.graphData().length) -->\\n                            <td class=\\\"right-border-itemrow no-top-border\\\" data-bind=\\\"attr: { colspan: $parents[1].buildExplorer.graphData()[$index()].visible() && $parents[1].buildExplorer.showGraphSkillBuildColumns() ? 2 : 1 }\\\">\\n                                <div data-bind=\\\"visible: $parents[1].buildExplorer.graphData()[$index()].visible(), foreach: $parents[1].buildExplorer.graphData()[$index()].data[$parentContext.$index()].items\\\">\\n                                    <img class=\\\"itemBuild-img-sm img-rounded\\\" data-bind=\\\"css: { item_disabled: !enabled, item_active: $parents[2].inventory.getActiveBorder($data) == 1, item_inactive: $parents[2].inventory.getActiveBorder($data) == 0 }, attr:{ src: $parents[2].inventory.getItemImage($data) }\\\"/>\\n                                    <div style=\\\"float:left\\\" data-bind=\\\"visible: $parents[2].inventory.getItemSizeLabel($data) != ''\\\">\\n                                        <div data-bind=\\\"html: $parents[2].inventory.getItemSizeLabel($data)\\\" style=\\\"position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px\\\"></div>\\n                                        <div data-bind=\\\"html: $parents[2].inventory.getItemSizeLabel($data)\\\" style=\\\"position:absolute;left:0;bottom:0;color:white;padding:0px 2px\\\"></div>\\n                                    </div>\\n                                </div>\\n                            </td>\\n                            <!-- /ko -->\\n                        </tr>\\n                    </tbody>\\n                </table>\\n                <!-- /ko -->\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\" });\nko.components.register('unit-pane', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\">\\n        <img class=\\\"img-rounded\\\" data-bind=\\\"attr:{src: selectedUnit().image}\\\"/>\\n    </div>\\n    <div class=\\\"col-md-4\\\">\\n        <label for=\\\"unitselect\\\">Unit</label>\\n        <select id=\\\"unitselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: availableUnits , optionsText: 'heroDisplayName', value: selectedUnit\\\"></select>\\n    </div>\\n    <div class=\\\"col-md-4\\\">\\n        <label for=\\\"unitlevel\\\">Level</label>\\n        <p class=\\\"form-control-static\\\" data-bind=\\\"visible: selectedUnit().levels == 0, text: heroData().level\\\"></p>\\n        <select id=\\\"herolevel\\\" class=\\\"form-control\\\" data-bind=\\\"visible: selectedUnit().levels > 0, value: selectedUnitLevel, foreach: new Array(selectedUnit().levels)\\\">\\n            <option data-bind=\\\"text: $index()+1\\\"></option>\\n        </select>\\n    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\" data-bind=\\\"css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div class=\\\"row\\\">\\n            <h3 class=\\\"col-md-12\\\">Stats <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}\\\"></a></h3>\\n\\n            <div class=\\\"col-md-3\\\" data-bind=\\\"visible: showStatDetails(), component: {name: 'stats-additional', params: $data}\\\"></div>\\n            \\n            <div class=\\\"col-md-12\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n                <table class=\\\"table table-condensed\\\">\\n                <tbody>\\n                <tr><td>Gold:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().bountygoldmin == heroData().bountygoldmax ? heroData().bountygoldmax : heroData().bountygoldmin + '-' + heroData().bountygoldmax\\\"></span></td></tr>\\n                <tr><td>Experience:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().bountyxp\\\"></span></td></tr>\\n                <tr><td>Level:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().level\\\"></span></td></tr>\\n                <tr><td><abbr title=\\\"Movement Speed\\\">MS</abbr>:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: totalMovementSpeed\\\"></span></td></tr>\\n                <tr><td>Turn Rate:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: totalTurnRate\\\"></span></td></tr>\\n                <tr><td>Sight Range:</td><td class=\\\"text-right\\\"><span data-bind=\\\"html: '<abbr title=\\\\'Day\\\\'>' + visionrangeday() + '</abbr>/<abbr title=\\\\'Night\\\\'>' + visionrangenight() + '</abbr>'\\\"></span></td></tr>\\n                </tbody>\\n                </table>\\n            </div>\\n\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n                <table class=\\\"table table-condensed\\\">\\n                <tbody>\\n                <tr><td>Health:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: health\\\"></span></td></tr>\\n                <tr><td>Health Regen:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: healthregen\\\"></span></td></tr>\\n                <tr><td>Mana:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: mana\\\"></span></td></tr>\\n                <tr><td>Mana Regen:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: manaregen\\\"></span></td></tr>\\n                <tr><td>Physical <abbr title=\\\"Effective Hit Points\\\">EHP</abbr>:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ehpPhysical\\\"></span></td></tr>\\n                <tr><td>Magical <abbr title=\\\"Effective Hit Points\\\">EHP</abbr>:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ehpMagical\\\"></span></td></tr>\\n                </tbody>\\n                </table>\\n            </div>\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n                <table class=\\\"table table-condensed\\\">\\n                <tbody>\\n                <tr><td>Armor:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: totalArmorPhysical\\\"></span></td></tr>\\n                <tr><td>Magic Res:</td><td class=\\\"text-right\\\"><span data-bind=\\\"html: totalMagicResistance().toFixed(2) + '%'\\\"></span></td></tr>\\n                <tr><td>Lifesteal:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: lifesteal\\\"></span></td></tr>\\n                <tr><td>Evasion:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: evasion\\\"></span></td></tr>\\n                <tr><td>Bash:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: bash\\\"></span></td></tr>\\n                <tr><td>Miss Chance:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: missChance\\\"></span></td></tr>\\n                </tbody>\\n                <tbody class=\\\"tabledropdown\\\" style=\\\"border-top:0\\\" data-bind=\\\"visible: showCriticalStrikeDetails(),foreach: critInfo().sources\\\">\\n                <tr><td colspan=2><strong data-bind=\\\"text: $data.name\\\"></strong></td></tr>\\n                <tr><td>Crit Chance:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ($data.totalchance * 100).toFixed(2) + '%'\\\"></span></td></tr>\\n                <tr><td>Crit Multiplier:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ($data.multiplier * 100).toFixed(2) + '%'\\\"></span></td></tr>\\n                </tbody>\\n                </table>\\n            </div>\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n                <table class=\\\"table table-condensed\\\">\\n                <tbody>\\n                <tr>\\n                    <td>Damage:</td>\\n                    <td class=\\\"text-right\\\">\\n                        <span data-bind=\\\"html: baseDamage()[0] + '-' + baseDamage()[1]\\\"></span>\\n                        <span style=\\\"color:green\\\" data-bind=\\\"visible: bonusDamage() > 0, text: ' + ' + bonusDamage()\\\"></span>\\n                        <span style=\\\"color:red\\\" data-bind=\\\"visible: bonusDamageReduction() != 0, text: ' - ' + bonusDamageReduction()\\\"></span>\\n                    </td>\\n                </tr>\\n                <tr><td><abbr title=\\\"Increased Attack Speed\\\">IAS</abbr>:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ias\\\"></span></td></tr>\\n                <tr><td><abbr title=\\\"Base Attack Time\\\">BAT</abbr>:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: bat\\\"></span></td></tr>\\n                <tr><td>Attack Time:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: attackTime\\\"></span></td></tr>\\n                <tr><td>Attack / Sec:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: attacksPerSecond().toFixed(2)\\\"></span></td></tr>\\n                <tr><td>Attack Range:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: totalattackrange\\\"></span></td></tr>\\n                </tbody>\\n                </table>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-8\\\" data-bind=\\\"css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div data-bind=\\\"component: { name: 'damage-details', params: $data}\\\"></div>\\n        \\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }\\\">Inventory <small style=\\\"color:goldenrod\\\" data-bind=\\\"html: inventory.totalCost() ? '<img src=\\\\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\\\\'/> ' + inventory.totalCost() : '' \\\"></small></h3>\\n                <div id=\\\"inventory\\\" class=\\\"inventory hover-cursor row-highlight\\\" data-bind=\\\"template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()\\\"></div>\\n            </div>\\n        </div>\\n        \\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().ability, css: { section_disabled: !sectionDisplay().ability() }\\\">Abilities</h3>\\n                <div class=\\\"row\\\" data-bind=\\\"visible: sectionDisplay().ability(), foreach: ability().abilities()\\\">\\n                    <div data-bind=\\\"component: { name: 'ability', params: $data }\\\"></div>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div data-bind=\\\"component: { name: 'buff-section', params: $data}\\\"></div>\\n    </div>\\n</div>\" });\nko.components.register('clone-pane', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\">\\n        <img class=\\\"img-rounded\\\" data-bind=\\\"attr:{src: '/media/images/heroes/meepo.png'}\\\"/>\\n    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\" data-bind=\\\"css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div class=\\\"row\\\">\\n            <h3 class=\\\"col-md-12\\\">Stats <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}\\\"></a></h3>\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, component: {name: 'stats-additional', params: $data}\\\"></div>\\n\\n            <div class=\\\"statscontainer\\\" data-bind=\\\"foreach: $root.allItems\\\">\\n                <div data-bind=\\\"component: { name: $data.value, params: $root.heroes[$parentContext.$index()].clone()}\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-8\\\" data-bind=\\\"css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div data-bind=\\\"component: { name: 'damage-details', params: $data}\\\"></div>\\n        \\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }\\\">Inventory <small style=\\\"color:goldenrod\\\" data-bind=\\\"html: inventory.totalCost() ? '<img src=\\\\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\\\\'/> ' + inventory.totalCost() : '' \\\"></small></h3>\\n                <div id=\\\"inventory\\\" class=\\\"inventory hover-cursor row-highlight\\\" data-bind=\\\"template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()\\\"></div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"row\\\" data-bind=\\\"component: { name: 'damage-amp', params: $data}\\\"></div>\\n    </div>\\n</div>\" });\nko.components.register('illusion-pane', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\">\\n        <div class=\\\"img-rounded\\\" style=\\\"background-color:#428bca;display:inline-block\\\">\\n            <img class=\\\"img-rounded\\\" style=\\\"opacity:.5\\\" data-bind=\\\"attr:{src: '/media/images/heroes/' + selectedHero().heroName + '.png'}\\\"/>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-4\\\">\\n        <label for=\\\"illusionlevel\\\" data-bind=\\\"text: illusionDisplayName\\\"></label>\\n        <table class=\\\"table\\\">\\n            <tbody>\\n            <tr>\\n                <td>Damage Dealt</td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: (getOutgoingDamageMultiplier(illusionType(), false, heroData().attacktype)*100).toFixed(0)+'%'\\\"></td>\\n            </tr>\\n            <tr>\\n                <td>Damage Taken</td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: (getIncomingDamageMultiplier(illusionType(), false, heroData().attacktype)*100).toFixed(0)+'%'\\\"></td>\\n            </tr>\\n            </tbody>\\n        </table>\\n    </div>\\n    <div class=\\\"col-md-4\\\">\\n        <div data-bind=\\\"visible: illusionType() != 'item_manta'\\\">\\n            <label for=\\\"illusionlevel\\\">Ability Level</label>\\n            <select id=\\\"illusionlevel\\\" class=\\\"form-control\\\" data-bind=\\\"value: illusionAbilityLevel, foreach: new Array(illusionAbilityMaxLevel())\\\">\\n                <option data-bind=\\\"text: $index()+1\\\"></option>\\n            </select>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\" data-bind=\\\"css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div class=\\\"row\\\">\\n            <h3 class=\\\"col-md-12\\\">Stats <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}\\\"></a></h3>\\n\\n            <div class=\\\"col-md-12\\\" data-bind=\\\"visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, component: {name: 'stats-additional', params: $data}\\\">\\n            </div>\\n            <div class=\\\"statscontainer\\\" data-bind=\\\"foreach: $root.allItems\\\">\\n                <div data-bind=\\\"component: { name: $data.value, params: $parentContext.$data}\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-8\\\" data-bind=\\\"css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}\\\">\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-md-12\\\">\\n                <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }\\\">Inventory <small style=\\\"color:goldenrod\\\" data-bind=\\\"html: inventory.totalCost() ? '<img src=\\\\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\\\\'/> ' + inventory.totalCost() : '' \\\"></small></h3>\\n                <div id=\\\"inventory\\\" class=\\\"inventory hover-cursor\\\" data-bind=\\\"click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, foreach: inventory.items, visible: sectionDisplay().inventory()\\\">\\n                    <div class=\\\"btn-group\\\">\\n                        <img style=\\\"width:75px;\\\" class=\\\"img-rounded\\\" data-bind=\\\"css: { item_disabled: !enabled(), item_active: $parent.inventory.getActiveBorder($data) == 1, item_inactive: $parent.inventory.getActiveBorder($data) == 0 }, attr:{ src: $parent.inventory.getItemImage($data) }, click: function(data, event) { $parent.inventory.toggleItem($index, data, event); }, event: { dblclick: $parent.inventory.removeItem }\\\"/>\\n                        <div style=\\\"float:left\\\" data-bind=\\\"visible: $parent.inventory.getItemSizeLabel($data) != ''\\\">\\n                            <div data-bind=\\\"html: $parent.inventory.getItemSizeLabel($data)\\\" style=\\\"position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px\\\"></div>\\n                            <div data-bind=\\\"html: $parent.inventory.getItemSizeLabel($data)\\\" style=\\\"position:absolute;left:0;bottom:0;color:white;padding:0px 2px\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\" });\nko.components.register('buff-settings', { template: \"<div class=\\\"form-horizontal\\\">\\n    <div data-bind=\\\"foreach: data\\\">\\n        <div class=\\\"form-group\\\" data-bind=\\\"visible: (display == undefined || display == 'buff')\\\">\\n            <label class=\\\"col-md-6 control-label\\\" data-bind=\\\"css: {'checkbox-label': controlType == 'checkbox'}, attr: {'for': labelName}, html: labelName\\\"></label>\\n            <div data-bind=\\\"if: controlType == 'input' && (display == undefined || display == 'buff' || display == 'hidden')\\\">\\n                <div class=\\\"col-md-6\\\"><input class=\\\"form-control\\\" data-bind=\\\"attr: {'id': labelName}, value: controlVal\\\"></div>\\n            </div>\\n            <div data-bind=\\\"if: controlType == 'checkbox' && (display == undefined || display == 'buff' || display == 'hidden')\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <div class=\\\"checkbox\\\">\\n                        <input type=\\\"checkbox\\\" data-bind=\\\"attr: {'id': labelName}, checked: controlVal\\\">\\n                    </div>\\n                </div>\\n            </div>\\n            <div data-bind=\\\"if: (controlType == 'text' || controlType == 'method') && (display == undefined || display == 'buff' || display == 'hidden')\\\">\\n                <div class=\\\"col-md-6\\\"><p class=\\\"form-control-static\\\" data-bind=\\\"html: controlVal\\\"></p></div>\\n            </div>\\n            <div data-bind=\\\"if: controlType == 'radio' && (display == undefined || display == 'buff' || display == 'hidden')\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <!-- ko foreach: controlOptions -->\\n                    <div class=\\\"radio\\\">\\n                        <label>\\n                            <input type=\\\"radio\\\" data-bind=\\\"attr: {'id': $parent.labelName + value, value: value}, checked: $parent.controlVal\\\">\\n                            <span data-bind=\\\"text: text\\\"></span>\\n                        </label>\\n                    </div>\\n                    <!-- /ko -->\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\" });\nko.components.register('talent-section', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().talent, css: { section_disabled: !sectionDisplay().talent() }\\\">Talents</h3>\\n        <div class=\\\"row\\\" data-bind=\\\"foreach: heroData().talents, visible: sectionDisplay().talent()\\\">\\n            <div class=\\\"talent col-xs-12\\\">\\n                <label class=\\\"talent-level col-sm-4 col-xs-12\\\" data-bind=\\\"text: 'Level ' + ($index() * 5 + 10) + ':'\\\"></label>\\n                <div class=\\\"talent-1 col-sm-4 col-xs-12 btn btn-default btn-sm\\\" data-bind=\\\"text: $data[0].displayname, click: function () { $parent.toggleTalent($index(), 0) }, css: {'toggled': $parent.talents[$index()]() == 0}\\\"></div>\\n                <div class=\\\"talent-2 col-sm-4 col-xs-12 btn btn-default btn-sm\\\" data-bind=\\\"text: $data[1].displayname, click: function () { $parent.toggleTalent($index(), 1) }, css: {'toggled': $parent.talents[$index()]() == 1}\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\" });\nko.components.register('item-buff', { template: \"<div class=\\\"btn-group\\\">\\n    <img style=\\\"width:75px;\\\" class=\\\"img-rounded\\\" data-bind=\\\"css: { item_disabled: !enabled(), item_active: $parents[1].buffs.itemBuffs.getActiveBorder($data) == 1, item_inactive: $parents[1].buffs.itemBuffs.getActiveBorder($data) == 0 }, attr:{ src: $parents[1].buffs.itemBuffs.getItemImage($data) }, click: function(data, event) { $parents[1].buffs.itemBuffs.toggleItem($index, data, event); }, event: { dblclick: $parents[1].buffs.itemBuffs.removeItem }\\\"/>\\n    <div class=\\\"btn-group-vertical\\\">\\n        <button style=\\\"padding:3px 10px;\\\" class=\\\"btn btn-default btn-xs\\\" title=\\\"Remove Item\\\" data-bind=\\\"click: $parents[1].buffs.itemBuffs.removeItem\\\">&times;</button>\\n        <button style=\\\"padding:3px 10px;\\\" class=\\\"btn btn-default btn-xs\\\" title=\\\"Disable/Enable Item\\\" data-bind=\\\"click: $parents[1].buffs.itemBuffs.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}\\\">o</button>\\n    </div>\\n</div>\" });\nko.components.register('item-debuff', { template: \"<div class=\\\"btn-group\\\">\\n    <img style=\\\"width:75px;\\\" class=\\\"img-rounded\\\" data-bind=\\\"css: { item_disabled: !enabled(), item_active: $parents[1].debuffs.itemBuffs.getActiveBorder($data) == 1, item_inactive: $parents[1].debuffs.itemBuffs.getActiveBorder($data) == 0 }, attr:{ src: $parents[1].debuffs.itemBuffs.getItemImage($data) }, click: function(data, event) { $parents[1].debuffs.itemBuffs.toggleItem($index, data, event); }, event: { dblclick: $parents[1].debuffs.itemBuffs.removeItem }\\\"/>\\n    <div class=\\\"btn-group-vertical\\\">\\n        <button style=\\\"padding:3px 10px;\\\" class=\\\"btn btn-default btn-xs\\\" title=\\\"Remove Item\\\" data-bind=\\\"click: $parents[1].debuffs.itemBuffs.removeItem\\\">&times;</button>\\n        <button style=\\\"padding:3px 10px;\\\" class=\\\"btn btn-default btn-xs\\\" title=\\\"Disable/Enable Item\\\" data-bind=\\\"click: $parents[1].debuffs.itemBuffs.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}\\\">o</button>\\n    </div>\\n</div>\" });\nko.components.register('buff-section', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().buff, css: { section_disabled: !sectionDisplay().buff() }\\\">Buffs</h3>\\n        <div class=\\\"form-horizontal\\\" data-bind=\\\"visible: sectionDisplay().buff()\\\">\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <select id=\\\"buffselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: buffs.availableBuffs , optionsText: 'buffDisplayName', value: buffs.selectedBuff\\\"></select>\\n                </div>\\n                <div class=\\\"col-md-6\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buffs.addBuff\\\">Add</button>\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: function(data,event) { buffs.removeBuff(data, event, buffs.selectedBuff().buffName) }\\\">Remove</button>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\" data-bind=\\\"foreach: buffs.buffs, visible: sectionDisplay().buff()\\\">\\n            <div data-bind=\\\"css: {row: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()) }\\\">\\n                <div class=\\\"col-md-3 text-center bottom-buffer2\\\" data-bind=\\\"css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}\\\">\\n                    <img style=\\\"padding:0px;margin-bottom:1px;\\\" class=\\\"img-rounded ability\\\" data-bind=\\\"css: { ability_active: $data.data.isActive() || $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name + '.png'}, click: function(data, event) { $parent.buffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.buffs.removeBuff(data, event, $data.data.name) } }\\\"/>\\n                    <div class=\\\"progress\\\" style=\\\"position:relative\\\">\\n                        <div style=\\\"position:absolute;width:100%;color:white;\\\" class=\\\"text-center\\\" data-bind=\\\"visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)\\\"></div>\\n                        <div class=\\\"progress-bar progress-bar-danger\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"60\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 60%;\\\" data-bind=\\\"attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }\\\"></div>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.buffs.levelDownAbility($index, data.data, event, $parent); }\\\">-</a>\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.buffs.levelUpAbility($index, data.data, event, $parent); }\\\">+</a>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}\\\">Details</a>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-9 bottom-buffer\\\" data-bind=\\\"visible: $data.data.isDetail()\\\">\\n                    <button type=\\\"button\\\" class=\\\"close\\\" data-bind=\\\"click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data.data, event); }\\\">&times;</button>\\n                    <div data-bind=\\\"component: { name: 'ability-detail', params: { hero: $parent, ability: $data.data } }\\\"></div>\\n                    <div data-bind=\\\"if: $data.data.name in $parent.buffs.abilityData && $parent.buffs.buffs()[$index()].data.level() > 0\\\">\\n                        <div class=\\\"col-md-8\\\">\\n                            <div data-bind=\\\"component: { name: 'buff-settings', params: $parent.buffs.abilitySettingsData($data.data.name, $parent, $index()) }\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        \\n        <div class=\\\"form-horizontal\\\" data-bind=\\\"visible: sectionDisplay().buff()\\\">\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <div class=\\\"input-group\\\">\\n                        <input class=\\\"form-control\\\" id=\\\"auto2\\\" data-bind=\\\"attr: {id: id() + '-auto2' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: buffs.itemBuffs.itemBuffOptions, jqAutoValue: buffs.itemBuffs.selectedItemBuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'\\\" />\\n                        <span class=\\\"input-group-btn\\\">\\n                            <button class=\\\"btn btn-default\\\" data-bind=\\\"jqAutoCombo: id() + '-auto2'\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></button>\\n                        </span>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-6\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: buffs.itemBuffs.addItemBuff\\\">Add</button>\\n                </div>\\n            </div>\\n        </div>\\n        <div data-bind=\\\"foreach: buffs.itemBuffs.items, visible: sectionDisplay().buff()\\\">\\n            <div class=\\\"pull-left\\\" style=\\\"margin-right:10px\\\" data-bind=\\\"component: { name: 'item-buff', params: $data}\\\"></div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().debuff, css: { section_disabled: !sectionDisplay().debuff() }\\\">Debuffs</h3>\\n        <div class=\\\"form-horizontal\\\" data-bind=\\\"visible: sectionDisplay().debuff()\\\">\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <select id=\\\"buffselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: debuffs.availableDebuffs , optionsText: 'buffDisplayName', value: debuffs.selectedBuff\\\"></select>\\n                </div>\\n                <div class=\\\"col-md-6\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: debuffs.addBuff\\\">Add</button>\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: function(data,event) { debuffs.removeBuff(data, event, debuffs.selectedBuff().buffName) }\\\">Remove</button>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"row\\\" data-bind=\\\"foreach: debuffs.buffs, visible: sectionDisplay().debuff()\\\">\\n            <div data-bind=\\\"css: {row: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()) }\\\">\\n                <div class=\\\"col-md-3 text-center bottom-buffer2\\\" data-bind=\\\"css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}\\\">\\n                    <img style=\\\"padding:0px;margin-bottom:1px;\\\" class=\\\"img-rounded ability\\\" data-bind=\\\"css: { ability_active: $data.data.isActive() || $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name + '.png'}, click: function(data, event) { $parent.debuffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.debuffs.removeBuff(data, event, $data.data.name) } }\\\"/>\\n                    <div class=\\\"progress\\\" style=\\\"position:relative\\\">\\n                        <div style=\\\"position:absolute;width:100%;color:white;\\\" class=\\\"text-center\\\" data-bind=\\\"visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)\\\"></div>\\n                        <div class=\\\"progress-bar progress-bar-danger\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"60\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 60%;\\\" data-bind=\\\"attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }\\\"></div>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.debuffs.levelDownAbility($index, data.data, event, $parent); }\\\">-</a>\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.debuffs.levelUpAbility($index, data.data, event, $parent); }\\\">+</a>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}\\\">Details</a>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-9 bottom-buffer\\\" data-bind=\\\"visible: $data.data.isDetail()\\\">\\n                    <button type=\\\"button\\\" class=\\\"close\\\" data-bind=\\\"click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data.data, event); }\\\">&times;</button>\\n                    <div data-bind=\\\"component: { name: 'ability-detail', params: { hero: $parent, ability: $data.data } }\\\"></div>\\n                    <div data-bind=\\\"if: $data.data.name in $parent.debuffs.abilityData && $parent.debuffs.buffs()[$index()].data.level() > 0\\\">\\n                        <div class=\\\"col-md-8\\\">\\n                            <div data-bind=\\\"component: { name: 'buff-settings', params: $parent.debuffs.abilitySettingsData($data.data.name, $parent, $index()) }\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        \\n        <div class=\\\"form-horizontal\\\" data-bind=\\\"visible: sectionDisplay().debuff()\\\">\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-md-6\\\">\\n                    <div class=\\\"input-group\\\">\\n                        <input class=\\\"form-control\\\" id=\\\"auto3\\\" data-bind=\\\"attr: {id: id() + '-auto3' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: debuffs.itemBuffs.itemDebuffOptions, jqAutoValue: debuffs.itemBuffs.selectedItemDebuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'\\\" />\\n                        <span class=\\\"input-group-btn\\\">\\n                            <button class=\\\"btn btn-default\\\" data-bind=\\\"jqAutoCombo: id() + '-auto3'\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></button>\\n                        </span>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-6\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: debuffs.itemBuffs.addItemDebuff\\\">Add</button>\\n                </div>\\n            </div>\\n        </div>\\n        <div data-bind=\\\"foreach: debuffs.itemBuffs.items, visible: sectionDisplay().debuff()\\\">\\n            <div class=\\\"pull-left\\\" style=\\\"margin-right:10px\\\" data-bind=\\\"component: { name: 'item-debuff', params: $data}\\\"></div>\\n        </div>\\n    </div>\\n</div>\" });\nko.components.register('damage-details', { template: \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <h3 style=\\\"display:block;\\\" class=\\\"section_header\\\" data-bind=\\\"toggle: showDamageDetails, css: { section_disabled: !showDamageDetails() }\\\">Damage Details\\n            <span class=\\\"pull-right\\\" data-bind=\\\"visible: showDamageDetails()\\\">\\n                <small style=\\\"text-align:center\\\" data-bind=\\\"style: {color: getDamageTypeColor('physical')}\\\">Physical</small>\\n                <small style=\\\"text-align:center\\\" data-bind=\\\"style: {color: getDamageTypeColor('magic')}\\\">Magical</small>\\n                <small style=\\\"text-align:center\\\" data-bind=\\\"style: {color: getDamageTypeColor('pure')}\\\">Pure</small>\\n            </span>\\n        </h3>\\n        <table class=\\\"table damage-details\\\" data-bind=\\\"visible: showDamageDetails()\\\">\\n            <thead>\\n                <tr class=\\\"damage-details-header-row\\\">\\n                    <td></td>\\n                    <td class=\\\"text-center\\\" colspan=\\\"2\\\"><strong>Attack Damage</strong><img src=\\\"img/reduc_icon.png\\\" class=\\\"pull-right\\\" data-bind=\\\"attr: {title: 'After reductions from ' + enemy().heroData().displayname}\\\"></td>\\n                    <td class=\\\"text-center\\\" colspan=\\\"2\\\"><strong>DPS</strong><img src=\\\"img/reduc_icon.png\\\" class=\\\"pull-right\\\" data-bind=\\\"attr: {title: 'After reductions from ' + enemy().heroData().displayname}\\\"></td>\\n                </tr>\\n                <tr class=\\\"damage-details-header-row-2 total-row\\\">\\n                    <td><strong>Total</strong></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: damageTotalInfo().totalRow[0]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: damageTotalInfo().totalRow[1]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: damageTotalInfo().totalRow[2]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: damageTotalInfo().totalRow[3]().toFixed(2)\\\"></td>\\n                </tr>\\n            </thead>\\n            <!-- ko foreach: damageTotalInfo().attacks -->\\n            <tbody>\\n                <tr class=\\\"indent subtotal-row\\\" data-bind=\\\"toggle: $data.enabled, css: { 'inactive': !$data.enabled() }\\\">\\n                    <td>\\n                        <button class=\\\"btn btn-default btn-xs glyphicon pull-left\\\" data-bind=\\\"toggle: $data.enabled, css: {'glyphicon-eye-open': $data.enabled(), 'glyphicon-eye-close': !$data.enabled()}, preventBubble: 'click'\\\"></button>\\n                        <button class=\\\"btn btn-default btn-xs glyphicon pull-right\\\" data-bind=\\\"toggle: $data.visible, css: {'glyphicon-minus': $data.visible(), 'glyphicon-plus': !$data.visible()}, preventBubble: 'click'\\\"></button>\\n                        <strong><span data-bind=\\\"text: $data.name\\\"></span></strong>\\n                    </td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalRow[0]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalRow[1]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalRow[2]().toFixed(2)\\\"></td>\\n                    <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalRow[3]().toFixed(2)\\\"></td>\\n                </tr>\\n            </tbody>\\n            <tbody class=\\\"indent\\\" data-bind=\\\"foreach: $data.sources, visible: $data.visible\\\">\\n                <tr data-bind=\\\"toggle: $data.enabled, css: { 'inactive': !$data.enabled() }\\\">\\n                    <td class=\\\"indent\\\">\\n                        <span data-bind=\\\"text: $data.name\\\"></span>\\n                        <button class=\\\"btn btn-default btn-xs glyphicon pull-left\\\" data-bind=\\\"toggle: $data.enabled, css: {'glyphicon-eye-open': $data.enabled(), 'glyphicon-eye-close': !$data.enabled()}, preventBubble: 'click'\\\"></button>\\n                    </td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.damage.toFixed(2), style: {color: $parents[1].getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.damageReduced.toFixed(2), style: {color: $parents[1].getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.dps.toFixed(2), style: {color: $parents[1].getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.dpsReduced.toFixed(2), style: {color: $parents[1].getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                </tr>\\n            </tbody>\\n            <tr class=\\\"indent crit\\\" data-bind=\\\"visible: $data.visible() && $data.sourcesCrit.length > 0\\\">\\n                <td class=\\\"indent\\\">Critical Strike Proc, <span data-bind=\\\"text: ($data.totalCritChance * 100).toFixed(1) + '%'\\\"></span></td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalCritRow[0]().toFixed(2)\\\"></td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalCritRow[1]().toFixed(2)\\\"></td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalCritRow[2]().toFixed(2)\\\"></td>\\n                <td class=\\\"text-right\\\" data-bind=\\\"text: $data.totalCritRow[3]().toFixed(2)\\\"></td>\\n            </tr>\\n            <tbody class=\\\"indent\\\" data-bind=\\\"visible: $data.visible, foreach: $data.sourcesCrit\\\">\\n                <tr class=\\\"indent crit\\\" data-bind=\\\"toggle: $data.enabled, css: { 'inactive': !$data.enabled() }\\\">\\n                    <td class=\\\"indent\\\">\\n                        <span data-bind=\\\"text: $data.name\\\"></span>\\n                        <button class=\\\"btn btn-default btn-xs glyphicon pull-left\\\" data-bind=\\\"toggle: $data.enabled, css: {'glyphicon-eye-open': $data.enabled(), 'glyphicon-eye-close': !$data.enabled()}, preventBubble: 'click'\\\"></button>\\n                    </td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.damage.toFixed(2)\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.damageReduced.toFixed(2)\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.dps.toFixed(2)\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.dpsReduced.toFixed(2)\\\"></span></td>\\n                </tr>\\n            </tbody>\\n            <!-- /ko -->\\n            <tbody>\\n                <tr data-bind=\\\"visible: cleaveInfo().length > 0\\\">\\n                    <td colspan=3><strong>Cleave</strong></td>\\n                </tr>\\n            </tbody>    \\n            <tbody data-bind=\\\"foreach: cleaveInfo()\\\">\\n                <tr><td>Radius:</td><td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.radius\\\"></span></td></tr>\\n                <tr><td>Magnitude:</td><td class=\\\"text-right\\\"><span data-bind=\\\"html: ($data.magnitude * 100).toFixed(2) + '%'\\\"></span></td></tr>\\n                <tr>\\n                    <td>Cleave Damage:</td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: ($data.magnitude * $parent.damageTotalInfo().total).toFixed(2)\\\"></span></td>\\n                </tr>\\n            </tbody>\\n        \\n        </table>\\n    </div>\\n</div>\" });\nko.components.register('damage-amp', { template: \"<div class=\\\"col-md-12\\\">\\n    <h3 class=\\\"section_header\\\" data-bind=\\\"toggle: sectionDisplay().damageamp, css: { section_disabled: !sectionDisplay().damageamp() }\\\">Damage Amplification & Reduction</h3>\\n    <div data-bind=\\\"visible: sectionDisplay().damageamp(), lazyBinding: sectionDisplay().damageamp\\\">\\n        <div class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-md-3 control-label\\\">\\n                        <label for=\\\"damageinput\\\">Damage</label>\\n                    </div>\\n                    <div class=\\\"col-md-6\\\">\\n                        <input class=\\\"form-control\\\" id=\\\"damageinput\\\" data-bind=\\\"value: damageInputValue\\\" />\\n                    </div>\\n            </div>\\n        </div>\\n        <div class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-md-3 control-label\\\">\\n                        <label for=\\\"buffampselect\\\">Amplification</label>\\n                    </div>\\n                    <div class=\\\"col-md-5\\\">\\n                        <select id=\\\"buffampselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: damageAmplification.availableBuffs , optionsText: 'buffDisplayName', value: damageAmplification.selectedBuff\\\"></select>\\n                    </div>\\n                    <div class=\\\"col-md-4\\\">\\n                        <button class=\\\"btn btn-default\\\" data-bind=\\\"click: damageAmplification.addBuff\\\">Add</button>\\n                        <button class=\\\"btn btn-default\\\" data-bind=\\\"click: function(data,event) { damageAmplification.removeBuff(data, event, damageAmplification.selectedBuff().buffName) }\\\">Remove</button>\\n                    </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\" data-bind=\\\"foreach: damageAmplification.buffs\\\">\\n            <div data-bind=\\\"css: {row: $data.data.isDetail() || ($index() < $parent.damageAmplification.buffs().length-1 && $parent.damageAmplification.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.damageAmplification.buffs().length-1 && $parent.damageAmplification.buffs()[$index()+1].data.isDetail()) }\\\">\\n                <div class=\\\"col-md-3 text-center bottom-buffer row2\\\" data-bind=\\\"css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}\\\">\\n                    <img style=\\\"padding:0px;margin-bottom:1px;\\\" class=\\\"img-rounded ability\\\" data-bind=\\\"css: { ability_active: $data.data.isActive() || $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name + '.png'}, click: function(data, event) { $parent.damageAmplification.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.damageAmplification.removeBuff(data, event, $data.data.name) } }\\\"/>\\n                    <div class=\\\"progress\\\" style=\\\"position:relative\\\">\\n                        <div style=\\\"position:absolute;width:100%;color:white;\\\" class=\\\"text-center\\\" data-bind=\\\"visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)\\\"></div>\\n                        <div class=\\\"progress-bar progress-bar-danger\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"60\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 60%;\\\" data-bind=\\\"attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }\\\"></div>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageAmplification.levelDownAbility($index, data.data, event, $parent); }\\\">-</a>\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageAmplification.levelUpAbility($index, data.data, event, $parent); }\\\">+</a>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageAmplification.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}\\\">Details</a>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-9 bottom-buffer\\\" data-bind=\\\"visible: $data.data.isDetail()\\\">\\n                    <button type=\\\"button\\\" class=\\\"close\\\" data-bind=\\\"click: function(data, event) { $parent.damageAmplification.toggleBuffDetail($index, data.data, event); }\\\">&times;</button>\\n                    <div data-bind=\\\"component: { name: 'ability-detail', params: { hero: $parent, ability: $data.data } }\\\"></div>\\n                    <div data-bind=\\\"if: $data.data.name in $parent.damageAmplification.abilityData && $parent.damageAmplification.buffs()[$index()].data.level() > 0\\\">\\n                        <div class=\\\"col-md-8\\\">\\n                            <div data-bind=\\\"component: { name: 'buff-settings', params: $parent.damageAmplification.abilitySettingsData($data.data.name, $parent, $index()) }\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-md-3 control-label\\\">\\n                        <label for=\\\"buffreductionselect\\\">Reduction</label>\\n                    </div>\\n                    <div class=\\\"col-md-5\\\">\\n                        <select id=\\\"buffreductionselect\\\" class=\\\"form-control\\\" data-bind=\\\"options: damageReduction.availableDebuffs , optionsText: 'buffDisplayName', value: damageReduction.selectedBuff\\\"></select>\\n                    </div>\\n                    <div class=\\\"col-md-4\\\">\\n                        <button class=\\\"btn btn-default\\\" data-bind=\\\"click: damageReduction.addBuff\\\">Add</button>\\n                        <button class=\\\"btn btn-default\\\" data-bind=\\\"click: function(data,event) { damageReduction.removeBuff(data, event, damageReduction.selectedBuff().buffName) }\\\">Remove</button>\\n                    </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\" data-bind=\\\"foreach: damageReduction.buffs\\\">\\n            <div data-bind=\\\"css: {row: $data.data.isDetail() || ($index() < $parent.damageReduction.buffs().length-1 && $parent.damageReduction.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.damageReduction.buffs().length-1 && $parent.damageReduction.buffs()[$index()+1].data.isDetail()) }\\\">\\n                <div class=\\\"col-md-3 text-center bottom-buffer row2\\\" data-bind=\\\"css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}\\\">\\n                    <img style=\\\"padding:0px;margin-bottom:1px;\\\" class=\\\"img-rounded ability\\\" data-bind=\\\"css: { ability_active: $data.data.isActive() || $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name + '.png'}, click: function(data, event) { $parent.damageReduction.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.damageReduction.removeBuff(data, event, $data.data.name) } }\\\"/>\\n                    <div class=\\\"progress\\\" style=\\\"position:relative\\\">\\n                        <div style=\\\"position:absolute;width:100%;color:white;\\\" class=\\\"text-center\\\" data-bind=\\\"visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)\\\"></div>\\n                        <div class=\\\"progress-bar progress-bar-danger\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"60\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 60%;\\\" data-bind=\\\"attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }\\\"></div>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageReduction.levelDownAbility($index, data.data, event, $parent); }\\\">-</a>\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageReduction.levelUpAbility($index, data.data, event, $parent); }\\\">+</a>\\n                    </div>\\n                    <div class=\\\"btn-group btn-group-justified\\\">\\n                        <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parent.damageReduction.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}\\\">Details</a>\\n                    </div>\\n                </div>\\n                <div class=\\\"col-md-9 bottom-buffer\\\" data-bind=\\\"visible: $data.data.isDetail()\\\">\\n                    <button type=\\\"button\\\" class=\\\"close\\\" data-bind=\\\"click: function(data, event) { $parent.damageReduction.toggleBuffDetail($index, data.data, event); }\\\">&times;</button>\\n                    <div data-bind=\\\"component: { name: 'ability-detail', params: { hero: $parent, ability: $data.data } }\\\"></div>\\n                    <div data-bind=\\\"if: $data.data.name in $parent.damageReduction.abilityData && $parent.damageReduction.buffs()[$index()].data.level() > 0\\\">\\n                        <div class=\\\"col-md-8\\\">\\n                            <div data-bind=\\\"component: { name: 'buff-settings', params: $parent.damageReduction.abilitySettingsData($data.data.name, $parent, $index()) }\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        \\n        <h4>Calculations <a class=\\\"btn btn-default btn-xs\\\" data-bind=\\\"toggle: showDamageAmpCalcDetails, text: !showDamageAmpCalcDetails() ? 'Show details' : 'Hide details'\\\"></a></h4>\\n        <table class=\\\"table\\\">\\n            <tbody>\\n                <!-- ko foreach: damageInputModified().data -->\\n                <tr data-bind=\\\"visible: $parent.showDamageAmpCalcDetails()\\\">\\n                    <td><span style=\\\"text-decoration: underline;\\\" data-bind=\\\"text: $data.label + ' damage'\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: Math.round($data.value * 100) / 100, style: {color: $parent.getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                </tr>\\n                    <!-- ko foreach: $data.data -->\\n                    <tr data-bind=\\\"visible: $parents[1].showDamageAmpCalcDetails()\\\">\\n                        <td><span data-bind=\\\"text: $data.label\\\"></span></td>\\n                        <td class=\\\"text-right\\\"><span data-bind=\\\"html: Math.round($data.value * 100) / 100, diffStyle: $data.value\\\"></span></td>\\n                    </tr>\\n                    <!-- /ko -->\\n                <tr data-bind=\\\"css: {subtotal: $parent.showDamageAmpCalcDetails()}\\\">\\n                    <td data-bind=\\\"visible: $parent.showDamageAmpCalcDetails()\\\"><span data-bind=\\\"text: $data.label + ' damage subtotal'\\\"></span></td>\\n                    <td data-bind=\\\"visible: !$parent.showDamageAmpCalcDetails()\\\"><span data-bind=\\\"text: $data.label + ' damage'\\\"></span></td>\\n                    <td class=\\\"text-right\\\"><span data-bind=\\\"html: Math.round($data.total * 100) / 100, style: {color: $parent.getDamageTypeColor($data.damageType)}\\\"></span></td>\\n                </tr>\\n                <!-- /ko -->\\n                <tr>\\n                    <td><strong data-bind=\\\"text: damageInputModified().label + ' damage'\\\"></strong></td>\\n                    <td class=\\\"text-right\\\"><strong data-bind=\\\"html: Math.round(damageInputModified().total * 100) / 100, style: {color: getDamageTypeColor(damageInputModified().damageType)}\\\"></strong></td>\\n                </tr>\\n            </tbody>\\n        </table>\\n    </div>\\n</div>\" });\nko.components.register('ability', { template: \"<div data-bind=\\\"if: $data.displayname != 'Empty' &&  ($data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN') == -1 || $data.name.indexOf('invoker_') != -1),\\nstyle: {clear: $data.name == 'invoker_cold_snap' || $data.name == 'invoker_chaos_meteor' ? 'both' : ''},\\ncss: {row: $data.isDetail() || ($index() < $parents[1].ability().abilities().length-1 && $parents[1].ability().abilities()[$index()+1].isDetail()), row3: $data.isDetail() || ($index() < $parents[1].ability().abilities().length-1 && $parents[1].ability().abilities()[$index()+1].isDetail()) }\\\">\\n    <div class=\\\"col-md-3 text-center bottom-buffer row2\\\" data-bind=\\\"css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}\\\">\\n        <img style=\\\"padding:0px;margin-bottom:1px;\\\" class=\\\"img-rounded ability\\\" data-bind=\\\"css: { ability_active: $data.isActive() || $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.isActive() && $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.name + '.png'}, click: function(data, event) { $parents[1].ability().toggleAbility($index, data, event); }\\\"/>\\n        <div class=\\\"progress\\\" style=\\\"position:relative\\\">\\n            <div style=\\\"position:absolute;width:100%;color:white;\\\" class=\\\"text-center\\\" data-bind=\\\"visible: $parents[1].getAbilityLevelMax($data) > 0, text: $data.level() + '/' + $parents[1].getAbilityLevelMax($data)\\\"></div>\\n            <div class=\\\"progress-bar progress-bar-danger\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"60\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 60%;\\\" data-bind=\\\"attr: { 'aria-valuenow': ($parents[1].getAbilityLevelMax($data) > 0 ? $data.level()/$parents[1].getAbilityLevelMax($data)*100 : 0) }, style: { width: ($parents[1].getAbilityLevelMax($data) > 0 ? $data.level()/$parents[1].getAbilityLevelMax($data)*100 : 0) + '%' }\\\"></div>\\n        </div>\\n        <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1\\\">\\n            <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parents[1].ability().levelDownAbility($index, data, event, $parents[1]); }\\\">-</a>\\n            <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parents[1].ability().levelUpAbility($index, data, event, $parents[1]); }\\\">+</a>\\n        </div>\\n        <div class=\\\"btn-group btn-group-justified\\\">\\n            <a class=\\\"btn btn-default btn-sm\\\" data-bind=\\\"click: function(data, event) { $parents[1].ability().toggleAbilityDetail($index, data, event); }, css: {'toggled': $data.isDetail}\\\">Details</a>\\n        </div>\\n        <div class=\\\"btn-group btn-group-justified\\\" data-bind=\\\"if: $data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') != -1\\\">\\n            <a class=\\\"btn btn-default btn-sm btn-block\\\" style=\\\"visibility:hidden;\\\">&mdash;</a>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-9 bottom-buffer2\\\" data-bind=\\\"visible: $data.isDetail()\\\">\\n        <button type=\\\"button\\\" class=\\\"close\\\" data-bind=\\\"click: function(data, event) { $parents[1].ability().toggleAbilityDetail($index, data, event); }\\\">&times;</button>\\n        <div data-bind=\\\"component: { name: 'ability-detail', params: { hero: $parents[1], ability: $data } }\\\"></div>\\n        <div data-bind=\\\"if: $data.name in $parents[1].ability().abilityData && $parents[1].ability().abilities()[$index()].level() > 0\\\">\\n            <div class=\\\"col-md-12\\\" style=\\\"margin-top: 10px\\\" >\\n                <div data-bind=\\\"template: { name: 'ability-settings-template', data: $parents[1].ability().abilitySettingsData($data.name, $parents[1], $index()) }\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\" });\nvar abilityDetail = require('../components/ability-detail');\n//console.log(abilityDetail);\nko.components.register('ability-detail', abilityDetail);\nko.components.register('shop', require('../components/shop'));\nko.components.register('stat', { template: \"<span data-bind=\\\"text: parseFloat(hero[stat]()).toString()\\\"></span><span data-bind=\\\"html: $root.getDiffText(hero.diff[stat]()), diffCss: hero.diff[stat], diffCssStat: stat, visible: hero.showDiff\\\"></span>\" });\nko.components.register('stats0', { template: \"<div class=\\\"col-md-12 stats0\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n    <table class=\\\"table table-condensed\\\">\\n    <tbody>\\n    <tr><td>Strength:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalStr' } }\\\"></td></tr>\\n    <tr><td>Agility:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalAgi' } }\\\"></td></tr>\\n    <tr><td>Intelligence:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalInt' } }\\\"></td></tr>\\n    <tr><td><abbr title=\\\"Movement Speed\\\">MS</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalMovementSpeed' } }\\\"></td></tr>\\n    <tr><td>Turn Rate:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalTurnRate' } }\\\"></td></tr>\\n    <tr><td>Sight Range:</td><td class=\\\"text-right\\\"><span data-bind=\\\"html: '<abbr title=\\\\'Day\\\\'>' + visionrangeday() + '</abbr>/<abbr title=\\\\'Night\\\\'>' + visionrangenight() + '</abbr>'\\\"></span></td></tr>\\n    <tr><td>%Spell Amp:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'spellAmp' } }\\\"></td></tr>\\n    </tbody>\\n    </table>\\n</div>\" });\nko.components.register('stats1', { template: \"<div class=\\\"col-md-12 stats1\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n    <table class=\\\"table table-condensed\\\">\\n    <tbody>\\n    <tr><td>Armor:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalArmorPhysical' } }\\\"></td></tr>\\n    <tr><td>Health:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'health' } }\\\"></td></tr>\\n    <tr><td>Health Regen:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'healthregen' } }\\\"></td></tr>\\n    <tr><td>Mana:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'mana' } }\\\"></td></tr>\\n    <tr><td>Mana Regen:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'manaregen' } }\\\"></td></tr>\\n    <tr><td>Physical <abbr title=\\\"Effective Hit Points\\\">EHP</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'ehpPhysical' } }\\\"></td></tr>\\n    <tr><td>Magical <abbr title=\\\"Effective Hit Points\\\">EHP</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'ehpMagical' } }\\\"></td></tr>\\n    </tbody>\\n    </table>\\n</div>\" });\nko.components.register('stats2', { template: \"<div class=\\\"col-md-12 stats2\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n    <table class=\\\"table table-condensed\\\">\\n    <tbody>\\n    <tr><td>%Phys Res:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalArmorPhysicalReduction' } }\\\"></td></tr>\\n    <tr><td>%Magic Res:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalMagicResistance' } }\\\"></td></tr>\\n    <tr><td>%Lifesteal:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'lifesteal' } }\\\"></td></tr>\\n    <tr><td>%Evasion:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'evasion' } }\\\"></td></tr>\\n    <tr><td>%Bash:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'bash' } }\\\"></td></tr>\\n    <tr><td>%Miss Chance:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'missChance' } }\\\"></td></tr>\\n    <tr><td><abbr title=\\\"% Cooldown Reduction\\\">%CDR</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'cooldownReductionPercent' } }\\\"></td></tr>\\n    <tr style=\\\"display: none\\\"><td colspan=2><a class=\\\"btn btn-default btn-block btn-xs\\\" data-bind=\\\"css: {disabled: critInfo().sources.length == 0 ? 'disabled' : '', 'toggled': showCriticalStrikeDetails}, toggle: showCriticalStrikeDetails\\\">Critical Strike Details</a></td></tr>\\n    </tbody>\\n    <tbody class=\\\"tabledropdown\\\" style=\\\"border-top:0\\\" data-bind=\\\"visible: showCriticalStrikeDetails(),foreach: critInfo().sources\\\">\\n    <tr><td colspan=2><strong data-bind=\\\"text: $data.name\\\"></strong></td></tr>\\n    <tr><td>Crit Chance:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ($data.totalchance * 100).toFixed(2) + '%'\\\"></span></td></tr>\\n    <tr><td>Crit Multiplier:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: ($data.multiplier * 100).toFixed(2) + '%'\\\"></span></td></tr>\\n    </tbody>\\n    </table>\\n</div>\" });\nko.components.register('stats3', { template: \"<div class=\\\"col-md-12 stats3\\\" data-bind=\\\"css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}\\\">\\n    <table class=\\\"table table-condensed\\\">\\n    <tbody>\\n    <tr>\\n        <td>Damage:</td>\\n        <td class=\\\"text-right\\\">\\n            <span data-bind=\\\"html: baseDamage()[0].toFixed(0)\\\"></span>\\n            <span data-bind=\\\"html: $root.getDiffText(diff['baseDamage']()[0]), css: {'diffPos': diff['baseDamage']()[0] > 0, 'diffNeg': diff['baseDamage']()[0] < 0}, visible: showDiff\\\"></span>\\n            <span>&ndash;</span>\\n            <span data-bind=\\\"html: baseDamage()[1].toFixed(0)\\\"></span>\\n            <span data-bind=\\\"html: $root.getDiffText(diff['baseDamage']()[1]), css: {'diffPos': diff['baseDamage']()[1] > 0, 'diffNeg': diff['baseDamage']()[1] < 0}, visible: showDiff\\\"></span>\\n            <span style=\\\"color:green\\\" data-bind=\\\"visible: bonusDamage() > 0, html: ' + ' + bonusDamage().toFixed(0)\\\"></span>\\n            <span data-bind=\\\"html: $root.getDiffText(diff['bonusDamage']()), css: {'diffPos': diff['bonusDamage']() > 0, 'diffNeg': diff['bonusDamage']() < 0}, visible: showDiff\\\"></span>\\n            <span style=\\\"color:red\\\" data-bind=\\\"visible: bonusDamageReduction() != 0, html: ' - ' + bonusDamageReduction().toFixed(0)\\\"></span>\\n            <span data-bind=\\\"html: $root.getDiffText(diff['bonusDamageReduction']()), css: {'diffPos': diff['bonusDamageReduction']() > 0, 'diffNeg': diff['bonusDamageReduction']() < 0}, visible: showDiff\\\"></span>\\n        </td>\\n    </tr>\\n    <tr><td><abbr title=\\\"Increased Attack Speed\\\">IAS</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'ias' } }\\\"></td></tr>\\n    <tr><td><abbr title=\\\"Base Attack Time\\\">BAT</abbr>:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'bat' } }\\\"></td></tr>\\n    <tr><td>Attack Time:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'attackTime' } }\\\"></td></tr>\\n    <tr><td>Attack &frasl; Sec:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'attacksPerSecond' } }\\\"></td></tr>\\n    <tr><td>Attack Range:</td><td class=\\\"text-right\\\" data-bind=\\\"component: { name: 'stat', params: {'hero': $data, 'stat': 'totalattackrange' } }\\\"></td></tr>\\n    </tbody>\\n    </table>\\n</div>\" });\nko.components.register('stats-additional', { template: \"<table class=\\\"table table-condensed\\\">\\n    <tbody>\\n        <tr><td>Base Strength:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributebasestrength\\\"></span></td></tr>\\n        <tr><td>Strength Gain:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributestrengthgain\\\"></span></td></tr>\\n        <tr><td>Base Agility:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributebaseagility\\\"></span></td></tr>\\n        <tr><td>Agility Gain:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributeagilitygain\\\"></span></td></tr>\\n        <tr><td>Base Intelligence:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributebaseintelligence\\\"></span></td></tr>\\n        <tr><td>Intelligence Gain:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attributeintelligencegain\\\"></span></td></tr>\\n        <tr><td>Base Armor:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().armorphysical\\\"></span></td></tr>\\n        <tr><td><abbr title=\\\"Base Armor + armor from base agility\\\">Starting Armor:</abbr></td><td class=\\\"text-right\\\"><span data-bind=\\\"text: parseFloat($data.startingArmor()).toString()\\\"></span></td></tr>\\n        <tr><td>Base Magic Res:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().magicalresistance + '%'\\\"></span></td></tr>\\n        <tr><td>Base Attack Point:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: heroData().attackpoint\\\"></span></td></tr>\\n        <tr><td><abbr data-bind=\\\"attr: { title: 'Total experience required to reach level ' + $data.selectedHeroLevel() }\\\">Total Exp:</abbr></td><td class=\\\"text-right\\\"><span data-bind=\\\"text: $data.totalExp()\\\"></span></span></td></tr>\\n        <tr><td><abbr title=\\\"Experience required for next level\\\">Next level exp:</abbr></td><td class=\\\"text-right\\\"><span data-bind=\\\"html: $data.nextLevelExp()\\\"></span></span></td></tr>\\n        <tr><td>Respawn Time:</td><td class=\\\"text-right\\\"><span data-bind=\\\"text: $data.respawnTime()\\\"></span></td></tr>\\n    </tbody>\\n</table>\" });\n\n// The app extends the herocalc library, provides a frontend\nvar my = require(\"dota-hero-calculator-library\");\nvar findWhere = require(\"dota-hero-calculator-library/src/herocalc/util/findWhere\");\nvar uniqueId = require(\"dota-hero-calculator-library/src/herocalc/util/uniqueId\");\nvar itemData = require(\"dota-hero-calculator-library/src/herocalc/data/main\").itemData;\nvar unitData = require(\"dota-hero-calculator-library/src/herocalc/data/main\").unitData;\nvar heroData = require(\"dota-hero-calculator-library/src/herocalc/data/main\").heroData;\nvar stackableItems = require(\"dota-hero-calculator-library/src/herocalc/inventory/stackableItems\");\nvar levelItems = require(\"dota-hero-calculator-library/src/herocalc/inventory/levelItems\");\nvar getItemTooltipData = require(\"./herocalc_tooltips_item\");\n//var getAbilityTooltipData = require(\"./herocalc_tooltips_ability\");\nvar HeroViewModel = require(\"./HeroViewModel\");\nvar CloneViewModel = require(\"./CloneViewModel\");\nvar UnitViewModel = require(\"./UnitViewModel\");\nvar AbilityModel = require(\"dota-hero-calculator-library/src/herocalc/AbilityModel\");\n/*AbilityModel.prototype.getAbilityTooltipData = function (hero, el) {\n    return getAbilityTooltipData(heroData, unitData, hero, el);\n}*/\n\nvar PlayerColors = [\n    \"#2E6AE6\", //Blue\n    \"#5DE6AD\", //Teal\n    \"#AD00AD\", //Purple\n    \"#DCD90A\", //Yellow\n    \"#E66200\", //Orange\n    \"#E67AB0\", //Pink\n    \"#92A440\", //Pus Yellow\n    \"#5CC5E0\", //Light Blue\n    \"#00771F\", //Green\n    \"#956000\" //Brown\n];\n\nvar Tab = function (id, href, data, text, color, template) {\n    var self = this;\n    self.id = id;\n    self.href = href;\n    self.color = color;\n    self.data = data;\n    self.data.id = ko.observable(self.href);\n    self.text = text;\n    self.template = template;\n    return self;\n}\nTab.prototype.toJS = function () {\n    return {\n        id: this.id,\n        href: this.href,\n        color: this.color,\n        text: this.text,\n        template: this.template\n    }\n}\n\nvar TabGroup = function (hero, unit, clone) {\n    var self = this;\n    self.hero = hero;\n    self.unit = unit;\n    self.clone = clone;\n    self.illusions = ko.observableArray([]);\n    return self;\n}\nTabGroup.prototype.toJS = function () {\n    return {\n        hero: this.hero.toJS(),\n        unit: this.unit.toJS(),\n        clone: this.clone.toJS(),\n        illusions: this.illusions().map(function (illusion) { return illusion.toJS(); })\n    }\n}\n\nvar HeroCalculatorViewModel = function (tooltipURL) {\n    var self = this;\n    self.heroes = [];\n    \n    $.getJSON(tooltipURL, function (data) {\n        abilityDetail.abilityTooltipData(data);\n    });\n    \n    //getAbilityTooltipData.init(tooltipURL);\n\n    for (var i = 0; i < 10; i++) {\n        self.heroes.push(new HeroViewModel(heroData, itemData, unitData, i));\n    }\n    \n    for (var i = 0; i < 5; i++) {\n        var arr = [];\n        for (var j = 5; j < 10; j++) {\n            arr.push(self.heroes[j]);\n        }\n        self.heroes[i].enemies.push.apply(self.heroes[i].enemies, arr);\n    }\n    for (var i = 5; i < 10; i++) {\n        var arr = [];\n        for (var j = 0; j < 5; j++) {\n            arr.push(self.heroes[j]);\n        }\n        self.heroes[i].enemies.push.apply(self.heroes[i].enemies, arr);\n    }\n    for (var i = 0; i < 10; i++) {\n        var arr = [];\n        for (var j = 0; j < 10; j++) {\n            if (i !== j) arr.push(self.heroes[j]);\n        }\n        self.heroes[i].otherHeroes.push.apply(self.heroes[i].otherHeroes, arr);\n    }\n    \n    for (var i = 0; i < 10; i++) {\n        self.heroes[i].clone = ko.observable(new CloneViewModel(heroData, itemData, unitData, 'meepo', self.heroes[i]));\n        self.heroes[i].unit = ko.observable(new UnitViewModel(heroData, itemData, unitData, 'abaddon', self.heroes[i]));\n        \n        self.heroes[i].selectedCompare(self.heroes[i].availableCompare()[i < 5 ? 4 + i : i - 5]);\n        self.heroes[i].selectedEnemy(self.heroes[i].availableEnemies()[i % 5]);\n        //self.heroes[i].enemy = ko.observable(self.heroes[i < 2 ? 2 : 0]);\n        self.heroes[i].unit().enemy(self.heroes[i].enemy());\n        //self.heroes[i].unit().enemy = ko.observable(self.heroes[i < 2 ? 2 : 0]);\n        //self.heroes[i].heroCompare = ko.observable(self.heroes[1 - (i % 2) + (i < 2 ? 0 : 2)]);\n        \n        self.heroes[i].unit().selectedUnit(self.heroes[i].unit().availableUnits()[0]);\n        //self.heroes[i].selectedHero(self.heroes[i].availableHeroes()[i < 2 ? 0 : 2]);\n        self.heroes[i].illusions.subscribe(function (changes) {\n            for (var i = 0; i < changes.length; i++) {\n                if (changes[i].status == 'added') {\n                    var color = this.index < 2 ? '#5cb85c' : '#d9534f',\n                        j = uniqueId();\n                    self.tabs()[this.index].illusions.push(\n                        new Tab(\n                            'illusionTab' + this.index + '-' + j,\n                            'illusionPane' + this.index + '-' + j,\n                            self.heroes[this.index].illusions()[self.tabs()[this.index].illusions().length](),\n                            'Illusion ' + j,\n                            color,\n                            'illusion-pane')\n                    );\n                }\n            }\n        }, {vm: this, index: i}, \"arrayChange\");\n    }\n    //self.heroes[0].showUnitTab(true);\n    self.heroes[0].bound(true);\n    self.tabs = ko.observableArray([]);\n    var tabsArr = [];\n    for (var i = 0; i < 10; i++) {\n        //var color = i < 5 ? '#5cb85c' : '#d9534f';\n        var color = PlayerColors[i];\n        var tabGroup = new TabGroup(\n            new Tab('heroTab' + i, 'heroPane' + i, self.heroes[i], 'Hero ' + i, color, 'hero-pane'),\n            new Tab('unitTab' + i, 'unitPane' + i, self.heroes[i].unit(), 'Unit ' + i, color, 'unit-pane'),\n            new Tab('cloneTab' + i, 'clonePane' + i, self.heroes[i].clone(), 'Meepo Clone ' + i, color, 'clone-pane')\n        );\n        //self.tabs.push(tabGroup);\n        tabsArr.push(tabGroup);\n    }\n    self.tabs.push.apply(self.tabs, tabsArr);//.slice(0, 1));\n\n    self.selectedItem = ko.observable();\n    self.layout = ko.observable(\"1\");\n    self.displayShop = ko.observable(true);\n    self.displayShopItemTooltip = ko.observable(true);\n    self.allItems = ko.observableArray([\n        {name: 'Str, Agi, Int, MS, Turn, Sight', value: 'stats0'},\n        {name: 'Armor, Health, Mana, Regen, EHP', value: 'stats1'},\n        {name: 'Phys Res, Magic Res, Lifesteal, Evasion, Bash, Miss', value: 'stats2'},\n        {name: 'Damage, IAS, BAT, Attack', value: 'stats3'}\n    ]); // Initial items\n    self.selectedItems = ko.observableArray([]); \n    self.moveUp = function () {\n        var start = self.allItems.indexOf(self.selectedItems()[0]),\n            end = self.allItems.indexOf(self.selectedItems()[self.selectedItems().length - 1]);\n        if (start > 0) {\n            var e = self.allItems.splice(start - 1, 1);\n            self.allItems.splice(end, 0, e[0]);            \n        }\n    };\n    self.moveDown = function () {\n        var start = self.allItems.indexOf(self.selectedItems()[0]),\n            end = self.allItems.indexOf(self.selectedItems()[self.selectedItems().length - 1]);        \n        if (end < self.allItems().length - 1) {\n            var e = self.allItems.splice(end + 1, 1);\n            self.allItems.splice(start, 0, e[0]);\n        }\n    };\n    self.selectedTabId = ko.observable('heroTab0');\n    self.getSelectedTab = function (tabId) {\n        var indices = tabId.replace('heroTab', '').replace('cloneTab', '').replace('unitTab', '').replace('illusionTab', '').split('-'),\n            index = indices[0],\n            tab = self.tabs()[index];\n        return tab;\n    }\n    self.selectedTab = ko.computed(function () {\n        /*var indices = self.selectedTabId().replace('heroTab', '').replace('cloneTab', '').replace('unitTab', '').replace('illusionTab', '').split('-'),\n            index = indices[0],\n            tab = self.tabs()[index];*/\n        var tab = self.getSelectedTab(self.selectedTabId());\n        if (self.selectedTabId().indexOf('hero') != -1) {\n            return tab.hero;\n        }\n        else if (self.selectedTabId().indexOf('unit') != -1) {\n            return tab.unit;\n        }\n        else if (self.selectedTabId().indexOf('clone') != -1) {\n            return tab.clone;\n        }\n        else if (self.selectedTabId().indexOf('illusion') != -1) {\n            return tab.illusions().find(function (tab) {\n                return tab.id == self.selectedTabId();\n            });\n        }\n        else {\n            return self.tabs()[0].hero;\n        }\n    });\n    self.selectedTabs = ko.observableArray(['heroTab0', 'heroTab1']);\n    //self.selectedTabs.push('heroTab0');\n    //self.selectedTabs.push('heroTab1');\n    self.boundSettings = ko.observable(false);\n    self.clickTab = function (data, event, index) {\n        /*if (event.target.id != 'settingsTab') {\n            self.selectedTabId(event.target.id);\n        }*/\n        self.selectedTabId(event.target.id);\n        if (self.selectedTabs()[1] != event.target.id) {\n            self.selectedTabs.shift();\n            self.selectedTabs.push(event.target.id);\n        }\n        if (self.selectedTab().data.hasOwnProperty('bound')) {\n            self.selectedTab().data.bound(true);\n\n            // make sure build explorer graph renders\n            if (self.selectedTab().data.hasOwnProperty('buildExplorer')) {\n                var buildExplorer = self.selectedTab().data.buildExplorer;\n                setTimeout(function () {\n                    buildExplorer.graphData.valueHasMutated();\n                }, 0);\n            }\n        }\n        if (event.target.id === 'settingsTab') self.boundSettings(true);\n    };\n    self.isSecondTab = function (id) {\n        return self.selectedTabs().indexOf(id) > -1 && self.selectedTabId() != id;\n    }\n    \n    self.showSideTabId = function (id) {\n        return self.selectedTabs().indexOf(id) > -1 && self.sideView();\n    };\n    \n    self.removeTab = function (index, data, event, tab) {\n        if (data.id == self.selectedTabId()) {\n            //self.selectedTabId('heroTab0');\n            self.clickTab(null, {target: {id: 'heroTab0'}});\n            $('#heroTab0').tab('show');\n        }\n        self.tabs()[tab].illusions.remove(function (illusion) {\n            return illusion == data;\n        });\n        self.heroes[tab].illusions.remove(function (illusion) {\n            return illusion() == data.data;\n        });\n    };\n    \n    self.sideView = ko.observable(false);\n    self.sideView.subscribe(function (newValue) {\n        if (newValue) {\n            if (!self.shopPopout()) {\n                self.displayShop(false);\n            }\n            for (var i = 0; i < self.selectedTabs().length; i++) {\n                var tab = self.getSelectedTab(self.selectedTabs()[i]);\n                if (tab && tab.hero.data.hasOwnProperty('bound')) {\n                    tab.hero.data.bound(true);\n                }\n            }\n            self.layout(\"0\");\n        }\n    });\n    var $window = $(window);\n    self.windowWidth = ko.observable($window.width());\n    self.windowHeight = ko.observable($window.height());\n    $window.resize(function () { \n        self.windowWidth($window.width());\n        self.windowHeight($window.height());\n    });\n    self.shopDock = ko.observable(false);\n    self.shopDock.subscribe(function (newValue) {\n        if (newValue) {\n            self.shopPopout(false);\n        }\n        else {\n        }\n    });\n\n    self.shopDockTrigger = ko.computed(function () {\n        self.windowWidth();\n        self.shopDock();\n    });\n    self.shopPopout = ko.observable(false);\n    self.shopPopout.subscribe(function (newValue) {\n        if (newValue) {\n            self.displayShop(true);\n            $( \"#shop-dialog\" ).dialog({\n                minWidth: 380,\n                minHeight: 0,\n                closeText: \"\",\n                open: function ( event, ui ) {\n                    $(event.target.offsetParent).find('.ui-dialog-titlebar').find('button')\n                        .addClass('close glyphicon glyphicon-remove shop-button btn btn-default btn-xs pull-right')\n                        .removeClass('ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close close')\n                        .css('margin-right','0px')\n                        .parent()\n                            .append($('#shop-minimize'))\n                            .append($('#shop-maximize'));\n                    $(event.target.offsetParent).find('.ui-dialog-titlebar').dblclick(function () {\n                        self.displayShop(!self.displayShop());\n                    });\n                },\n                close: function ( event, ui ) {\n                    self.shopPopout(false);\n                }\n            });\n        }\n        else {\n            $('#shop-container').prepend($('#shop-minimize')).prepend($('#shop-maximize'));\n            $( \"#shop-dialog\" ).dialog(\"destroy\");\n        }\n    });\n\n    self.addItem = function (data, event) {\n        if (self.selectedTab().data.buildExplorer) {\n            self.selectedTab().data.buildExplorer.getSelectedInventory().addItem(data, event);\n        }\n        else {\n            self.selectedTab().data.inventory.addItem(data, event);\n        }\n    }\n    self.itemOptions = ko.computed(function () {\n        return self.selectedTab().data.inventory.itemOptions();\n    });\n    \n    self.changeSelectedItem = function (data, event) {\n        self.itemInputValue(1);\n        self.selectedItem(event.target.id);\n    }\n    \n    self.getItemTooltipData = ko.computed(function () {\n        return getItemTooltipData(itemData, self.selectedItem());\n    }, this);\n    self.getItemInputLabel = ko.computed(function () {\n        if (stackableItems.indexOf(self.selectedItem()) != -1) {\n            return 'Stack Size'\n        }\n        else if (levelItems.indexOf(self.selectedItem()) != -1) {\n            return 'Upgrade Level'\n        }\n        else if (self.selectedItem() == 'bloodstone') {\n            return 'Charges'\n        }\n        else {\n            return ''\n        }\n    }, this);\n    self.itemInputValue = ko.observable(1);\n    self.saveLink = ko.observable();\n    self.getAppState = function () {\n        var data = {\n            selectedItem: self.selectedItem,\n            layout: self.layout,\n            displayShop: self.displayShop,\n            displayShopItemTooltip: self.displayShopItemTooltip,\n            allItems: self.allItems,\n            selectedItems: self.selectedItems,\n            selectedTabId: self.selectedTabId,\n            selectedTabs: self.selectedTabs,\n            boundSettings: self.boundSettings,\n            sideView: self.sideView,\n            windowWidth: self.windowWidth,\n            windowHeight: self.windowHeight,\n            shopDock: self.shopDock,\n            shopPopout: self.shopPopout,\n            itemInputValue: self.itemInputValue,\n            saveLink: self.saveLink\n        }\n        data.tabs = self.tabs().map(function (tab) { return tab.toJS() });\n        return ko.toJS(data);\n    }\n    self.getSaveData = function () {\n        var data = {\n            version: \"1.3.0\",\n            heroes: []\n        }\n        for (var i = 0; i < 10; i++) {\n            var hero = self.heroes[i];\n            var d = {\n                hero: hero.selectedHero().heroName,\n                level: hero.selectedHeroLevel(),\n                items: [],\n                abilities: [],\n                skillPointHistory: hero.skillPointHistory(),\n                buffs: [],\n                itemBuffs: [],\n                debuffs: [],\n                itemDebuffs: [],\n                graphData: [],\n                enemyIndex: hero.enemy().index(),\n                heroCompareIndex: hero.heroCompare().index()\n            }\n            // items\n            for (var j = 0; j < hero.inventory.items().length; j++) {\n                d.items.push(ko.toJS(hero.inventory.items()[j]));\n            }\n            // abilities\n            for (var j = 0; j < hero.ability().abilities().length; j++) {\n                d.abilities.push({\n                    level: hero.ability().abilities()[j].level(),\n                    isActive: hero.ability().abilities()[j].isActive()\n                });\n            }\n            // buffs\n            for (var j = 0; j < hero.buffs.buffs().length; j++) {\n                d.buffs.push({\n                    name: hero.buffs.buffs()[j].name,\n                    level: hero.buffs.buffs()[j].data.level(),\n                    isActive: hero.buffs.buffs()[j].data.isActive()\n                });\n            }\n            \n            // debuffs\n            for (var j = 0; j < hero.debuffs.buffs().length; j++) {\n                d.debuffs.push({\n                    name: hero.debuffs.buffs()[j].name,\n                    level: hero.debuffs.buffs()[j].data.level(),\n                    isActive: hero.debuffs.buffs()[j].data.isActive()\n                });\n            }\n\n            // item buffs\n            for (var j = 0; j < hero.buffs.itemBuffs.items().length; j++) {\n                d.itemBuffs.push(ko.toJS(hero.buffs.itemBuffs.items()[j]));\n            }\n            \n            // item debuffs\n            for (var j = 0; j < hero.debuffs.itemBuffs.items().length; j++) {\n                d.itemDebuffs.push(ko.toJS(hero.debuffs.itemBuffs.items()[j]));\n            }\n            \n            // graph data\n            d.graphData = ko.toJS(hero.buildExplorer.graphData);\n            \n            data.heroes.push(d);\n        }\n        return data;\n    }\n    self.save = function () {\n        var data = self.getSaveData();\n        var serialized = JSON.stringify(data);\n        $.ajax({\n            type: \"POST\",\n            url: \"save.php\",\n            data: {'data': serialized},\n            dataType: \"json\",\n            success: function (data){\n                self.saveLink([location.protocol, '//', location.host, location.pathname].join('') + '?id=' + data.file);\n            },\n            failure: function (errMsg) {\n                alert(\"Save request failed.\");\n            }\n        });\n    }\n    self.load = function (data) {\n        for (var i = 0; i < data.heroes.length; i++) {\n            var hero = self.heroes[i];\n            hero.selectedHero(findWhere(hero.availableHeroes(), {'heroName': data.heroes[i].hero}));\n            hero.selectedHeroLevel(data.heroes[i].level);\n            hero.inventory.items.removeAll();\n            hero.inventory.activeItems.removeAll();\n            \n            // load hero compare\n            if (data.heroes[i].hasOwnProperty('heroCompareIndex')) {\n                var o = hero.availableCompare().filter(function (option) {\n                    return option.hero.index() == data.heroes[i].heroCompareIndex;\n                });\n                if (o.length) {\n                    hero.selectedCompare(o[0]);\n                    hero.heroCompare(o[0].hero);\n                }\n            }\n            \n            // load enemy\n            if (data.heroes[i].hasOwnProperty('enemyIndex')) {\n                var o = hero.availableEnemies().filter(function (option) {\n                    return option.hero.index() == data.heroes[i].enemyIndex;\n                });\n                if (o.length) {\n                    hero.selectedEnemy(o[0]);\n                    hero.enemy(o[0].hero);\n                }\n            }\n            \n            // load items\n            for (var j = 0; j < data.heroes[i].items.length; j++) {\n                var item = data.heroes[i].items[j];\n                var new_item = {\n                    item: item.item,\n                    state: ko.observable(item.state),\n                    size: item.size,\n                    enabled: ko.observable(item.enabled)\n                }\n                hero.inventory.items.push(new_item);\n            }\n\n            // load abilities\n            for (var j = 0; j < data.heroes[i].abilities.length; j++) {\n                hero.ability().abilities()[j].level(data.heroes[i].abilities[j].level);\n                hero.ability().abilities()[j].isActive(data.heroes[i].abilities[j].isActive);\n            }\n            hero.skillPointHistory(data.heroes[i].skillPointHistory);\n\n            // load buffs\n            for (var j = 0; j < data.heroes[i].buffs.length; j++) {\n                hero.buffs.selectedBuff(findWhere(hero.buffs.availableBuffs(), {buffName: data.heroes[i].buffs[j].name}));\n                hero.buffs.addBuff(hero, {});\n                var b = findWhere(hero.buffs.buffs(), { name: data.heroes[i].buffs[j].name });\n                b.data.level(data.heroes[i].buffs[j].level);\n                b.data.isActive(data.heroes[i].buffs[j].isActive);\n            }\n\n            // load debuffs\n            for (var j = 0; j < data.heroes[i].debuffs.length; j++) {\n                hero.debuffs.selectedBuff(findWhere(hero.debuffs.availableDebuffs(), {buffName: data.heroes[i].debuffs[j].name}));\n                hero.debuffs.addBuff(hero, {});\n                var b = findWhere(hero.debuffs.buffs(), { name: data.heroes[i].debuffs[j].name });\n                b.data.level(data.heroes[i].debuffs[j].level);\n                b.data.isActive(data.heroes[i].debuffs[j].isActive);\n            }\n\n            // load item buffs\n            if (data.heroes[i].itemBuffs) {\n                for (var j = 0; j < data.heroes[i].itemBuffs.length; j++) {\n                    var item = data.heroes[i].itemBuffs[j];\n                    var new_item = {\n                        item: item.item,\n                        state: ko.observable(item.state),\n                        size: item.size,\n                        enabled: ko.observable(item.enabled)\n                    }\n                    hero.buffs.itemBuffs.items.push(new_item);\n                }\n            }\n\n            // load item debuffs\n            if (data.heroes[i].itemDebuffs) {\n                for (var j = 0; j < data.heroes[i].itemDebuffs.length; j++) {\n                    var item = data.heroes[i].itemDebuffs[j];\n                    var new_item = {\n                        item: item.item,\n                        state: ko.observable(item.state),\n                        size: item.size,\n                        enabled: ko.observable(item.enabled)\n                    }\n                    hero.debuffs.itemBuffs.items.push(new_item);\n                }\n            }\n            \n            // load graph data\n            if (data.heroes[i].graphData) {\n                hero.buildExplorer.loadGraphData(data.heroes[i].graphData);\n            }\n        }\n    }\n    \n    self.sendReport = function () {\n        if ($('#BugReportFormText').val()) {\n            $.post( \"report.php\", { name: $('#BugReportFormName').val(), email: $('#BugReportFormEmail').val(), body: $('#BugReportFormText').val() })\n            .done(function (data) {\n                if (data == 'Success') {\n                    alert('Report successfully sent. Thanks!');\n                    $('#BugReportFormText').val('');\n                }\n                else {\n                    alert('Failed to send report. Try again later or email admin@devilesk.com');\n                }\n            });\n            $('#myModal').modal('hide');\n        }\n        else {\n            alert('Message is required.');\n        }\n    }\n    \n    self.getProperty = function (obj, properties) {\n        var result = obj;\n        for (var i = 0; i < properties.length; i++) {\n            result = result[properties[i]];\n        }\n        return result;\n    };\n    \n    self.getDiffTextWrapper = function (hero, property) {\n        return self.getDiffText(self.getDiffMagnitude(hero, property));\n    }\n    \n    self.getDiffMagnitude = function (hero, property) {\n        var properties = property.split('.');\n        return self.getProperty(hero.damageTotalInfo(), properties).toFixed(2) - self.getProperty(hero.heroCompare().damageTotalInfo(), properties).toFixed(2);\n    }\n    \n    self.getDiffText = function (value) {\n        if (value > 0) {\n            return '+' + parseFloat(value.toFixed(2));\n        }\n        else if (value < 0) {\n            return '&minus;' + parseFloat(value.toFixed(2)*-1).toString();\n        }\n        else {\n            return '';\n        }\n    }\n    self.highlightedTabInternal = ko.observable('');\n    self.highlightedTab = ko.computed(function () {\n        return self.highlightedTabInternal();\n    }).extend({ throttle: 100 });\n    self.highlightTab = function (data) {\n        self.highlightedTabInternal(data);\n    }\n    self.unhighlightTab = function (data) {\n        self.highlightedTabInternal('');\n    }\n}\n\nmodule.exports = HeroCalculatorViewModel;","'use strict';\nvar ko = require('./herocalc_knockout');\nvar extend = require(\"dota-hero-calculator-library/src/herocalc/util/extend\");\nvar findWhere = require(\"dota-hero-calculator-library/src/herocalc/util/findWhere\");\n\nvar DamageInstance = function (label, damageType, value, data, total) {\n    this.label = label || '';\n    this.damageType = damageType || '';\n    this.value = parseFloat(value) || 0;\n    this.data = data || [];\n    this.total = parseFloat(total) || 0;\n}\n\nvar HeroDamageAmpMixin = function (self) {\n    self.damageBrackets = [\n        ['medusa_mana_shield', 'templar_assassin_refraction', 'faceless_void_backtrack', 'nyx_assassin_spiked_carapace'],\n        ['spectre_dispersion', 'wisp_overcharge', 'slardar_sprint','bristleback_bristleback', 'undying_flesh_golem'],\n        ['abaddon_borrowed_time', 'abaddon_aphotic_shield', 'kunkka_ghostship', 'treant_living_armor'],\n        ['chen_penitence', 'medusa_stone_gaze', 'shadow_demon_soul_catcher'],\n        ['dazzle_shallow_grave']\n    ];\n    \n    self.getDamageAfterBracket = function (initialDamage,index) {\n        var bracket = self.damageBrackets[index];\n        var multiplier = 1;\n        for (var i = 0; i < bracket.length; i++) {\n            if (findWhere(self.damageAmplification.buffs, {name: bracket[i].name}) != undefined || findWhere(self.damageReduction.buffs, {name: bracket[i].name}) != undefined) {\n                multiplier += bracket[i].value;\n            }\n        };\n        return initialDamage * multiplier;\n    };\n    \n    self.processDamageAmpReducBracket = function (index, sources, damage) {\n        var multiplier = 1,\n            data = [],\n            damage = parseFloat(damage),\n            total = parseFloat(damage);\n            \n        for (var i = 0; i < self.damageBrackets[index].length; i++) {\n            if (sources[self.damageBrackets[index][i]] != undefined) {\n                multiplier = 1 + parseFloat(sources[self.damageBrackets[index][i]].multiplier);\n                total += (damage * multiplier) - damage;\n                data.push(new DamageInstance(\n                    sources[self.damageBrackets[index][i]].displayname,\n                    sources[self.damageBrackets[index][i]].damageType,\n                    (damage * multiplier) - damage,\n                    [],\n                    total\n                ));\n            }\n        }\n        return data;\n    }\n    \n    self.getDamageAmpReducInstance = function(sources, initialDamage, ability, damageType) {\n        var data = [],\n            damage = parseFloat(initialDamage),\n            prevDamage = damage,\n            label = ability == 'initial' ? 'Initial' : sources[ability].displayname;\n\n        // Bracket 0\n        data = data.concat(self.processDamageAmpReducBracket(0, sources, damage));\n        damage = data[data.length - 1] ? data[data.length - 1].total : damage;\n\n        // Bracket 1\n        data = data.concat(self.processDamageAmpReducBracket(1, sources, damage));\n        damage = data[data.length - 1] ? data[data.length - 1].total : damage;\n        \n        // Bracket 2\n        data = data.concat(self.processDamageAmpReducBracket(2, sources, damage));\n        damage = data[data.length - 1] ? data[data.length - 1].total : damage;\n\n        return new DamageInstance(label, damageType, initialDamage, data, data[data.length - 1] ? data[data.length - 1].total : damage);\n    }\n    \n    self.getDamageAmpReduc = function (initialDamage) {\n        var instances = [],\n            sources = {},\n            sourcesAmp = self.damageReduction.getDamageMultiplierSources(),\n            sourcesReduc = self.damageAmplification.getDamageMultiplierSources();\n        extend(sources, sourcesAmp);\n        extend(sources, sourcesReduc);\n        // Initial damage instance\n        instances.push(self.getDamageAmpReducInstance(sources, initialDamage, 'initial', 'physical'));\n        \n        // Bracket 4 damage instances\n        var b4 = ['shadow_demon_soul_catcher', 'medusa_stone_gaze', 'chen_penitence'];\n        for (var i = 0; i < b4.length; i++) {\n            if (sources[b4[i]] != undefined) {\n                instances.push(self.getDamageAmpReducInstance(sources, initialDamage * sources[b4[i]].multiplier, b4[i], sources[b4[i]].damageType));\n            }\n        }\n    \n        return new DamageInstance('Total', 'physical', initialDamage, instances, instances.reduce(function(memo, i) {return parseFloat(memo) + parseFloat(i.total);}, 0));\n    };\n    \n    self.damageInputValue = ko.observable(0);\n    self.damageInputModified = ko.computed(function () {\n        return self.getDamageAmpReduc(self.damageInputValue());\n    });\n}\n\nmodule.exports = HeroDamageAmpMixin;","\"use strict\";\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar HeroCalc = require(\"dota-hero-calculator-library\");\nvar DamageAmpViewModel = require(\"./DamageAmpViewModel\");\nvar BuildExplorerViewModel = require(\"./BuildExplorerViewModel\");\nvar HeroDamageAmpMixin = require(\"./HeroDamageAmpMixin\");\nvar illusionOptionsArray = require(\"dota-hero-calculator-library/src/herocalc/illusion/illusionOptionsArray\");\nvar illusionData = require(\"dota-hero-calculator-library/src/herocalc/illusion/illusionData\");\nvar IllusionViewModel = require(\"./IllusionViewModel\");\n\nvar HeroOption2 = function (hero) {\n    this.heroName = ko.computed(function () {\n        return hero.selectedHero().heroName;\n    });\n    this.heroDisplayName = ko.computed(function () {\n        return hero.selectedHero().heroDisplayName;\n    });\n    this.hero = hero;\n};\n\nvar HeroViewModel = function (heroData, itemData, unitData, h) {\n    var self = this;\n    self.index = ko.observable(h);\n    self.availableHeroes = ko.observableArray(HeroCalc.HeroOptions);\n    self.availableHeroes.sort(function (left, right) {\n        return left.heroDisplayName == right.heroDisplayName ? 0 : (left.heroDisplayName < right.heroDisplayName ? -1 : 1);\n    });\n    self.selectedHero = ko.observable(self.availableHeroes()[h]);\n    \n    HeroCalc.HeroModel.call(this, heroData, itemData, self.selectedHero().heroName);\n    \n    self.selectedHero.subscribe(function (newValue) {\n        self.heroId(newValue.heroName);\n    });\n    \n    self.illusions = ko.observableArray([]);\n    self.availableIllusions = ko.observableArray(illusionOptionsArray);\n    self.selectedIllusion = ko.observable(self.availableIllusions()[0]);\n    self.illusionAbilityLevel = ko.observable(1);\n    self.illusionAbilityMaxLevel = ko.computed(function () {\n        return illusionData[self.selectedIllusion().illusionName].max_level;\n    });\n    self.addIllusion = function (data, event) {\n        self.illusions.push(ko.observable(new IllusionViewModel(heroData, itemData, 0, self, self.illusionAbilityLevel())));\n    };\n    \n    self.bound = ko.observable(false);\n    self.playerColorCss = ko.computed(function () {\n        return 'player-color-' + self.index();\n    });\n    self.heroOption = new HeroOption2(self);\n    self.otherHeroes = ko.observableArray([]);\n    self.availableCompare = ko.computed(function () {\n        return self.otherHeroes().map(function (o) {\n            return o.heroOption;\n        });\n    });\n    self.selectedCompare = ko.observable();\n    self.selectedCompare.subscribe(function (newValue) {\n        self.heroCompare(newValue.hero);\n    });\n    self.enemies = ko.observableArray([]);\n    self.availableEnemies = ko.computed(function () {\n        return self.enemies().map(function (o) {\n            return o.heroOption;\n        });\n    });\n    self.selectedEnemy = ko.observable();\n    self.selectedEnemy.subscribe(function (newValue) {\n        self.enemy(newValue.hero);\n    });\n    self.setHeroOptionStyling = function(option, item) {\n        ko.applyBindingsToNode(option, {css: item.hero.playerColorCss() }, item);\n    }\n    self.sectionDisplay = ko.observable({\n        'inventory': ko.observable(true),\n        'ability': ko.observable(true),\n        'talent': ko.observable(true),\n        'buff': ko.observable(true),\n        'debuff': ko.observable(true),\n        'damageamp': ko.observable(false),\n        'illusion': ko.observable(false),\n        'skillbuild': ko.observable(false),\n        'skillbuild-skills': ko.observable(true),\n        'skillbuild-items': ko.observable(true)\n    });\n    self.sectionDisplayToggle = function (section) {\n        self.sectionDisplay()[section](!self.sectionDisplay()[section]());\n    }\n    self.showUnitTab = ko.observable(false);\n    self.showDiff = ko.observable(false);\n    self.showCriticalStrikeDetails = ko.observable(false);\n    self.showDamageDetails = ko.observable(false);\n    self.showStatDetails = ko.observable(false);\n    self.showDamageAmpCalcDetails = ko.observable(false);\n    \n    self.damageAmplification = new DamageAmpViewModel(heroData, itemData, unitData);\n    self.damageReduction = new DamageAmpViewModel(heroData, itemData, unitData);\n    self.buildExplorer = new BuildExplorerViewModel(self);\n    HeroDamageAmpMixin(self);\n}\nHeroViewModel.prototype = Object.create(HeroCalc.HeroModel.prototype);\nHeroViewModel.prototype.constructor = HeroViewModel;\n\nmodule.exports = HeroViewModel;","'use strict';\nvar ko = require('./herocalc_knockout');\n    \nvar HeroCalc = require(\"dota-hero-calculator-library\");\nvar illusionData = require(\"dota-hero-calculator-library/src/herocalc/illusion/illusionData\");\nvar heroData = require(\"dota-hero-calculator-library/src/herocalc/data/main\").heroData;\nvar itemData = require(\"dota-hero-calculator-library/src/herocalc/data/main\").itemData;\nvar findWhere = require(\"dota-hero-calculator-library/src/herocalc/util/findWhere\");\n\nvar IllusionViewModel = function (heroData, itemData, h, p, abilityLevel) {\n    var self = this;\n    self.parent = p;\n    self.illusionType = ko.observable(self.parent.selectedIllusion().illusionName);\n    if (!illusionData[self.illusionType()].use_selected_hero) {\n        HeroCalc.IllusionModel.call(this, heroData, itemData, self.parent.selectedIllusion().baseHero, p, abilityLevel);\n        self.selectedHero = ko.observable(findWhere(self.parent.availableHeroes(), {heroName: self.parent.selectedIllusion().baseHero}));\n    }\n    else {\n        HeroCalc.IllusionModel.call(this, heroData, itemData, self.parent.selectedHero().heroName, p, abilityLevel);\n        self.selectedHero = ko.observable(self.parent.selectedHero());\n    }\n    \n    self.inventory = self.parent.inventory;\n    self.illusionDisplayName = ko.observable(self.parent.selectedIllusion().illusionDisplayName);\n    self.illusionAbilityMaxLevel = ko.observable(illusionData[self.parent.selectedIllusion().illusionName].max_level);\n    /*if (!illusionData[self.illusionType()].use_selected_hero) {\n        self.selectedHero(findWhere(self.parent.availableHeroes(), {heroName: self.parent.selectedIllusion().baseHero}));\n    }\n    else {\n        self.selectedHero(self.parent.selectedHero());\n    }*/\n    self.selectedHeroLevel(self.parent.selectedHeroLevel());\n    /*self.hero = ko.computed(function() {\n        return ko.wrap.fromJS(heroData['npc_dota_hero_' + self.selectedHero().heroName]);\n    });*/\n    \n    self.ability().getAttributeBonusLevel = self.parent.ability().getAttributeBonusLevel;\n    \n    self.sectionDisplay = ko.observable({\n        'inventory': ko.observable(true),\n        'ability': ko.observable(true),\n        'buff': ko.observable(true),\n        'debuff': ko.observable(true),\n        'damageamp': ko.observable(false),\n        'illusion': ko.observable(false),\n        'skillbuild': ko.observable(false),\n        'skillbuild-skills': ko.observable(true),\n        'skillbuild-items': ko.observable(true)\n    });\n    self.sectionDisplayToggle = function (section) {\n        self.sectionDisplay()[section](!self.sectionDisplay()[section]());\n    }\n    self.showUnitTab = ko.observable(false);\n    self.showDiff = ko.observable(false);\n    self.showCriticalStrikeDetails = ko.observable(false);\n    self.showDamageDetails = ko.observable(false);\n    self.showStatDetails = ko.observable(false);\n    return self;\n}\nIllusionViewModel.prototype = Object.create(HeroCalc.IllusionModel.prototype);\nIllusionViewModel.prototype.constructor = IllusionViewModel;\n\nmodule.exports = IllusionViewModel;","\"use strict\";\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar HeroCalc = require(\"dota-hero-calculator-library\");\nvar UnitOption = require(\"dota-hero-calculator-library/src/herocalc/hero/UnitOption\");\n\nvar UnitViewModel = function (heroData, itemData, unitData, h, p) {\n    var self = this;\n    self.index = ko.observable(h);\n    self.selectedUnitLevel = ko.observable(1);\n    self.availableUnits = ko.observableArray([\n        new UnitOption('npc_dota_lone_druid_bear', 'Lone Druid Spirit Bear',4,'/media/images/units/spirit_bear.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_brewmaster_earth_','Brewmaster Earth Warrior',3,'/media/images/units/npc_dota_brewmaster_earth.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_brewmaster_fire_','Brewmaster Fire Warrior',3,'/media/images/units/npc_dota_brewmaster_fire.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_brewmaster_storm_','Brewmaster Storm Warrior',3,'/media/images/units/npc_dota_brewmaster_storm.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_necronomicon_archer_','Necronomicon Archer',3,'/media/images/units/npc_dota_necronomicon_archer.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_necronomicon_warrior_','Necronomicon Warrior',3,'/media/images/units/npc_dota_necronomicon_warrior.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_lycan_wolf','Lycan Wolf',4,'/media/images/units/npc_dota_lycan_wolf.png', self.selectedUnitLevel),\n        new UnitOption('npc_dota_visage_familiar','Visage Familiar',3,'/media/images/units/npc_dota_visage_familiar.png', self.selectedUnitLevel)\n    ]);\n    self.selectedUnit = ko.observable(self.availableUnits()[0]);\n    HeroCalc.UnitModel.call(this, heroData, itemData, unitData, self.selectedUnit().heroName());\n    \n    self.selectedUnitLevel.subscribe(function(newValue) {\n        self.unitLevel(newValue);\n        self.unitId(self.selectedUnit().heroName());\n    });\n    self.selectedUnit.subscribe(function(newValue) {\n        if (newValue.heroName().indexOf('npc_dota_lone_druid_bear') != -1) {\n            self.inventory.hasInventory(true);\n            self.inventory.items.removeAll();\n            self.inventory.activeItems.removeAll();\n        }\n        else {\n            self.inventory.hasInventory(false);\n            self.inventory.items.removeAll();\n            self.inventory.activeItems.removeAll();\n        }\n        self.unitId(newValue.heroName());\n    });\n    \n    \n    self.bound = ko.observable(false);\n    self.playerColorCss = ko.computed(function () {\n        return 'player-color-' + self.index();\n    });\n    self.setHeroOptionStyling = function(option, item) {\n        ko.applyBindingsToNode(option, {css: item.hero.playerColorCss() }, item);\n    }\n    self.sectionDisplay = ko.observable({\n        'inventory': ko.observable(true),\n        'ability': ko.observable(true),\n        'buff': ko.observable(true),\n        'debuff': ko.observable(true),\n        'damageamp': ko.observable(false),\n        'illusion': ko.observable(false),\n        'skillbuild': ko.observable(false),\n        'skillbuild-skills': ko.observable(true),\n        'skillbuild-items': ko.observable(true)\n    });\n    self.sectionDisplayToggle = function (section) {\n        self.sectionDisplay()[section](!self.sectionDisplay()[section]());\n    }\n    self.showUnitTab = ko.observable(false);\n    self.showDiff = ko.observable(false);\n    self.showCriticalStrikeDetails = ko.observable(false);\n    self.showDamageDetails = ko.observable(false);\n    self.showStatDetails = ko.observable(false);\n\n}\nUnitViewModel.prototype = Object.create(HeroCalc.UnitModel.prototype);\nUnitViewModel.prototype.constructor = UnitViewModel;\n\nmodule.exports = UnitViewModel;","\"use strict\";\n\nvar getParameterByName = function (name) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(location.search);\n    return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nmodule.exports = getParameterByName;","'use strict';\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar $ = (typeof window !== \"undefined\" ? window['$'] : typeof global !== \"undefined\" ? global['$'] : null);\nvar Chart = require('chart.js');\nrequire('../lib/Chart.scatter');\n\nko.bindingHandlers.stopBinding = {\n    init: function() {\n        return { controlsDescendantBindings: true };\n    }\n};\n\nko.virtualElements.allowedBindings.stopBinding = true;\n\nko.bindingHandlers.lazyBinding = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        ko.utils.domData.set(element, 'isBound', false)\n        \n        // Also tell KO *not* to bind the descendants itself, otherwise they will be bound twice\n        return { controlsDescendantBindings: true };\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var val = ko.unwrap(valueAccessor()),\n            isBound = ko.utils.domData.get(element, 'isBound');\n        if (val && !isBound) {\n            ko.utils.domData.set(element, 'isBound', true);\n            ko.applyBindingsToDescendants(bindingContext, element);\n        }\n    }\n};\n\nko.virtualElements.allowedBindings.lazyBinding = true;\n\nko.bindingHandlers.itemBuildTable = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var buildExplorer = ko.unwrap(valueAccessor()),\n            $el = $(element);\n\n        var pressedKeys = {};\n        ko.utils.domData.set(element, 'pressedKeys', pressedKeys);\n        \n        var keyDownHandler = function(e) {\n            var pressedKeys = ko.utils.domData.get(element, 'pressedKeys');\n            pressedKeys[e.which] = true;\n            ko.utils.domData.set(element, 'pressedKeys', pressedKeys);\n        }\n        ko.utils.domData.set(element, 'keyDownHandler', keyDownHandler);\n        \n        var keyUpHandler = function(e) {\n            var pressedKeys = ko.utils.domData.get(element, 'pressedKeys');\n            if ((pressedKeys[17] && pressedKeys[67]) || (pressedKeys[17] && pressedKeys[86])) { // ctrl + c\n                var $hoveredRows = $(element).find('.hover-cursor:hover');\n                if ($hoveredRows.length == 1) {\n                    if (pressedKeys[67]) {\n                        buildExplorer.copyInventoryToClipBoard($(\"tr\", $(element)).index($hoveredRows[0]));\n                    }\n                    else {\n                        buildExplorer.pasteInventoryFromClipBoard($(\"tr\", $(element)).index($hoveredRows[0]));\n                    }\n                    $hoveredRows.fadeOut(50).fadeIn(50);\n                }\n            }\n            delete pressedKeys[e.which];\n            ko.utils.domData.set(element, 'pressedKeys', pressedKeys);\n        }\n        ko.utils.domData.set(element, 'keyUpHandler', keyUpHandler);\n        \n        $(document).bind( \"keydown\", keyDownHandler );\n        $(document).bind( \"keyup\", keyUpHandler );\n\n        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n            var keyDownHandler = ko.utils.domData.get(element, 'keyDownHandler');\n            var keyUpHandler = ko.utils.domData.get(element, 'keyUpHandler');\n            $(document).unbind( \"keydown\", keyDownHandler );\n            $(document).unbind( \"keyup\", keyUpHandler );\n        });\n    }\n};\n\nko.bindingHandlers.preventBubble = {\n    init: function(element, valueAccessor) {\n        var eventName = ko.utils.unwrapObservable(valueAccessor());\n        ko.utils.registerEventHandler(element, eventName, function(event) {\n           event.cancelBubble = true;\n           if (event.stopPropagation) {\n                event.stopPropagation();\n           }                \n        });\n    }        \n};\n\nko.bindingHandlers.toggle = {\n    init: function (element, valueAccessor) {\n        var value = valueAccessor();\n        ko.applyBindingsToNode(element, {\n            click: function () {\n                value(!value());\n            }\n        });\n    }\n};\n\nko.bindingHandlers.shopDockStyle = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var value = ko.utils.unwrapObservable(valueAccessor());\n        if (bindingContext.$data.shopDock() && !bindingContext.$data.shopPopout()) {\n            ko.applyBindingsToNode(element, { style: { height: (bindingContext.$data.windowHeight() - 52) + 'px', position: 'fixed', right: 0, top: '52px', 'overflow-y': 'auto' } });\n        }\n        else {\n            ko.applyBindingsToNode(element, { style: { height: 'auto', position: 'relative', right: 'initial', top: 'initial', 'overflow-y': 'initial' } });\n        }\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var value = ko.utils.unwrapObservable(valueAccessor());\n        if (bindingContext.$data.shopDock() && !bindingContext.$data.shopPopout()) {\n            ko.applyBindingsToNode(element, { style: { height: (bindingContext.$data.windowHeight() - 52) + 'px', position: 'fixed', right: 0, top: '52px', 'overflow-y': 'auto' } });\n        }\n        else {\n            ko.applyBindingsToNode(element, { style: { height: 'auto', position: 'relative', right: 'initial', top: 'initial', 'overflow-y': 'initial' } });\n        }\n    }\n};\n\nko.bindingHandlers.logger = {\n    update: function(element, valueAccessor, allBindings) {\n        //store a counter with this element\n        var count = ko.utils.domData.get(element, \"_ko_logger\") || 0,\n            data = ko.toJS(valueAccessor() || allBindings());\n\n        ko.utils.domData.set(element, \"_ko_logger\", ++count);\n\n        if (window.console && console.log) {\n            console.log(count, element, data);\n        }\n    }\n};\n\nko.bindingHandlers.tooltip = {\n    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $element, options, tooltip;\n        options = ko.utils.unwrapObservable(valueAccessor());\n        $element = $(element);\n\n        // If the title is an observable, make it auto-updating.\n        if (ko.isObservable(options.title)) {\n            var isToolTipVisible = false;\n\n            $element.on('show.bs.tooltip', function () {\n                isToolTipVisible = true;\n            });\n            $element.on('hide.bs.tooltip', function () {\n                isToolTipVisible = false;\n            });\n\n            // \"true\" is the bootstrap default.\n            var origAnimation = options.animation || true;\n            options.title.subscribe(function () {\n                if (isToolTipVisible) {\n                    $element.data('bs.tooltip').options.animation = false; // temporarily disable animation to avoid flickering of the tooltip\n                    $element.tooltip('fixTitle') // call this method to update the title\n                        .tooltip('show');\n                    $element.data('bs.tooltip').options.animation = origAnimation;\n                }\n            });\n        }\n\n        tooltip = $element.data('bs.tooltip');\n        if (tooltip) {\n            $.extend(tooltip.options, options);\n        } else {\n            $element.tooltip(options);\n        }\n    }\n};\n\nko.bindingHandlers.popover = {\n    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $element = $(element);\n        var popoverBindingValues = ko.utils.unwrapObservable(valueAccessor());\n        var template = popoverBindingValues.template || false;\n        var options = popoverBindingValues.options || {title: 'popover'};\n        var data = popoverBindingValues.data || false;\n        if (template !== false) {\n            if (data) {\n                options.content = \"<!-- ko template: { name: template, if: data, data: data } --><!-- /ko -->\";\n            }\n            else {\n                options.content = $('#' + template).html();\n            }\n            options.html = true;\n        }\n        $element.on('shown.bs.popover', function(event) {\n\n            var popoverData = $(event.target).data();\n            var popoverEl = popoverData['bs.popover'].$tip;\n            var options = popoverData['bs.popover'].options || {};\n            var button = $(event.target);\n            var buttonPosition = button.position();\n            var buttonDimensions = {\n                x: button.outerWidth(),\n                y: button.outerHeight()\n            };\n\n            if (data) {\n                ko.applyBindingsToNode(popoverEl[0], { template: { name: template, data: data } }, bindingContext);\n                //ko.applyBindings({template: template, data: data}, popoverEl[0]);\n                //ko.renderTemplate(template, data, {}, popoverEl[0], 'replaceChildren');\n            }\n            else {\n                //ko.renderTemplate(template, data, {}, popoverEl[0], 'replaceChildren');\n                //ko.applyBindings(viewModel, popoverEl[0]);\n            }\n\n            var popoverDimensions = {\n                x: popoverEl.outerWidth(),\n                y: popoverEl.outerHeight()\n            };\n\n            popoverEl.find('button[data-dismiss=\"popover\"]').click(function() {\n                button.popover('hide');\n            });\n\n            switch (options.placement) {\n                case 'right':\n                    popoverEl.css({\n                        left: buttonDimensions.x + buttonPosition.left,\n                        top: (buttonDimensions.y / 2 + buttonPosition.top) - popoverDimensions.y / 2\n                    });\n                    break;\n                case 'left':\n                    popoverEl.css({\n                        left: buttonPosition.left - popoverDimensions.x,\n                        top: (buttonDimensions.y / 2 + buttonPosition.top) - popoverDimensions.y / 2\n                    });\n                    break;\n                case 'top':\n                    popoverEl.css({\n                        left: buttonPosition.left + (buttonDimensions.x / 2 - popoverDimensions.x / 2),\n                        top: buttonPosition.top - popoverDimensions.y\n                    });\n                    break;\n                case 'bottom':\n                    popoverEl.css({\n                        left: buttonPosition.left + (buttonDimensions.x / 2 - popoverDimensions.x / 2),\n                        top: buttonPosition.top + buttonDimensions.y\n                    });\n                    break;\n            }\n        });\n\n        $element.popover(options);\n\n        return { controlsDescendantBindings: true };\n\n    }\n};\n\nko.bindingHandlers.chart = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var newCanvas = $('<canvas/>'),\n      data = ko.utils.unwrapObservable(valueAccessor()),\n      ctx = newCanvas[0].getContext(\"2d\"),\n      chartType = allBindingsAccessor().chartType,\n      options = allBindingsAccessor().chartOptions || {},\n      chartContext = allBindingsAccessor().chartContext;\n            \n        $(element).append(newCanvas);\n        var myChart = new Chart(ctx)[chartType](data, options);\n        ko.utils.domData.set(element, 'myChart', myChart);\n        \n  //handle disposal (if KO removes by the template binding)\n  ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n    var myChart = ko.utils.domData.get(element, 'myChart');\n    myChart.clear();\n    myChart.destroy();\n  });\n        \n  if (chartContext) {\n    chartContext(ctx);\n  }\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var newCanvas = $('<canvas/>').width(730).height(365),\n      data = ko.utils.unwrapObservable(valueAccessor()),\n      ctx = newCanvas[0].getContext(\"2d\"),\n      chartType = allBindingsAccessor().chartType,\n      options = allBindingsAccessor().chartOptions || {},\n      chartContext = allBindingsAccessor().chartContext,\n      myChart = ko.utils.domData.get(element, 'myChart');\n        \n  if (myChart) {\n    myChart.clear();\n    myChart.destroy();\n  }\n        bindingContext.$root.displayShop();\n        bindingContext.$root.sideView();\n        bindingContext.$root.shopDock();\n        $(element).empty();\n        $(element).append(newCanvas);\n  if (data.datasets.length > 0) {\n            myChart = new Chart(ctx)[chartType](data, options);\n            ko.utils.domData.set(element, 'myChart', myChart);\n  }\n  \n  if (chartContext) {\n    chartContext(ctx);\n  }\n    }\n};\n\nko.bindingHandlers.spinner = {\n    init: function(element, valueAccessor, allBindingsAccessor) {\n        //initialize datepicker with some optional options\n        var options = allBindingsAccessor().spinnerOptions || {};\n        options.icons = options.icons || { down: \"glyphicon glyphicon-triangle-bottom\", up: \"glyphicon glyphicon-triangle-top\" };\n        $(element).spinner(options);\n\n        //handle the field changing\n        ko.utils.registerEventHandler(element, \"spinchange\", function () {\n            var observable = valueAccessor();\n            observable($(element).spinner(\"value\"));\n        });\n\n        //handle disposal (if KO removes by the template binding)\n        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n            $(element).spinner(\"destroy\");\n        });\n\n    },\n    update: function(element, valueAccessor) {\n        var value = ko.utils.unwrapObservable(valueAccessor()),\n            current = $(element).spinner(\"value\");\n\n        if (value !== current) {\n            $(element).spinner(\"value\", value);\n        }\n    }\n};\n\nko.bindingHandlers.secondTab = {\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $root = bindingContext.$root,\n            value = ko.utils.unwrapObservable(valueAccessor());\n        ko.applyBindingsToNode(element, { css: {'second-tab': $root.isSecondTab(value) && $root.sideView()} });\n    }\n};\n\nko.bindingHandlers.hoverTab = {\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $root = bindingContext.$root,\n            value = ko.utils.unwrapObservable(valueAccessor());\n            \n        ko.utils.registerEventHandler(element, \"mouseover\", function() {\n            $root.highlightTab(value);\n        });  \n\n        ko.utils.registerEventHandler(element, \"mouseout\", function() {\n            $root.unhighlightTab(value);\n        });      \n    }\n};\n\nko.bindingHandlers.hoverPaneStyle = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $root = bindingContext.$root,\n            value = ko.utils.unwrapObservable(valueAccessor());\n        ko.applyBindingsToNode(element, { style: { opacity: !($root.sideView()) || $root.highlightedTab() == value || $root.highlightedTab() == '' ? 1 : .5 } });\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n        var $root = bindingContext.$root,\n            value = ko.utils.unwrapObservable(valueAccessor());\n        ko.applyBindingsToNode(element, { style: { opacity: !($root.sideView()) || $root.highlightedTab() == value || $root.highlightedTab() == '' ? 1 : .5 } });\n    }\n};\n\nko.bindingHandlers.diffStyle = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n        var value = ko.utils.unwrapObservable(valueAccessor());\n        ko.applyBindingsToNode(element, { css: {'diffPos': value > 0, 'diffNeg': value < 0} });\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n        var value = ko.utils.unwrapObservable(valueAccessor());\n        ko.applyBindingsToNode(element, { css: {'diffPos': value > 0, 'diffNeg': value < 0} });\n    }\n};\n\nko.bindingHandlers.diffCss = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n        var value = ko.utils.unwrapObservable(valueAccessor()),\n            stat = allBindingsAccessor().diffCssStat;\n        if (stat == 'attackTime' || stat == 'bat') {\n            value = -value;\n        }\n        ko.applyBindingsToNode(element, { css: {'diffPos': value > 0, 'diffNeg': value < 0} });\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n        var value = ko.utils.unwrapObservable(valueAccessor()),\n            stat = allBindingsAccessor().diffCssStat;\n        if (stat == 'attackTime' || stat == 'bat') {\n            value = -value;\n        }\n        ko.applyBindingsToNode(element, { css: {'diffPos': value > 0, 'diffNeg': value < 0} });\n    }\n};\n\nko.bindingHandlers.jqAuto = {\n    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n        var options = valueAccessor() || {},\n            allBindings = allBindingsAccessor(),\n            unwrap = ko.utils.unwrapObservable,\n            modelValue = allBindings.jqAutoValue,\n            source = allBindings.jqAutoSource,\n            valueProp = allBindings.jqAutoSourceValue,\n            inputValueProp = allBindings.jqAutoSourceInputValue || valueProp,\n            labelProp = allBindings.jqAutoSourceLabel || valueProp;\n\n        //function that is shared by both select and change event handlers\n        function writeValueToModel(valueToWrite) {\n            if (ko.isWriteableObservable(modelValue)) {\n               modelValue(valueToWrite );  \n            } else {  //write to non-observable\n               if (allBindings['_ko_property_writers'] && allBindings['_ko_property_writers']['jqAutoValue'])\n                        allBindings['_ko_property_writers']['jqAutoValue'](valueToWrite );    \n            }\n        }\n        \n        //on a selection write the proper value to the model\n        options.select = function(event, ui) {\n            writeValueToModel(ui.item ? ui.item.actualValue : null);\n        };\n            \n        //on a change, make sure that it is a valid value or clear out the model value\n        options.change = function(event, ui) {\n            var currentValue = $(element).val();\n            var matchingItem =  ko.utils.arrayFirst(unwrap(source), function(item) {\n               return unwrap(item[inputValueProp]) === currentValue;  \n            });\n            \n            if (!matchingItem) {\n               writeValueToModel(null);\n            }    \n        }\n        \n        \n        //handle the choices being updated in a DO, to decouple value updates from source (options) updates\n        var mappedSource = ko.dependentObservable(function() {\n            var mapped = ko.utils.arrayMap(unwrap(source), function(item) {\n                var result = {};\n                result.label = labelProp ? unwrap(item[labelProp]) : unwrap(item).toString();  //show in pop-up choices\n                result.value = inputValueProp ? unwrap(item[inputValueProp]) : unwrap(item).toString();  //show in input box\n                result.actualValue = valueProp ? unwrap(item[valueProp]) : item;  //store in model\n                return result;\n            });\n            return mapped;                \n        });\n        \n        //whenever the items that make up the source are updated, make sure that autocomplete knows it\n        mappedSource.subscribe(function(newValue) {\n           $(element).autocomplete(\"option\", \"source\", newValue); \n        });\n        \n        options.source = mappedSource();\n        \n        options.minLength = 1;\n        //initialize autocomplete\n        $(element).autocomplete(options);\n    },\n    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {\n       //update value based on a model change\n       var allBindings = allBindingsAccessor(),\n           unwrap = ko.utils.unwrapObservable,\n           modelValue = unwrap(allBindings.jqAutoValue) || '', \n           valueProp = allBindings.jqAutoSourceValue,\n           inputValueProp = allBindings.jqAutoSourceInputValue || valueProp;\n        \n       //if we are writing a different property to the input than we are writing to the model, then locate the object\n       if (valueProp && inputValueProp !== valueProp) {\n           var source = unwrap(allBindings.jqAutoSource) || [];\n           var modelValue = ko.utils.arrayFirst(source, function(item) {\n                 return unwrap(item[valueProp]) === modelValue;\n           }) || {};  //probably don't need the || {}, but just protect against a bad value          \n       } \n\n       //update the element with the value that should be shown in the input\n       $(element).val(modelValue && inputValueProp !== valueProp ? unwrap(modelValue[inputValueProp]) : modelValue.toString());    \n    }\n};\n\nko.bindingHandlers.jqAutoCombo = {\n    init: function(element, valueAccessor) {\n       var autoEl = $(\"#\" + valueAccessor());\n       \n        $(element).click(function() {\n           // close if already visible\n            if (autoEl.autocomplete(\"widget\").is(\":visible\")) {\n                autoEl.autocomplete( \"close\" );\n                return;\n            }\n\n           //autoEl.blur();\n            autoEl.autocomplete(\"search\", \" \");\n            autoEl.focus(); \n            \n        });\n        \n    }  \n}\n\nmodule.exports = ko;","'use strict';\nvar $ = (typeof window !== \"undefined\" ? window['$'] : typeof global !== \"undefined\" ? global['$'] : null);\n\nvar itemtooltipdata = {};\nvar ability_vars = {\n    '$health': 'Health',\n    '$mana': 'Mana',\n    '$armor': 'Armor',\n    '$damage': 'Damage',\n    '$str': 'Strength',\n    '$int': 'Intelligence',\n    '$agi': 'Agility',\n    '$all': 'All Attributes',\n    '$attack': 'Attack Speed',\n    '$hp_regen': 'HP Regeneration',\n    '$mana_regen': 'Mana Regeneration',\n    '$move_speed': 'Movement Speed',\n    '$evasion': 'Evasion',\n    '$spell_resist': 'Spell Resistance',\n    '$selected_attribute': 'Selected Attribute',\n    '$selected_attrib': 'Selected Attribute',\n    '$cast_range': 'Cast Range',\n    '$attack_range': 'Attack Range'\n}\n\nvar getTooltipItemDescription = function (item) {\n    var d = item.description;\n    for (var i = 0; i < item.attributes.length; i++) {\n        if (item.attributes[i].name != null) {\n            var attributeName = item.attributes[i].name;\n            var attributeValue = item.attributes[i].value[0];\n            for (var j = 1; j < item.attributes[i].value.length; j++) {\n                attributeValue += ' / ' + item.attributes[i].value[j];\n            }\n            var regexp = new RegExp('%' + attributeName + '%', 'gi');\n            d = d.replace(regexp, attributeValue );\n        }\n    }\n    var regexp = new RegExp('%%', 'gi');\n    d = d.replace(regexp,'%');\n    regexp = new RegExp('\\n', 'gi');\n    d = d.replace(/\\\\n/g, '<br>');\n    return d;\n}\n\nvar getTooltipItemAttributes = function (item) {\n    var a = '';\n    for (var i = 0; i < item.attributes.length; i++) {\n        if (item.attributes[i].tooltip != null) {\n            var attributeTooltip = item.attributes[i].tooltip;\n            var attributeValue = item.attributes[i].value[0];\n            for (var j = 1; j < item.attributes[i].value.length; j++) {\n                attributeValue += ' / ' + item.attributes[i].value[j];\n            }\n            var p = attributeTooltip.indexOf('%');\n            if (p == 0) {\n                attributeValue = attributeValue + '%';\n                attributeTooltip = attributeTooltip.slice(1);\n            }\n            var d = attributeTooltip.indexOf('$');\n            if (d != -1) {\n                a = a + attributeTooltip.slice(0, d) + ' ' + attributeValue + ' ' + ability_vars[attributeTooltip.slice(d)] + '<br>';\n            }\n            else {\n                a = a + attributeTooltip + ' ' + attributeValue + '<br>';\n            }\n        }\n    }\n    return a.trim('<br>');\n}\n\nvar getTooltipItemCooldown = function (item) {\n    var c = '';\n    for (var i = 0; i < item.cooldown.length; i++) {\n        c = c + ' ' + item.cooldown[i];\n    }\n    return c;\n}\n\nvar getTooltipItemManaCost = function (item) {\n    var c = '';\n    for (var i = 0; i < item.manacost.length; i++) {\n        if (item.manacost[i] > 0) {\n            c = c + ' ' + item.manacost[i];\n        }\n    }\n    return c;\n}\n\nvar getItemTooltipData = function(itemData, el) {\n    if (itemData['item_' + el] == undefined) {\n        return undefined;\n    }\n    if (itemtooltipdata[el] == undefined) {\n        var item = itemData['item_' + el];\n        var data = $('<div>');\n        data.append($('<span>').html(item.displayname).addClass('item_field item_name'));\n        data.append($('<span>').html(item.itemcost).addClass('item_field item_cost'));\n        data.append($('<hr>'));\n        if (item.description != null) {\n            data.append($('<div>').html(getTooltipItemDescription(item)).addClass('item_field item_description'));\n        }\n        var attributedata = getTooltipItemAttributes(item);\n        if (attributedata != '') {\n            data.append($('<div>').html(attributedata).addClass('item_field item_attributes'));\n        }\n        var cd = getTooltipItemCooldown(item);\n        var mana = getTooltipItemManaCost(item);\n        if (cd != '' || mana != '') {\n            var cdmanacost = $('<div>').addClass('item_cdmana');\n            if (cd != '') {\n                cdmanacost.append($('<span>').html(cd).addClass('item_field item_cooldown'));\n            }\n            if (mana != '') {\n                cdmanacost.append($('<span>').html(mana).addClass('item_field item_manacost'));\n            }\n            data.append(cdmanacost);\n        }\n        if (item.lore != null) {\n            data.append($('<div>').html(item.lore).addClass('item_field item_lore'));\n        }\n        itemtooltipdata[el] = data.html();\n        return data.html();\n    }\n    else {\n        return itemtooltipdata[el];\n    }\n}\n\nmodule.exports = getItemTooltipData;","'use strict';\nvar $ = (typeof window !== \"undefined\" ? window['$'] : typeof global !== \"undefined\" ? global['$'] : null);\n//require('jquery-ui');\nrequire('jquery-ui/ui/version');\nrequire('jquery-ui/ui/widget');\nrequire('jquery-ui/ui/unique-id');\nrequire('jquery-ui/ui/safe-active-element');\nrequire('jquery-ui/ui/keycode');\nrequire('jquery-ui/ui/position');\nrequire('jquery-ui/ui/focusable');\nrequire('jquery-ui/ui/tabbable');\nrequire('jquery-ui/ui/plugin');\nrequire('jquery-ui/ui/ie');\nrequire('jquery-ui/ui/data');\nrequire('jquery-ui/ui/scroll-parent');\nrequire('jquery-ui/ui/disable-selection');\nrequire('jquery-ui/ui/safe-blur');\nrequire('jquery-ui/ui/widgets/button');\nrequire('jquery-ui/ui/widgets/spinner');\nrequire('jquery-ui/ui/widgets/menu');\nrequire('jquery-ui/ui/widgets/autocomplete');\nrequire('jquery-ui/ui/widgets/mouse');\nrequire('jquery-ui/ui/widgets/draggable');\nrequire('jquery-ui/ui/widgets/resizable');\nrequire('jquery-ui/ui/widgets/dialog');\n\nvar proto = $.ui.autocomplete.prototype,\n    initSource = proto._initSource;\n\nfunction filter( array, term ) {\n    var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), \"i\" );\n    return $.grep( array, function(value) {\n        return matcher.test( $( \"<div>\" ).html( value.label || value.value || value ).text() );\n    });\n}\n\n$.extend( proto, {\n    _initSource: function() {\n        if ( this.options.html && $.isArray(this.options.source) ) {\n            this.source = function( request, response ) {\n                response( filter( this.options.source, request.term ) );\n            };\n        } else {\n            initSource.call( this );\n        }\n    },\n\n    _renderItem: function( ul, item) {\n        return $( \"<li></li>\" )\n            .data( \"item.autocomplete\", item )\n            .append( $( \"<a></a>\" )[ this.options.html ? \"html\" : \"text\" ]( item.label ) )\n            .appendTo( ul );\n    }\n});","if (!Array.prototype.find) {\n  Array.prototype.find = function(predicate) {\n    'use strict';\n    if (this == null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\nif (!String.prototype.startsWith) {\n    String.prototype.startsWith = function(searchString, position){\n        position = position || 0;\n        return this.substr(position, searchString.length) === searchString;\n    };\n}","var abilityDamageTypes = {\n    'DAMAGE_TYPE_MAGICAL': 'Magical',\n    'DAMAGE_TYPE_PURE': 'Pure',\n    'DAMAGE_TYPE_PHYSICAL': 'Physical',\n    'DAMAGE_TYPE_COMPOSITE': 'Composite',\n    'DAMAGE_TYPE_HP_REMOVAL': 'HP Removal'\n}\n\nvar abilityTooltipData = ko.observable();\n\nvar getTooltipAbilityDescription = function (item) {\n    var d = abilityTooltipData() ? abilityTooltipData()[item.name].description : '';\n    for (var i = 0; i < item.attributes.length; i++) {\n        if (item.attributes[i].name != null) {\n            var attributeName = item.attributes[i].name;\n            var attributeValue = item.attributes[i].value[0];\n            for (var j = 1; j < item.attributes[i].value.length; j++) {\n                attributeValue += ' / ' + item.attributes[i].value[j];\n            }\n            regexp = new RegExp('%' + attributeName + '%', 'gi');\n            d = d.replace(regexp, attributeValue);\n        }\n    }\n    var regexp = new RegExp('%%', 'gi');\n    d = d.replace(regexp, '%');\n    regexp = new RegExp('\\n', 'gi');\n    d = d.replace(/\\\\n/g, '<br>');\n    return d;\n}\n\nfunction AttributeTooltip(tooltip, values, sep, suffix) {\n    this.tooltip = tooltip;\n    this.values = values;\n    this.sep = sep || ' / ';\n    this.suffix = suffix || \"\";\n}\nAttributeTooltip.prototype.toString = function () {\n    var self = this;\n    return this.tooltip + ' ' + this.values.map(function (v) { return v + self.suffix; }).join(this.sep);\n}\n\nvar getTooltipAbilityAttributes = function (item) {\n    var a = [];\n    if (item.damage.length > 0 && item.damage.reduce(function(memo, num){ return memo + num; }, 0) > 0) {\n        a.push(new AttributeTooltip('DAMAGE:', item.damage));\n    }\n    for (var i = 0; i < item.attributes.length; i++) {\n        if (item.attributes[i].tooltip != null) {\n            var attributeTooltip = item.attributes[i].tooltip;\n            attributeTooltip = attributeTooltip.replace(/\\\\n/g, '');\n            var suffix = '';\n            if (attributeTooltip.indexOf('%') == 0) {\n                attributeTooltip = attributeTooltip.slice(1);\n                suffix = '%';\n            }\n            a.push(new AttributeTooltip(attributeTooltip, item.attributes[i].value, ' / ', suffix));\n        }\n    }\n    return a;\n}\n\nvar getTooltipAbilityManaCost = function (hero, item) {\n    var c = '';\n    if (item.manacost.reduce(function(memo, num){ return memo + num; }, 0) == 0) {\n        return c;\n    }\n    if (item.manacost.every(function(num) { return num == item.manacost[0]; })) {\n        return item.manacost[0].toString();\n    }\n    for (var i = 0; i < 4; i++) {\n        if (item.manacost[i] != null) {\n            c = c + ' ' + item.manacost[i];\n        }\n    }\n    return c;\n}\n\nvar getTooltipAbilityCooldown = function (hero, item) {\n    var c = '';\n    if (item.cooldown.reduce(function(memo, num){ return memo + num; }, 0) == 0) {\n        return c;\n    }\n    return item.cooldown.map(function (v) {\n        return parseFloat((\n            v * hero.cooldownReductionProduct()\n            - hero.cooldownReductionFlat()\n        ).toFixed(2));\n    }).join(' ');\n    return c;\n}\n\nfunction ViewModel(params) {\n    var self = this;\n    self.hero = params.hero;\n    self.ability = params.ability;\n    self.description = ko.computed(function () {\n        return getTooltipAbilityDescription(self.ability);\n    });\n    self.damageType = abilityDamageTypes[self.ability.abilityunitdamagetype];\n    self.displayname = self.ability.displayname;\n    self.lore = ko.computed(function () {\n        if (abilityTooltipData()) {\n            return abilityTooltipData()[self.ability.name].lore\n        }\n        else {\n            return \"\";\n        }\n    });\n    self.manacost = ko.computed(function () {\n        return getTooltipAbilityManaCost(self.hero, self.ability);\n    });\n    self.cooldown = ko.computed(function () {\n        return getTooltipAbilityCooldown(self.hero, self.ability);\n    });\n    self.attributes = getTooltipAbilityAttributes(self.ability);\n}\n\nmodule.exports = {\n    viewModel: ViewModel,\n    template: \"<div>\\n    <span class=\\\"item_field pull-left item_name\\\" data-bind=\\\"text: displayname\\\"></span>\\n    <span class=\\\"item_field pull-right item_ability_damage_type\\\" style=\\\"margin-right: 10px;\\\"  data-bind=\\\"text: damageType\\\"></span>\\n    <hr style=\\\"clear: both;\\\">\\n    <div class=\\\"item_field item_description\\\" data-bind=\\\"html: description\\\"></div>\\n    <div class=\\\"item_field item_attributes\\\" data-bind=\\\"foreach: attributes\\\">\\n        <span data-bind=\\\"text: $data\\\"></span>\\n        <br>\\n    </div>\\n    <div class=\\\"item_cdmana\\\">\\n        <span class=\\\"item_field item_manacost\\\" data-bind=\\\"visible: manacost, text: manacost\\\"></span>\\n        <span class=\\\"item_field item_cooldown\\\" data-bind=\\\"visible: cooldown, text: cooldown\\\"></span>\\n    </div>\\n    <div class=\\\"item_field item_lore\\\" data-bind=\\\"text: lore\\\"></div>\\n</div>\",\n    abilityTooltipData: abilityTooltipData\n};","function ViewModel(params) {\n    var self = this;\n    self.windowWidth = params.windowWidth;\n    self.windowHeight = params.windowHeight;\n    self.displayShop = params.displayShop;\n    self.displayShopItemTooltip = params.displayShopItemTooltip;\n    self.shopDock = params.shopDock;\n    self.shopDockTrigger = params.shopDockTrigger;\n    self.shopPopout = params.shopPopout;\n    self.selectedItem = params.selectedItem;\n    self.addItem = params.addItem;\n    self.changeSelectedItem = params.changeSelectedItem;\n    self.getItemTooltipData = params.getItemTooltipData;\n    self.getItemInputLabel = params.getItemInputLabel;\n    self.itemInputValue = params.itemInputValue;\n    self.itemOptions = params.itemOptions;\n}\n\nmodule.exports = {\n    viewModel: ViewModel,\n    template: \"        <div id=\\\"shop-container\\\" class=\\\"col-md-12 col-lg-4\\\" data-bind=\\\"shopDockStyle: shopDockTrigger, visible: displayShop() || shopPopout(), css: {'col-lg-4': !shopPopout()}, style: { 'padding-top': shopPopout() ? '5px' : '0px'}\\\">\\n              <button id=\\\"shop-minimize\\\" class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-minus pull-right\\\" data-bind=\\\"toggle: displayShop, visible: displayShop()\\\" title=\\\"Minimize shop\\\"></button>\\n              <button id=\\\"shop-maximize\\\" class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-plus pull-right\\\" data-bind=\\\"toggle: displayShop, visible: !displayShop()\\\" title=\\\"Maximize shop\\\"></button>\\n              <button class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-new-window pull-right hidden-xs\\\" data-bind=\\\"click: shopPopout, visible: !shopPopout()\\\" title=\\\"Popout shop\\\"></button>\\n              <button class=\\\"btn btn-default btn-xs shop-button glyphicon glyphicon-align-right pull-right hidden-xs\\\" data-bind=\\\"toggle: shopDock, attr: { title: shopDock() ? 'Undock shop to right side of screen' : 'Dock shop to right side of screen' }\\\" ></button>\\n            <ul id=\\\"shoptabs\\\" class=\\\"nav nav-tabs\\\" data-bind=\\\"visible: displayShop()\\\">\\n              <li><a href=\\\"#shop_basic\\\" data-toggle=\\\"tab\\\">Basic</a></li>\\n              <li><a href=\\\"#shop_upgrade\\\" data-toggle=\\\"tab\\\">Upgrade</a></li>\\n              <li><a href=\\\"#shop_secret\\\" data-toggle=\\\"tab\\\">Secret</a></li>\\n            </ul>\\n            <div class=\\\"tab-content text-center bottom-buffer2\\\" data-bind=\\\"visible: displayShop()\\\">\\n                <div class=\\\"tab-pane active\\\" id=\\\"shop_basic\\\">\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-consumables\\\" id=\\\"consumables\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-clarity\\\" id=\\\"clarity\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-faerie_fire\\\" id=\\\"faerie_fire\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-enchanted_mango\\\" id=\\\"enchanted_mango\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-tango\\\" id=\\\"tango\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-flask\\\" id=\\\"flask\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-smoke_of_deceit\\\" id=\\\"smoke_of_deceit\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-tpscroll\\\" id=\\\"tpscroll\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-dust\\\" id=\\\"dust\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-courier\\\" id=\\\"courier\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-flying_courier\\\" id=\\\"flying_courier\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ward_observer\\\" id=\\\"ward_observer\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ward_sentry\\\" id=\\\"ward_sentry\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-tome_of_knowledge\\\" id=\\\"tome_of_knowledge\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-bottle\\\" id=\\\"bottle\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-attributes\\\" id=\\\"attributes\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-branches\\\" id=\\\"branches\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-gauntlets\\\" id=\\\"gauntlets\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-slippers\\\" id=\\\"slippers\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mantle\\\" id=\\\"mantle\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-circlet\\\" id=\\\"circlet\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-belt_of_strength\\\" id=\\\"belt_of_strength\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-boots_of_elves\\\" id=\\\"boots_of_elves\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-robe\\\" id=\\\"robe\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ogre_axe\\\" id=\\\"ogre_axe\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-blade_of_alacrity\\\" id=\\\"blade_of_alacrity\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-staff_of_wizardry\\\" id=\\\"staff_of_wizardry\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-emptyitembg\\\" id=\\\"emptyitembg\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-emptyitembg\\\" id=\\\"emptyitembg\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-emptyitembg\\\" id=\\\"emptyitembg\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-armaments\\\" id=\\\"armaments\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ring_of_protection\\\" id=\\\"ring_of_protection\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-stout_shield\\\" id=\\\"stout_shield\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-quelling_blade\\\" id=\\\"quelling_blade\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-infused_raindrop\\\" id=\\\"infused_raindrop\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-blight_stone\\\" id=\\\"blight_stone\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-orb_of_venom\\\" id=\\\"orb_of_venom\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-blades_of_attack\\\" id=\\\"blades_of_attack\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-chainmail\\\" id=\\\"chainmail\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-quarterstaff\\\" id=\\\"quarterstaff\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-helm_of_iron_will\\\" id=\\\"helm_of_iron_will\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-broadsword\\\" id=\\\"broadsword\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-claymore\\\" id=\\\"claymore\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-javelin\\\" id=\\\"javelin\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mithril_hammer\\\" id=\\\"mithril_hammer\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-arcane\\\" id=\\\"arcane\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-wind_lace\\\" id=\\\"wind_lace\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-magic_stick\\\" id=\\\"magic_stick\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-sobi_mask\\\" id=\\\"sobi_mask\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ring_of_regen\\\" id=\\\"ring_of_regen\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-boots\\\" id=\\\"boots\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-gloves\\\" id=\\\"gloves\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-cloak\\\" id=\\\"cloak\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ring_of_health\\\" id=\\\"ring_of_health\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-void_stone\\\" id=\\\"void_stone\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-gem\\\" id=\\\"gem\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-lifesteal\\\" id=\\\"lifesteal\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-shadow_amulet\\\" id=\\\"shadow_amulet\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ghost\\\" id=\\\"ghost\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-blink\\\" id=\\\"blink\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n\\n\\n                </div>\\n                <div class=\\\"tab-pane\\\" id=\\\"shop_upgrade\\\">\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-common\\\" id=\\\"common\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-magic_wand\\\" id=\\\"magic_wand\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-null_talisman\\\" id=\\\"null_talisman\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-wraith_band\\\" id=\\\"wraith_band\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-poor_mans_shield\\\" id=\\\"poor_mans_shield\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-bracer\\\" id=\\\"bracer\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-soul_ring\\\" id=\\\"soul_ring\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-phase_boots\\\" id=\\\"phase_boots\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-power_treads\\\" id=\\\"power_treads\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-oblivion_staff\\\" id=\\\"oblivion_staff\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-pers\\\" id=\\\"pers\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-hand_of_midas\\\" id=\\\"hand_of_midas\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-travel_boots\\\" id=\\\"travel_boots\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-moon_shard\\\" id=\\\"moon_shard\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-emptyitembg\\\" id=\\\"emptyitembg\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-support\\\" id=\\\"support\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ring_of_basilius\\\" id=\\\"ring_of_basilius\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-iron_talon\\\" id=\\\"iron_talon\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-headdress\\\" id=\\\"headdress\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-buckler\\\" id=\\\"buckler\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-urn_of_shadows\\\" id=\\\"urn_of_shadows\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-tranquil_boots\\\" id=\\\"tranquil_boots\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ring_of_aquila\\\" id=\\\"ring_of_aquila\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-medallion_of_courage\\\" id=\\\"medallion_of_courage\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-arcane_boots\\\" id=\\\"arcane_boots\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ancient_janggo\\\" id=\\\"ancient_janggo\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mekansm\\\" id=\\\"mekansm\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-vladmir\\\" id=\\\"vladmir\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-pipe\\\" id=\\\"pipe\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-guardian_greaves\\\" id=\\\"guardian_greaves\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-caster\\\" id=\\\"caster\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-glimmer_cape\\\" id=\\\"glimmer_cape\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-force_staff\\\" id=\\\"force_staff\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-veil_of_discord\\\" id=\\\"veil_of_discord\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-aether_lens\\\" id=\\\"aether_lens\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-necronomicon\\\" id=\\\"necronomicon\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-dagon\\\" id=\\\"dagon\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-cyclone\\\" id=\\\"cyclone\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-solar_crest\\\" id=\\\"solar_crest\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-rod_of_atos\\\" id=\\\"rod_of_atos\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-orchid\\\" id=\\\"orchid\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ultimate_scepter\\\" id=\\\"ultimate_scepter\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-refresher\\\" id=\\\"refresher\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-sheepstick\\\" id=\\\"sheepstick\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-octarine_core\\\" id=\\\"octarine_core\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-weapons\\\" id=\\\"weapons\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-lesser_crit\\\" id=\\\"lesser_crit\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-armlet\\\" id=\\\"armlet\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-invis_sword\\\" id=\\\"invis_sword\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-basher\\\" id=\\\"basher\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-bfury\\\" id=\\\"bfury\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ethereal_blade\\\" id=\\\"ethereal_blade\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-silver_edge\\\" id=\\\"silver_edge\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-radiance\\\" id=\\\"radiance\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-monkey_king_bar\\\" id=\\\"monkey_king_bar\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-greater_crit\\\" id=\\\"greater_crit\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-butterfly\\\" id=\\\"butterfly\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-rapier\\\" id=\\\"rapier\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-abyssal_blade\\\" id=\\\"abyssal_blade\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-bloodthorn\\\" id=\\\"bloodthorn\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-armor\\\" id=\\\"armor\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-hood_of_defiance\\\" id=\\\"hood_of_defiance\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-vanguard\\\" id=\\\"vanguard\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-blade_mail\\\" id=\\\"blade_mail\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-soul_booster\\\" id=\\\"soul_booster\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-crimson_guard\\\" id=\\\"crimson_guard\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-black_king_bar\\\" id=\\\"black_king_bar\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-lotus_orb\\\" id=\\\"lotus_orb\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-shivas_guard\\\" id=\\\"shivas_guard\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-bloodstone\\\" id=\\\"bloodstone\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-manta\\\" id=\\\"manta\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-sphere\\\" id=\\\"sphere\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-hurricane_pike\\\" id=\\\"hurricane_pike\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-assault\\\" id=\\\"assault\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-heart\\\" id=\\\"heart\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-artifacts\\\" id=\\\"artifacts\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mask_of_madness\\\" id=\\\"mask_of_madness\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-helm_of_the_dominator\\\" id=\\\"helm_of_the_dominator\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-dragon_lance\\\" id=\\\"dragon_lance\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-sange\\\" id=\\\"sange\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-yasha\\\" id=\\\"yasha\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-echo_sabre\\\" id=\\\"echo_sabre\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-maelstrom\\\" id=\\\"maelstrom\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-diffusal_blade\\\" id=\\\"diffusal_blade\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-desolator\\\" id=\\\"desolator\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-heavens_halberd\\\" id=\\\"heavens_halberd\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-sange_and_yasha\\\" id=\\\"sange_and_yasha\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-skadi\\\" id=\\\"skadi\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mjollnir\\\" id=\\\"mjollnir\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-satanic\\\" id=\\\"satanic\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n                </div>\\n                <div class=\\\"tab-pane\\\" id=\\\"shop_secret\\\">\\n<div class=\\\"shop-column\\\">\\n  <div class=\\\"hc-shop hc-shop-secret\\\" id=\\\"secret\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-energy_booster\\\" id=\\\"energy_booster\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-vitality_booster\\\" id=\\\"vitality_booster\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-point_booster\\\" id=\\\"point_booster\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-platemail\\\" id=\\\"platemail\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-talisman_of_evasion\\\" id=\\\"talisman_of_evasion\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-hyperstone\\\" id=\\\"hyperstone\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-ultimate_orb\\\" id=\\\"ultimate_orb\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-demon_edge\\\" id=\\\"demon_edge\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-mystic_staff\\\" id=\\\"mystic_staff\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-eagle\\\" id=\\\"eagle\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-reaver\\\" id=\\\"reaver\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n  <div class=\\\"img-rounded items-sprite-50x36 items-sprite-relic\\\" id=\\\"relic\\\" data-bind=\\\"click: changeSelectedItem, event: { dblclick: addItem }\\\"></div>\\n</div>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" data-bind=\\\"visible: displayShop()\\\">\\n                <div class=\\\"input-group\\\">\\n                    <input class=\\\"form-control\\\" id=\\\"auto\\\" data-bind=\\\"jqAuto: { autoFocus: true, html: true }, jqAutoSource: itemOptions, jqAutoValue: selectedItem, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'\\\" />\\n                    <span class=\\\"input-group-btn\\\">\\n                        <button class=\\\"btn btn-default\\\" data-bind=\\\"jqAutoCombo: 'auto'\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></button>\\n                    </span>\\n                </div>\\n            </div>\\n\\n            <div data-bind=\\\"visible: selectedItem() && displayShop()\\\">\\n                <button class=\\\"btn btn-default btn-xs glyphicon glyphicon-minus pull-right\\\" data-bind=\\\"toggle: displayShopItemTooltip, visible: displayShopItemTooltip()\\\" title=\\\"Hide item description\\\"></button>\\n                <button class=\\\"btn btn-default btn-xs glyphicon glyphicon-plus pull-right\\\" data-bind=\\\"toggle: displayShopItemTooltip, visible: !displayShopItemTooltip()\\\" title=\\\"Show item description\\\"></button>\\n                <div data-bind=\\\"html: getItemTooltipData, css: { 'hide-shop-item-details': !displayShopItemTooltip() }\\\"></div>\\n                <div style=\\\"margin-top:10px;margin-bottom:10px;\\\" class=\\\"form-inline\\\" data-bind=\\\"visible: getItemInputLabel() != ''\\\">\\n                    <div class=\\\"form-group\\\">\\n                        <label for=\\\"iteminput\\\" data-bind=\\\"text: getItemInputLabel\\\"></label>\\n                        <input class=\\\"form-control\\\" id=\\\"iteminput\\\" data-bind=\\\"value: itemInputValue\\\" />\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group text-right\\\">\\n                    <button class=\\\"btn btn-default\\\" data-bind=\\\"click: addItem\\\">Add Item</button>\\n                </div>\\n            </div>\\n        </div>\"\n};","var Chart = require('chart.js');\nChart.types.Line.extend({\n    // Passing in a name registers this chart in the Chart namespace in the same way\n    name: \"Scatter\",\n    draw : function(ease){\n            var easingDecimal = ease || 1;\n            this.clear();\n\n            var ctx = this.chart.ctx;\n\n            // Some helper methods for getting the next/prev points\n            var hasValue = function(item){\n                return item.value !== null;\n            },\n            nextPoint = function(point, collection, index){\n                return Chart.helpers.findNextWhere(collection, hasValue, index) || point;\n            },\n            previousPoint = function(point, collection, index){\n                return Chart.helpers.findPreviousWhere(collection, hasValue, index) || point;\n            };\n\n            this.scale.draw(easingDecimal);\n\n\n            Chart.helpers.each(this.datasets,function(dataset){\n                var pointsWithValues = Chart.helpers.where(dataset.points, hasValue);\n\n                //Transition each point first so that the line and point drawing isn't out of sync\n                //We can use this extra loop to calculate the control points of this dataset also in this loop\n\n                Chart.helpers.each(dataset.points, function(point, index){\n                    if (point.hasValue()){\n                        point.transition({\n                            y : this.scale.calculateY(point.value),\n                            x : this.scale.calculateX(index)\n                        }, easingDecimal);\n                    }\n                },this);\n\n\n                // Control points need to be calculated in a seperate loop, because we need to know the current x/y of the point\n                // This would cause issues when there is no animation, because the y of the next point would be 0, so beziers would be skewed\n                if (this.options.bezierCurve){\n                    Chart.helpers.each(pointsWithValues, function(point, index){\n                        var tension = (index > 0 && index < pointsWithValues.length - 1) ? this.options.bezierCurveTension : 0;\n                        point.controlPoints = Chart.helpers.splineCurve(\n                            previousPoint(point, pointsWithValues, index),\n                            point,\n                            nextPoint(point, pointsWithValues, index),\n                            tension\n                        );\n\n                        // Prevent the bezier going outside of the bounds of the graph\n\n                        // Cap puter bezier handles to the upper/lower scale bounds\n                        if (point.controlPoints.outer.y > this.scale.endPoint){\n                            point.controlPoints.outer.y = this.scale.endPoint;\n                        }\n                        else if (point.controlPoints.outer.y < this.scale.startPoint){\n                            point.controlPoints.outer.y = this.scale.startPoint;\n                        }\n\n                        // Cap inner bezier handles to the upper/lower scale bounds\n                        if (point.controlPoints.inner.y > this.scale.endPoint){\n                            point.controlPoints.inner.y = this.scale.endPoint;\n                        }\n                        else if (point.controlPoints.inner.y < this.scale.startPoint){\n                            point.controlPoints.inner.y = this.scale.startPoint;\n                        }\n                    },this);\n                }\n\n                if (this.options.datasetFill && pointsWithValues.length > 0){\n                    //Round off the line by going to the base of the chart, back to the start, then fill.\n                    ctx.lineTo(pointsWithValues[pointsWithValues.length - 1].x, this.scale.endPoint);\n                    ctx.lineTo(pointsWithValues[0].x, this.scale.endPoint);\n                    ctx.fillStyle = dataset.fillColor;\n                    ctx.closePath();\n                    ctx.fill();\n                }\n\n                //Now draw the points over the line\n                //A little inefficient double looping, but better than the line\n                //lagging behind the point positions\n                Chart.helpers.each(pointsWithValues,function(point){\n                    point.draw();\n                });\n            },this);\n        }\n});","require(\"./app/polyfill\");\nvar Rollbar = require(\"rollbar-browser\");\nvar $ = (typeof window !== \"undefined\" ? window['$'] : typeof global !== \"undefined\" ? global['$'] : null);\nvar getParameterByName = require(\"./app/getParameterByName\");\nvar HeroCalc = require(\"dota-hero-calculator-library\");\nvar HeroCalculatorViewModel;\nvar viewModel;\n\nvar App = function (appConfig) {\n    \n    HeroCalc.init(HeroCalcData.heroData, HeroCalcData.itemData, HeroCalcData.unitData, function () {\n        HeroCalculatorViewModel = require('./app/HeroCalculatorViewModel');\n        viewModel = new HeroCalculatorViewModel(appConfig.abilityTooltipPath);\n        ko.options.deferUpdates = true;\n        ko.applyBindings(viewModel);\n        $('#spinner').hide();\n        $('.initial-hidden').css('display', 'inline-block');\n        $('#popHero0').addClass('active');\n        $('#heroPane0').addClass('active');\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        var saveId = getParameterByName('id');\n        if (saveId) {\n            $.get('save/' + saveId + '.json', function (data) {\n                viewModel.load(data);\n            });\n        }\n    });\n\n    var lastUpdate = \"Mon Dec 19 2016 13:25:31 GMT-0500 (EST)\";\n    $('#last-update').text(lastUpdate);\n\n    var rollbarConfig = {\n        accessToken: 'de1980fcab4849d6a7a066cf098a6521',\n        captureUncaught: true,\n        payload: {\n            environment: 'production',\n            client: {\n                javascript: {\n                    source_map_enabled: true,\n                    code_version: \"aef5614bc1b9bd61120d5c1f7fc25bd9ebaecdec\",\n                    // Optionally have Rollbar guess which frames the error was thrown from\n                    // when the browser does not provide line and column numbers.\n                    guess_uncaught_frames: true\n                }\n            }\n        }\n    };\n\n    var rollbar = Rollbar.init(rollbarConfig);\n\n    $('.error-warning-view, .error-warning-close').click(function () {\n        $('.error-warning').fadeOut(200);\n    });\n\n    var userActions = [];\n    function addUserAction(o) {\n        if (userActions.length > 10) {\n            userActions.shift();\n        }\n        userActions.push(o);\n    }\n\n    function actionTrackWrapper(func, eventName) {\n        return function() {\n            var el = this;\n            var data = {\n                eventName: eventName\n            };\n            if (el.id) data.id = el.id;\n            if (el.src) data.src = el.src;\n            if (el.className) data.className = el.className;\n            if (el.textContent) data.textContent = el.textContent;\n            if (el.nodeName) data.nodeName = el.nodeName;\n            if (el.getAttribute('data-bind')) data['data-bind'] = el.getAttribute('data-bind');\n            \n            for (var property in data) {\n                if (data.hasOwnProperty(property)) {\n                    data[property] = data[property].substring(0, Math.min(200, data[property].length));\n                }\n            }\n            addUserAction(data);\n            return func.apply(this, arguments);\n        }\n    }\n\n    function callbackWrap(object, property, argumentIndex, wrapperFactory, eventFilter) {\n        var original = object[property];\n        object[property] = function() {\n            if (eventFilter.indexOf(arguments[0]) != -1) {\n                arguments[argumentIndex] = wrapperFactory(arguments[argumentIndex], arguments[0]);\n            }\n            return original.apply(this, arguments);\n        }\n        return original;\n    }\n\n    callbackWrap(Element.prototype, \"addEventListener\", 1, actionTrackWrapper, ['click', 'focus', 'blur', 'change', 'dblclick'])\n\n    window.onerror = (function (old) {\n        return function () {\n            var payload = {};\n            var logEl = document.querySelector('#log');\n\n            if (logEl) {\n                try {\n                    var msg = arguments[0];\n                    var el = document.createElement('div');\n                    el.classList.add('alert');\n                    el.classList.add('alert-danger');\n                    el.classList.add('error-log');\n                    el.classList.add('col-md-12');\n                    el.textContent = 'error: ' + msg;\n                    \n                    var closeBtn = document.createElement('div');\n                    closeBtn.classList.add('error-log-close');\n                    closeBtn.innerHTML = \"&times;\";\n                    closeBtn.onclick = function () {\n                        logEl.removeChild(el);\n                    }\n                    el.appendChild(closeBtn);\n                    \n                    var reportEl = document.createElement('a');\n                    reportEl.classList.add('error-log-link');\n                    reportEl.innerHTML = \"Send error report\";\n                    reportEl.href = \"#\"\n                    reportEl.onclick = function () {\n                        $('#myModal').modal('show');\n                        $('#BugReportFormText').text('error: ' + msg + '\\n\\nDescribe what you were doing. Try to be as detailed as possible.');\n                    }\n                    el.appendChild(reportEl);\n                    \n                    logEl.appendChild(el);\n                    \n                    $('.error-warning').fadeOut(200).fadeIn(100);\n                }\n                catch (e) {\n                    rollbar.error(\"window.onerror create error log failed.\", e);\n                }\n            }\n            else {\n                payload.clientLogCreated = false;\n            }\n\n            if (HeroCalculatorViewModel && viewModel) {\n                try {\n                    payload.heroCalcState = viewModel.getSaveData();\n                }\n                catch (e) {\n                    rollbar.error(\"window.onerror getSaveData failed.\", e);\n                }\n                try {\n                    payload.appState = viewModel.getAppState();\n                }\n                catch (e) {\n                    rollbar.error(\"window.onerror getAppState failed.\", e);\n                }\n            }\n            else {\n                payload.appState = \"load failed\"\n            }\n            payload.userActions = userActions;\n            rollbar.configure({\n              payload: {custom: payload}\n            });\n            \n            return old.apply(this, arguments);\n        }\n    })(window.onerror);\n    \n};\n\nmodule.exports = App;"]}